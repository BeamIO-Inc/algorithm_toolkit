/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 8);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Snapping = _interopRequireDefault(__webpack_require__(5));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Draw = L.Class.extend({\n  includes: [_Snapping.default],\n  options: {\n    snappable: true,\n    snapDistance: 20,\n    cursorMarker: true,\n    finishOnDoubleClick: false,\n    finishOn: null,\n    allowSelfIntersection: true,\n    templineStyle: {},\n    hintlineStyle: {\n      //dashArray: [5, 5],\n      dashArray: '5,5'\n    },\n    markerStyle: {\n      draggable: true\n    }\n  },\n  initialize: function initialize(map) {\n    var _this = this;\n\n    // save the map\n    this._map = map; // define all possible shapes that can be drawn\n\n    this.shapes = ['Marker', 'Line', 'Poly', 'Rectangle', 'Circle', 'Cut']; // initiate drawing class for our shapes\n\n    this.shapes.forEach(function (shape) {\n      _this[shape] = new L.PM.Draw[shape](_this._map);\n    });\n  },\n  setPathOptions: function setPathOptions(options) {\n    this.options.pathOptions = options;\n  },\n  getShapes: function getShapes() {\n    // if somebody wants to know what shapes are available\n    return this.shapes;\n  },\n  enable: function enable(shape, options) {\n    if (!shape) {\n      throw new Error(\"Error: Please pass a shape as a parameter. Possible shapes are: \".concat(this.getShapes().join(',')));\n    } // disable drawing for all shapes\n\n\n    this.disable(); // enable draw for a shape\n\n    this[shape].enable(options);\n  },\n  disable: function disable() {\n    var _this2 = this;\n\n    // there can only be one drawing mode active at a time on a map\n    // so it doesn't matter which one should be disabled.\n    // just disable all of them\n    this.shapes.forEach(function (shape) {\n      _this2[shape].disable();\n    });\n  },\n  addControls: function addControls() {\n    var _this3 = this;\n\n    // add control buttons for our shapes\n    this.shapes.forEach(function (shape) {\n      _this3[shape].addButton();\n    });\n  }\n});\nvar _default = Draw;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5qcz9iMDE1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX1NuYXBwaW5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vTWl4aW5zL1NuYXBwaW5nXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIERyYXcgPSBMLkNsYXNzLmV4dGVuZCh7XG4gIGluY2x1ZGVzOiBbX1NuYXBwaW5nLmRlZmF1bHRdLFxuICBvcHRpb25zOiB7XG4gICAgc25hcHBhYmxlOiB0cnVlLFxuICAgIHNuYXBEaXN0YW5jZTogMjAsXG4gICAgY3Vyc29yTWFya2VyOiB0cnVlLFxuICAgIGZpbmlzaE9uRG91YmxlQ2xpY2s6IGZhbHNlLFxuICAgIGZpbmlzaE9uOiBudWxsLFxuICAgIGFsbG93U2VsZkludGVyc2VjdGlvbjogdHJ1ZSxcbiAgICB0ZW1wbGluZVN0eWxlOiB7fSxcbiAgICBoaW50bGluZVN0eWxlOiB7XG4gICAgICAvL2Rhc2hBcnJheTogWzUsIDVdLFxuICAgICAgZGFzaEFycmF5OiAnNSw1J1xuICAgIH0sXG4gICAgbWFya2VyU3R5bGU6IHtcbiAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSxcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gc2F2ZSB0aGUgbWFwXG4gICAgdGhpcy5fbWFwID0gbWFwOyAvLyBkZWZpbmUgYWxsIHBvc3NpYmxlIHNoYXBlcyB0aGF0IGNhbiBiZSBkcmF3blxuXG4gICAgdGhpcy5zaGFwZXMgPSBbJ01hcmtlcicsICdMaW5lJywgJ1BvbHknLCAnUmVjdGFuZ2xlJywgJ0NpcmNsZScsICdDdXQnXTsgLy8gaW5pdGlhdGUgZHJhd2luZyBjbGFzcyBmb3Igb3VyIHNoYXBlc1xuXG4gICAgdGhpcy5zaGFwZXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcbiAgICAgIF90aGlzW3NoYXBlXSA9IG5ldyBMLlBNLkRyYXdbc2hhcGVdKF90aGlzLl9tYXApO1xuICAgIH0pO1xuICB9LFxuICBzZXRQYXRoT3B0aW9uczogZnVuY3Rpb24gc2V0UGF0aE9wdGlvbnMob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucy5wYXRoT3B0aW9ucyA9IG9wdGlvbnM7XG4gIH0sXG4gIGdldFNoYXBlczogZnVuY3Rpb24gZ2V0U2hhcGVzKCkge1xuICAgIC8vIGlmIHNvbWVib2R5IHdhbnRzIHRvIGtub3cgd2hhdCBzaGFwZXMgYXJlIGF2YWlsYWJsZVxuICAgIHJldHVybiB0aGlzLnNoYXBlcztcbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoc2hhcGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXNoYXBlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvcjogUGxlYXNlIHBhc3MgYSBzaGFwZSBhcyBhIHBhcmFtZXRlci4gUG9zc2libGUgc2hhcGVzIGFyZTogXCIuY29uY2F0KHRoaXMuZ2V0U2hhcGVzKCkuam9pbignLCcpKSk7XG4gICAgfSAvLyBkaXNhYmxlIGRyYXdpbmcgZm9yIGFsbCBzaGFwZXNcblxuXG4gICAgdGhpcy5kaXNhYmxlKCk7IC8vIGVuYWJsZSBkcmF3IGZvciBhIHNoYXBlXG5cbiAgICB0aGlzW3NoYXBlXS5lbmFibGUob3B0aW9ucyk7XG4gIH0sXG4gIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAvLyB0aGVyZSBjYW4gb25seSBiZSBvbmUgZHJhd2luZyBtb2RlIGFjdGl2ZSBhdCBhIHRpbWUgb24gYSBtYXBcbiAgICAvLyBzbyBpdCBkb2Vzbid0IG1hdHRlciB3aGljaCBvbmUgc2hvdWxkIGJlIGRpc2FibGVkLlxuICAgIC8vIGp1c3QgZGlzYWJsZSBhbGwgb2YgdGhlbVxuICAgIHRoaXMuc2hhcGVzLmZvckVhY2goZnVuY3Rpb24gKHNoYXBlKSB7XG4gICAgICBfdGhpczJbc2hhcGVdLmRpc2FibGUoKTtcbiAgICB9KTtcbiAgfSxcbiAgYWRkQ29udHJvbHM6IGZ1bmN0aW9uIGFkZENvbnRyb2xzKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gYWRkIGNvbnRyb2wgYnV0dG9ucyBmb3Igb3VyIHNoYXBlc1xuICAgIHRoaXMuc2hhcGVzLmZvckVhY2goZnVuY3Rpb24gKHNoYXBlKSB7XG4gICAgICBfdGhpczNbc2hhcGVdLmFkZEJ1dHRvbigpO1xuICAgIH0pO1xuICB9XG59KTtcbnZhciBfZGVmYXVsdCA9IERyYXc7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export earthRadius */\n/* unused harmony export factors */\n/* unused harmony export unitsFactors */\n/* unused harmony export areaFactors */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return feature; });\n/* unused harmony export geometry */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return point; });\n/* unused harmony export points */\n/* unused harmony export polygon */\n/* unused harmony export polygons */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return lineString; });\n/* unused harmony export lineStrings */\n/* unused harmony export featureCollection */\n/* unused harmony export multiLineString */\n/* unused harmony export multiPoint */\n/* unused harmony export multiPolygon */\n/* unused harmony export geometryCollection */\n/* unused harmony export round */\n/* unused harmony export radiansToLength */\n/* unused harmony export lengthToRadians */\n/* unused harmony export lengthToDegrees */\n/* unused harmony export bearingToAzimuth */\n/* unused harmony export radiansToDegrees */\n/* unused harmony export degreesToRadians */\n/* unused harmony export convertLength */\n/* unused harmony export convertArea */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return isNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return isObject; });\n/* unused harmony export validateBBox */\n/* unused harmony export validateId */\n/* unused harmony export radians2degrees */\n/* unused harmony export degrees2radians */\n/* unused harmony export distanceToDegrees */\n/* unused harmony export distanceToRadians */\n/* unused harmony export radiansToDistance */\n/* unused harmony export bearingToAngle */\n/* unused harmony export convertDistance */\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\nvar earthRadius = 6371008.8;\n\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n */\nvar factors = {\n    meters: earthRadius,\n    metres: earthRadius,\n    millimeters: earthRadius * 1000,\n    millimetres: earthRadius * 1000,\n    centimeters: earthRadius * 100,\n    centimetres: earthRadius * 100,\n    kilometers: earthRadius / 1000,\n    kilometres: earthRadius / 1000,\n    miles: earthRadius / 1609.344,\n    nauticalmiles: earthRadius / 1852,\n    inches: earthRadius * 39.370,\n    yards: earthRadius / 1.0936,\n    feet: earthRadius * 3.28084,\n    radians: 1,\n    degrees: earthRadius / 111325,\n};\n\n/**\n * Units of measurement factors based on 1 meter.\n */\nvar unitsFactors = {\n    meters: 1,\n    metres: 1,\n    millimeters: 1000,\n    millimetres: 1000,\n    centimeters: 100,\n    centimetres: 100,\n    kilometers: 1 / 1000,\n    kilometres: 1 / 1000,\n    miles: 1 / 1609.344,\n    nauticalmiles: 1 / 1852,\n    inches: 39.370,\n    yards: 1 / 1.0936,\n    feet: 3.28084,\n    radians: 1 / earthRadius,\n    degrees: 1 / 111325,\n};\n\n/**\n * Area of measurement factors based on 1 square meter.\n */\nvar areaFactors = {\n    meters: 1,\n    metres: 1,\n    millimeters: 1000000,\n    millimetres: 1000000,\n    centimeters: 10000,\n    centimetres: 10000,\n    kilometers: 0.000001,\n    kilometres: 0.000001,\n    acres: 0.000247105,\n    miles: 3.86e-7,\n    yards: 1.195990046,\n    feet: 10.763910417,\n    inches: 1550.003100006\n};\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) throw new Error('geometry is required');\n    if (properties && properties.constructor !== Object) throw new Error('properties must be an Object');\n    if (bbox) validateBBox(bbox);\n    if (id) validateId(id);\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) feat.id = id;\n    if (bbox) feat.bbox = bbox;\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a GeoJSON {@link Geometry} from a Geometry string type & coordinates.\n * For GeometryCollection type use `helpers.geometryCollection`\n *\n * @name geometry\n * @param {string} type Geometry Type\n * @param {Array<number>} coordinates Coordinates\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Geometry\n * @returns {Geometry} a GeoJSON Geometry\n * @example\n * var type = 'Point';\n * var coordinates = [110, 50];\n *\n * var geometry = turf.geometry(type, coordinates);\n *\n * //=geometry\n */\nfunction geometry(type, coordinates, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var bbox = options.bbox;\n\n    // Validation\n    if (!type) throw new Error('type is required');\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n    if (bbox) validateBBox(bbox);\n\n    // Main\n    var geom;\n    switch (type) {\n    case 'Point': geom = point(coordinates).geometry; break;\n    case 'LineString': geom = lineString(coordinates).geometry; break;\n    case 'Polygon': geom = polygon(coordinates).geometry; break;\n    case 'MultiPoint': geom = multiPoint(coordinates).geometry; break;\n    case 'MultiLineString': geom = multiLineString(coordinates).geometry; break;\n    case 'MultiPolygon': geom = multiPolygon(coordinates).geometry; break;\n    default: throw new Error(type + ' is invalid');\n    }\n    if (bbox) geom.bbox = bbox;\n    return geom;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n    if (coordinates.length < 2) throw new Error('coordinates must be at least 2 numbers long');\n    if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) throw new Error('coordinates must contain numbers');\n\n    return feature({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Point} {@link FeatureCollection} from an Array of Point coordinates.\n *\n * @name points\n * @param {Array<Array<number>>} coordinates an array of Points\n * @param {Object} [properties={}] Translate these properties to each Feature\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Point>} Point Feature\n * @example\n * var points = turf.points([\n *   [-75, 39],\n *   [-80, 45],\n *   [-78, 50]\n * ]);\n *\n * //=points\n */\nfunction points(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n\n    return featureCollection(coordinates.map(function (coords) {\n        return point(coords, properties);\n    }), options);\n}\n\n/**\n * Creates a {@link Polygon} {@link Feature} from an Array of LinearRings.\n *\n * @name polygon\n * @param {Array<Array<Array<number>>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Polygon>} Polygon Feature\n * @example\n * var polygon = turf.polygon([[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]], { name: 'poly1' });\n *\n * //=polygon\n */\nfunction polygon(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    for (var i = 0; i < coordinates.length; i++) {\n        var ring = coordinates[i];\n        if (ring.length < 4) {\n            throw new Error('Each LinearRing of a Polygon must have 4 or more Positions.');\n        }\n        for (var j = 0; j < ring[ring.length - 1].length; j++) {\n            // Check if first point of Polygon contains two numbers\n            if (i === 0 && j === 0 && !isNumber(ring[0][0]) || !isNumber(ring[0][1])) throw new Error('coordinates must contain numbers');\n            if (ring[ring.length - 1][j] !== ring[0][j]) {\n                throw new Error('First and last Position are not equivalent.');\n            }\n        }\n    }\n\n    return feature({\n        type: 'Polygon',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Polygon} {@link FeatureCollection} from an Array of Polygon coordinates.\n *\n * @name polygons\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygon coordinates\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Polygon>} Polygon FeatureCollection\n * @example\n * var polygons = turf.polygons([\n *   [[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]],\n *   [[[-15, 42], [-14, 46], [-12, 41], [-17, 44], [-15, 42]]],\n * ]);\n *\n * //=polygons\n */\nfunction polygons(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n\n    return featureCollection(coordinates.map(function (coords) {\n        return polygon(coords, properties);\n    }), options);\n}\n\n/**\n * Creates a {@link LineString} {@link Feature} from an Array of Positions.\n *\n * @name lineString\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<LineString>} LineString Feature\n * @example\n * var linestring1 = turf.lineString([[-24, 63], [-23, 60], [-25, 65], [-20, 69]], {name: 'line 1'});\n * var linestring2 = turf.lineString([[-14, 43], [-13, 40], [-15, 45], [-10, 49]], {name: 'line 2'});\n *\n * //=linestring1\n * //=linestring2\n */\nfunction lineString(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (coordinates.length < 2) throw new Error('coordinates must be an array of two or more positions');\n    // Check if first point of LineString contains two numbers\n    if (!isNumber(coordinates[0][1]) || !isNumber(coordinates[0][1])) throw new Error('coordinates must contain numbers');\n\n    return feature({\n        type: 'LineString',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link LineString} {@link FeatureCollection} from an Array of LineString coordinates.\n *\n * @name lineStrings\n * @param {Array<Array<number>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<LineString>} LineString FeatureCollection\n * @example\n * var linestrings = turf.lineStrings([\n *   [[-24, 63], [-23, 60], [-25, 65], [-20, 69]],\n *   [[-14, 43], [-13, 40], [-15, 45], [-10, 49]]\n * ]);\n *\n * //=linestrings\n */\nfunction lineStrings(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n\n    return featureCollection(coordinates.map(function (coords) {\n        return lineString(coords, properties);\n    }), options);\n}\n\n/**\n * Takes one or more {@link Feature|Features} and creates a {@link FeatureCollection}.\n *\n * @name featureCollection\n * @param {Feature[]} features input features\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {FeatureCollection} FeatureCollection of Features\n * @example\n * var locationA = turf.point([-75.343, 39.984], {name: 'Location A'});\n * var locationB = turf.point([-75.833, 39.284], {name: 'Location B'});\n * var locationC = turf.point([-75.534, 39.123], {name: 'Location C'});\n *\n * var collection = turf.featureCollection([\n *   locationA,\n *   locationB,\n *   locationC\n * ]);\n *\n * //=collection\n */\nfunction featureCollection(features, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (!features) throw new Error('No features passed');\n    if (!Array.isArray(features)) throw new Error('features must be an Array');\n    if (bbox) validateBBox(bbox);\n    if (id) validateId(id);\n\n    // Main\n    var fc = {type: 'FeatureCollection'};\n    if (id) fc.id = id;\n    if (bbox) fc.bbox = bbox;\n    fc.features = features;\n    return fc;\n}\n\n/**\n * Creates a {@link Feature<MultiLineString>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiLineString\n * @param {Array<Array<Array<number>>>} coordinates an array of LineStrings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiLineString>} a MultiLineString feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiLine = turf.multiLineString([[[0,0],[10,10]]]);\n *\n * //=multiLine\n */\nfunction multiLineString(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    return feature({\n        type: 'MultiLineString',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Feature<MultiPoint>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPoint\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPoint>} a MultiPoint feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPt = turf.multiPoint([[0,0],[10,10]]);\n *\n * //=multiPt\n */\nfunction multiPoint(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    return feature({\n        type: 'MultiPoint',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Feature<MultiPolygon>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPolygon\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygons\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPolygon>} a multipolygon feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPoly = turf.multiPolygon([[[[0,0],[0,10],[10,10],[10,0],[0,0]]]]);\n *\n * //=multiPoly\n *\n */\nfunction multiPolygon(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    return feature({\n        type: 'MultiPolygon',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Feature<GeometryCollection>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name geometryCollection\n * @param {Array<Geometry>} geometries an array of GeoJSON Geometries\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<GeometryCollection>} a GeoJSON GeometryCollection Feature\n * @example\n * var pt = {\n *     \"type\": \"Point\",\n *       \"coordinates\": [100, 0]\n *     };\n * var line = {\n *     \"type\": \"LineString\",\n *     \"coordinates\": [ [101, 0], [102, 1] ]\n *   };\n * var collection = turf.geometryCollection([pt, line]);\n *\n * //=collection\n */\nfunction geometryCollection(geometries, properties, options) {\n    if (!geometries) throw new Error('geometries is required');\n    if (!Array.isArray(geometries)) throw new Error('geometries must be an Array');\n\n    return feature({\n        type: 'GeometryCollection',\n        geometries: geometries\n    }, properties, options);\n}\n\n/**\n * Round number to precision\n *\n * @param {number} num Number\n * @param {number} [precision=0] Precision\n * @returns {number} rounded number\n * @example\n * turf.round(120.4321)\n * //=120\n *\n * turf.round(120.4321, 2)\n * //=120.43\n */\nfunction round(num, precision) {\n    if (num === undefined || num === null || isNaN(num)) throw new Error('num is required');\n    if (precision && !(precision >= 0)) throw new Error('precision must be a positive number');\n    var multiplier = Math.pow(10, precision || 0);\n    return Math.round(num * multiplier) / multiplier;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} distance\n */\nfunction radiansToLength(radians, units) {\n    if (radians === undefined || radians === null) throw new Error('radians is required');\n\n    if (units && typeof units !== 'string') throw new Error('units must be a string');\n    var factor = factors[units || 'kilometers'];\n    if (!factor) throw new Error(units + ' units is invalid');\n    return radians * factor;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} radians\n */\nfunction lengthToRadians(distance, units) {\n    if (distance === undefined || distance === null) throw new Error('distance is required');\n\n    if (units && typeof units !== 'string') throw new Error('units must be a string');\n    var factor = factors[units || 'kilometers'];\n    if (!factor) throw new Error(units + ' units is invalid');\n    return distance / factor;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into degrees\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, centimeters, kilometres, feet\n *\n * @name lengthToDegrees\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} degrees\n */\nfunction lengthToDegrees(distance, units) {\n    return radiansToDegrees(lengthToRadians(distance, units));\n}\n\n/**\n * Converts any bearing angle from the north line direction (positive clockwise)\n * and returns an angle between 0-360 degrees (positive clockwise), 0 being the north line\n *\n * @name bearingToAzimuth\n * @param {number} bearing angle, between -180 and +180 degrees\n * @returns {number} angle between 0 and 360 degrees\n */\nfunction bearingToAzimuth(bearing) {\n    if (bearing === null || bearing === undefined) throw new Error('bearing is required');\n\n    var angle = bearing % 360;\n    if (angle < 0) angle += 360;\n    return angle;\n}\n\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nfunction radiansToDegrees(radians) {\n    if (radians === null || radians === undefined) throw new Error('radians is required');\n\n    var degrees = radians % (2 * Math.PI);\n    return degrees * 180 / Math.PI;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians(degrees) {\n    if (degrees === null || degrees === undefined) throw new Error('degrees is required');\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * Converts a length to the requested unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @param {number} length to be converted\n * @param {string} originalUnit of the length\n * @param {string} [finalUnit='kilometers'] returned unit\n * @returns {number} the converted length\n */\nfunction convertLength(length, originalUnit, finalUnit) {\n    if (length === null || length === undefined) throw new Error('length is required');\n    if (!(length >= 0)) throw new Error('length must be a positive number');\n\n    return radiansToLength(lengthToRadians(length, originalUnit), finalUnit || 'kilometers');\n}\n\n/**\n * Converts a area to the requested unit.\n * Valid units: kilometers, kilometres, meters, metres, centimetres, millimeters, acres, miles, yards, feet, inches\n * @param {number} area to be converted\n * @param {string} [originalUnit='meters'] of the distance\n * @param {string} [finalUnit='kilometers'] returned unit\n * @returns {number} the converted distance\n */\nfunction convertArea(area, originalUnit, finalUnit) {\n    if (area === null || area === undefined) throw new Error('area is required');\n    if (!(area >= 0)) throw new Error('area must be a positive number');\n\n    var startFactor = areaFactors[originalUnit || 'meters'];\n    if (!startFactor) throw new Error('invalid original units');\n\n    var finalFactor = areaFactors[finalUnit || 'kilometers'];\n    if (!finalFactor) throw new Error('invalid final units');\n\n    return (area / startFactor) * finalFactor;\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox(bbox) {\n    if (!bbox) throw new Error('bbox is required');\n    if (!Array.isArray(bbox)) throw new Error('bbox must be an Array');\n    if (bbox.length !== 4 && bbox.length !== 6) throw new Error('bbox must be an Array of 4 or 6 numbers');\n    bbox.forEach(function (num) {\n        if (!isNumber(num)) throw new Error('bbox must only contain numbers');\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId(id) {\n    if (!id) throw new Error('id is required');\n    if (['string', 'number'].indexOf(typeof id) === -1) throw new Error('id must be a number or a string');\n}\n\n// Deprecated methods\nfunction radians2degrees() {\n    throw new Error('method has been renamed to `radiansToDegrees`');\n}\n\nfunction degrees2radians() {\n    throw new Error('method has been renamed to `degreesToRadians`');\n}\n\nfunction distanceToDegrees() {\n    throw new Error('method has been renamed to `lengthToDegrees`');\n}\n\nfunction distanceToRadians() {\n    throw new Error('method has been renamed to `lengthToRadians`');\n}\n\nfunction radiansToDistance() {\n    throw new Error('method has been renamed to `radiansToLength`');\n}\n\nfunction bearingToAngle() {\n    throw new Error('method has been renamed to `bearingToAzimuth`');\n}\n\nfunction convertDistance() {\n    throw new Error('method has been renamed to `convertLength`');\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9oZWxwZXJzL21haW4uZXMuanM/YjdhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVhcnRoIFJhZGl1cyB1c2VkIHdpdGggdGhlIEhhcnZlc2luZSBmb3JtdWxhIGFuZCBhcHByb3hpbWF0ZXMgdXNpbmcgYSBzcGhlcmljYWwgKG5vbi1lbGxpcHNvaWQpIEVhcnRoLlxuICovXG52YXIgZWFydGhSYWRpdXMgPSA2MzcxMDA4Ljg7XG5cbi8qKlxuICogVW5pdCBvZiBtZWFzdXJlbWVudCBmYWN0b3JzIHVzaW5nIGEgc3BoZXJpY2FsIChub24tZWxsaXBzb2lkKSBlYXJ0aCByYWRpdXMuXG4gKi9cbnZhciBmYWN0b3JzID0ge1xuICAgIG1ldGVyczogZWFydGhSYWRpdXMsXG4gICAgbWV0cmVzOiBlYXJ0aFJhZGl1cyxcbiAgICBtaWxsaW1ldGVyczogZWFydGhSYWRpdXMgKiAxMDAwLFxuICAgIG1pbGxpbWV0cmVzOiBlYXJ0aFJhZGl1cyAqIDEwMDAsXG4gICAgY2VudGltZXRlcnM6IGVhcnRoUmFkaXVzICogMTAwLFxuICAgIGNlbnRpbWV0cmVzOiBlYXJ0aFJhZGl1cyAqIDEwMCxcbiAgICBraWxvbWV0ZXJzOiBlYXJ0aFJhZGl1cyAvIDEwMDAsXG4gICAga2lsb21ldHJlczogZWFydGhSYWRpdXMgLyAxMDAwLFxuICAgIG1pbGVzOiBlYXJ0aFJhZGl1cyAvIDE2MDkuMzQ0LFxuICAgIG5hdXRpY2FsbWlsZXM6IGVhcnRoUmFkaXVzIC8gMTg1MixcbiAgICBpbmNoZXM6IGVhcnRoUmFkaXVzICogMzkuMzcwLFxuICAgIHlhcmRzOiBlYXJ0aFJhZGl1cyAvIDEuMDkzNixcbiAgICBmZWV0OiBlYXJ0aFJhZGl1cyAqIDMuMjgwODQsXG4gICAgcmFkaWFuczogMSxcbiAgICBkZWdyZWVzOiBlYXJ0aFJhZGl1cyAvIDExMTMyNSxcbn07XG5cbi8qKlxuICogVW5pdHMgb2YgbWVhc3VyZW1lbnQgZmFjdG9ycyBiYXNlZCBvbiAxIG1ldGVyLlxuICovXG52YXIgdW5pdHNGYWN0b3JzID0ge1xuICAgIG1ldGVyczogMSxcbiAgICBtZXRyZXM6IDEsXG4gICAgbWlsbGltZXRlcnM6IDEwMDAsXG4gICAgbWlsbGltZXRyZXM6IDEwMDAsXG4gICAgY2VudGltZXRlcnM6IDEwMCxcbiAgICBjZW50aW1ldHJlczogMTAwLFxuICAgIGtpbG9tZXRlcnM6IDEgLyAxMDAwLFxuICAgIGtpbG9tZXRyZXM6IDEgLyAxMDAwLFxuICAgIG1pbGVzOiAxIC8gMTYwOS4zNDQsXG4gICAgbmF1dGljYWxtaWxlczogMSAvIDE4NTIsXG4gICAgaW5jaGVzOiAzOS4zNzAsXG4gICAgeWFyZHM6IDEgLyAxLjA5MzYsXG4gICAgZmVldDogMy4yODA4NCxcbiAgICByYWRpYW5zOiAxIC8gZWFydGhSYWRpdXMsXG4gICAgZGVncmVlczogMSAvIDExMTMyNSxcbn07XG5cbi8qKlxuICogQXJlYSBvZiBtZWFzdXJlbWVudCBmYWN0b3JzIGJhc2VkIG9uIDEgc3F1YXJlIG1ldGVyLlxuICovXG52YXIgYXJlYUZhY3RvcnMgPSB7XG4gICAgbWV0ZXJzOiAxLFxuICAgIG1ldHJlczogMSxcbiAgICBtaWxsaW1ldGVyczogMTAwMDAwMCxcbiAgICBtaWxsaW1ldHJlczogMTAwMDAwMCxcbiAgICBjZW50aW1ldGVyczogMTAwMDAsXG4gICAgY2VudGltZXRyZXM6IDEwMDAwLFxuICAgIGtpbG9tZXRlcnM6IDAuMDAwMDAxLFxuICAgIGtpbG9tZXRyZXM6IDAuMDAwMDAxLFxuICAgIGFjcmVzOiAwLjAwMDI0NzEwNSxcbiAgICBtaWxlczogMy44NmUtNyxcbiAgICB5YXJkczogMS4xOTU5OTAwNDYsXG4gICAgZmVldDogMTAuNzYzOTEwNDE3LFxuICAgIGluY2hlczogMTU1MC4wMDMxMDAwMDZcbn07XG5cbi8qKlxuICogV3JhcHMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gaW4gYSBHZW9KU09OIHtAbGluayBGZWF0dXJlfS5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlXG4gKiBAcGFyYW0ge0dlb21ldHJ5fSBnZW9tZXRyeSBpbnB1dCBnZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuYmJveF0gQm91bmRpbmcgQm94IEFycmF5IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbb3B0aW9ucy5pZF0gSWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVcbiAqIEByZXR1cm5zIHtGZWF0dXJlfSBhIEdlb0pTT04gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBnZW9tZXRyeSA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA1MF1cbiAqIH07XG4gKlxuICogdmFyIGZlYXR1cmUgPSB0dXJmLmZlYXR1cmUoZ2VvbWV0cnkpO1xuICpcbiAqIC8vPWZlYXR1cmVcbiAqL1xuZnVuY3Rpb24gZmVhdHVyZShnZW9tZXRyeSwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIC8vIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoIWlzT2JqZWN0KG9wdGlvbnMpKSB0aHJvdyBuZXcgRXJyb3IoJ29wdGlvbnMgaXMgaW52YWxpZCcpO1xuICAgIHZhciBiYm94ID0gb3B0aW9ucy5iYm94O1xuICAgIHZhciBpZCA9IG9wdGlvbnMuaWQ7XG5cbiAgICAvLyBWYWxpZGF0aW9uXG4gICAgaWYgKGdlb21ldHJ5ID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cnkgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHRocm93IG5ldyBFcnJvcigncHJvcGVydGllcyBtdXN0IGJlIGFuIE9iamVjdCcpO1xuICAgIGlmIChiYm94KSB2YWxpZGF0ZUJCb3goYmJveCk7XG4gICAgaWYgKGlkKSB2YWxpZGF0ZUlkKGlkKTtcblxuICAgIC8vIE1haW5cbiAgICB2YXIgZmVhdCA9IHt0eXBlOiAnRmVhdHVyZSd9O1xuICAgIGlmIChpZCkgZmVhdC5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmZWF0LmJib3ggPSBiYm94O1xuICAgIGZlYXQucHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG4gICAgZmVhdC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgIHJldHVybiBmZWF0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gZnJvbSBhIEdlb21ldHJ5IHN0cmluZyB0eXBlICYgY29vcmRpbmF0ZXMuXG4gKiBGb3IgR2VvbWV0cnlDb2xsZWN0aW9uIHR5cGUgdXNlIGBoZWxwZXJzLmdlb21ldHJ5Q29sbGVjdGlvbmBcbiAqXG4gKiBAbmFtZSBnZW9tZXRyeVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgR2VvbWV0cnkgVHlwZVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBQYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmJib3hdIEJvdW5kaW5nIEJveCBBcnJheSBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXSBhc3NvY2lhdGVkIHdpdGggdGhlIEdlb21ldHJ5XG4gKiBAcmV0dXJucyB7R2VvbWV0cnl9IGEgR2VvSlNPTiBHZW9tZXRyeVxuICogQGV4YW1wbGVcbiAqIHZhciB0eXBlID0gJ1BvaW50JztcbiAqIHZhciBjb29yZGluYXRlcyA9IFsxMTAsIDUwXTtcbiAqXG4gKiB2YXIgZ2VvbWV0cnkgPSB0dXJmLmdlb21ldHJ5KHR5cGUsIGNvb3JkaW5hdGVzKTtcbiAqXG4gKiAvLz1nZW9tZXRyeVxuICovXG5mdW5jdGlvbiBnZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcywgb3B0aW9ucykge1xuICAgIC8vIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoIWlzT2JqZWN0KG9wdGlvbnMpKSB0aHJvdyBuZXcgRXJyb3IoJ29wdGlvbnMgaXMgaW52YWxpZCcpO1xuICAgIHZhciBiYm94ID0gb3B0aW9ucy5iYm94O1xuXG4gICAgLy8gVmFsaWRhdGlvblxuICAgIGlmICghdHlwZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb29yZGluYXRlcykpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94KSB2YWxpZGF0ZUJCb3goYmJveCk7XG5cbiAgICAvLyBNYWluXG4gICAgdmFyIGdlb207XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnUG9pbnQnOiBnZW9tID0gcG9pbnQoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdMaW5lU3RyaW5nJzogZ2VvbSA9IGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdQb2x5Z29uJzogZ2VvbSA9IHBvbHlnb24oY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvaW50JzogZ2VvbSA9IG11bHRpUG9pbnQoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOiBnZW9tID0gbXVsdGlMaW5lU3RyaW5nKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzogZ2VvbSA9IG11bHRpUG9seWdvbihjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcih0eXBlICsgJyBpcyBpbnZhbGlkJyk7XG4gICAgfVxuICAgIGlmIChiYm94KSBnZW9tLmJib3ggPSBiYm94O1xuICAgIHJldHVybiBnZW9tO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUG9pbnR9IHtAbGluayBGZWF0dXJlfSBmcm9tIGEgUG9zaXRpb24uXG4gKlxuICogQG5hbWUgcG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgbG9uZ2l0dWRlLCBsYXRpdHVkZSBwb3NpdGlvbiAoZWFjaCBpbiBkZWNpbWFsIGRlZ3JlZXMpXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5iYm94XSBCb3VuZGluZyBCb3ggQXJyYXkgW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0gYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtvcHRpb25zLmlkXSBJZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZVxuICogQHJldHVybnMge0ZlYXR1cmU8UG9pbnQ+fSBhIFBvaW50IGZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqXG4gKiAvLz1wb2ludFxuICovXG5mdW5jdGlvbiBwb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gQXJyYXknKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IGJlIGF0IGxlYXN0IDIgbnVtYmVycyBsb25nJyk7XG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFBvaW50fSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IGZyb20gYW4gQXJyYXkgb2YgUG9pbnQgY29vcmRpbmF0ZXMuXG4gKlxuICogQG5hbWUgcG9pbnRzXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb2ludHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gVHJhbnNsYXRlIHRoZXNlIHByb3BlcnRpZXMgdG8gZWFjaCBGZWF0dXJlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuYmJveF0gQm91bmRpbmcgQm94IEFycmF5IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW29wdGlvbnMuaWRdIElkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlQ29sbGVjdGlvblxuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9uPFBvaW50Pn0gUG9pbnQgRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludHMgPSB0dXJmLnBvaW50cyhbXG4gKiAgIFstNzUsIDM5XSxcbiAqICAgWy04MCwgNDVdLFxuICogICBbLTc4LCA1MF1cbiAqIF0pO1xuICpcbiAqIC8vPXBvaW50c1xuICovXG5mdW5jdGlvbiBwb2ludHMoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzKSkgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZUNvbGxlY3Rpb24oY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50KGNvb3JkcywgcHJvcGVydGllcyk7XG4gICAgfSksIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUG9seWdvbn0ge0BsaW5rIEZlYXR1cmV9IGZyb20gYW4gQXJyYXkgb2YgTGluZWFyUmluZ3MuXG4gKlxuICogQG5hbWUgcG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5iYm94XSBCb3VuZGluZyBCb3ggQXJyYXkgW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0gYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtvcHRpb25zLmlkXSBJZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZVxuICogQHJldHVybnMge0ZlYXR1cmU8UG9seWdvbj59IFBvbHlnb24gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5Z29uID0gdHVyZi5wb2x5Z29uKFtbWy01LCA1Ml0sIFstNCwgNTZdLCBbLTIsIDUxXSwgWy03LCA1NF0sIFstNSwgNTJdXV0sIHsgbmFtZTogJ3BvbHkxJyB9KTtcbiAqXG4gKiAvLz1wb2x5Z29uXG4gKi9cbmZ1bmN0aW9uIHBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIGlzIHJlcXVpcmVkJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByaW5nID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGlmIChyaW5nLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWFjaCBMaW5lYXJSaW5nIG9mIGEgUG9seWdvbiBtdXN0IGhhdmUgNCBvciBtb3JlIFBvc2l0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJpbmdbcmluZy5sZW5ndGggLSAxXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgUG9seWdvbiBjb250YWlucyB0d28gbnVtYmVyc1xuICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCAmJiAhaXNOdW1iZXIocmluZ1swXVswXSkgfHwgIWlzTnVtYmVyKHJpbmdbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG4gICAgICAgICAgICBpZiAocmluZ1tyaW5nLmxlbmd0aCAtIDFdW2pdICE9PSByaW5nWzBdW2pdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhbmQgbGFzdCBQb3NpdGlvbiBhcmUgbm90IGVxdWl2YWxlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBQb2x5Z29ufSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IGZyb20gYW4gQXJyYXkgb2YgUG9seWdvbiBjb29yZGluYXRlcy5cbiAqXG4gKiBAbmFtZSBwb2x5Z29uc1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb2x5Z29uIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5iYm94XSBCb3VuZGluZyBCb3ggQXJyYXkgW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0gYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtvcHRpb25zLmlkXSBJZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZUNvbGxlY3Rpb25cbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbjxQb2x5Z29uPn0gUG9seWdvbiBGZWF0dXJlQ29sbGVjdGlvblxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5Z29ucyA9IHR1cmYucG9seWdvbnMoW1xuICogICBbW1stNSwgNTJdLCBbLTQsIDU2XSwgWy0yLCA1MV0sIFstNywgNTRdLCBbLTUsIDUyXV1dLFxuICogICBbW1stMTUsIDQyXSwgWy0xNCwgNDZdLCBbLTEyLCA0MV0sIFstMTcsIDQ0XSwgWy0xNSwgNDJdXV0sXG4gKiBdKTtcbiAqXG4gKiAvLz1wb2x5Z29uc1xuICovXG5mdW5jdGlvbiBwb2x5Z29ucyhjb29yZGluYXRlcywgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gQXJyYXknKTtcblxuICAgIHJldHVybiBmZWF0dXJlQ29sbGVjdGlvbihjb29yZGluYXRlcy5tYXAoZnVuY3Rpb24gKGNvb3Jkcykge1xuICAgICAgICByZXR1cm4gcG9seWdvbihjb29yZHMsIHByb3BlcnRpZXMpO1xuICAgIH0pLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIExpbmVTdHJpbmd9IHtAbGluayBGZWF0dXJlfSBmcm9tIGFuIEFycmF5IG9mIFBvc2l0aW9ucy5cbiAqXG4gKiBAbmFtZSBsaW5lU3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBQYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmJib3hdIEJvdW5kaW5nIEJveCBBcnJheSBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXSBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW29wdGlvbnMuaWRdIElkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxMaW5lU3RyaW5nPn0gTGluZVN0cmluZyBGZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIGxpbmVzdHJpbmcxID0gdHVyZi5saW5lU3RyaW5nKFtbLTI0LCA2M10sIFstMjMsIDYwXSwgWy0yNSwgNjVdLCBbLTIwLCA2OV1dLCB7bmFtZTogJ2xpbmUgMSd9KTtcbiAqIHZhciBsaW5lc3RyaW5nMiA9IHR1cmYubGluZVN0cmluZyhbWy0xNCwgNDNdLCBbLTEzLCA0MF0sIFstMTUsIDQ1XSwgWy0xMCwgNDldXSwge25hbWU6ICdsaW5lIDInfSk7XG4gKlxuICogLy89bGluZXN0cmluZzFcbiAqIC8vPWxpbmVzdHJpbmcyXG4gKi9cbmZ1bmN0aW9uIGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheSBvZiB0d28gb3IgbW9yZSBwb3NpdGlvbnMnKTtcbiAgICAvLyBDaGVjayBpZiBmaXJzdCBwb2ludCBvZiBMaW5lU3RyaW5nIGNvbnRhaW5zIHR3byBudW1iZXJzXG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXVsxXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30ge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBmcm9tIGFuIEFycmF5IG9mIExpbmVTdHJpbmcgY29vcmRpbmF0ZXMuXG4gKlxuICogQG5hbWUgbGluZVN0cmluZ3NcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5iYm94XSBCb3VuZGluZyBCb3ggQXJyYXkgW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0gYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlQ29sbGVjdGlvblxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbb3B0aW9ucy5pZF0gSWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVDb2xsZWN0aW9uXG4gKiBAcmV0dXJucyB7RmVhdHVyZUNvbGxlY3Rpb248TGluZVN0cmluZz59IExpbmVTdHJpbmcgRmVhdHVyZUNvbGxlY3Rpb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZXN0cmluZ3MgPSB0dXJmLmxpbmVTdHJpbmdzKFtcbiAqICAgW1stMjQsIDYzXSwgWy0yMywgNjBdLCBbLTI1LCA2NV0sIFstMjAsIDY5XV0sXG4gKiAgIFtbLTE0LCA0M10sIFstMTMsIDQwXSwgWy0xNSwgNDVdLCBbLTEwLCA0OV1dXG4gKiBdKTtcbiAqXG4gKiAvLz1saW5lc3RyaW5nc1xuICovXG5mdW5jdGlvbiBsaW5lU3RyaW5ncyhjb29yZGluYXRlcywgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gQXJyYXknKTtcblxuICAgIHJldHVybiBmZWF0dXJlQ29sbGVjdGlvbihjb29yZGluYXRlcy5tYXAoZnVuY3Rpb24gKGNvb3Jkcykge1xuICAgICAgICByZXR1cm4gbGluZVN0cmluZyhjb29yZHMsIHByb3BlcnRpZXMpO1xuICAgIH0pLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBvbmUgb3IgbW9yZSB7QGxpbmsgRmVhdHVyZXxGZWF0dXJlc30gYW5kIGNyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0ZlYXR1cmVbXX0gZmVhdHVyZXMgaW5wdXQgZmVhdHVyZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5iYm94XSBCb3VuZGluZyBCb3ggQXJyYXkgW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0gYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtvcHRpb25zLmlkXSBJZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZVxuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9ufSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBGZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBsb2NhdGlvbkEgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdLCB7bmFtZTogJ0xvY2F0aW9uIEEnfSk7XG4gKiB2YXIgbG9jYXRpb25CID0gdHVyZi5wb2ludChbLTc1LjgzMywgMzkuMjg0XSwge25hbWU6ICdMb2NhdGlvbiBCJ30pO1xuICogdmFyIGxvY2F0aW9uQyA9IHR1cmYucG9pbnQoWy03NS41MzQsIDM5LjEyM10sIHtuYW1lOiAnTG9jYXRpb24gQyd9KTtcbiAqXG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW1xuICogICBsb2NhdGlvbkEsXG4gKiAgIGxvY2F0aW9uQixcbiAqICAgbG9jYXRpb25DXG4gKiBdKTtcbiAqXG4gKiAvLz1jb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzLCBvcHRpb25zKSB7XG4gICAgLy8gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmICghaXNPYmplY3Qob3B0aW9ucykpIHRocm93IG5ldyBFcnJvcignb3B0aW9ucyBpcyBpbnZhbGlkJyk7XG4gICAgdmFyIGJib3ggPSBvcHRpb25zLmJib3g7XG4gICAgdmFyIGlkID0gb3B0aW9ucy5pZDtcblxuICAgIC8vIFZhbGlkYXRpb25cbiAgICBpZiAoIWZlYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGZlYXR1cmVzIHBhc3NlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShmZWF0dXJlcykpIHRocm93IG5ldyBFcnJvcignZmVhdHVyZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94KSB2YWxpZGF0ZUJCb3goYmJveCk7XG4gICAgaWYgKGlkKSB2YWxpZGF0ZUlkKGlkKTtcblxuICAgIC8vIE1haW5cbiAgICB2YXIgZmMgPSB7dHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJ307XG4gICAgaWYgKGlkKSBmYy5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmYy5iYm94ID0gYmJveDtcbiAgICBmYy5mZWF0dXJlcyA9IGZlYXR1cmVzO1xuICAgIHJldHVybiBmYztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aUxpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lU3RyaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuYmJveF0gQm91bmRpbmcgQm94IEFycmF5IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbb3B0aW9ucy5pZF0gSWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpTGluZVN0cmluZz59IGEgTXVsdGlMaW5lU3RyaW5nIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpTGluZSA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKFtbWzAsMF0sWzEwLDEwXV1dKTtcbiAqXG4gKiAvLz1tdWx0aUxpbmVcbiAqL1xuZnVuY3Rpb24gbXVsdGlMaW5lU3RyaW5nKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBpcyByZXF1aXJlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPE11bHRpUG9pbnQ+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpUG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvc2l0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuYmJveF0gQm91bmRpbmcgQm94IEFycmF5IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdIGFzc29jaWF0ZWQgd2l0aCB0aGUgRmVhdHVyZVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbb3B0aW9ucy5pZF0gSWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpUG9pbnQ+fSBhIE11bHRpUG9pbnQgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlQdCA9IHR1cmYubXVsdGlQb2ludChbWzAsMF0sWzEwLDEwXV0pO1xuICpcbiAqIC8vPW11bHRpUHRcbiAqL1xuZnVuY3Rpb24gbXVsdGlQb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aVBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9seWdvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBQYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmJib3hdIEJvdW5kaW5nIEJveCBBcnJheSBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXSBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW29wdGlvbnMuaWRdIElkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvbHlnb24+fSBhIG11bHRpcG9seWdvbiBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aVBvbHkgPSB0dXJmLm11bHRpUG9seWdvbihbW1tbMCwwXSxbMCwxMF0sWzEwLDEwXSxbMTAsMF0sWzAsMF1dXV0pO1xuICpcbiAqIC8vPW11bHRpUG9seVxuICpcbiAqL1xuZnVuY3Rpb24gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBpcyByZXF1aXJlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgZ2VvbWV0cnlDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0FycmF5PEdlb21ldHJ5Pn0gZ2VvbWV0cmllcyBhbiBhcnJheSBvZiBHZW9KU09OIEdlb21ldHJpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBQYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmJib3hdIEJvdW5kaW5nIEJveCBBcnJheSBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXSBhc3NvY2lhdGVkIHdpdGggdGhlIEZlYXR1cmVcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW29wdGlvbnMuaWRdIElkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBGZWF0dXJlXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxHZW9tZXRyeUNvbGxlY3Rpb24+fSBhIEdlb0pTT04gR2VvbWV0cnlDb2xsZWN0aW9uIEZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcHQgPSB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgICAgIFwiY29vcmRpbmF0ZXNcIjogWzEwMCwgMF1cbiAqICAgICB9O1xuICogdmFyIGxpbmUgPSB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiTGluZVN0cmluZ1wiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWyBbMTAxLCAwXSwgWzEwMiwgMV0gXVxuICogICB9O1xuICogdmFyIGNvbGxlY3Rpb24gPSB0dXJmLmdlb21ldHJ5Q29sbGVjdGlvbihbcHQsIGxpbmVdKTtcbiAqXG4gKiAvLz1jb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdlb21ldHJ5Q29sbGVjdGlvbihnZW9tZXRyaWVzLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgaWYgKCFnZW9tZXRyaWVzKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VvbWV0cmllcykpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgICAgICBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzXG4gICAgfSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogUm91bmQgbnVtYmVyIHRvIHByZWNpc2lvblxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gW3ByZWNpc2lvbj0wXSBQcmVjaXNpb25cbiAqIEByZXR1cm5zIHtudW1iZXJ9IHJvdW5kZWQgbnVtYmVyXG4gKiBAZXhhbXBsZVxuICogdHVyZi5yb3VuZCgxMjAuNDMyMSlcbiAqIC8vPTEyMFxuICpcbiAqIHR1cmYucm91bmQoMTIwLjQzMjEsIDIpXG4gKiAvLz0xMjAuNDNcbiAqL1xuZnVuY3Rpb24gcm91bmQobnVtLCBwcmVjaXNpb24pIHtcbiAgICBpZiAobnVtID09PSB1bmRlZmluZWQgfHwgbnVtID09PSBudWxsIHx8IGlzTmFOKG51bSkpIHRocm93IG5ldyBFcnJvcignbnVtIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKHByZWNpc2lvbiAmJiAhKHByZWNpc2lvbiA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdwcmVjaXNpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgIHZhciBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbiB8fCAwKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXI7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSByYWRpYW5zIHRvIGEgbW9yZSBmcmllbmRseSB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAbmFtZSByYWRpYW5zVG9MZW5ndGhcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIGluIHJhZGlhbnMgYWNyb3NzIHRoZSBzcGhlcmVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9J2tpbG9tZXRlcnMnXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiByYWRpYW5zVG9MZW5ndGgocmFkaWFucywgdW5pdHMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gdW5kZWZpbmVkIHx8IHJhZGlhbnMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiByYWRpYW5zICogZmFjdG9yO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gYSByZWFsLXdvcmxkIHVuaXQgaW50byByYWRpYW5zXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIGxlbmd0aFRvUmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9J2tpbG9tZXRlcnMnXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByYWRpYW5zXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aFRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBkaXN0YW5jZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiBkaXN0YW5jZSAvIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gZGVncmVlc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRlcnMsIGtpbG9tZXRyZXMsIGZlZXRcbiAqXG4gKiBAbmFtZSBsZW5ndGhUb0RlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBpbiByZWFsIHVuaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPSdraWxvbWV0ZXJzJ10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGVncmVlc1xuICovXG5mdW5jdGlvbiBsZW5ndGhUb0RlZ3JlZXMoZGlzdGFuY2UsIHVuaXRzKSB7XG4gICAgcmV0dXJuIHJhZGlhbnNUb0RlZ3JlZXMobGVuZ3RoVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFueSBiZWFyaW5nIGFuZ2xlIGZyb20gdGhlIG5vcnRoIGxpbmUgZGlyZWN0aW9uIChwb3NpdGl2ZSBjbG9ja3dpc2UpXG4gKiBhbmQgcmV0dXJucyBhbiBhbmdsZSBiZXR3ZWVuIDAtMzYwIGRlZ3JlZXMgKHBvc2l0aXZlIGNsb2Nrd2lzZSksIDAgYmVpbmcgdGhlIG5vcnRoIGxpbmVcbiAqXG4gKiBAbmFtZSBiZWFyaW5nVG9BemltdXRoXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBhbmdsZSwgYmV0d2VlbiAtMTgwIGFuZCArMTgwIGRlZ3JlZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuZ2xlIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gYmVhcmluZ1RvQXppbXV0aChiZWFyaW5nKSB7XG4gICAgaWYgKGJlYXJpbmcgPT09IG51bGwgfHwgYmVhcmluZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2JlYXJpbmcgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBhbmdsZSA9IGJlYXJpbmcgJSAzNjA7XG4gICAgaWYgKGFuZ2xlIDwgMCkgYW5nbGUgKz0gMzYwO1xuICAgIHJldHVybiBhbmdsZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhbmdsZSBpbiByYWRpYW5zIHRvIGRlZ3JlZXNcbiAqXG4gKiBAbmFtZSByYWRpYW5zVG9EZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZWdyZWVzIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gcmFkaWFuc1RvRGVncmVlcyhyYWRpYW5zKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IG51bGwgfHwgcmFkaWFucyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBkZWdyZWVzID0gcmFkaWFucyAlICgyICogTWF0aC5QSSk7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIGRlZ3JlZXMgdG8gcmFkaWFuc1xuICpcbiAqIEBuYW1lIGRlZ3JlZXNUb1JhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIGFuZ2xlIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuZnVuY3Rpb24gZGVncmVlc1RvUmFkaWFucyhkZWdyZWVzKSB7XG4gICAgaWYgKGRlZ3JlZXMgPT09IG51bGwgfHwgZGVncmVlcyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2RlZ3JlZXMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciByYWRpYW5zID0gZGVncmVlcyAlIDM2MDtcbiAgICByZXR1cm4gcmFkaWFucyAqIE1hdGguUEkgLyAxODA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBsZW5ndGggdG8gdGhlIHJlcXVlc3RlZCB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIHRvIGJlIGNvbnZlcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbmFsVW5pdCBvZiB0aGUgbGVuZ3RoXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD0na2lsb21ldGVycyddIHJldHVybmVkIHVuaXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBjb252ZXJ0ZWQgbGVuZ3RoXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRMZW5ndGgobGVuZ3RoLCBvcmlnaW5hbFVuaXQsIGZpbmFsVW5pdCkge1xuICAgIGlmIChsZW5ndGggPT09IG51bGwgfHwgbGVuZ3RoID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignbGVuZ3RoIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCEobGVuZ3RoID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2xlbmd0aCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICByZXR1cm4gcmFkaWFuc1RvTGVuZ3RoKGxlbmd0aFRvUmFkaWFucyhsZW5ndGgsIG9yaWdpbmFsVW5pdCksIGZpbmFsVW5pdCB8fCAna2lsb21ldGVycycpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYXJlYSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czoga2lsb21ldGVycywga2lsb21ldHJlcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0cmVzLCBtaWxsaW1ldGVycywgYWNyZXMsIG1pbGVzLCB5YXJkcywgZmVldCwgaW5jaGVzXG4gKiBAcGFyYW0ge251bWJlcn0gYXJlYSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3JpZ2luYWxVbml0PSdtZXRlcnMnXSBvZiB0aGUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmluYWxVbml0PSdraWxvbWV0ZXJzJ10gcmV0dXJuZWQgdW5pdFxuICogQHJldHVybnMge251bWJlcn0gdGhlIGNvbnZlcnRlZCBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiBjb252ZXJ0QXJlYShhcmVhLCBvcmlnaW5hbFVuaXQsIGZpbmFsVW5pdCkge1xuICAgIGlmIChhcmVhID09PSBudWxsIHx8IGFyZWEgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdhcmVhIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCEoYXJlYSA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdhcmVhIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblxuICAgIHZhciBzdGFydEZhY3RvciA9IGFyZWFGYWN0b3JzW29yaWdpbmFsVW5pdCB8fCAnbWV0ZXJzJ107XG4gICAgaWYgKCFzdGFydEZhY3RvcikgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIG9yaWdpbmFsIHVuaXRzJyk7XG5cbiAgICB2YXIgZmluYWxGYWN0b3IgPSBhcmVhRmFjdG9yc1tmaW5hbFVuaXQgfHwgJ2tpbG9tZXRlcnMnXTtcbiAgICBpZiAoIWZpbmFsRmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgZmluYWwgdW5pdHMnKTtcblxuICAgIHJldHVybiAoYXJlYSAvIHN0YXJ0RmFjdG9yKSAqIGZpbmFsRmFjdG9yO1xufVxuXG4vKipcbiAqIGlzTnVtYmVyXG4gKlxuICogQHBhcmFtIHsqfSBudW0gTnVtYmVyIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS9mYWxzZVxuICogQGV4YW1wbGVcbiAqIHR1cmYuaXNOdW1iZXIoMTIzKVxuICogLy89dHJ1ZVxuICogdHVyZi5pc051bWJlcignZm9vJylcbiAqIC8vPWZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKG51bSkge1xuICAgIHJldHVybiAhaXNOYU4obnVtKSAmJiBudW0gIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkobnVtKTtcbn1cblxuLyoqXG4gKiBpc09iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gaW5wdXQgdmFyaWFibGUgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlL2ZhbHNlXG4gKiBAZXhhbXBsZVxuICogdHVyZi5pc09iamVjdCh7ZWxldmF0aW9uOiAxMH0pXG4gKiAvLz10cnVlXG4gKiB0dXJmLmlzT2JqZWN0KCdmb28nKVxuICogLy89ZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QoaW5wdXQpIHtcbiAgICByZXR1cm4gKCEhaW5wdXQpICYmIChpbnB1dC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBCQm94XG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYmJveCBCQm94IHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEB0aHJvd3MgRXJyb3IgaWYgQkJveCBpcyBub3QgdmFsaWRcbiAqIEBleGFtcGxlXG4gKiB2YWxpZGF0ZUJCb3goWy0xODAsIC00MCwgMTEwLCA1MF0pXG4gKiAvLz1PS1xuICogdmFsaWRhdGVCQm94KFstMTgwLCAtNDBdKVxuICogLy89RXJyb3JcbiAqIHZhbGlkYXRlQkJveCgnRm9vJylcbiAqIC8vPUVycm9yXG4gKiB2YWxpZGF0ZUJCb3goNSlcbiAqIC8vPUVycm9yXG4gKiB2YWxpZGF0ZUJCb3gobnVsbClcbiAqIC8vPUVycm9yXG4gKiB2YWxpZGF0ZUJCb3godW5kZWZpbmVkKVxuICogLy89RXJyb3JcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVCQm94KGJib3gpIHtcbiAgICBpZiAoIWJib3gpIHRocm93IG5ldyBFcnJvcignYmJveCBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShiYm94KSkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXknKTtcbiAgICBpZiAoYmJveC5sZW5ndGggIT09IDQgJiYgYmJveC5sZW5ndGggIT09IDYpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgb3IgNiBudW1iZXJzJyk7XG4gICAgYmJveC5mb3JFYWNoKGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgaWYgKCFpc051bWJlcihudW0pKSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBvbmx5IGNvbnRhaW4gbnVtYmVycycpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIElkXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaWQgSWQgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHRocm93cyBFcnJvciBpZiBJZCBpcyBub3QgdmFsaWRcbiAqIEBleGFtcGxlXG4gKiB2YWxpZGF0ZUlkKFstMTgwLCAtNDAsIDExMCwgNTBdKVxuICogLy89RXJyb3JcbiAqIHZhbGlkYXRlSWQoWy0xODAsIC00MF0pXG4gKiAvLz1FcnJvclxuICogdmFsaWRhdGVJZCgnRm9vJylcbiAqIC8vPU9LXG4gKiB2YWxpZGF0ZUlkKDUpXG4gKiAvLz1PS1xuICogdmFsaWRhdGVJZChudWxsKVxuICogLy89RXJyb3JcbiAqIHZhbGlkYXRlSWQodW5kZWZpbmVkKVxuICogLy89RXJyb3JcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVJZChpZCkge1xuICAgIGlmICghaWQpIHRocm93IG5ldyBFcnJvcignaWQgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG59XG5cbi8vIERlcHJlY2F0ZWQgbWV0aG9kc1xuZnVuY3Rpb24gcmFkaWFuczJkZWdyZWVzKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWV0aG9kIGhhcyBiZWVuIHJlbmFtZWQgdG8gYHJhZGlhbnNUb0RlZ3JlZXNgJyk7XG59XG5cbmZ1bmN0aW9uIGRlZ3JlZXMycmFkaWFucygpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCBoYXMgYmVlbiByZW5hbWVkIHRvIGBkZWdyZWVzVG9SYWRpYW5zYCcpO1xufVxuXG5mdW5jdGlvbiBkaXN0YW5jZVRvRGVncmVlcygpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCBoYXMgYmVlbiByZW5hbWVkIHRvIGBsZW5ndGhUb0RlZ3JlZXNgJyk7XG59XG5cbmZ1bmN0aW9uIGRpc3RhbmNlVG9SYWRpYW5zKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWV0aG9kIGhhcyBiZWVuIHJlbmFtZWQgdG8gYGxlbmd0aFRvUmFkaWFuc2AnKTtcbn1cblxuZnVuY3Rpb24gcmFkaWFuc1RvRGlzdGFuY2UoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgaGFzIGJlZW4gcmVuYW1lZCB0byBgcmFkaWFuc1RvTGVuZ3RoYCcpO1xufVxuXG5mdW5jdGlvbiBiZWFyaW5nVG9BbmdsZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCBoYXMgYmVlbiByZW5hbWVkIHRvIGBiZWFyaW5nVG9BemltdXRoYCcpO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0RGlzdGFuY2UoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgaGFzIGJlZW4gcmVuYW1lZCB0byBgY29udmVydExlbmd0aGAnKTtcbn1cblxuZXhwb3J0IHsgZWFydGhSYWRpdXMsIGZhY3RvcnMsIHVuaXRzRmFjdG9ycywgYXJlYUZhY3RvcnMsIGZlYXR1cmUsIGdlb21ldHJ5LCBwb2ludCwgcG9pbnRzLCBwb2x5Z29uLCBwb2x5Z29ucywgbGluZVN0cmluZywgbGluZVN0cmluZ3MsIGZlYXR1cmVDb2xsZWN0aW9uLCBtdWx0aUxpbmVTdHJpbmcsIG11bHRpUG9pbnQsIG11bHRpUG9seWdvbiwgZ2VvbWV0cnlDb2xsZWN0aW9uLCByb3VuZCwgcmFkaWFuc1RvTGVuZ3RoLCBsZW5ndGhUb1JhZGlhbnMsIGxlbmd0aFRvRGVncmVlcywgYmVhcmluZ1RvQXppbXV0aCwgcmFkaWFuc1RvRGVncmVlcywgZGVncmVlc1RvUmFkaWFucywgY29udmVydExlbmd0aCwgY29udmVydEFyZWEsIGlzTnVtYmVyLCBpc09iamVjdCwgdmFsaWRhdGVCQm94LCB2YWxpZGF0ZUlkLCByYWRpYW5zMmRlZ3JlZXMsIGRlZ3JlZXMycmFkaWFucywgZGlzdGFuY2VUb0RlZ3JlZXMsIGRpc3RhbmNlVG9SYWRpYW5zLCByYWRpYW5zVG9EaXN0YW5jZSwgYmVhcmluZ1RvQW5nbGUsIGNvbnZlcnREaXN0YW5jZSB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvaGVscGVycy9tYWluLmVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Snapping = _interopRequireDefault(__webpack_require__(5));\n\nvar _Drag = _interopRequireDefault(__webpack_require__(26));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Edit = L.Class.extend({\n  includes: [_Drag.default, _Snapping.default],\n  options: {\n    snappable: true,\n    snapDistance: 20,\n    allowSelfIntersection: true,\n    draggable: true\n  },\n  isPolygon: function isPolygon() {\n    // if it's a polygon, it means the coordinates array is multi dimensional\n    return this._layer instanceof L.Polygon;\n  }\n});\nvar _default = Edit;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5qcz8yYzg0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX1NuYXBwaW5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vTWl4aW5zL1NuYXBwaW5nXCIpKTtcblxudmFyIF9EcmFnID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vTWl4aW5zL0RyYWdcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgRWRpdCA9IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgaW5jbHVkZXM6IFtfRHJhZy5kZWZhdWx0LCBfU25hcHBpbmcuZGVmYXVsdF0sXG4gIG9wdGlvbnM6IHtcbiAgICBzbmFwcGFibGU6IHRydWUsXG4gICAgc25hcERpc3RhbmNlOiAyMCxcbiAgICBhbGxvd1NlbGZJbnRlcnNlY3Rpb246IHRydWUsXG4gICAgZHJhZ2dhYmxlOiB0cnVlXG4gIH0sXG4gIGlzUG9seWdvbjogZnVuY3Rpb24gaXNQb2x5Z29uKCkge1xuICAgIC8vIGlmIGl0J3MgYSBwb2x5Z29uLCBpdCBtZWFucyB0aGUgY29vcmRpbmF0ZXMgYXJyYXkgaXMgbXVsdGkgZGltZW5zaW9uYWxcbiAgICByZXR1cm4gdGhpcy5fbGF5ZXIgaW5zdGFuY2VvZiBMLlBvbHlnb247XG4gIH1cbn0pO1xudmFyIF9kZWZhdWx0ID0gRWRpdDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return coordEach; });\n/* unused harmony export coordReduce */\n/* unused harmony export propEach */\n/* unused harmony export propReduce */\n/* unused harmony export featureEach */\n/* unused harmony export featureReduce */\n/* unused harmony export coordAll */\n/* unused harmony export geomEach */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return geomReduce; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return flattenEach; });\n/* unused harmony export flattenReduce */\n/* unused harmony export segmentEach */\n/* unused harmony export segmentReduce */\n/* unused harmony export lineEach */\n/* unused harmony export lineReduce */\n/* unused harmony export findSegment */\n/* unused harmony export findPoint */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__turf_helpers__ = __webpack_require__(1);\n\n\n/**\n * Callback for coordEach\n *\n * @callback coordEachCallback\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()\n *\n * @name coordEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n    // Handles null Geometry -- Skips this GeoJSON\n    if (geojson === null) return;\n    var j, k, l, geometry, stopG, coords,\n        geometryMaybeCollection,\n        wrapShrink = 0,\n        coordIndex = 0,\n        isGeometryCollection,\n        type = geojson.type,\n        isFeatureCollection = type === 'FeatureCollection',\n        isFeature = type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[featureIndex].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n            var multiFeatureIndex = 0;\n            var geometryIndex = 0;\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n\n            // Handles null Geometry -- Skips this geometry\n            if (geometry === null) continue;\n            coords = geometry.coordinates;\n            var geomType = geometry.type;\n\n            wrapShrink = (excludeWrapCoord && (geomType === 'Polygon' || geomType === 'MultiPolygon')) ? 1 : 0;\n\n            switch (geomType) {\n            case null:\n                break;\n            case 'Point':\n                if (callback(coords, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                coordIndex++;\n                multiFeatureIndex++;\n                break;\n            case 'LineString':\n            case 'MultiPoint':\n                for (j = 0; j < coords.length; j++) {\n                    if (callback(coords[j], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                    coordIndex++;\n                    if (geomType === 'MultiPoint') multiFeatureIndex++;\n                }\n                if (geomType === 'LineString') multiFeatureIndex++;\n                break;\n            case 'Polygon':\n            case 'MultiLineString':\n                for (j = 0; j < coords.length; j++) {\n                    for (k = 0; k < coords[j].length - wrapShrink; k++) {\n                        if (callback(coords[j][k], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                        coordIndex++;\n                    }\n                    if (geomType === 'MultiLineString') multiFeatureIndex++;\n                    if (geomType === 'Polygon') geometryIndex++;\n                }\n                if (geomType === 'Polygon') multiFeatureIndex++;\n                break;\n            case 'MultiPolygon':\n                for (j = 0; j < coords.length; j++) {\n                    if (geomType === 'MultiPolygon') geometryIndex = 0;\n                    for (k = 0; k < coords[j].length; k++) {\n                        for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                            if (callback(coords[j][k][l], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                            coordIndex++;\n                        }\n                        geometryIndex++;\n                    }\n                    multiFeatureIndex++;\n                }\n                break;\n            case 'GeometryCollection':\n                for (j = 0; j < geometry.geometries.length; j++)\n                    if (coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false) return false;\n                break;\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n    }\n}\n\n/**\n * Callback for coordReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback coordReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * Starts at index 0, if an initialValue is provided, and at index 1 otherwise.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Reduce coordinates in any GeoJSON object, similar to Array.reduce()\n *\n * @name coordReduce\n * @param {FeatureCollection|Geometry|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentCoord, coordIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordReduce(features, function (previousValue, currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=previousValue\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   return currentCoord;\n * });\n */\nfunction coordReduce(geojson, callback, initialValue, excludeWrapCoord) {\n    var previousValue = initialValue;\n    coordEach(geojson, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n        if (coordIndex === 0 && initialValue === undefined) previousValue = currentCoord;\n        else previousValue = callback(previousValue, currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex);\n    }, excludeWrapCoord);\n    return previousValue;\n}\n\n/**\n * Callback for propEach\n *\n * @callback propEachCallback\n * @param {Object} currentProperties The current Properties being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over properties in any GeoJSON object, similar to Array.forEach()\n *\n * @name propEach\n * @param {FeatureCollection|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentProperties, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.propEach(features, function (currentProperties, featureIndex) {\n *   //=currentProperties\n *   //=featureIndex\n * });\n */\nfunction propEach(geojson, callback) {\n    var i;\n    switch (geojson.type) {\n    case 'FeatureCollection':\n        for (i = 0; i < geojson.features.length; i++) {\n            if (callback(geojson.features[i].properties, i) === false) break;\n        }\n        break;\n    case 'Feature':\n        callback(geojson.properties, 0);\n        break;\n    }\n}\n\n\n/**\n * Callback for propReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback propReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {*} currentProperties The current Properties being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Reduce properties in any GeoJSON object into a single value,\n * similar to how Array.reduce works. However, in this case we lazily run\n * the reduction, so an array of all properties is unnecessary.\n *\n * @name propReduce\n * @param {FeatureCollection|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentProperties, featureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.propReduce(features, function (previousValue, currentProperties, featureIndex) {\n *   //=previousValue\n *   //=currentProperties\n *   //=featureIndex\n *   return currentProperties\n * });\n */\nfunction propReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    propEach(geojson, function (currentProperties, featureIndex) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentProperties;\n        else previousValue = callback(previousValue, currentProperties, featureIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Callback for featureEach\n *\n * @callback featureEachCallback\n * @param {Feature<any>} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name featureEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.featureEach(features, function (currentFeature, featureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n * });\n */\nfunction featureEach(geojson, callback) {\n    if (geojson.type === 'Feature') {\n        callback(geojson, 0);\n    } else if (geojson.type === 'FeatureCollection') {\n        for (var i = 0; i < geojson.features.length; i++) {\n            if (callback(geojson.features[i], i) === false) break;\n        }\n    }\n}\n\n/**\n * Callback for featureReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback featureReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Reduce features in any GeoJSON object, similar to Array.reduce().\n *\n * @name featureReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentFeature, featureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.featureReduce(features, function (previousValue, currentFeature, featureIndex) {\n *   //=previousValue\n *   //=currentFeature\n *   //=featureIndex\n *   return currentFeature\n * });\n */\nfunction featureReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    featureEach(geojson, function (currentFeature, featureIndex) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentFeature;\n        else previousValue = callback(previousValue, currentFeature, featureIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Get all coordinates from any GeoJSON object.\n *\n * @name coordAll\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @returns {Array<Array<number>>} coordinate position array\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * var coords = turf.coordAll(features);\n * //= [[26, 37], [36, 53]]\n */\nfunction coordAll(geojson) {\n    var coords = [];\n    coordEach(geojson, function (coord) {\n        coords.push(coord);\n    });\n    return coords;\n}\n\n/**\n * Callback for geomEach\n *\n * @callback geomEachCallback\n * @param {Geometry} currentGeometry The current Geometry being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {Object} featureProperties The current Feature Properties being processed.\n * @param {Array<number>} featureBBox The current Feature BBox being processed.\n * @param {number|string} featureId The current Feature Id being processed.\n */\n\n/**\n * Iterate over each geometry in any GeoJSON object, similar to Array.forEach()\n *\n * @name geomEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentGeometry, featureIndex, featureProperties, featureBBox, featureId)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.geomEach(features, function (currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n *   //=currentGeometry\n *   //=featureIndex\n *   //=featureProperties\n *   //=featureBBox\n *   //=featureId\n * });\n */\nfunction geomEach(geojson, callback) {\n    var i, j, g, geometry, stopG,\n        geometryMaybeCollection,\n        isGeometryCollection,\n        featureProperties,\n        featureBBox,\n        featureId,\n        featureIndex = 0,\n        isFeatureCollection = geojson.type === 'FeatureCollection',\n        isFeature = geojson.type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (i = 0; i < stop; i++) {\n\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[i].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        featureProperties = (isFeatureCollection ? geojson.features[i].properties :\n            (isFeature ? geojson.properties : {}));\n        featureBBox = (isFeatureCollection ? geojson.features[i].bbox :\n            (isFeature ? geojson.bbox : undefined));\n        featureId = (isFeatureCollection ? geojson.features[i].id :\n            (isFeature ? geojson.id : undefined));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (g = 0; g < stopG; g++) {\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[g] : geometryMaybeCollection;\n\n            // Handle null Geometry\n            if (geometry === null) {\n                if (callback(null, featureIndex, featureProperties, featureBBox, featureId) === false) return false;\n                continue;\n            }\n            switch (geometry.type) {\n            case 'Point':\n            case 'LineString':\n            case 'MultiPoint':\n            case 'Polygon':\n            case 'MultiLineString':\n            case 'MultiPolygon': {\n                if (callback(geometry, featureIndex, featureProperties, featureBBox, featureId) === false) return false;\n                break;\n            }\n            case 'GeometryCollection': {\n                for (j = 0; j < geometry.geometries.length; j++) {\n                    if (callback(geometry.geometries[j], featureIndex, featureProperties, featureBBox, featureId) === false) return false;\n                }\n                break;\n            }\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n        // Only increase `featureIndex` per each feature\n        featureIndex++;\n    }\n}\n\n/**\n * Callback for geomReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback geomReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Geometry} currentGeometry The current Geometry being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {Object} featureProperties The current Feature Properties being processed.\n * @param {Array<number>} featureBBox The current Feature BBox being processed.\n * @param {number|string} featureId The current Feature Id being processed.\n */\n\n/**\n * Reduce geometry in any GeoJSON object, similar to Array.reduce().\n *\n * @name geomReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.geomReduce(features, function (previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n *   //=previousValue\n *   //=currentGeometry\n *   //=featureIndex\n *   //=featureProperties\n *   //=featureBBox\n *   //=featureId\n *   return currentGeometry\n * });\n */\nfunction geomReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    geomEach(geojson, function (currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentGeometry;\n        else previousValue = callback(previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId);\n    });\n    return previousValue;\n}\n\n/**\n * Callback for flattenEach\n *\n * @callback flattenEachCallback\n * @param {Feature} currentFeature The current flattened feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n */\n\n/**\n * Iterate over flattened features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name flattenEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex, multiFeatureIndex)\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.multiPoint([[40, 30], [36, 53]], {hello: 'world'})\n * ]);\n *\n * turf.flattenEach(features, function (currentFeature, featureIndex, multiFeatureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n *   //=multiFeatureIndex\n * });\n */\nfunction flattenEach(geojson, callback) {\n    geomEach(geojson, function (geometry, featureIndex, properties, bbox, id) {\n        // Callback for single geometry\n        var type = (geometry === null) ? null : geometry.type;\n        switch (type) {\n        case null:\n        case 'Point':\n        case 'LineString':\n        case 'Polygon':\n            if (callback(Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"a\" /* feature */])(geometry, properties, {bbox: bbox, id: id}), featureIndex, 0) === false) return false;\n            return;\n        }\n\n        var geomType;\n\n        // Callback for multi-geometry\n        switch (type) {\n        case 'MultiPoint':\n            geomType = 'Point';\n            break;\n        case 'MultiLineString':\n            geomType = 'LineString';\n            break;\n        case 'MultiPolygon':\n            geomType = 'Polygon';\n            break;\n        }\n\n        for (var multiFeatureIndex = 0; multiFeatureIndex < geometry.coordinates.length; multiFeatureIndex++) {\n            var coordinate = geometry.coordinates[multiFeatureIndex];\n            var geom = {\n                type: geomType,\n                coordinates: coordinate\n            };\n            if (callback(Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"a\" /* feature */])(geom, properties), featureIndex, multiFeatureIndex) === false) return false;\n        }\n    });\n}\n\n/**\n * Callback for flattenReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback flattenReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n */\n\n/**\n * Reduce flattened features in any GeoJSON object, similar to Array.reduce().\n *\n * @name flattenReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentFeature, featureIndex, multiFeatureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.multiPoint([[40, 30], [36, 53]], {hello: 'world'})\n * ]);\n *\n * turf.flattenReduce(features, function (previousValue, currentFeature, featureIndex, multiFeatureIndex) {\n *   //=previousValue\n *   //=currentFeature\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   return currentFeature\n * });\n */\nfunction flattenReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    flattenEach(geojson, function (currentFeature, featureIndex, multiFeatureIndex) {\n        if (featureIndex === 0 && multiFeatureIndex === 0 && initialValue === undefined) previousValue = currentFeature;\n        else previousValue = callback(previousValue, currentFeature, featureIndex, multiFeatureIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Callback for segmentEach\n *\n * @callback segmentEachCallback\n * @param {Feature<LineString>} currentSegment The current Segment being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n * @param {number} segmentIndex The current index of the Segment being processed.\n * @returns {void}\n */\n\n/**\n * Iterate over 2-vertex line segment in any GeoJSON object, similar to Array.forEach()\n * (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON\n * @param {Function} callback a method that takes (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex)\n * @returns {void}\n * @example\n * var polygon = turf.polygon([[[-50, 5], [-40, -10], [-50, -10], [-40, 5], [-50, 5]]]);\n *\n * // Iterate over GeoJSON by 2-vertex segments\n * turf.segmentEach(polygon, function (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n *   //=currentSegment\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   //=segmentIndex\n * });\n *\n * // Calculate the total number of segments\n * var total = 0;\n * turf.segmentEach(polygon, function () {\n *     total++;\n * });\n */\nfunction segmentEach(geojson, callback) {\n    flattenEach(geojson, function (feature$$1, featureIndex, multiFeatureIndex) {\n        var segmentIndex = 0;\n\n        // Exclude null Geometries\n        if (!feature$$1.geometry) return;\n        // (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n        var type = feature$$1.geometry.type;\n        if (type === 'Point' || type === 'MultiPoint') return;\n\n        // Generate 2-vertex line segments\n        var previousCoords;\n        if (coordEach(feature$$1, function (currentCoord, coordIndex, featureIndexCoord, mutliPartIndexCoord, geometryIndex) {\n            // Simulating a meta.coordReduce() since `reduce` operations cannot be stopped by returning `false`\n            if (previousCoords === undefined) {\n                previousCoords = currentCoord;\n                return;\n            }\n            var currentSegment = Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"d\" /* lineString */])([previousCoords, currentCoord], feature$$1.properties);\n            if (callback(currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) === false) return false;\n            segmentIndex++;\n            previousCoords = currentCoord;\n        }) === false) return false;\n    });\n}\n\n/**\n * Callback for segmentReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback segmentReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature<LineString>} currentSegment The current Segment being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n * @param {number} segmentIndex The current index of the Segment being processed.\n */\n\n/**\n * Reduce 2-vertex line segment in any GeoJSON object, similar to Array.reduce()\n * (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON\n * @param {Function} callback a method that takes (previousValue, currentSegment, currentIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {void}\n * @example\n * var polygon = turf.polygon([[[-50, 5], [-40, -10], [-50, -10], [-40, 5], [-50, 5]]]);\n *\n * // Iterate over GeoJSON by 2-vertex segments\n * turf.segmentReduce(polygon, function (previousSegment, currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n *   //= previousSegment\n *   //= currentSegment\n *   //= featureIndex\n *   //= multiFeatureIndex\n *   //= geometryIndex\n *   //= segmentInex\n *   return currentSegment\n * });\n *\n * // Calculate the total number of segments\n * var initialValue = 0\n * var total = turf.segmentReduce(polygon, function (previousValue) {\n *     previousValue++;\n *     return previousValue;\n * }, initialValue);\n */\nfunction segmentReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    var started = false;\n    segmentEach(geojson, function (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n        if (started === false && initialValue === undefined) previousValue = currentSegment;\n        else previousValue = callback(previousValue, currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex);\n        started = true;\n    });\n    return previousValue;\n}\n\n/**\n * Callback for lineEach\n *\n * @callback lineEachCallback\n * @param {Feature<LineString>} currentLine The current LineString|LinearRing being processed\n * @param {number} featureIndex The current index of the Feature being processed\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed\n * @param {number} geometryIndex The current index of the Geometry being processed\n */\n\n/**\n * Iterate over line or ring coordinates in LineString, Polygon, MultiLineString, MultiPolygon Features or Geometries,\n * similar to Array.forEach.\n *\n * @name lineEach\n * @param {Geometry|Feature<LineString|Polygon|MultiLineString|MultiPolygon>} geojson object\n * @param {Function} callback a method that takes (currentLine, featureIndex, multiFeatureIndex, geometryIndex)\n * @example\n * var multiLine = turf.multiLineString([\n *   [[26, 37], [35, 45]],\n *   [[36, 53], [38, 50], [41, 55]]\n * ]);\n *\n * turf.lineEach(multiLine, function (currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentLine\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction lineEach(geojson, callback) {\n    // validation\n    if (!geojson) throw new Error('geojson is required');\n\n    flattenEach(geojson, function (feature$$1, featureIndex, multiFeatureIndex) {\n        if (feature$$1.geometry === null) return;\n        var type = feature$$1.geometry.type;\n        var coords = feature$$1.geometry.coordinates;\n        switch (type) {\n        case 'LineString':\n            if (callback(feature$$1, featureIndex, multiFeatureIndex, 0, 0) === false) return false;\n            break;\n        case 'Polygon':\n            for (var geometryIndex = 0; geometryIndex < coords.length; geometryIndex++) {\n                if (callback(Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"d\" /* lineString */])(coords[geometryIndex], feature$$1.properties), featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n            }\n            break;\n        }\n    });\n}\n\n/**\n * Callback for lineReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback lineReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature<LineString>} currentLine The current LineString|LinearRing being processed.\n * @param {number} featureIndex The current index of the Feature being processed\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed\n * @param {number} geometryIndex The current index of the Geometry being processed\n */\n\n/**\n * Reduce features in any GeoJSON object, similar to Array.reduce().\n *\n * @name lineReduce\n * @param {Geometry|Feature<LineString|Polygon|MultiLineString|MultiPolygon>} geojson object\n * @param {Function} callback a method that takes (previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var multiPoly = turf.multiPolygon([\n *   turf.polygon([[[12,48],[2,41],[24,38],[12,48]], [[9,44],[13,41],[13,45],[9,44]]]),\n *   turf.polygon([[[5, 5], [0, 0], [2, 2], [4, 4], [5, 5]]])\n * ]);\n *\n * turf.lineReduce(multiPoly, function (previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=previousValue\n *   //=currentLine\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   return currentLine\n * });\n */\nfunction lineReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    lineEach(geojson, function (currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentLine;\n        else previousValue = callback(previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Finds a particular 2-vertex LineString Segment from a GeoJSON using `@turf/meta` indexes.\n *\n * Negative indexes are permitted.\n * Point & MultiPoint will always return null.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson Any GeoJSON Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.featureIndex=0] Feature Index\n * @param {number} [options.multiFeatureIndex=0] Multi-Feature Index\n * @param {number} [options.geometryIndex=0] Geometry Index\n * @param {number} [options.segmentIndex=0] Segment Index\n * @param {Object} [options.properties={}] Translate Properties to output LineString\n * @param {BBox} [options.bbox={}] Translate BBox to output LineString\n * @param {number|string} [options.id={}] Translate Id to output LineString\n * @returns {Feature<LineString>} 2-vertex GeoJSON Feature LineString\n * @example\n * var multiLine = turf.multiLineString([\n *     [[10, 10], [50, 30], [30, 40]],\n *     [[-10, -10], [-50, -30], [-30, -40]]\n * ]);\n *\n * // First Segment (defaults are 0)\n * turf.findSegment(multiLine);\n * // => Feature<LineString<[[10, 10], [50, 30]]>>\n *\n * // First Segment of 2nd Multi Feature\n * turf.findSegment(multiLine, {multiFeatureIndex: 1});\n * // => Feature<LineString<[[-10, -10], [-50, -30]]>>\n *\n * // Last Segment of Last Multi Feature\n * turf.findSegment(multiLine, {multiFeatureIndex: -1, segmentIndex: -1});\n * // => Feature<LineString<[[-50, -30], [-30, -40]]>>\n */\nfunction findSegment(geojson, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"c\" /* isObject */])(options)) throw new Error('options is invalid');\n    var featureIndex = options.featureIndex || 0;\n    var multiFeatureIndex = options.multiFeatureIndex || 0;\n    var geometryIndex = options.geometryIndex || 0;\n    var segmentIndex = options.segmentIndex || 0;\n\n    // Find FeatureIndex\n    var properties = options.properties;\n    var geometry;\n\n    switch (geojson.type) {\n    case 'FeatureCollection':\n        if (featureIndex < 0) featureIndex = geojson.features.length + featureIndex;\n        properties = properties || geojson.features[featureIndex].properties;\n        geometry = geojson.features[featureIndex].geometry;\n        break;\n    case 'Feature':\n        properties = properties || geojson.properties;\n        geometry = geojson.geometry;\n        break;\n    case 'Point':\n    case 'MultiPoint':\n        return null;\n    case 'LineString':\n    case 'Polygon':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n        geometry = geojson;\n        break;\n    default:\n        throw new Error('geojson is invalid');\n    }\n\n    // Find SegmentIndex\n    if (geometry === null) return null;\n    var coords = geometry.coordinates;\n    switch (geometry.type) {\n    case 'Point':\n    case 'MultiPoint':\n        return null;\n    case 'LineString':\n        if (segmentIndex < 0) segmentIndex = coords.length + segmentIndex - 1;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"d\" /* lineString */])([coords[segmentIndex], coords[segmentIndex + 1]], properties, options);\n    case 'Polygon':\n        if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n        if (segmentIndex < 0) segmentIndex = coords[geometryIndex].length + segmentIndex - 1;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"d\" /* lineString */])([coords[geometryIndex][segmentIndex], coords[geometryIndex][segmentIndex + 1]], properties, options);\n    case 'MultiLineString':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (segmentIndex < 0) segmentIndex = coords[multiFeatureIndex].length + segmentIndex - 1;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"d\" /* lineString */])([coords[multiFeatureIndex][segmentIndex], coords[multiFeatureIndex][segmentIndex + 1]], properties, options);\n    case 'MultiPolygon':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (geometryIndex < 0) geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n        if (segmentIndex < 0) segmentIndex = coords[multiFeatureIndex][geometryIndex].length - segmentIndex - 1;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"d\" /* lineString */])([coords[multiFeatureIndex][geometryIndex][segmentIndex], coords[multiFeatureIndex][geometryIndex][segmentIndex + 1]], properties, options);\n    }\n    throw new Error('geojson is invalid');\n}\n\n/**\n * Finds a particular Point from a GeoJSON using `@turf/meta` indexes.\n *\n * Negative indexes are permitted.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson Any GeoJSON Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.featureIndex=0] Feature Index\n * @param {number} [options.multiFeatureIndex=0] Multi-Feature Index\n * @param {number} [options.geometryIndex=0] Geometry Index\n * @param {number} [options.coordIndex=0] Coord Index\n * @param {Object} [options.properties={}] Translate Properties to output Point\n * @param {BBox} [options.bbox={}] Translate BBox to output Point\n * @param {number|string} [options.id={}] Translate Id to output Point\n * @returns {Feature<Point>} 2-vertex GeoJSON Feature Point\n * @example\n * var multiLine = turf.multiLineString([\n *     [[10, 10], [50, 30], [30, 40]],\n *     [[-10, -10], [-50, -30], [-30, -40]]\n * ]);\n *\n * // First Segment (defaults are 0)\n * turf.findPoint(multiLine);\n * // => Feature<Point<[10, 10]>>\n *\n * // First Segment of the 2nd Multi-Feature\n * turf.findPoint(multiLine, {multiFeatureIndex: 1});\n * // => Feature<Point<[-10, -10]>>\n *\n * // Last Segment of last Multi-Feature\n * turf.findPoint(multiLine, {multiFeatureIndex: -1, coordIndex: -1});\n * // => Feature<Point<[-30, -40]>>\n */\nfunction findPoint(geojson, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"c\" /* isObject */])(options)) throw new Error('options is invalid');\n    var featureIndex = options.featureIndex || 0;\n    var multiFeatureIndex = options.multiFeatureIndex || 0;\n    var geometryIndex = options.geometryIndex || 0;\n    var coordIndex = options.coordIndex || 0;\n\n    // Find FeatureIndex\n    var properties = options.properties;\n    var geometry;\n\n    switch (geojson.type) {\n    case 'FeatureCollection':\n        if (featureIndex < 0) featureIndex = geojson.features.length + featureIndex;\n        properties = properties || geojson.features[featureIndex].properties;\n        geometry = geojson.features[featureIndex].geometry;\n        break;\n    case 'Feature':\n        properties = properties || geojson.properties;\n        geometry = geojson.geometry;\n        break;\n    case 'Point':\n    case 'MultiPoint':\n        return null;\n    case 'LineString':\n    case 'Polygon':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n        geometry = geojson;\n        break;\n    default:\n        throw new Error('geojson is invalid');\n    }\n\n    // Find Coord Index\n    if (geometry === null) return null;\n    var coords = geometry.coordinates;\n    switch (geometry.type) {\n    case 'Point':\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])(coords, properties, options);\n    case 'MultiPoint':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])(coords[multiFeatureIndex], properties, options);\n    case 'LineString':\n        if (coordIndex < 0) coordIndex = coords.length + coordIndex;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])(coords[coordIndex], properties, options);\n    case 'Polygon':\n        if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n        if (coordIndex < 0) coordIndex = coords[geometryIndex].length + coordIndex;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])(coords[geometryIndex][coordIndex], properties, options);\n    case 'MultiLineString':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (coordIndex < 0) coordIndex = coords[multiFeatureIndex].length + coordIndex;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])(coords[multiFeatureIndex][coordIndex], properties, options);\n    case 'MultiPolygon':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (geometryIndex < 0) geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n        if (coordIndex < 0) coordIndex = coords[multiFeatureIndex][geometryIndex].length - coordIndex;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])(coords[multiFeatureIndex][geometryIndex][coordIndex], properties, options);\n    }\n    throw new Error('geojson is invalid');\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9tZXRhL21haW4uZXMuanM/ZTc3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZWF0dXJlLCBpc09iamVjdCwgbGluZVN0cmluZywgcG9pbnQgfSBmcm9tICdAdHVyZi9oZWxwZXJzJztcblxuLyoqXG4gKiBDYWxsYmFjayBmb3IgY29vcmRFYWNoXG4gKlxuICogQGNhbGxiYWNrIGNvb3JkRWFjaENhbGxiYWNrXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGN1cnJlbnRDb29yZCBUaGUgY3VycmVudCBjb29yZGluYXRlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjb29yZEluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBjb29yZGluYXRlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmZWF0dXJlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IG11bHRpRmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBNdWx0aS1GZWF0dXJlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBnZW9tZXRyeUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBHZW9tZXRyeSBiZWluZyBwcm9jZXNzZWQuXG4gKi9cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgY29vcmRpbmF0ZXMgaW4gYW55IEdlb0pTT04gb2JqZWN0LCBzaW1pbGFyIHRvIEFycmF5LmZvckVhY2goKVxuICpcbiAqIEBuYW1lIGNvb3JkRWFjaFxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbnxGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAoY3VycmVudENvb3JkLCBjb29yZEluZGV4LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4KVxuICogQHBhcmFtIHtib29sZWFufSBbZXhjbHVkZVdyYXBDb29yZD1mYWxzZV0gd2hldGhlciBvciBub3QgdG8gaW5jbHVkZSB0aGUgZmluYWwgY29vcmRpbmF0ZSBvZiBMaW5lYXJSaW5ncyB0aGF0IHdyYXBzIHRoZSByaW5nIGluIGl0cyBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKFtcbiAqICAgdHVyZi5wb2ludChbMjYsIDM3XSwge1wiZm9vXCI6IFwiYmFyXCJ9KSxcbiAqICAgdHVyZi5wb2ludChbMzYsIDUzXSwge1wiaGVsbG9cIjogXCJ3b3JsZFwifSlcbiAqIF0pO1xuICpcbiAqIHR1cmYuY29vcmRFYWNoKGZlYXR1cmVzLCBmdW5jdGlvbiAoY3VycmVudENvb3JkLCBjb29yZEluZGV4LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4KSB7XG4gKiAgIC8vPWN1cnJlbnRDb29yZFxuICogICAvLz1jb29yZEluZGV4XG4gKiAgIC8vPWZlYXR1cmVJbmRleFxuICogICAvLz1tdWx0aUZlYXR1cmVJbmRleFxuICogICAvLz1nZW9tZXRyeUluZGV4XG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gY29vcmRFYWNoKGdlb2pzb24sIGNhbGxiYWNrLCBleGNsdWRlV3JhcENvb3JkKSB7XG4gICAgLy8gSGFuZGxlcyBudWxsIEdlb21ldHJ5IC0tIFNraXBzIHRoaXMgR2VvSlNPTlxuICAgIGlmIChnZW9qc29uID09PSBudWxsKSByZXR1cm47XG4gICAgdmFyIGosIGssIGwsIGdlb21ldHJ5LCBzdG9wRywgY29vcmRzLFxuICAgICAgICBnZW9tZXRyeU1heWJlQ29sbGVjdGlvbixcbiAgICAgICAgd3JhcFNocmluayA9IDAsXG4gICAgICAgIGNvb3JkSW5kZXggPSAwLFxuICAgICAgICBpc0dlb21ldHJ5Q29sbGVjdGlvbixcbiAgICAgICAgdHlwZSA9IGdlb2pzb24udHlwZSxcbiAgICAgICAgaXNGZWF0dXJlQ29sbGVjdGlvbiA9IHR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICAgIGlzRmVhdHVyZSA9IHR5cGUgPT09ICdGZWF0dXJlJyxcbiAgICAgICAgc3RvcCA9IGlzRmVhdHVyZUNvbGxlY3Rpb24gPyBnZW9qc29uLmZlYXR1cmVzLmxlbmd0aCA6IDE7XG5cbiAgICAvLyBUaGlzIGxvZ2ljIG1heSBsb29rIGEgbGl0dGxlIHdlaXJkLiBUaGUgcmVhc29uIHdoeSBpdCBpcyB0aGF0IHdheVxuICAgIC8vIGlzIGJlY2F1c2UgaXQncyB0cnlpbmcgdG8gYmUgZmFzdC4gR2VvSlNPTiBzdXBwb3J0cyBtdWx0aXBsZSBraW5kc1xuICAgIC8vIG9mIG9iamVjdHMgYXQgaXRzIHJvb3Q6IEZlYXR1cmVDb2xsZWN0aW9uLCBGZWF0dXJlcywgR2VvbWV0cmllcy5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGhhcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgaGFuZGxpbmcgYWxsIG9mIHRoZW0sIGFuZCB0aGF0XG4gICAgLy8gbWVhbnMgdGhhdCBzb21lIG9mIHRoZSBgZm9yYCBsb29wcyB5b3Ugc2VlIGJlbG93IGFjdHVhbGx5IGp1c3QgZG9uJ3QgYXBwbHlcbiAgICAvLyB0byBjZXJ0YWluIGlucHV0cy4gRm9yIGluc3RhbmNlLCBpZiB5b3UgZ2l2ZSB0aGlzIGp1c3QgYVxuICAgIC8vIFBvaW50IGdlb21ldHJ5LCB0aGVuIGJvdGggbG9vcHMgYXJlIHNob3J0LWNpcmN1aXRlZCBhbmQgYWxsIHdlIGRvXG4gICAgLy8gaXMgZ3JhZHVhbGx5IHJlbmFtZSB0aGUgaW5wdXQgdW50aWwgaXQncyBjYWxsZWQgJ2dlb21ldHJ5Jy5cbiAgICAvL1xuICAgIC8vIFRoaXMgYWxzbyBhaW1zIHRvIGFsbG9jYXRlIGFzIGZldyByZXNvdXJjZXMgYXMgcG9zc2libGU6IGp1c3QgYVxuICAgIC8vIGZldyBudW1iZXJzIGFuZCBib29sZWFucywgcmF0aGVyIHRoYW4gYW55IHRlbXBvcmFyeSBhcnJheXMgYXMgd291bGRcbiAgICAvLyBiZSByZXF1aXJlZCB3aXRoIHRoZSBub3JtYWxpemF0aW9uIGFwcHJvYWNoLlxuICAgIGZvciAodmFyIGZlYXR1cmVJbmRleCA9IDA7IGZlYXR1cmVJbmRleCA8IHN0b3A7IGZlYXR1cmVJbmRleCsrKSB7XG4gICAgICAgIGdlb21ldHJ5TWF5YmVDb2xsZWN0aW9uID0gKGlzRmVhdHVyZUNvbGxlY3Rpb24gPyBnZW9qc29uLmZlYXR1cmVzW2ZlYXR1cmVJbmRleF0uZ2VvbWV0cnkgOlxuICAgICAgICAgICAgKGlzRmVhdHVyZSA/IGdlb2pzb24uZ2VvbWV0cnkgOiBnZW9qc29uKSk7XG4gICAgICAgIGlzR2VvbWV0cnlDb2xsZWN0aW9uID0gKGdlb21ldHJ5TWF5YmVDb2xsZWN0aW9uKSA/IGdlb21ldHJ5TWF5YmVDb2xsZWN0aW9uLnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nIDogZmFsc2U7XG4gICAgICAgIHN0b3BHID0gaXNHZW9tZXRyeUNvbGxlY3Rpb24gPyBnZW9tZXRyeU1heWJlQ29sbGVjdGlvbi5nZW9tZXRyaWVzLmxlbmd0aCA6IDE7XG5cbiAgICAgICAgZm9yICh2YXIgZ2VvbUluZGV4ID0gMDsgZ2VvbUluZGV4IDwgc3RvcEc7IGdlb21JbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgbXVsdGlGZWF0dXJlSW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5SW5kZXggPSAwO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBpc0dlb21ldHJ5Q29sbGVjdGlvbiA/XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlNYXliZUNvbGxlY3Rpb24uZ2VvbWV0cmllc1tnZW9tSW5kZXhdIDogZ2VvbWV0cnlNYXliZUNvbGxlY3Rpb247XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZXMgbnVsbCBHZW9tZXRyeSAtLSBTa2lwcyB0aGlzIGdlb21ldHJ5XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkgPT09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29vcmRzID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgICAgICAgICB2YXIgZ2VvbVR5cGUgPSBnZW9tZXRyeS50eXBlO1xuXG4gICAgICAgICAgICB3cmFwU2hyaW5rID0gKGV4Y2x1ZGVXcmFwQ29vcmQgJiYgKGdlb21UeXBlID09PSAnUG9seWdvbicgfHwgZ2VvbVR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSkgPyAxIDogMDtcblxuICAgICAgICAgICAgc3dpdGNoIChnZW9tVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBudWxsOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUG9pbnQnOlxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhjb29yZHMsIGNvb3JkSW5kZXgsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgpID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvb3JkSW5kZXgrKztcbiAgICAgICAgICAgICAgICBtdWx0aUZlYXR1cmVJbmRleCsrO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICAgICAgICBjYXNlICdNdWx0aVBvaW50JzpcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29vcmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhjb29yZHNbal0sIGNvb3JkSW5kZXgsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgpID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjb29yZEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW9tVHlwZSA9PT0gJ011bHRpUG9pbnQnKSBtdWx0aUZlYXR1cmVJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2VvbVR5cGUgPT09ICdMaW5lU3RyaW5nJykgbXVsdGlGZWF0dXJlSW5kZXgrKztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29vcmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBjb29yZHNbal0ubGVuZ3RoIC0gd3JhcFNocmluazsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soY29vcmRzW2pdW2tdLCBjb29yZEluZGV4LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4KSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbVR5cGUgPT09ICdNdWx0aUxpbmVTdHJpbmcnKSBtdWx0aUZlYXR1cmVJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbVR5cGUgPT09ICdQb2x5Z29uJykgZ2VvbWV0cnlJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2VvbVR5cGUgPT09ICdQb2x5Z29uJykgbXVsdGlGZWF0dXJlSW5kZXgrKztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNvb3Jkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbVR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSBnZW9tZXRyeUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IGNvb3Jkc1tqXS5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsID0gMDsgbCA8IGNvb3Jkc1tqXVtrXS5sZW5ndGggLSB3cmFwU2hyaW5rOyBsKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soY29vcmRzW2pdW2tdW2xdLCBjb29yZEluZGV4LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4KSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeUluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbXVsdGlGZWF0dXJlSW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdHZW9tZXRyeUNvbGxlY3Rpb24nOlxuICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBnZW9tZXRyeS5nZW9tZXRyaWVzLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29vcmRFYWNoKGdlb21ldHJ5Lmdlb21ldHJpZXNbal0sIGNhbGxiYWNrLCBleGNsdWRlV3JhcENvb3JkKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIEdlb21ldHJ5IFR5cGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxsYmFjayBmb3IgY29vcmRSZWR1Y2VcbiAqXG4gKiBUaGUgZmlyc3QgdGltZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgdmFsdWVzIHByb3ZpZGVkIGFzIGFyZ3VtZW50cyBkZXBlbmRcbiAqIG9uIHdoZXRoZXIgdGhlIHJlZHVjZSBtZXRob2QgaGFzIGFuIGluaXRpYWxWYWx1ZSBhcmd1bWVudC5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgcHJvdmlkZWQgdG8gdGhlIHJlZHVjZSBtZXRob2Q6XG4gKiAgLSBUaGUgcHJldmlvdXNWYWx1ZSBhcmd1bWVudCBpcyBpbml0aWFsVmFsdWUuXG4gKiAgLSBUaGUgY3VycmVudFZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgZWxlbWVudCBwcmVzZW50IGluIHRoZSBhcnJheS5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgbm90IHByb3ZpZGVkOlxuICogIC0gVGhlIHByZXZpb3VzVmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICogIC0gVGhlIGN1cnJlbnRWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIHNlY29uZCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICpcbiAqIEBjYWxsYmFjayBjb29yZFJlZHVjZUNhbGxiYWNrXG4gKiBAcGFyYW0geyp9IHByZXZpb3VzVmFsdWUgVGhlIGFjY3VtdWxhdGVkIHZhbHVlIHByZXZpb3VzbHkgcmV0dXJuZWQgaW4gdGhlIGxhc3QgaW52b2NhdGlvblxuICogb2YgdGhlIGNhbGxiYWNrLCBvciBpbml0aWFsVmFsdWUsIGlmIHN1cHBsaWVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjdXJyZW50Q29vcmQgVGhlIGN1cnJlbnQgY29vcmRpbmF0ZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gY29vcmRJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgY29vcmRpbmF0ZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBTdGFydHMgYXQgaW5kZXggMCwgaWYgYW4gaW5pdGlhbFZhbHVlIGlzIHByb3ZpZGVkLCBhbmQgYXQgaW5kZXggMSBvdGhlcndpc2UuXG4gKiBAcGFyYW0ge251bWJlcn0gZmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtdWx0aUZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgTXVsdGktRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZ2VvbWV0cnlJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgR2VvbWV0cnkgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogUmVkdWNlIGNvb3JkaW5hdGVzIGluIGFueSBHZW9KU09OIG9iamVjdCwgc2ltaWxhciB0byBBcnJheS5yZWR1Y2UoKVxuICpcbiAqIEBuYW1lIGNvb3JkUmVkdWNlXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEdlb21ldHJ5fEZlYXR1cmV9IGdlb2pzb24gYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhIG1ldGhvZCB0aGF0IHRha2VzIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50Q29vcmQsIGNvb3JkSW5kZXgpXG4gKiBAcGFyYW0geyp9IFtpbml0aWFsVmFsdWVdIFZhbHVlIHRvIHVzZSBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIGZpcnN0IGNhbGwgb2YgdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtIHtib29sZWFufSBbZXhjbHVkZVdyYXBDb29yZD1mYWxzZV0gd2hldGhlciBvciBub3QgdG8gaW5jbHVkZSB0aGUgZmluYWwgY29vcmRpbmF0ZSBvZiBMaW5lYXJSaW5ncyB0aGF0IHdyYXBzIHRoZSByaW5nIGluIGl0cyBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoYXQgcmVzdWx0cyBmcm9tIHRoZSByZWR1Y3Rpb24uXG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihbXG4gKiAgIHR1cmYucG9pbnQoWzI2LCAzN10sIHtcImZvb1wiOiBcImJhclwifSksXG4gKiAgIHR1cmYucG9pbnQoWzM2LCA1M10sIHtcImhlbGxvXCI6IFwid29ybGRcIn0pXG4gKiBdKTtcbiAqXG4gKiB0dXJmLmNvb3JkUmVkdWNlKGZlYXR1cmVzLCBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgY3VycmVudENvb3JkLCBjb29yZEluZGV4LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4KSB7XG4gKiAgIC8vPXByZXZpb3VzVmFsdWVcbiAqICAgLy89Y3VycmVudENvb3JkXG4gKiAgIC8vPWNvb3JkSW5kZXhcbiAqICAgLy89ZmVhdHVyZUluZGV4XG4gKiAgIC8vPW11bHRpRmVhdHVyZUluZGV4XG4gKiAgIC8vPWdlb21ldHJ5SW5kZXhcbiAqICAgcmV0dXJuIGN1cnJlbnRDb29yZDtcbiAqIH0pO1xuICovXG5mdW5jdGlvbiBjb29yZFJlZHVjZShnZW9qc29uLCBjYWxsYmFjaywgaW5pdGlhbFZhbHVlLCBleGNsdWRlV3JhcENvb3JkKSB7XG4gICAgdmFyIHByZXZpb3VzVmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgY29vcmRFYWNoKGdlb2pzb24sIGZ1bmN0aW9uIChjdXJyZW50Q29vcmQsIGNvb3JkSW5kZXgsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgpIHtcbiAgICAgICAgaWYgKGNvb3JkSW5kZXggPT09IDAgJiYgaW5pdGlhbFZhbHVlID09PSB1bmRlZmluZWQpIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50Q29vcmQ7XG4gICAgICAgIGVsc2UgcHJldmlvdXNWYWx1ZSA9IGNhbGxiYWNrKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRDb29yZCwgY29vcmRJbmRleCwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCwgZ2VvbWV0cnlJbmRleCk7XG4gICAgfSwgZXhjbHVkZVdyYXBDb29yZCk7XG4gICAgcmV0dXJuIHByZXZpb3VzVmFsdWU7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIHByb3BFYWNoXG4gKlxuICogQGNhbGxiYWNrIHByb3BFYWNoQ2FsbGJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdXJyZW50UHJvcGVydGllcyBUaGUgY3VycmVudCBQcm9wZXJ0aWVzIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmZWF0dXJlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIHByb3BlcnRpZXMgaW4gYW55IEdlb0pTT04gb2JqZWN0LCBzaW1pbGFyIHRvIEFycmF5LmZvckVhY2goKVxuICpcbiAqIEBuYW1lIHByb3BFYWNoXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV9IGdlb2pzb24gYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhIG1ldGhvZCB0aGF0IHRha2VzIChjdXJyZW50UHJvcGVydGllcywgZmVhdHVyZUluZGV4KVxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihbXG4gKiAgICAgdHVyZi5wb2ludChbMjYsIDM3XSwge2ZvbzogJ2Jhcid9KSxcbiAqICAgICB0dXJmLnBvaW50KFszNiwgNTNdLCB7aGVsbG86ICd3b3JsZCd9KVxuICogXSk7XG4gKlxuICogdHVyZi5wcm9wRWFjaChmZWF0dXJlcywgZnVuY3Rpb24gKGN1cnJlbnRQcm9wZXJ0aWVzLCBmZWF0dXJlSW5kZXgpIHtcbiAqICAgLy89Y3VycmVudFByb3BlcnRpZXNcbiAqICAgLy89ZmVhdHVyZUluZGV4XG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gcHJvcEVhY2goZ2VvanNvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgaTtcbiAgICBzd2l0Y2ggKGdlb2pzb24udHlwZSkge1xuICAgIGNhc2UgJ0ZlYXR1cmVDb2xsZWN0aW9uJzpcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGdlb2pzb24uZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayhnZW9qc29uLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMsIGkpID09PSBmYWxzZSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRmVhdHVyZSc6XG4gICAgICAgIGNhbGxiYWNrKGdlb2pzb24ucHJvcGVydGllcywgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbn1cblxuXG4vKipcbiAqIENhbGxiYWNrIGZvciBwcm9wUmVkdWNlXG4gKlxuICogVGhlIGZpcnN0IHRpbWUgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGNhbGxlZCwgdGhlIHZhbHVlcyBwcm92aWRlZCBhcyBhcmd1bWVudHMgZGVwZW5kXG4gKiBvbiB3aGV0aGVyIHRoZSByZWR1Y2UgbWV0aG9kIGhhcyBhbiBpbml0aWFsVmFsdWUgYXJndW1lbnQuXG4gKlxuICogSWYgYW4gaW5pdGlhbFZhbHVlIGlzIHByb3ZpZGVkIHRvIHRoZSByZWR1Y2UgbWV0aG9kOlxuICogIC0gVGhlIHByZXZpb3VzVmFsdWUgYXJndW1lbnQgaXMgaW5pdGlhbFZhbHVlLlxuICogIC0gVGhlIGN1cnJlbnRWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgYXJyYXkuXG4gKlxuICogSWYgYW4gaW5pdGlhbFZhbHVlIGlzIG5vdCBwcm92aWRlZDpcbiAqICAtIFRoZSBwcmV2aW91c1ZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgZWxlbWVudCBwcmVzZW50IGluIHRoZSBhcnJheS5cbiAqICAtIFRoZSBjdXJyZW50VmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBzZWNvbmQgZWxlbWVudCBwcmVzZW50IGluIHRoZSBhcnJheS5cbiAqXG4gKiBAY2FsbGJhY2sgcHJvcFJlZHVjZUNhbGxiYWNrXG4gKiBAcGFyYW0geyp9IHByZXZpb3VzVmFsdWUgVGhlIGFjY3VtdWxhdGVkIHZhbHVlIHByZXZpb3VzbHkgcmV0dXJuZWQgaW4gdGhlIGxhc3QgaW52b2NhdGlvblxuICogb2YgdGhlIGNhbGxiYWNrLCBvciBpbml0aWFsVmFsdWUsIGlmIHN1cHBsaWVkLlxuICogQHBhcmFtIHsqfSBjdXJyZW50UHJvcGVydGllcyBUaGUgY3VycmVudCBQcm9wZXJ0aWVzIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmZWF0dXJlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogUmVkdWNlIHByb3BlcnRpZXMgaW4gYW55IEdlb0pTT04gb2JqZWN0IGludG8gYSBzaW5nbGUgdmFsdWUsXG4gKiBzaW1pbGFyIHRvIGhvdyBBcnJheS5yZWR1Y2Ugd29ya3MuIEhvd2V2ZXIsIGluIHRoaXMgY2FzZSB3ZSBsYXppbHkgcnVuXG4gKiB0aGUgcmVkdWN0aW9uLCBzbyBhbiBhcnJheSBvZiBhbGwgcHJvcGVydGllcyBpcyB1bm5lY2Vzc2FyeS5cbiAqXG4gKiBAbmFtZSBwcm9wUmVkdWNlXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV9IGdlb2pzb24gYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhIG1ldGhvZCB0aGF0IHRha2VzIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50UHJvcGVydGllcywgZmVhdHVyZUluZGV4KVxuICogQHBhcmFtIHsqfSBbaW5pdGlhbFZhbHVlXSBWYWx1ZSB0byB1c2UgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBmaXJzdCBjYWxsIG9mIHRoZSBjYWxsYmFjay5cbiAqIEByZXR1cm5zIHsqfSBUaGUgdmFsdWUgdGhhdCByZXN1bHRzIGZyb20gdGhlIHJlZHVjdGlvbi5cbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKFtcbiAqICAgICB0dXJmLnBvaW50KFsyNiwgMzddLCB7Zm9vOiAnYmFyJ30pLFxuICogICAgIHR1cmYucG9pbnQoWzM2LCA1M10sIHtoZWxsbzogJ3dvcmxkJ30pXG4gKiBdKTtcbiAqXG4gKiB0dXJmLnByb3BSZWR1Y2UoZmVhdHVyZXMsIGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50UHJvcGVydGllcywgZmVhdHVyZUluZGV4KSB7XG4gKiAgIC8vPXByZXZpb3VzVmFsdWVcbiAqICAgLy89Y3VycmVudFByb3BlcnRpZXNcbiAqICAgLy89ZmVhdHVyZUluZGV4XG4gKiAgIHJldHVybiBjdXJyZW50UHJvcGVydGllc1xuICogfSk7XG4gKi9cbmZ1bmN0aW9uIHByb3BSZWR1Y2UoZ2VvanNvbiwgY2FsbGJhY2ssIGluaXRpYWxWYWx1ZSkge1xuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIHByb3BFYWNoKGdlb2pzb24sIGZ1bmN0aW9uIChjdXJyZW50UHJvcGVydGllcywgZmVhdHVyZUluZGV4KSB7XG4gICAgICAgIGlmIChmZWF0dXJlSW5kZXggPT09IDAgJiYgaW5pdGlhbFZhbHVlID09PSB1bmRlZmluZWQpIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50UHJvcGVydGllcztcbiAgICAgICAgZWxzZSBwcmV2aW91c1ZhbHVlID0gY2FsbGJhY2socHJldmlvdXNWYWx1ZSwgY3VycmVudFByb3BlcnRpZXMsIGZlYXR1cmVJbmRleCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByZXZpb3VzVmFsdWU7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIGZlYXR1cmVFYWNoXG4gKlxuICogQGNhbGxiYWNrIGZlYXR1cmVFYWNoQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RmVhdHVyZTxhbnk+fSBjdXJyZW50RmVhdHVyZSBUaGUgY3VycmVudCBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmZWF0dXJlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGZlYXR1cmVzIGluIGFueSBHZW9KU09OIG9iamVjdCwgc2ltaWxhciB0b1xuICogQXJyYXkuZm9yRWFjaC5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlRWFjaFxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbnxGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAoY3VycmVudEZlYXR1cmUsIGZlYXR1cmVJbmRleClcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW1xuICogICB0dXJmLnBvaW50KFsyNiwgMzddLCB7Zm9vOiAnYmFyJ30pLFxuICogICB0dXJmLnBvaW50KFszNiwgNTNdLCB7aGVsbG86ICd3b3JsZCd9KVxuICogXSk7XG4gKlxuICogdHVyZi5mZWF0dXJlRWFjaChmZWF0dXJlcywgZnVuY3Rpb24gKGN1cnJlbnRGZWF0dXJlLCBmZWF0dXJlSW5kZXgpIHtcbiAqICAgLy89Y3VycmVudEZlYXR1cmVcbiAqICAgLy89ZmVhdHVyZUluZGV4XG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gZmVhdHVyZUVhY2goZ2VvanNvbiwgY2FsbGJhY2spIHtcbiAgICBpZiAoZ2VvanNvbi50eXBlID09PSAnRmVhdHVyZScpIHtcbiAgICAgICAgY2FsbGJhY2soZ2VvanNvbiwgMCk7XG4gICAgfSBlbHNlIGlmIChnZW9qc29uLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9qc29uLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2soZ2VvanNvbi5mZWF0dXJlc1tpXSwgaSkgPT09IGZhbHNlKSBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxsYmFjayBmb3IgZmVhdHVyZVJlZHVjZVxuICpcbiAqIFRoZSBmaXJzdCB0aW1lIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoZSB2YWx1ZXMgcHJvdmlkZWQgYXMgYXJndW1lbnRzIGRlcGVuZFxuICogb24gd2hldGhlciB0aGUgcmVkdWNlIG1ldGhvZCBoYXMgYW4gaW5pdGlhbFZhbHVlIGFyZ3VtZW50LlxuICpcbiAqIElmIGFuIGluaXRpYWxWYWx1ZSBpcyBwcm92aWRlZCB0byB0aGUgcmVkdWNlIG1ldGhvZDpcbiAqICAtIFRoZSBwcmV2aW91c1ZhbHVlIGFyZ3VtZW50IGlzIGluaXRpYWxWYWx1ZS5cbiAqICAtIFRoZSBjdXJyZW50VmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICpcbiAqIElmIGFuIGluaXRpYWxWYWx1ZSBpcyBub3QgcHJvdmlkZWQ6XG4gKiAgLSBUaGUgcHJldmlvdXNWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgYXJyYXkuXG4gKiAgLSBUaGUgY3VycmVudFZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2Vjb25kIGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgYXJyYXkuXG4gKlxuICogQGNhbGxiYWNrIGZlYXR1cmVSZWR1Y2VDYWxsYmFja1xuICogQHBhcmFtIHsqfSBwcmV2aW91c1ZhbHVlIFRoZSBhY2N1bXVsYXRlZCB2YWx1ZSBwcmV2aW91c2x5IHJldHVybmVkIGluIHRoZSBsYXN0IGludm9jYXRpb25cbiAqIG9mIHRoZSBjYWxsYmFjaywgb3IgaW5pdGlhbFZhbHVlLCBpZiBzdXBwbGllZC5cbiAqIEBwYXJhbSB7RmVhdHVyZX0gY3VycmVudEZlYXR1cmUgVGhlIGN1cnJlbnQgRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZC5cbiAqL1xuXG4vKipcbiAqIFJlZHVjZSBmZWF0dXJlcyBpbiBhbnkgR2VvSlNPTiBvYmplY3QsIHNpbWlsYXIgdG8gQXJyYXkucmVkdWNlKCkuXG4gKlxuICogQG5hbWUgZmVhdHVyZVJlZHVjZVxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbnxGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAocHJldmlvdXNWYWx1ZSwgY3VycmVudEZlYXR1cmUsIGZlYXR1cmVJbmRleClcbiAqIEBwYXJhbSB7Kn0gW2luaXRpYWxWYWx1ZV0gVmFsdWUgdG8gdXNlIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgZmlyc3QgY2FsbCBvZiB0aGUgY2FsbGJhY2suXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoYXQgcmVzdWx0cyBmcm9tIHRoZSByZWR1Y3Rpb24uXG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihbXG4gKiAgIHR1cmYucG9pbnQoWzI2LCAzN10sIHtcImZvb1wiOiBcImJhclwifSksXG4gKiAgIHR1cmYucG9pbnQoWzM2LCA1M10sIHtcImhlbGxvXCI6IFwid29ybGRcIn0pXG4gKiBdKTtcbiAqXG4gKiB0dXJmLmZlYXR1cmVSZWR1Y2UoZmVhdHVyZXMsIGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50RmVhdHVyZSwgZmVhdHVyZUluZGV4KSB7XG4gKiAgIC8vPXByZXZpb3VzVmFsdWVcbiAqICAgLy89Y3VycmVudEZlYXR1cmVcbiAqICAgLy89ZmVhdHVyZUluZGV4XG4gKiAgIHJldHVybiBjdXJyZW50RmVhdHVyZVxuICogfSk7XG4gKi9cbmZ1bmN0aW9uIGZlYXR1cmVSZWR1Y2UoZ2VvanNvbiwgY2FsbGJhY2ssIGluaXRpYWxWYWx1ZSkge1xuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIGZlYXR1cmVFYWNoKGdlb2pzb24sIGZ1bmN0aW9uIChjdXJyZW50RmVhdHVyZSwgZmVhdHVyZUluZGV4KSB7XG4gICAgICAgIGlmIChmZWF0dXJlSW5kZXggPT09IDAgJiYgaW5pdGlhbFZhbHVlID09PSB1bmRlZmluZWQpIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50RmVhdHVyZTtcbiAgICAgICAgZWxzZSBwcmV2aW91c1ZhbHVlID0gY2FsbGJhY2socHJldmlvdXNWYWx1ZSwgY3VycmVudEZlYXR1cmUsIGZlYXR1cmVJbmRleCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByZXZpb3VzVmFsdWU7XG59XG5cbi8qKlxuICogR2V0IGFsbCBjb29yZGluYXRlcyBmcm9tIGFueSBHZW9KU09OIG9iamVjdC5cbiAqXG4gKiBAbmFtZSBjb29yZEFsbFxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbnxGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIGFueSBHZW9KU09OIG9iamVjdFxuICogQHJldHVybnMge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlIHBvc2l0aW9uIGFycmF5XG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihbXG4gKiAgIHR1cmYucG9pbnQoWzI2LCAzN10sIHtmb286ICdiYXInfSksXG4gKiAgIHR1cmYucG9pbnQoWzM2LCA1M10sIHtoZWxsbzogJ3dvcmxkJ30pXG4gKiBdKTtcbiAqXG4gKiB2YXIgY29vcmRzID0gdHVyZi5jb29yZEFsbChmZWF0dXJlcyk7XG4gKiAvLz0gW1syNiwgMzddLCBbMzYsIDUzXV1cbiAqL1xuZnVuY3Rpb24gY29vcmRBbGwoZ2VvanNvbikge1xuICAgIHZhciBjb29yZHMgPSBbXTtcbiAgICBjb29yZEVhY2goZ2VvanNvbiwgZnVuY3Rpb24gKGNvb3JkKSB7XG4gICAgICAgIGNvb3Jkcy5wdXNoKGNvb3JkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29vcmRzO1xufVxuXG4vKipcbiAqIENhbGxiYWNrIGZvciBnZW9tRWFjaFxuICpcbiAqIEBjYWxsYmFjayBnZW9tRWFjaENhbGxiYWNrXG4gKiBAcGFyYW0ge0dlb21ldHJ5fSBjdXJyZW50R2VvbWV0cnkgVGhlIGN1cnJlbnQgR2VvbWV0cnkgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IGZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge09iamVjdH0gZmVhdHVyZVByb3BlcnRpZXMgVGhlIGN1cnJlbnQgRmVhdHVyZSBQcm9wZXJ0aWVzIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmVhdHVyZUJCb3ggVGhlIGN1cnJlbnQgRmVhdHVyZSBCQm94IGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gZmVhdHVyZUlkIFRoZSBjdXJyZW50IEZlYXR1cmUgSWQgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGVhY2ggZ2VvbWV0cnkgaW4gYW55IEdlb0pTT04gb2JqZWN0LCBzaW1pbGFyIHRvIEFycmF5LmZvckVhY2goKVxuICpcbiAqIEBuYW1lIGdlb21FYWNoXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhIG1ldGhvZCB0aGF0IHRha2VzIChjdXJyZW50R2VvbWV0cnksIGZlYXR1cmVJbmRleCwgZmVhdHVyZVByb3BlcnRpZXMsIGZlYXR1cmVCQm94LCBmZWF0dXJlSWQpXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKFtcbiAqICAgICB0dXJmLnBvaW50KFsyNiwgMzddLCB7Zm9vOiAnYmFyJ30pLFxuICogICAgIHR1cmYucG9pbnQoWzM2LCA1M10sIHtoZWxsbzogJ3dvcmxkJ30pXG4gKiBdKTtcbiAqXG4gKiB0dXJmLmdlb21FYWNoKGZlYXR1cmVzLCBmdW5jdGlvbiAoY3VycmVudEdlb21ldHJ5LCBmZWF0dXJlSW5kZXgsIGZlYXR1cmVQcm9wZXJ0aWVzLCBmZWF0dXJlQkJveCwgZmVhdHVyZUlkKSB7XG4gKiAgIC8vPWN1cnJlbnRHZW9tZXRyeVxuICogICAvLz1mZWF0dXJlSW5kZXhcbiAqICAgLy89ZmVhdHVyZVByb3BlcnRpZXNcbiAqICAgLy89ZmVhdHVyZUJCb3hcbiAqICAgLy89ZmVhdHVyZUlkXG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gZ2VvbUVhY2goZ2VvanNvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgaSwgaiwgZywgZ2VvbWV0cnksIHN0b3BHLFxuICAgICAgICBnZW9tZXRyeU1heWJlQ29sbGVjdGlvbixcbiAgICAgICAgaXNHZW9tZXRyeUNvbGxlY3Rpb24sXG4gICAgICAgIGZlYXR1cmVQcm9wZXJ0aWVzLFxuICAgICAgICBmZWF0dXJlQkJveCxcbiAgICAgICAgZmVhdHVyZUlkLFxuICAgICAgICBmZWF0dXJlSW5kZXggPSAwLFxuICAgICAgICBpc0ZlYXR1cmVDb2xsZWN0aW9uID0gZ2VvanNvbi50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICBpc0ZlYXR1cmUgPSBnZW9qc29uLnR5cGUgPT09ICdGZWF0dXJlJyxcbiAgICAgICAgc3RvcCA9IGlzRmVhdHVyZUNvbGxlY3Rpb24gPyBnZW9qc29uLmZlYXR1cmVzLmxlbmd0aCA6IDE7XG5cbiAgICAvLyBUaGlzIGxvZ2ljIG1heSBsb29rIGEgbGl0dGxlIHdlaXJkLiBUaGUgcmVhc29uIHdoeSBpdCBpcyB0aGF0IHdheVxuICAgIC8vIGlzIGJlY2F1c2UgaXQncyB0cnlpbmcgdG8gYmUgZmFzdC4gR2VvSlNPTiBzdXBwb3J0cyBtdWx0aXBsZSBraW5kc1xuICAgIC8vIG9mIG9iamVjdHMgYXQgaXRzIHJvb3Q6IEZlYXR1cmVDb2xsZWN0aW9uLCBGZWF0dXJlcywgR2VvbWV0cmllcy5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGhhcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgaGFuZGxpbmcgYWxsIG9mIHRoZW0sIGFuZCB0aGF0XG4gICAgLy8gbWVhbnMgdGhhdCBzb21lIG9mIHRoZSBgZm9yYCBsb29wcyB5b3Ugc2VlIGJlbG93IGFjdHVhbGx5IGp1c3QgZG9uJ3QgYXBwbHlcbiAgICAvLyB0byBjZXJ0YWluIGlucHV0cy4gRm9yIGluc3RhbmNlLCBpZiB5b3UgZ2l2ZSB0aGlzIGp1c3QgYVxuICAgIC8vIFBvaW50IGdlb21ldHJ5LCB0aGVuIGJvdGggbG9vcHMgYXJlIHNob3J0LWNpcmN1aXRlZCBhbmQgYWxsIHdlIGRvXG4gICAgLy8gaXMgZ3JhZHVhbGx5IHJlbmFtZSB0aGUgaW5wdXQgdW50aWwgaXQncyBjYWxsZWQgJ2dlb21ldHJ5Jy5cbiAgICAvL1xuICAgIC8vIFRoaXMgYWxzbyBhaW1zIHRvIGFsbG9jYXRlIGFzIGZldyByZXNvdXJjZXMgYXMgcG9zc2libGU6IGp1c3QgYVxuICAgIC8vIGZldyBudW1iZXJzIGFuZCBib29sZWFucywgcmF0aGVyIHRoYW4gYW55IHRlbXBvcmFyeSBhcnJheXMgYXMgd291bGRcbiAgICAvLyBiZSByZXF1aXJlZCB3aXRoIHRoZSBub3JtYWxpemF0aW9uIGFwcHJvYWNoLlxuICAgIGZvciAoaSA9IDA7IGkgPCBzdG9wOyBpKyspIHtcblxuICAgICAgICBnZW9tZXRyeU1heWJlQ29sbGVjdGlvbiA9IChpc0ZlYXR1cmVDb2xsZWN0aW9uID8gZ2VvanNvbi5mZWF0dXJlc1tpXS5nZW9tZXRyeSA6XG4gICAgICAgICAgICAoaXNGZWF0dXJlID8gZ2VvanNvbi5nZW9tZXRyeSA6IGdlb2pzb24pKTtcbiAgICAgICAgZmVhdHVyZVByb3BlcnRpZXMgPSAoaXNGZWF0dXJlQ29sbGVjdGlvbiA/IGdlb2pzb24uZmVhdHVyZXNbaV0ucHJvcGVydGllcyA6XG4gICAgICAgICAgICAoaXNGZWF0dXJlID8gZ2VvanNvbi5wcm9wZXJ0aWVzIDoge30pKTtcbiAgICAgICAgZmVhdHVyZUJCb3ggPSAoaXNGZWF0dXJlQ29sbGVjdGlvbiA/IGdlb2pzb24uZmVhdHVyZXNbaV0uYmJveCA6XG4gICAgICAgICAgICAoaXNGZWF0dXJlID8gZ2VvanNvbi5iYm94IDogdW5kZWZpbmVkKSk7XG4gICAgICAgIGZlYXR1cmVJZCA9IChpc0ZlYXR1cmVDb2xsZWN0aW9uID8gZ2VvanNvbi5mZWF0dXJlc1tpXS5pZCA6XG4gICAgICAgICAgICAoaXNGZWF0dXJlID8gZ2VvanNvbi5pZCA6IHVuZGVmaW5lZCkpO1xuICAgICAgICBpc0dlb21ldHJ5Q29sbGVjdGlvbiA9IChnZW9tZXRyeU1heWJlQ29sbGVjdGlvbikgPyBnZW9tZXRyeU1heWJlQ29sbGVjdGlvbi50eXBlID09PSAnR2VvbWV0cnlDb2xsZWN0aW9uJyA6IGZhbHNlO1xuICAgICAgICBzdG9wRyA9IGlzR2VvbWV0cnlDb2xsZWN0aW9uID8gZ2VvbWV0cnlNYXliZUNvbGxlY3Rpb24uZ2VvbWV0cmllcy5sZW5ndGggOiAxO1xuXG4gICAgICAgIGZvciAoZyA9IDA7IGcgPCBzdG9wRzsgZysrKSB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IGlzR2VvbWV0cnlDb2xsZWN0aW9uID9cbiAgICAgICAgICAgICAgICBnZW9tZXRyeU1heWJlQ29sbGVjdGlvbi5nZW9tZXRyaWVzW2ddIDogZ2VvbWV0cnlNYXliZUNvbGxlY3Rpb247XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBudWxsIEdlb21ldHJ5XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sobnVsbCwgZmVhdHVyZUluZGV4LCBmZWF0dXJlUHJvcGVydGllcywgZmVhdHVyZUJCb3gsIGZlYXR1cmVJZCkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGdlb21ldHJ5LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgICAgICAgICAgY2FzZSAnTXVsdGlQb2ludCc6XG4gICAgICAgICAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgICAgICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgICAgICAgICBjYXNlICdNdWx0aVBvbHlnb24nOiB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGdlb21ldHJ5LCBmZWF0dXJlSW5kZXgsIGZlYXR1cmVQcm9wZXJ0aWVzLCBmZWF0dXJlQkJveCwgZmVhdHVyZUlkKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ0dlb21ldHJ5Q29sbGVjdGlvbic6IHtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgZ2VvbWV0cnkuZ2VvbWV0cmllcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soZ2VvbWV0cnkuZ2VvbWV0cmllc1tqXSwgZmVhdHVyZUluZGV4LCBmZWF0dXJlUHJvcGVydGllcywgZmVhdHVyZUJCb3gsIGZlYXR1cmVJZCkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gR2VvbWV0cnkgVHlwZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE9ubHkgaW5jcmVhc2UgYGZlYXR1cmVJbmRleGAgcGVyIGVhY2ggZmVhdHVyZVxuICAgICAgICBmZWF0dXJlSW5kZXgrKztcbiAgICB9XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIGdlb21SZWR1Y2VcbiAqXG4gKiBUaGUgZmlyc3QgdGltZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgdmFsdWVzIHByb3ZpZGVkIGFzIGFyZ3VtZW50cyBkZXBlbmRcbiAqIG9uIHdoZXRoZXIgdGhlIHJlZHVjZSBtZXRob2QgaGFzIGFuIGluaXRpYWxWYWx1ZSBhcmd1bWVudC5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgcHJvdmlkZWQgdG8gdGhlIHJlZHVjZSBtZXRob2Q6XG4gKiAgLSBUaGUgcHJldmlvdXNWYWx1ZSBhcmd1bWVudCBpcyBpbml0aWFsVmFsdWUuXG4gKiAgLSBUaGUgY3VycmVudFZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgZWxlbWVudCBwcmVzZW50IGluIHRoZSBhcnJheS5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgbm90IHByb3ZpZGVkOlxuICogIC0gVGhlIHByZXZpb3VzVmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICogIC0gVGhlIGN1cnJlbnRWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIHNlY29uZCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICpcbiAqIEBjYWxsYmFjayBnZW9tUmVkdWNlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gcHJldmlvdXNWYWx1ZSBUaGUgYWNjdW11bGF0ZWQgdmFsdWUgcHJldmlvdXNseSByZXR1cm5lZCBpbiB0aGUgbGFzdCBpbnZvY2F0aW9uXG4gKiBvZiB0aGUgY2FsbGJhY2ssIG9yIGluaXRpYWxWYWx1ZSwgaWYgc3VwcGxpZWQuXG4gKiBAcGFyYW0ge0dlb21ldHJ5fSBjdXJyZW50R2VvbWV0cnkgVGhlIGN1cnJlbnQgR2VvbWV0cnkgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IGZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge09iamVjdH0gZmVhdHVyZVByb3BlcnRpZXMgVGhlIGN1cnJlbnQgRmVhdHVyZSBQcm9wZXJ0aWVzIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmVhdHVyZUJCb3ggVGhlIGN1cnJlbnQgRmVhdHVyZSBCQm94IGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gZmVhdHVyZUlkIFRoZSBjdXJyZW50IEZlYXR1cmUgSWQgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogUmVkdWNlIGdlb21ldHJ5IGluIGFueSBHZW9KU09OIG9iamVjdCwgc2ltaWxhciB0byBBcnJheS5yZWR1Y2UoKS5cbiAqXG4gKiBAbmFtZSBnZW9tUmVkdWNlXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhIG1ldGhvZCB0aGF0IHRha2VzIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50R2VvbWV0cnksIGZlYXR1cmVJbmRleCwgZmVhdHVyZVByb3BlcnRpZXMsIGZlYXR1cmVCQm94LCBmZWF0dXJlSWQpXG4gKiBAcGFyYW0geyp9IFtpbml0aWFsVmFsdWVdIFZhbHVlIHRvIHVzZSBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIGZpcnN0IGNhbGwgb2YgdGhlIGNhbGxiYWNrLlxuICogQHJldHVybnMgeyp9IFRoZSB2YWx1ZSB0aGF0IHJlc3VsdHMgZnJvbSB0aGUgcmVkdWN0aW9uLlxuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW1xuICogICAgIHR1cmYucG9pbnQoWzI2LCAzN10sIHtmb286ICdiYXInfSksXG4gKiAgICAgdHVyZi5wb2ludChbMzYsIDUzXSwge2hlbGxvOiAnd29ybGQnfSlcbiAqIF0pO1xuICpcbiAqIHR1cmYuZ2VvbVJlZHVjZShmZWF0dXJlcywgZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRHZW9tZXRyeSwgZmVhdHVyZUluZGV4LCBmZWF0dXJlUHJvcGVydGllcywgZmVhdHVyZUJCb3gsIGZlYXR1cmVJZCkge1xuICogICAvLz1wcmV2aW91c1ZhbHVlXG4gKiAgIC8vPWN1cnJlbnRHZW9tZXRyeVxuICogICAvLz1mZWF0dXJlSW5kZXhcbiAqICAgLy89ZmVhdHVyZVByb3BlcnRpZXNcbiAqICAgLy89ZmVhdHVyZUJCb3hcbiAqICAgLy89ZmVhdHVyZUlkXG4gKiAgIHJldHVybiBjdXJyZW50R2VvbWV0cnlcbiAqIH0pO1xuICovXG5mdW5jdGlvbiBnZW9tUmVkdWNlKGdlb2pzb24sIGNhbGxiYWNrLCBpbml0aWFsVmFsdWUpIHtcbiAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICBnZW9tRWFjaChnZW9qc29uLCBmdW5jdGlvbiAoY3VycmVudEdlb21ldHJ5LCBmZWF0dXJlSW5kZXgsIGZlYXR1cmVQcm9wZXJ0aWVzLCBmZWF0dXJlQkJveCwgZmVhdHVyZUlkKSB7XG4gICAgICAgIGlmIChmZWF0dXJlSW5kZXggPT09IDAgJiYgaW5pdGlhbFZhbHVlID09PSB1bmRlZmluZWQpIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50R2VvbWV0cnk7XG4gICAgICAgIGVsc2UgcHJldmlvdXNWYWx1ZSA9IGNhbGxiYWNrKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRHZW9tZXRyeSwgZmVhdHVyZUluZGV4LCBmZWF0dXJlUHJvcGVydGllcywgZmVhdHVyZUJCb3gsIGZlYXR1cmVJZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByZXZpb3VzVmFsdWU7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIGZsYXR0ZW5FYWNoXG4gKlxuICogQGNhbGxiYWNrIGZsYXR0ZW5FYWNoQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RmVhdHVyZX0gY3VycmVudEZlYXR1cmUgVGhlIGN1cnJlbnQgZmxhdHRlbmVkIGZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IGZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gbXVsdGlGZWF0dXJlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIE11bHRpLUZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGZsYXR0ZW5lZCBmZWF0dXJlcyBpbiBhbnkgR2VvSlNPTiBvYmplY3QsIHNpbWlsYXIgdG9cbiAqIEFycmF5LmZvckVhY2guXG4gKlxuICogQG5hbWUgZmxhdHRlbkVhY2hcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb258RmVhdHVyZXxHZW9tZXRyeX0gZ2VvanNvbiBhbnkgR2VvSlNPTiBvYmplY3RcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGEgbWV0aG9kIHRoYXQgdGFrZXMgKGN1cnJlbnRGZWF0dXJlLCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4KVxuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW1xuICogICAgIHR1cmYucG9pbnQoWzI2LCAzN10sIHtmb286ICdiYXInfSksXG4gKiAgICAgdHVyZi5tdWx0aVBvaW50KFtbNDAsIDMwXSwgWzM2LCA1M11dLCB7aGVsbG86ICd3b3JsZCd9KVxuICogXSk7XG4gKlxuICogdHVyZi5mbGF0dGVuRWFjaChmZWF0dXJlcywgZnVuY3Rpb24gKGN1cnJlbnRGZWF0dXJlLCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4KSB7XG4gKiAgIC8vPWN1cnJlbnRGZWF0dXJlXG4gKiAgIC8vPWZlYXR1cmVJbmRleFxuICogICAvLz1tdWx0aUZlYXR1cmVJbmRleFxuICogfSk7XG4gKi9cbmZ1bmN0aW9uIGZsYXR0ZW5FYWNoKGdlb2pzb24sIGNhbGxiYWNrKSB7XG4gICAgZ2VvbUVhY2goZ2VvanNvbiwgZnVuY3Rpb24gKGdlb21ldHJ5LCBmZWF0dXJlSW5kZXgsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgICAgIC8vIENhbGxiYWNrIGZvciBzaW5nbGUgZ2VvbWV0cnlcbiAgICAgICAgdmFyIHR5cGUgPSAoZ2VvbWV0cnkgPT09IG51bGwpID8gbnVsbCA6IGdlb21ldHJ5LnR5cGU7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIG51bGw6XG4gICAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGZlYXR1cmUoZ2VvbWV0cnksIHByb3BlcnRpZXMsIHtiYm94OiBiYm94LCBpZDogaWR9KSwgZmVhdHVyZUluZGV4LCAwKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnZW9tVHlwZTtcblxuICAgICAgICAvLyBDYWxsYmFjayBmb3IgbXVsdGktZ2VvbWV0cnlcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICAgICAgZ2VvbVR5cGUgPSAnUG9pbnQnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgICAgICAgICBnZW9tVHlwZSA9ICdMaW5lU3RyaW5nJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNdWx0aVBvbHlnb24nOlxuICAgICAgICAgICAgZ2VvbVR5cGUgPSAnUG9seWdvbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIG11bHRpRmVhdHVyZUluZGV4ID0gMDsgbXVsdGlGZWF0dXJlSW5kZXggPCBnZW9tZXRyeS5jb29yZGluYXRlcy5sZW5ndGg7IG11bHRpRmVhdHVyZUluZGV4KyspIHtcbiAgICAgICAgICAgIHZhciBjb29yZGluYXRlID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXNbbXVsdGlGZWF0dXJlSW5kZXhdO1xuICAgICAgICAgICAgdmFyIGdlb20gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogZ2VvbVR5cGUsXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2soZmVhdHVyZShnZW9tLCBwcm9wZXJ0aWVzKSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDYWxsYmFjayBmb3IgZmxhdHRlblJlZHVjZVxuICpcbiAqIFRoZSBmaXJzdCB0aW1lIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoZSB2YWx1ZXMgcHJvdmlkZWQgYXMgYXJndW1lbnRzIGRlcGVuZFxuICogb24gd2hldGhlciB0aGUgcmVkdWNlIG1ldGhvZCBoYXMgYW4gaW5pdGlhbFZhbHVlIGFyZ3VtZW50LlxuICpcbiAqIElmIGFuIGluaXRpYWxWYWx1ZSBpcyBwcm92aWRlZCB0byB0aGUgcmVkdWNlIG1ldGhvZDpcbiAqICAtIFRoZSBwcmV2aW91c1ZhbHVlIGFyZ3VtZW50IGlzIGluaXRpYWxWYWx1ZS5cbiAqICAtIFRoZSBjdXJyZW50VmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICpcbiAqIElmIGFuIGluaXRpYWxWYWx1ZSBpcyBub3QgcHJvdmlkZWQ6XG4gKiAgLSBUaGUgcHJldmlvdXNWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgYXJyYXkuXG4gKiAgLSBUaGUgY3VycmVudFZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2Vjb25kIGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgYXJyYXkuXG4gKlxuICogQGNhbGxiYWNrIGZsYXR0ZW5SZWR1Y2VDYWxsYmFja1xuICogQHBhcmFtIHsqfSBwcmV2aW91c1ZhbHVlIFRoZSBhY2N1bXVsYXRlZCB2YWx1ZSBwcmV2aW91c2x5IHJldHVybmVkIGluIHRoZSBsYXN0IGludm9jYXRpb25cbiAqIG9mIHRoZSBjYWxsYmFjaywgb3IgaW5pdGlhbFZhbHVlLCBpZiBzdXBwbGllZC5cbiAqIEBwYXJhbSB7RmVhdHVyZX0gY3VycmVudEZlYXR1cmUgVGhlIGN1cnJlbnQgRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtdWx0aUZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgTXVsdGktRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKi9cblxuLyoqXG4gKiBSZWR1Y2UgZmxhdHRlbmVkIGZlYXR1cmVzIGluIGFueSBHZW9KU09OIG9iamVjdCwgc2ltaWxhciB0byBBcnJheS5yZWR1Y2UoKS5cbiAqXG4gKiBAbmFtZSBmbGF0dGVuUmVkdWNlXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhIG1ldGhvZCB0aGF0IHRha2VzIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50RmVhdHVyZSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleClcbiAqIEBwYXJhbSB7Kn0gW2luaXRpYWxWYWx1ZV0gVmFsdWUgdG8gdXNlIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgZmlyc3QgY2FsbCBvZiB0aGUgY2FsbGJhY2suXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIHRoYXQgcmVzdWx0cyBmcm9tIHRoZSByZWR1Y3Rpb24uXG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihbXG4gKiAgICAgdHVyZi5wb2ludChbMjYsIDM3XSwge2ZvbzogJ2Jhcid9KSxcbiAqICAgICB0dXJmLm11bHRpUG9pbnQoW1s0MCwgMzBdLCBbMzYsIDUzXV0sIHtoZWxsbzogJ3dvcmxkJ30pXG4gKiBdKTtcbiAqXG4gKiB0dXJmLmZsYXR0ZW5SZWR1Y2UoZmVhdHVyZXMsIGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50RmVhdHVyZSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCkge1xuICogICAvLz1wcmV2aW91c1ZhbHVlXG4gKiAgIC8vPWN1cnJlbnRGZWF0dXJlXG4gKiAgIC8vPWZlYXR1cmVJbmRleFxuICogICAvLz1tdWx0aUZlYXR1cmVJbmRleFxuICogICByZXR1cm4gY3VycmVudEZlYXR1cmVcbiAqIH0pO1xuICovXG5mdW5jdGlvbiBmbGF0dGVuUmVkdWNlKGdlb2pzb24sIGNhbGxiYWNrLCBpbml0aWFsVmFsdWUpIHtcbiAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICBmbGF0dGVuRWFjaChnZW9qc29uLCBmdW5jdGlvbiAoY3VycmVudEZlYXR1cmUsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgpIHtcbiAgICAgICAgaWYgKGZlYXR1cmVJbmRleCA9PT0gMCAmJiBtdWx0aUZlYXR1cmVJbmRleCA9PT0gMCAmJiBpbml0aWFsVmFsdWUgPT09IHVuZGVmaW5lZCkgcHJldmlvdXNWYWx1ZSA9IGN1cnJlbnRGZWF0dXJlO1xuICAgICAgICBlbHNlIHByZXZpb3VzVmFsdWUgPSBjYWxsYmFjayhwcmV2aW91c1ZhbHVlLCBjdXJyZW50RmVhdHVyZSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByZXZpb3VzVmFsdWU7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIHNlZ21lbnRFYWNoXG4gKlxuICogQGNhbGxiYWNrIHNlZ21lbnRFYWNoQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RmVhdHVyZTxMaW5lU3RyaW5nPn0gY3VycmVudFNlZ21lbnQgVGhlIGN1cnJlbnQgU2VnbWVudCBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtdWx0aUZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgTXVsdGktRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZ2VvbWV0cnlJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgR2VvbWV0cnkgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IHNlZ21lbnRJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgU2VnbWVudCBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciAyLXZlcnRleCBsaW5lIHNlZ21lbnQgaW4gYW55IEdlb0pTT04gb2JqZWN0LCBzaW1pbGFyIHRvIEFycmF5LmZvckVhY2goKVxuICogKE11bHRpKVBvaW50IGdlb21ldHJpZXMgZG8gbm90IGNvbnRhaW4gc2VnbWVudHMgdGhlcmVmb3JlIHRoZXkgYXJlIGlnbm9yZWQgZHVyaW5nIHRoaXMgb3BlcmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb258RmVhdHVyZXxHZW9tZXRyeX0gZ2VvanNvbiBhbnkgR2VvSlNPTlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAoY3VycmVudFNlZ21lbnQsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgsIHNlZ21lbnRJbmRleClcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5Z29uID0gdHVyZi5wb2x5Z29uKFtbWy01MCwgNV0sIFstNDAsIC0xMF0sIFstNTAsIC0xMF0sIFstNDAsIDVdLCBbLTUwLCA1XV1dKTtcbiAqXG4gKiAvLyBJdGVyYXRlIG92ZXIgR2VvSlNPTiBieSAyLXZlcnRleCBzZWdtZW50c1xuICogdHVyZi5zZWdtZW50RWFjaChwb2x5Z29uLCBmdW5jdGlvbiAoY3VycmVudFNlZ21lbnQsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgsIHNlZ21lbnRJbmRleCkge1xuICogICAvLz1jdXJyZW50U2VnbWVudFxuICogICAvLz1mZWF0dXJlSW5kZXhcbiAqICAgLy89bXVsdGlGZWF0dXJlSW5kZXhcbiAqICAgLy89Z2VvbWV0cnlJbmRleFxuICogICAvLz1zZWdtZW50SW5kZXhcbiAqIH0pO1xuICpcbiAqIC8vIENhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIG9mIHNlZ21lbnRzXG4gKiB2YXIgdG90YWwgPSAwO1xuICogdHVyZi5zZWdtZW50RWFjaChwb2x5Z29uLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgdG90YWwrKztcbiAqIH0pO1xuICovXG5mdW5jdGlvbiBzZWdtZW50RWFjaChnZW9qc29uLCBjYWxsYmFjaykge1xuICAgIGZsYXR0ZW5FYWNoKGdlb2pzb24sIGZ1bmN0aW9uIChmZWF0dXJlJCQxLCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4KSB7XG4gICAgICAgIHZhciBzZWdtZW50SW5kZXggPSAwO1xuXG4gICAgICAgIC8vIEV4Y2x1ZGUgbnVsbCBHZW9tZXRyaWVzXG4gICAgICAgIGlmICghZmVhdHVyZSQkMS5nZW9tZXRyeSkgcmV0dXJuO1xuICAgICAgICAvLyAoTXVsdGkpUG9pbnQgZ2VvbWV0cmllcyBkbyBub3QgY29udGFpbiBzZWdtZW50cyB0aGVyZWZvcmUgdGhleSBhcmUgaWdub3JlZCBkdXJpbmcgdGhpcyBvcGVyYXRpb24uXG4gICAgICAgIHZhciB0eXBlID0gZmVhdHVyZSQkMS5nZW9tZXRyeS50eXBlO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ1BvaW50JyB8fCB0eXBlID09PSAnTXVsdGlQb2ludCcpIHJldHVybjtcblxuICAgICAgICAvLyBHZW5lcmF0ZSAyLXZlcnRleCBsaW5lIHNlZ21lbnRzXG4gICAgICAgIHZhciBwcmV2aW91c0Nvb3JkcztcbiAgICAgICAgaWYgKGNvb3JkRWFjaChmZWF0dXJlJCQxLCBmdW5jdGlvbiAoY3VycmVudENvb3JkLCBjb29yZEluZGV4LCBmZWF0dXJlSW5kZXhDb29yZCwgbXV0bGlQYXJ0SW5kZXhDb29yZCwgZ2VvbWV0cnlJbmRleCkge1xuICAgICAgICAgICAgLy8gU2ltdWxhdGluZyBhIG1ldGEuY29vcmRSZWR1Y2UoKSBzaW5jZSBgcmVkdWNlYCBvcGVyYXRpb25zIGNhbm5vdCBiZSBzdG9wcGVkIGJ5IHJldHVybmluZyBgZmFsc2VgXG4gICAgICAgICAgICBpZiAocHJldmlvdXNDb29yZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzQ29vcmRzID0gY3VycmVudENvb3JkO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50U2VnbWVudCA9IGxpbmVTdHJpbmcoW3ByZXZpb3VzQ29vcmRzLCBjdXJyZW50Q29vcmRdLCBmZWF0dXJlJCQxLnByb3BlcnRpZXMpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGN1cnJlbnRTZWdtZW50LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4LCBzZWdtZW50SW5kZXgpID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgc2VnbWVudEluZGV4Kys7XG4gICAgICAgICAgICBwcmV2aW91c0Nvb3JkcyA9IGN1cnJlbnRDb29yZDtcbiAgICAgICAgfSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIHNlZ21lbnRSZWR1Y2VcbiAqXG4gKiBUaGUgZmlyc3QgdGltZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgdmFsdWVzIHByb3ZpZGVkIGFzIGFyZ3VtZW50cyBkZXBlbmRcbiAqIG9uIHdoZXRoZXIgdGhlIHJlZHVjZSBtZXRob2QgaGFzIGFuIGluaXRpYWxWYWx1ZSBhcmd1bWVudC5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgcHJvdmlkZWQgdG8gdGhlIHJlZHVjZSBtZXRob2Q6XG4gKiAgLSBUaGUgcHJldmlvdXNWYWx1ZSBhcmd1bWVudCBpcyBpbml0aWFsVmFsdWUuXG4gKiAgLSBUaGUgY3VycmVudFZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgZWxlbWVudCBwcmVzZW50IGluIHRoZSBhcnJheS5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgbm90IHByb3ZpZGVkOlxuICogIC0gVGhlIHByZXZpb3VzVmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICogIC0gVGhlIGN1cnJlbnRWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIHNlY29uZCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICpcbiAqIEBjYWxsYmFjayBzZWdtZW50UmVkdWNlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gcHJldmlvdXNWYWx1ZSBUaGUgYWNjdW11bGF0ZWQgdmFsdWUgcHJldmlvdXNseSByZXR1cm5lZCBpbiB0aGUgbGFzdCBpbnZvY2F0aW9uXG4gKiBvZiB0aGUgY2FsbGJhY2ssIG9yIGluaXRpYWxWYWx1ZSwgaWYgc3VwcGxpZWQuXG4gKiBAcGFyYW0ge0ZlYXR1cmU8TGluZVN0cmluZz59IGN1cnJlbnRTZWdtZW50IFRoZSBjdXJyZW50IFNlZ21lbnQgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IGZlYXR1cmVJbmRleCBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgRmVhdHVyZSBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gbXVsdGlGZWF0dXJlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIE11bHRpLUZlYXR1cmUgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IGdlb21ldHJ5SW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEdlb21ldHJ5IGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWdtZW50SW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIFNlZ21lbnQgYmVpbmcgcHJvY2Vzc2VkLlxuICovXG5cbi8qKlxuICogUmVkdWNlIDItdmVydGV4IGxpbmUgc2VnbWVudCBpbiBhbnkgR2VvSlNPTiBvYmplY3QsIHNpbWlsYXIgdG8gQXJyYXkucmVkdWNlKClcbiAqIChNdWx0aSlQb2ludCBnZW9tZXRyaWVzIGRvIG5vdCBjb250YWluIHNlZ21lbnRzIHRoZXJlZm9yZSB0aGV5IGFyZSBpZ25vcmVkIGR1cmluZyB0aGlzIG9wZXJhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gYW55IEdlb0pTT05cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGEgbWV0aG9kIHRoYXQgdGFrZXMgKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRTZWdtZW50LCBjdXJyZW50SW5kZXgpXG4gKiBAcGFyYW0geyp9IFtpbml0aWFsVmFsdWVdIFZhbHVlIHRvIHVzZSBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIGZpcnN0IGNhbGwgb2YgdGhlIGNhbGxiYWNrLlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb24gPSB0dXJmLnBvbHlnb24oW1tbLTUwLCA1XSwgWy00MCwgLTEwXSwgWy01MCwgLTEwXSwgWy00MCwgNV0sIFstNTAsIDVdXV0pO1xuICpcbiAqIC8vIEl0ZXJhdGUgb3ZlciBHZW9KU09OIGJ5IDItdmVydGV4IHNlZ21lbnRzXG4gKiB0dXJmLnNlZ21lbnRSZWR1Y2UocG9seWdvbiwgZnVuY3Rpb24gKHByZXZpb3VzU2VnbWVudCwgY3VycmVudFNlZ21lbnQsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgsIHNlZ21lbnRJbmRleCkge1xuICogICAvLz0gcHJldmlvdXNTZWdtZW50XG4gKiAgIC8vPSBjdXJyZW50U2VnbWVudFxuICogICAvLz0gZmVhdHVyZUluZGV4XG4gKiAgIC8vPSBtdWx0aUZlYXR1cmVJbmRleFxuICogICAvLz0gZ2VvbWV0cnlJbmRleFxuICogICAvLz0gc2VnbWVudEluZXhcbiAqICAgcmV0dXJuIGN1cnJlbnRTZWdtZW50XG4gKiB9KTtcbiAqXG4gKiAvLyBDYWxjdWxhdGUgdGhlIHRvdGFsIG51bWJlciBvZiBzZWdtZW50c1xuICogdmFyIGluaXRpYWxWYWx1ZSA9IDBcbiAqIHZhciB0b3RhbCA9IHR1cmYuc2VnbWVudFJlZHVjZShwb2x5Z29uLCBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSkge1xuICogICAgIHByZXZpb3VzVmFsdWUrKztcbiAqICAgICByZXR1cm4gcHJldmlvdXNWYWx1ZTtcbiAqIH0sIGluaXRpYWxWYWx1ZSk7XG4gKi9cbmZ1bmN0aW9uIHNlZ21lbnRSZWR1Y2UoZ2VvanNvbiwgY2FsbGJhY2ssIGluaXRpYWxWYWx1ZSkge1xuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIHZhciBzdGFydGVkID0gZmFsc2U7XG4gICAgc2VnbWVudEVhY2goZ2VvanNvbiwgZnVuY3Rpb24gKGN1cnJlbnRTZWdtZW50LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4LCBzZWdtZW50SW5kZXgpIHtcbiAgICAgICAgaWYgKHN0YXJ0ZWQgPT09IGZhbHNlICYmIGluaXRpYWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSBwcmV2aW91c1ZhbHVlID0gY3VycmVudFNlZ21lbnQ7XG4gICAgICAgIGVsc2UgcHJldmlvdXNWYWx1ZSA9IGNhbGxiYWNrKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRTZWdtZW50LCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4LCBzZWdtZW50SW5kZXgpO1xuICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJldmlvdXNWYWx1ZTtcbn1cblxuLyoqXG4gKiBDYWxsYmFjayBmb3IgbGluZUVhY2hcbiAqXG4gKiBAY2FsbGJhY2sgbGluZUVhY2hDYWxsYmFja1xuICogQHBhcmFtIHtGZWF0dXJlPExpbmVTdHJpbmc+fSBjdXJyZW50TGluZSBUaGUgY3VycmVudCBMaW5lU3RyaW5nfExpbmVhclJpbmcgYmVpbmcgcHJvY2Vzc2VkXG4gKiBAcGFyYW0ge251bWJlcn0gZmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZFxuICogQHBhcmFtIHtudW1iZXJ9IG11bHRpRmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBNdWx0aS1GZWF0dXJlIGJlaW5nIHByb2Nlc3NlZFxuICogQHBhcmFtIHtudW1iZXJ9IGdlb21ldHJ5SW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEdlb21ldHJ5IGJlaW5nIHByb2Nlc3NlZFxuICovXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGxpbmUgb3IgcmluZyBjb29yZGluYXRlcyBpbiBMaW5lU3RyaW5nLCBQb2x5Z29uLCBNdWx0aUxpbmVTdHJpbmcsIE11bHRpUG9seWdvbiBGZWF0dXJlcyBvciBHZW9tZXRyaWVzLFxuICogc2ltaWxhciB0byBBcnJheS5mb3JFYWNoLlxuICpcbiAqIEBuYW1lIGxpbmVFYWNoXG4gKiBAcGFyYW0ge0dlb21ldHJ5fEZlYXR1cmU8TGluZVN0cmluZ3xQb2x5Z29ufE11bHRpTGluZVN0cmluZ3xNdWx0aVBvbHlnb24+fSBnZW9qc29uIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAoY3VycmVudExpbmUsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgpXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpTGluZSA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKFtcbiAqICAgW1syNiwgMzddLCBbMzUsIDQ1XV0sXG4gKiAgIFtbMzYsIDUzXSwgWzM4LCA1MF0sIFs0MSwgNTVdXVxuICogXSk7XG4gKlxuICogdHVyZi5saW5lRWFjaChtdWx0aUxpbmUsIGZ1bmN0aW9uIChjdXJyZW50TGluZSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCwgZ2VvbWV0cnlJbmRleCkge1xuICogICAvLz1jdXJyZW50TGluZVxuICogICAvLz1mZWF0dXJlSW5kZXhcbiAqICAgLy89bXVsdGlGZWF0dXJlSW5kZXhcbiAqICAgLy89Z2VvbWV0cnlJbmRleFxuICogfSk7XG4gKi9cbmZ1bmN0aW9uIGxpbmVFYWNoKGdlb2pzb24sIGNhbGxiYWNrKSB7XG4gICAgLy8gdmFsaWRhdGlvblxuICAgIGlmICghZ2VvanNvbikgdGhyb3cgbmV3IEVycm9yKCdnZW9qc29uIGlzIHJlcXVpcmVkJyk7XG5cbiAgICBmbGF0dGVuRWFjaChnZW9qc29uLCBmdW5jdGlvbiAoZmVhdHVyZSQkMSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCkge1xuICAgICAgICBpZiAoZmVhdHVyZSQkMS5nZW9tZXRyeSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICB2YXIgdHlwZSA9IGZlYXR1cmUkJDEuZ2VvbWV0cnkudHlwZTtcbiAgICAgICAgdmFyIGNvb3JkcyA9IGZlYXR1cmUkJDEuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayhmZWF0dXJlJCQxLCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCAwLCAwKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgICAgICAgIGZvciAodmFyIGdlb21ldHJ5SW5kZXggPSAwOyBnZW9tZXRyeUluZGV4IDwgY29vcmRzLmxlbmd0aDsgZ2VvbWV0cnlJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKGxpbmVTdHJpbmcoY29vcmRzW2dlb21ldHJ5SW5kZXhdLCBmZWF0dXJlJCQxLnByb3BlcnRpZXMpLCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4KSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgZm9yIGxpbmVSZWR1Y2VcbiAqXG4gKiBUaGUgZmlyc3QgdGltZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgdmFsdWVzIHByb3ZpZGVkIGFzIGFyZ3VtZW50cyBkZXBlbmRcbiAqIG9uIHdoZXRoZXIgdGhlIHJlZHVjZSBtZXRob2QgaGFzIGFuIGluaXRpYWxWYWx1ZSBhcmd1bWVudC5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgcHJvdmlkZWQgdG8gdGhlIHJlZHVjZSBtZXRob2Q6XG4gKiAgLSBUaGUgcHJldmlvdXNWYWx1ZSBhcmd1bWVudCBpcyBpbml0aWFsVmFsdWUuXG4gKiAgLSBUaGUgY3VycmVudFZhbHVlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgZWxlbWVudCBwcmVzZW50IGluIHRoZSBhcnJheS5cbiAqXG4gKiBJZiBhbiBpbml0aWFsVmFsdWUgaXMgbm90IHByb3ZpZGVkOlxuICogIC0gVGhlIHByZXZpb3VzVmFsdWUgYXJndW1lbnQgaXMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICogIC0gVGhlIGN1cnJlbnRWYWx1ZSBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIHNlY29uZCBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGFycmF5LlxuICpcbiAqIEBjYWxsYmFjayBsaW5lUmVkdWNlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gcHJldmlvdXNWYWx1ZSBUaGUgYWNjdW11bGF0ZWQgdmFsdWUgcHJldmlvdXNseSByZXR1cm5lZCBpbiB0aGUgbGFzdCBpbnZvY2F0aW9uXG4gKiBvZiB0aGUgY2FsbGJhY2ssIG9yIGluaXRpYWxWYWx1ZSwgaWYgc3VwcGxpZWQuXG4gKiBAcGFyYW0ge0ZlYXR1cmU8TGluZVN0cmluZz59IGN1cnJlbnRMaW5lIFRoZSBjdXJyZW50IExpbmVTdHJpbmd8TGluZWFyUmluZyBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gZmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBGZWF0dXJlIGJlaW5nIHByb2Nlc3NlZFxuICogQHBhcmFtIHtudW1iZXJ9IG11bHRpRmVhdHVyZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBNdWx0aS1GZWF0dXJlIGJlaW5nIHByb2Nlc3NlZFxuICogQHBhcmFtIHtudW1iZXJ9IGdlb21ldHJ5SW5kZXggVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIEdlb21ldHJ5IGJlaW5nIHByb2Nlc3NlZFxuICovXG5cbi8qKlxuICogUmVkdWNlIGZlYXR1cmVzIGluIGFueSBHZW9KU09OIG9iamVjdCwgc2ltaWxhciB0byBBcnJheS5yZWR1Y2UoKS5cbiAqXG4gKiBAbmFtZSBsaW5lUmVkdWNlXG4gKiBAcGFyYW0ge0dlb21ldHJ5fEZlYXR1cmU8TGluZVN0cmluZ3xQb2x5Z29ufE11bHRpTGluZVN0cmluZ3xNdWx0aVBvbHlnb24+fSBnZW9qc29uIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAocHJldmlvdXNWYWx1ZSwgY3VycmVudExpbmUsIGZlYXR1cmVJbmRleCwgbXVsdGlGZWF0dXJlSW5kZXgsIGdlb21ldHJ5SW5kZXgpXG4gKiBAcGFyYW0geyp9IFtpbml0aWFsVmFsdWVdIFZhbHVlIHRvIHVzZSBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIGZpcnN0IGNhbGwgb2YgdGhlIGNhbGxiYWNrLlxuICogQHJldHVybnMgeyp9IFRoZSB2YWx1ZSB0aGF0IHJlc3VsdHMgZnJvbSB0aGUgcmVkdWN0aW9uLlxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aVBvbHkgPSB0dXJmLm11bHRpUG9seWdvbihbXG4gKiAgIHR1cmYucG9seWdvbihbW1sxMiw0OF0sWzIsNDFdLFsyNCwzOF0sWzEyLDQ4XV0sIFtbOSw0NF0sWzEzLDQxXSxbMTMsNDVdLFs5LDQ0XV1dKSxcbiAqICAgdHVyZi5wb2x5Z29uKFtbWzUsIDVdLCBbMCwgMF0sIFsyLCAyXSwgWzQsIDRdLCBbNSwgNV1dXSlcbiAqIF0pO1xuICpcbiAqIHR1cmYubGluZVJlZHVjZShtdWx0aVBvbHksIGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50TGluZSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCwgZ2VvbWV0cnlJbmRleCkge1xuICogICAvLz1wcmV2aW91c1ZhbHVlXG4gKiAgIC8vPWN1cnJlbnRMaW5lXG4gKiAgIC8vPWZlYXR1cmVJbmRleFxuICogICAvLz1tdWx0aUZlYXR1cmVJbmRleFxuICogICAvLz1nZW9tZXRyeUluZGV4XG4gKiAgIHJldHVybiBjdXJyZW50TGluZVxuICogfSk7XG4gKi9cbmZ1bmN0aW9uIGxpbmVSZWR1Y2UoZ2VvanNvbiwgY2FsbGJhY2ssIGluaXRpYWxWYWx1ZSkge1xuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIGxpbmVFYWNoKGdlb2pzb24sIGZ1bmN0aW9uIChjdXJyZW50TGluZSwgZmVhdHVyZUluZGV4LCBtdWx0aUZlYXR1cmVJbmRleCwgZ2VvbWV0cnlJbmRleCkge1xuICAgICAgICBpZiAoZmVhdHVyZUluZGV4ID09PSAwICYmIGluaXRpYWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSBwcmV2aW91c1ZhbHVlID0gY3VycmVudExpbmU7XG4gICAgICAgIGVsc2UgcHJldmlvdXNWYWx1ZSA9IGNhbGxiYWNrKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRMaW5lLCBmZWF0dXJlSW5kZXgsIG11bHRpRmVhdHVyZUluZGV4LCBnZW9tZXRyeUluZGV4KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJldmlvdXNWYWx1ZTtcbn1cblxuLyoqXG4gKiBGaW5kcyBhIHBhcnRpY3VsYXIgMi12ZXJ0ZXggTGluZVN0cmluZyBTZWdtZW50IGZyb20gYSBHZW9KU09OIHVzaW5nIGBAdHVyZi9tZXRhYCBpbmRleGVzLlxuICpcbiAqIE5lZ2F0aXZlIGluZGV4ZXMgYXJlIHBlcm1pdHRlZC5cbiAqIFBvaW50ICYgTXVsdGlQb2ludCB3aWxsIGFsd2F5cyByZXR1cm4gbnVsbC5cbiAqXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufEZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gQW55IEdlb0pTT04gRmVhdHVyZSBvciBHZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuZmVhdHVyZUluZGV4PTBdIEZlYXR1cmUgSW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tdWx0aUZlYXR1cmVJbmRleD0wXSBNdWx0aS1GZWF0dXJlIEluZGV4XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuZ2VvbWV0cnlJbmRleD0wXSBHZW9tZXRyeSBJbmRleFxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNlZ21lbnRJbmRleD0wXSBTZWdtZW50IEluZGV4XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJvcGVydGllcz17fV0gVHJhbnNsYXRlIFByb3BlcnRpZXMgdG8gb3V0cHV0IExpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QkJveH0gW29wdGlvbnMuYmJveD17fV0gVHJhbnNsYXRlIEJCb3ggdG8gb3V0cHV0IExpbmVTdHJpbmdcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gW29wdGlvbnMuaWQ9e31dIFRyYW5zbGF0ZSBJZCB0byBvdXRwdXQgTGluZVN0cmluZ1xuICogQHJldHVybnMge0ZlYXR1cmU8TGluZVN0cmluZz59IDItdmVydGV4IEdlb0pTT04gRmVhdHVyZSBMaW5lU3RyaW5nXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpTGluZSA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKFtcbiAqICAgICBbWzEwLCAxMF0sIFs1MCwgMzBdLCBbMzAsIDQwXV0sXG4gKiAgICAgW1stMTAsIC0xMF0sIFstNTAsIC0zMF0sIFstMzAsIC00MF1dXG4gKiBdKTtcbiAqXG4gKiAvLyBGaXJzdCBTZWdtZW50IChkZWZhdWx0cyBhcmUgMClcbiAqIHR1cmYuZmluZFNlZ21lbnQobXVsdGlMaW5lKTtcbiAqIC8vID0+IEZlYXR1cmU8TGluZVN0cmluZzxbWzEwLCAxMF0sIFs1MCwgMzBdXT4+XG4gKlxuICogLy8gRmlyc3QgU2VnbWVudCBvZiAybmQgTXVsdGkgRmVhdHVyZVxuICogdHVyZi5maW5kU2VnbWVudChtdWx0aUxpbmUsIHttdWx0aUZlYXR1cmVJbmRleDogMX0pO1xuICogLy8gPT4gRmVhdHVyZTxMaW5lU3RyaW5nPFtbLTEwLCAtMTBdLCBbLTUwLCAtMzBdXT4+XG4gKlxuICogLy8gTGFzdCBTZWdtZW50IG9mIExhc3QgTXVsdGkgRmVhdHVyZVxuICogdHVyZi5maW5kU2VnbWVudChtdWx0aUxpbmUsIHttdWx0aUZlYXR1cmVJbmRleDogLTEsIHNlZ21lbnRJbmRleDogLTF9KTtcbiAqIC8vID0+IEZlYXR1cmU8TGluZVN0cmluZzxbWy01MCwgLTMwXSwgWy0zMCwgLTQwXV0+PlxuICovXG5mdW5jdGlvbiBmaW5kU2VnbWVudChnZW9qc29uLCBvcHRpb25zKSB7XG4gICAgLy8gT3B0aW9uYWwgUGFyYW1ldGVyc1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmICghaXNPYmplY3Qob3B0aW9ucykpIHRocm93IG5ldyBFcnJvcignb3B0aW9ucyBpcyBpbnZhbGlkJyk7XG4gICAgdmFyIGZlYXR1cmVJbmRleCA9IG9wdGlvbnMuZmVhdHVyZUluZGV4IHx8IDA7XG4gICAgdmFyIG11bHRpRmVhdHVyZUluZGV4ID0gb3B0aW9ucy5tdWx0aUZlYXR1cmVJbmRleCB8fCAwO1xuICAgIHZhciBnZW9tZXRyeUluZGV4ID0gb3B0aW9ucy5nZW9tZXRyeUluZGV4IHx8IDA7XG4gICAgdmFyIHNlZ21lbnRJbmRleCA9IG9wdGlvbnMuc2VnbWVudEluZGV4IHx8IDA7XG5cbiAgICAvLyBGaW5kIEZlYXR1cmVJbmRleFxuICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0aW9ucy5wcm9wZXJ0aWVzO1xuICAgIHZhciBnZW9tZXRyeTtcblxuICAgIHN3aXRjaCAoZ2VvanNvbi50eXBlKSB7XG4gICAgY2FzZSAnRmVhdHVyZUNvbGxlY3Rpb24nOlxuICAgICAgICBpZiAoZmVhdHVyZUluZGV4IDwgMCkgZmVhdHVyZUluZGV4ID0gZ2VvanNvbi5mZWF0dXJlcy5sZW5ndGggKyBmZWF0dXJlSW5kZXg7XG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IGdlb2pzb24uZmVhdHVyZXNbZmVhdHVyZUluZGV4XS5wcm9wZXJ0aWVzO1xuICAgICAgICBnZW9tZXRyeSA9IGdlb2pzb24uZmVhdHVyZXNbZmVhdHVyZUluZGV4XS5nZW9tZXRyeTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRmVhdHVyZSc6XG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IGdlb2pzb24ucHJvcGVydGllcztcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9qc29uLmdlb21ldHJ5O1xuICAgICAgICBicmVhaztcbiAgICBjYXNlICdQb2ludCc6XG4gICAgY2FzZSAnTXVsdGlQb2ludCc6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9qc29uO1xuICAgICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgaW52YWxpZCcpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgU2VnbWVudEluZGV4XG4gICAgaWYgKGdlb21ldHJ5ID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgc3dpdGNoIChnZW9tZXRyeS50eXBlKSB7XG4gICAgY2FzZSAnUG9pbnQnOlxuICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICAgICAgaWYgKHNlZ21lbnRJbmRleCA8IDApIHNlZ21lbnRJbmRleCA9IGNvb3Jkcy5sZW5ndGggKyBzZWdtZW50SW5kZXggLSAxO1xuICAgICAgICByZXR1cm4gbGluZVN0cmluZyhbY29vcmRzW3NlZ21lbnRJbmRleF0sIGNvb3Jkc1tzZWdtZW50SW5kZXggKyAxXV0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgICBpZiAoZ2VvbWV0cnlJbmRleCA8IDApIGdlb21ldHJ5SW5kZXggPSBjb29yZHMubGVuZ3RoICsgZ2VvbWV0cnlJbmRleDtcbiAgICAgICAgaWYgKHNlZ21lbnRJbmRleCA8IDApIHNlZ21lbnRJbmRleCA9IGNvb3Jkc1tnZW9tZXRyeUluZGV4XS5sZW5ndGggKyBzZWdtZW50SW5kZXggLSAxO1xuICAgICAgICByZXR1cm4gbGluZVN0cmluZyhbY29vcmRzW2dlb21ldHJ5SW5kZXhdW3NlZ21lbnRJbmRleF0sIGNvb3Jkc1tnZW9tZXRyeUluZGV4XVtzZWdtZW50SW5kZXggKyAxXV0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgICAgIGlmIChtdWx0aUZlYXR1cmVJbmRleCA8IDApIG11bHRpRmVhdHVyZUluZGV4ID0gY29vcmRzLmxlbmd0aCArIG11bHRpRmVhdHVyZUluZGV4O1xuICAgICAgICBpZiAoc2VnbWVudEluZGV4IDwgMCkgc2VnbWVudEluZGV4ID0gY29vcmRzW211bHRpRmVhdHVyZUluZGV4XS5sZW5ndGggKyBzZWdtZW50SW5kZXggLSAxO1xuICAgICAgICByZXR1cm4gbGluZVN0cmluZyhbY29vcmRzW211bHRpRmVhdHVyZUluZGV4XVtzZWdtZW50SW5kZXhdLCBjb29yZHNbbXVsdGlGZWF0dXJlSW5kZXhdW3NlZ21lbnRJbmRleCArIDFdXSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgaWYgKG11bHRpRmVhdHVyZUluZGV4IDwgMCkgbXVsdGlGZWF0dXJlSW5kZXggPSBjb29yZHMubGVuZ3RoICsgbXVsdGlGZWF0dXJlSW5kZXg7XG4gICAgICAgIGlmIChnZW9tZXRyeUluZGV4IDwgMCkgZ2VvbWV0cnlJbmRleCA9IGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF0ubGVuZ3RoICsgZ2VvbWV0cnlJbmRleDtcbiAgICAgICAgaWYgKHNlZ21lbnRJbmRleCA8IDApIHNlZ21lbnRJbmRleCA9IGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF1bZ2VvbWV0cnlJbmRleF0ubGVuZ3RoIC0gc2VnbWVudEluZGV4IC0gMTtcbiAgICAgICAgcmV0dXJuIGxpbmVTdHJpbmcoW2Nvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF1bZ2VvbWV0cnlJbmRleF1bc2VnbWVudEluZGV4XSwgY29vcmRzW211bHRpRmVhdHVyZUluZGV4XVtnZW9tZXRyeUluZGV4XVtzZWdtZW50SW5kZXggKyAxXV0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgaW52YWxpZCcpO1xufVxuXG4vKipcbiAqIEZpbmRzIGEgcGFydGljdWxhciBQb2ludCBmcm9tIGEgR2VvSlNPTiB1c2luZyBgQHR1cmYvbWV0YWAgaW5kZXhlcy5cbiAqXG4gKiBOZWdhdGl2ZSBpbmRleGVzIGFyZSBwZXJtaXR0ZWQuXG4gKlxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbnxGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIEFueSBHZW9KU09OIEZlYXR1cmUgb3IgR2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmZlYXR1cmVJbmRleD0wXSBGZWF0dXJlIEluZGV4XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubXVsdGlGZWF0dXJlSW5kZXg9MF0gTXVsdGktRmVhdHVyZSBJbmRleFxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmdlb21ldHJ5SW5kZXg9MF0gR2VvbWV0cnkgSW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5jb29yZEluZGV4PTBdIENvb3JkIEluZGV4XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMucHJvcGVydGllcz17fV0gVHJhbnNsYXRlIFByb3BlcnRpZXMgdG8gb3V0cHV0IFBvaW50XG4gKiBAcGFyYW0ge0JCb3h9IFtvcHRpb25zLmJib3g9e31dIFRyYW5zbGF0ZSBCQm94IHRvIG91dHB1dCBQb2ludFxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBbb3B0aW9ucy5pZD17fV0gVHJhbnNsYXRlIElkIHRvIG91dHB1dCBQb2ludFxuICogQHJldHVybnMge0ZlYXR1cmU8UG9pbnQ+fSAyLXZlcnRleCBHZW9KU09OIEZlYXR1cmUgUG9pbnRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlMaW5lID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoW1xuICogICAgIFtbMTAsIDEwXSwgWzUwLCAzMF0sIFszMCwgNDBdXSxcbiAqICAgICBbWy0xMCwgLTEwXSwgWy01MCwgLTMwXSwgWy0zMCwgLTQwXV1cbiAqIF0pO1xuICpcbiAqIC8vIEZpcnN0IFNlZ21lbnQgKGRlZmF1bHRzIGFyZSAwKVxuICogdHVyZi5maW5kUG9pbnQobXVsdGlMaW5lKTtcbiAqIC8vID0+IEZlYXR1cmU8UG9pbnQ8WzEwLCAxMF0+PlxuICpcbiAqIC8vIEZpcnN0IFNlZ21lbnQgb2YgdGhlIDJuZCBNdWx0aS1GZWF0dXJlXG4gKiB0dXJmLmZpbmRQb2ludChtdWx0aUxpbmUsIHttdWx0aUZlYXR1cmVJbmRleDogMX0pO1xuICogLy8gPT4gRmVhdHVyZTxQb2ludDxbLTEwLCAtMTBdPj5cbiAqXG4gKiAvLyBMYXN0IFNlZ21lbnQgb2YgbGFzdCBNdWx0aS1GZWF0dXJlXG4gKiB0dXJmLmZpbmRQb2ludChtdWx0aUxpbmUsIHttdWx0aUZlYXR1cmVJbmRleDogLTEsIGNvb3JkSW5kZXg6IC0xfSk7XG4gKiAvLyA9PiBGZWF0dXJlPFBvaW50PFstMzAsIC00MF0+PlxuICovXG5mdW5jdGlvbiBmaW5kUG9pbnQoZ2VvanNvbiwgb3B0aW9ucykge1xuICAgIC8vIE9wdGlvbmFsIFBhcmFtZXRlcnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoIWlzT2JqZWN0KG9wdGlvbnMpKSB0aHJvdyBuZXcgRXJyb3IoJ29wdGlvbnMgaXMgaW52YWxpZCcpO1xuICAgIHZhciBmZWF0dXJlSW5kZXggPSBvcHRpb25zLmZlYXR1cmVJbmRleCB8fCAwO1xuICAgIHZhciBtdWx0aUZlYXR1cmVJbmRleCA9IG9wdGlvbnMubXVsdGlGZWF0dXJlSW5kZXggfHwgMDtcbiAgICB2YXIgZ2VvbWV0cnlJbmRleCA9IG9wdGlvbnMuZ2VvbWV0cnlJbmRleCB8fCAwO1xuICAgIHZhciBjb29yZEluZGV4ID0gb3B0aW9ucy5jb29yZEluZGV4IHx8IDA7XG5cbiAgICAvLyBGaW5kIEZlYXR1cmVJbmRleFxuICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0aW9ucy5wcm9wZXJ0aWVzO1xuICAgIHZhciBnZW9tZXRyeTtcblxuICAgIHN3aXRjaCAoZ2VvanNvbi50eXBlKSB7XG4gICAgY2FzZSAnRmVhdHVyZUNvbGxlY3Rpb24nOlxuICAgICAgICBpZiAoZmVhdHVyZUluZGV4IDwgMCkgZmVhdHVyZUluZGV4ID0gZ2VvanNvbi5mZWF0dXJlcy5sZW5ndGggKyBmZWF0dXJlSW5kZXg7XG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IGdlb2pzb24uZmVhdHVyZXNbZmVhdHVyZUluZGV4XS5wcm9wZXJ0aWVzO1xuICAgICAgICBnZW9tZXRyeSA9IGdlb2pzb24uZmVhdHVyZXNbZmVhdHVyZUluZGV4XS5nZW9tZXRyeTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRmVhdHVyZSc6XG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IGdlb2pzb24ucHJvcGVydGllcztcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9qc29uLmdlb21ldHJ5O1xuICAgICAgICBicmVhaztcbiAgICBjYXNlICdQb2ludCc6XG4gICAgY2FzZSAnTXVsdGlQb2ludCc6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9qc29uO1xuICAgICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgaW52YWxpZCcpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgQ29vcmQgSW5kZXhcbiAgICBpZiAoZ2VvbWV0cnkgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgIHZhciBjb29yZHMgPSBnZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICBzd2l0Y2ggKGdlb21ldHJ5LnR5cGUpIHtcbiAgICBjYXNlICdQb2ludCc6XG4gICAgICAgIHJldHVybiBwb2ludChjb29yZHMsIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICBpZiAobXVsdGlGZWF0dXJlSW5kZXggPCAwKSBtdWx0aUZlYXR1cmVJbmRleCA9IGNvb3Jkcy5sZW5ndGggKyBtdWx0aUZlYXR1cmVJbmRleDtcbiAgICAgICAgcmV0dXJuIHBvaW50KGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgICAgICBpZiAoY29vcmRJbmRleCA8IDApIGNvb3JkSW5kZXggPSBjb29yZHMubGVuZ3RoICsgY29vcmRJbmRleDtcbiAgICAgICAgcmV0dXJuIHBvaW50KGNvb3Jkc1tjb29yZEluZGV4XSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG4gICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgIGlmIChnZW9tZXRyeUluZGV4IDwgMCkgZ2VvbWV0cnlJbmRleCA9IGNvb3Jkcy5sZW5ndGggKyBnZW9tZXRyeUluZGV4O1xuICAgICAgICBpZiAoY29vcmRJbmRleCA8IDApIGNvb3JkSW5kZXggPSBjb29yZHNbZ2VvbWV0cnlJbmRleF0ubGVuZ3RoICsgY29vcmRJbmRleDtcbiAgICAgICAgcmV0dXJuIHBvaW50KGNvb3Jkc1tnZW9tZXRyeUluZGV4XVtjb29yZEluZGV4XSwgcHJvcGVydGllcywgb3B0aW9ucyk7XG4gICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgaWYgKG11bHRpRmVhdHVyZUluZGV4IDwgMCkgbXVsdGlGZWF0dXJlSW5kZXggPSBjb29yZHMubGVuZ3RoICsgbXVsdGlGZWF0dXJlSW5kZXg7XG4gICAgICAgIGlmIChjb29yZEluZGV4IDwgMCkgY29vcmRJbmRleCA9IGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF0ubGVuZ3RoICsgY29vcmRJbmRleDtcbiAgICAgICAgcmV0dXJuIHBvaW50KGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF1bY29vcmRJbmRleF0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgIGlmIChtdWx0aUZlYXR1cmVJbmRleCA8IDApIG11bHRpRmVhdHVyZUluZGV4ID0gY29vcmRzLmxlbmd0aCArIG11bHRpRmVhdHVyZUluZGV4O1xuICAgICAgICBpZiAoZ2VvbWV0cnlJbmRleCA8IDApIGdlb21ldHJ5SW5kZXggPSBjb29yZHNbbXVsdGlGZWF0dXJlSW5kZXhdLmxlbmd0aCArIGdlb21ldHJ5SW5kZXg7XG4gICAgICAgIGlmIChjb29yZEluZGV4IDwgMCkgY29vcmRJbmRleCA9IGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF1bZ2VvbWV0cnlJbmRleF0ubGVuZ3RoIC0gY29vcmRJbmRleDtcbiAgICAgICAgcmV0dXJuIHBvaW50KGNvb3Jkc1ttdWx0aUZlYXR1cmVJbmRleF1bZ2VvbWV0cnlJbmRleF1bY29vcmRJbmRleF0sIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgaW52YWxpZCcpO1xufVxuXG5leHBvcnQgeyBjb29yZEVhY2gsIGNvb3JkUmVkdWNlLCBwcm9wRWFjaCwgcHJvcFJlZHVjZSwgZmVhdHVyZUVhY2gsIGZlYXR1cmVSZWR1Y2UsIGNvb3JkQWxsLCBnZW9tRWFjaCwgZ2VvbVJlZHVjZSwgZmxhdHRlbkVhY2gsIGZsYXR0ZW5SZWR1Y2UsIHNlZ21lbnRFYWNoLCBzZWdtZW50UmVkdWNlLCBsaW5lRWFjaCwgbGluZVJlZHVjZSwgZmluZFNlZ21lbnQsIGZpbmRQb2ludCB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvbWV0YS9tYWluLmVzLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export getCoord */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getCoords; });\n/* unused harmony export containsNumber */\n/* unused harmony export geojsonType */\n/* unused harmony export featureOf */\n/* unused harmony export collectionOf */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getGeom; });\n/* unused harmony export getGeomType */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getType; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__turf_helpers__ = __webpack_require__(1);\n\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord(coord) {\n    if (!coord) throw new Error('coord is required');\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') return coord.geometry.coordinates;\n    if (coord.type === 'Point') return coord.coordinates;\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) return coord;\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n/**\n * Unwrap coordinates from a Feature, Geometry Object or an Array\n *\n * @name getCoords\n * @param {Array<any>|Geometry|Feature} coords Feature, Geometry Object or an Array\n * @returns {Array<any>} coordinates\n * @example\n * var poly = turf.polygon([[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]);\n *\n * var coords = turf.getCoords(poly);\n * //= [[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]\n */\nfunction getCoords(coords) {\n    if (!coords) throw new Error('coords is required');\n\n    // Feature\n    if (coords.type === 'Feature' && coords.geometry !== null) return coords.geometry.coordinates;\n\n    // Geometry\n    if (coords.coordinates) return coords.coordinates;\n\n    // Array of numbers\n    if (Array.isArray(coords)) return coords;\n\n    throw new Error('coords must be GeoJSON Feature, Geometry Object or an Array');\n}\n\n/**\n * Checks if coordinates contains a number\n *\n * @name containsNumber\n * @param {Array<any>} coordinates GeoJSON Coordinates\n * @returns {boolean} true if Array contains a number\n */\nfunction containsNumber(coordinates) {\n    if (coordinates.length > 1 && Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"b\" /* isNumber */])(coordinates[0]) && Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"b\" /* isNumber */])(coordinates[1])) {\n        return true;\n    }\n\n    if (Array.isArray(coordinates[0]) && coordinates[0].length) {\n        return containsNumber(coordinates[0]);\n    }\n    throw new Error('coordinates must only contain numbers');\n}\n\n/**\n * Enforce expectations about types of GeoJSON objects for Turf.\n *\n * @name geojsonType\n * @param {GeoJSON} value any GeoJSON object\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nfunction geojsonType(value, type, name) {\n    if (!type || !name) throw new Error('type and name required');\n\n    if (!value || value.type !== type) {\n        throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + value.type);\n    }\n}\n\n/**\n * Enforce expectations about types of {@link Feature} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name featureOf\n * @param {Feature} feature a feature with an expected geometry type\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} error if value is not the expected type.\n */\nfunction featureOf(feature, type, name) {\n    if (!feature) throw new Error('No feature passed');\n    if (!name) throw new Error('.featureOf() requires a name');\n    if (!feature || feature.type !== 'Feature' || !feature.geometry) {\n        throw new Error('Invalid input to ' + name + ', Feature with geometry required');\n    }\n    if (!feature.geometry || feature.geometry.type !== type) {\n        throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + feature.geometry.type);\n    }\n}\n\n/**\n * Enforce expectations about types of {@link FeatureCollection} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name collectionOf\n * @param {FeatureCollection} featureCollection a FeatureCollection for which features will be judged\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nfunction collectionOf(featureCollection, type, name) {\n    if (!featureCollection) throw new Error('No featureCollection passed');\n    if (!name) throw new Error('.collectionOf() requires a name');\n    if (!featureCollection || featureCollection.type !== 'FeatureCollection') {\n        throw new Error('Invalid input to ' + name + ', FeatureCollection required');\n    }\n    for (var i = 0; i < featureCollection.features.length; i++) {\n        var feature = featureCollection.features[i];\n        if (!feature || feature.type !== 'Feature' || !feature.geometry) {\n            throw new Error('Invalid input to ' + name + ', Feature with geometry required');\n        }\n        if (!feature.geometry || feature.geometry.type !== type) {\n            throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + feature.geometry.type);\n        }\n    }\n}\n\n/**\n * Get Geometry from Feature or Geometry Object\n *\n * @param {Feature|Geometry} geojson GeoJSON Feature or Geometry Object\n * @returns {Geometry|null} GeoJSON Geometry Object\n * @throws {Error} if geojson is not a Feature or Geometry Object\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getGeom(point)\n * //={\"type\": \"Point\", \"coordinates\": [110, 40]}\n */\nfunction getGeom(geojson) {\n    if (!geojson) throw new Error('geojson is required');\n    if (geojson.geometry !== undefined) return geojson.geometry;\n    if (geojson.coordinates || geojson.geometries) return geojson;\n    throw new Error('geojson must be a valid Feature or Geometry Object');\n}\n\n/**\n * Get Geometry Type from Feature or Geometry Object\n *\n * @throws {Error} **DEPRECATED** in v5.0.0 in favor of getType\n */\nfunction getGeomType() {\n    throw new Error('invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType');\n}\n\n/**\n * Get GeoJSON object's type, Geometry type is prioritize.\n *\n * @param {GeoJSON} geojson GeoJSON object\n * @param {string} [name=\"geojson\"] name of the variable to display in error message\n * @returns {string} GeoJSON type\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getType(point)\n * //=\"Point\"\n */\nfunction getType(geojson, name) {\n    if (!geojson) throw new Error((name || 'geojson') + ' is required');\n    // GeoJSON Feature & GeometryCollection\n    if (geojson.geometry && geojson.geometry.type) return geojson.geometry.type;\n    // GeoJSON Geometry & FeatureCollection\n    if (geojson.type) return geojson.type;\n    throw new Error((name || 'geojson') + ' is invalid');\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9pbnZhcmlhbnQvbWFpbi5lcy5qcz84ZjNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTnVtYmVyIH0gZnJvbSAnQHR1cmYvaGVscGVycyc7XG5cbi8qKlxuICogVW53cmFwIGEgY29vcmRpbmF0ZSBmcm9tIGEgUG9pbnQgRmVhdHVyZSwgR2VvbWV0cnkgb3IgYSBzaW5nbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAbmFtZSBnZXRDb29yZFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fEdlb21ldHJ5PFBvaW50PnxGZWF0dXJlPFBvaW50Pn0gY29vcmQgR2VvSlNPTiBQb2ludCBvciBhbiBBcnJheSBvZiBudW1iZXJzXG4gKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcHQgPSB0dXJmLnBvaW50KFsxMCwgMTBdKTtcbiAqXG4gKiB2YXIgY29vcmQgPSB0dXJmLmdldENvb3JkKHB0KTtcbiAqIC8vPSBbMTAsIDEwXVxuICovXG5mdW5jdGlvbiBnZXRDb29yZChjb29yZCkge1xuICAgIGlmICghY29vcmQpIHRocm93IG5ldyBFcnJvcignY29vcmQgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoY29vcmQudHlwZSA9PT0gJ0ZlYXR1cmUnICYmIGNvb3JkLmdlb21ldHJ5ICE9PSBudWxsICYmIGNvb3JkLmdlb21ldHJ5LnR5cGUgPT09ICdQb2ludCcpIHJldHVybiBjb29yZC5nZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICBpZiAoY29vcmQudHlwZSA9PT0gJ1BvaW50JykgcmV0dXJuIGNvb3JkLmNvb3JkaW5hdGVzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvb3JkKSAmJiBjb29yZC5sZW5ndGggPj0gMiAmJiBjb29yZFswXS5sZW5ndGggPT09IHVuZGVmaW5lZCAmJiBjb29yZFsxXS5sZW5ndGggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGNvb3JkO1xuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb29yZCBtdXN0IGJlIEdlb0pTT04gUG9pbnQgb3IgYW4gQXJyYXkgb2YgbnVtYmVycycpO1xufVxuXG4vKipcbiAqIFVud3JhcCBjb29yZGluYXRlcyBmcm9tIGEgRmVhdHVyZSwgR2VvbWV0cnkgT2JqZWN0IG9yIGFuIEFycmF5XG4gKlxuICogQG5hbWUgZ2V0Q29vcmRzXG4gKiBAcGFyYW0ge0FycmF5PGFueT58R2VvbWV0cnl8RmVhdHVyZX0gY29vcmRzIEZlYXR1cmUsIEdlb21ldHJ5IE9iamVjdCBvciBhbiBBcnJheVxuICogQHJldHVybnMge0FycmF5PGFueT59IGNvb3JkaW5hdGVzXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHkgPSB0dXJmLnBvbHlnb24oW1tbMTE5LjMyLCAtOC43XSwgWzExOS41NSwgLTguNjldLCBbMTE5LjUxLCAtOC41NF0sIFsxMTkuMzIsIC04LjddXV0pO1xuICpcbiAqIHZhciBjb29yZHMgPSB0dXJmLmdldENvb3Jkcyhwb2x5KTtcbiAqIC8vPSBbW1sxMTkuMzIsIC04LjddLCBbMTE5LjU1LCAtOC42OV0sIFsxMTkuNTEsIC04LjU0XSwgWzExOS4zMiwgLTguN11dXVxuICovXG5mdW5jdGlvbiBnZXRDb29yZHMoY29vcmRzKSB7XG4gICAgaWYgKCFjb29yZHMpIHRocm93IG5ldyBFcnJvcignY29vcmRzIGlzIHJlcXVpcmVkJyk7XG5cbiAgICAvLyBGZWF0dXJlXG4gICAgaWYgKGNvb3Jkcy50eXBlID09PSAnRmVhdHVyZScgJiYgY29vcmRzLmdlb21ldHJ5ICE9PSBudWxsKSByZXR1cm4gY29vcmRzLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuXG4gICAgLy8gR2VvbWV0cnlcbiAgICBpZiAoY29vcmRzLmNvb3JkaW5hdGVzKSByZXR1cm4gY29vcmRzLmNvb3JkaW5hdGVzO1xuXG4gICAgLy8gQXJyYXkgb2YgbnVtYmVyc1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvb3JkcykpIHJldHVybiBjb29yZHM7XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkcyBtdXN0IGJlIEdlb0pTT04gRmVhdHVyZSwgR2VvbWV0cnkgT2JqZWN0IG9yIGFuIEFycmF5Jyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGNvb3JkaW5hdGVzIGNvbnRhaW5zIGEgbnVtYmVyXG4gKlxuICogQG5hbWUgY29udGFpbnNOdW1iZXJcbiAqIEBwYXJhbSB7QXJyYXk8YW55Pn0gY29vcmRpbmF0ZXMgR2VvSlNPTiBDb29yZGluYXRlc1xuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgQXJyYXkgY29udGFpbnMgYSBudW1iZXJcbiAqL1xuZnVuY3Rpb24gY29udGFpbnNOdW1iZXIoY29vcmRpbmF0ZXMpIHtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMSAmJiBpc051bWJlcihjb29yZGluYXRlc1swXSkgJiYgaXNOdW1iZXIoY29vcmRpbmF0ZXNbMV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSAmJiBjb29yZGluYXRlc1swXS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzWzBdKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IG9ubHkgY29udGFpbiBudW1iZXJzJyk7XG59XG5cbi8qKlxuICogRW5mb3JjZSBleHBlY3RhdGlvbnMgYWJvdXQgdHlwZXMgb2YgR2VvSlNPTiBvYmplY3RzIGZvciBUdXJmLlxuICpcbiAqIEBuYW1lIGdlb2pzb25UeXBlXG4gKiBAcGFyYW0ge0dlb0pTT059IHZhbHVlIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGdlb2pzb25UeXBlKHZhbHVlLCB0eXBlLCBuYW1lKSB7XG4gICAgaWYgKCF0eXBlIHx8ICFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ3R5cGUgYW5kIG5hbWUgcmVxdWlyZWQnKTtcblxuICAgIGlmICghdmFsdWUgfHwgdmFsdWUudHlwZSAhPT0gdHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnOiBtdXN0IGJlIGEgJyArIHR5cGUgKyAnLCBnaXZlbiAnICsgdmFsdWUudHlwZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuZm9yY2UgZXhwZWN0YXRpb25zIGFib3V0IHR5cGVzIG9mIHtAbGluayBGZWF0dXJlfSBpbnB1dHMgZm9yIFR1cmYuXG4gKiBJbnRlcm5hbGx5IHRoaXMgdXNlcyB7QGxpbmsgZ2VvanNvblR5cGV9IHRvIGp1ZGdlIGdlb21ldHJ5IHR5cGVzLlxuICpcbiAqIEBuYW1lIGZlYXR1cmVPZlxuICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIGEgZmVhdHVyZSB3aXRoIGFuIGV4cGVjdGVkIGdlb21ldHJ5IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIGV4cGVjdGVkIEdlb0pTT04gdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbmFtZSBvZiBjYWxsaW5nIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gZXJyb3IgaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBmZWF0dXJlT2YoZmVhdHVyZSwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZSkgdGhyb3cgbmV3IEVycm9yKCdObyBmZWF0dXJlIHBhc3NlZCcpO1xuICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yKCcuZmVhdHVyZU9mKCkgcmVxdWlyZXMgYSBuYW1lJyk7XG4gICAgaWYgKCFmZWF0dXJlIHx8IGZlYXR1cmUudHlwZSAhPT0gJ0ZlYXR1cmUnIHx8ICFmZWF0dXJlLmdlb21ldHJ5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBpZiAoIWZlYXR1cmUuZ2VvbWV0cnkgfHwgZmVhdHVyZS5nZW9tZXRyeS50eXBlICE9PSB0eXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IGlucHV0cyBmb3IgVHVyZi5cbiAqIEludGVybmFsbHkgdGhpcyB1c2VzIHtAbGluayBnZW9qc29uVHlwZX0gdG8ganVkZ2UgZ2VvbWV0cnkgdHlwZXMuXG4gKlxuICogQG5hbWUgY29sbGVjdGlvbk9mXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmZWF0dXJlQ29sbGVjdGlvbiBhIEZlYXR1cmVDb2xsZWN0aW9uIGZvciB3aGljaCBmZWF0dXJlcyB3aWxsIGJlIGp1ZGdlZFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3Rpb25PZihmZWF0dXJlQ29sbGVjdGlvbiwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZUNvbGxlY3Rpb24pIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZUNvbGxlY3Rpb24gcGFzc2VkJyk7XG4gICAgaWYgKCFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJy5jb2xsZWN0aW9uT2YoKSByZXF1aXJlcyBhIG5hbWUnKTtcbiAgICBpZiAoIWZlYXR1cmVDb2xsZWN0aW9uIHx8IGZlYXR1cmVDb2xsZWN0aW9uLnR5cGUgIT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZUNvbGxlY3Rpb24gcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVDb2xsZWN0aW9uLmZlYXR1cmVzW2ldO1xuICAgICAgICBpZiAoIWZlYXR1cmUgfHwgZmVhdHVyZS50eXBlICE9PSAnRmVhdHVyZScgfHwgIWZlYXR1cmUuZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmVhdHVyZS5nZW9tZXRyeSB8fCBmZWF0dXJlLmdlb21ldHJ5LnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBmcm9tIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKlxuICogQHBhcmFtIHtGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIEdlb0pTT04gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEByZXR1cm5zIHtHZW9tZXRyeXxudWxsfSBHZW9KU09OIEdlb21ldHJ5IE9iamVjdFxuICogQHRocm93cyB7RXJyb3J9IGlmIGdlb2pzb24gaXMgbm90IGEgRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB7XG4gKiAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAqICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICogICBcImdlb21ldHJ5XCI6IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdXG4gKiAgIH1cbiAqIH1cbiAqIHZhciBnZW9tID0gdHVyZi5nZXRHZW9tKHBvaW50KVxuICogLy89e1widHlwZVwiOiBcIlBvaW50XCIsIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdfVxuICovXG5mdW5jdGlvbiBnZXRHZW9tKGdlb2pzb24pIHtcbiAgICBpZiAoIWdlb2pzb24pIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChnZW9qc29uLmdlb21ldHJ5ICE9PSB1bmRlZmluZWQpIHJldHVybiBnZW9qc29uLmdlb21ldHJ5O1xuICAgIGlmIChnZW9qc29uLmNvb3JkaW5hdGVzIHx8IGdlb2pzb24uZ2VvbWV0cmllcykgcmV0dXJuIGdlb2pzb247XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZW9qc29uIG11c3QgYmUgYSB2YWxpZCBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdCcpO1xufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBUeXBlIGZyb20gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn0gKipERVBSRUNBVEVEKiogaW4gdjUuMC4wIGluIGZhdm9yIG9mIGdldFR5cGVcbiAqL1xuZnVuY3Rpb24gZ2V0R2VvbVR5cGUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQuZ2V0R2VvbVR5cGUgaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiB2NS4wIGluIGZhdm9yIG9mIGludmFyaWFudC5nZXRUeXBlJyk7XG59XG5cbi8qKlxuICogR2V0IEdlb0pTT04gb2JqZWN0J3MgdHlwZSwgR2VvbWV0cnkgdHlwZSBpcyBwcmlvcml0aXplLlxuICpcbiAqIEBwYXJhbSB7R2VvSlNPTn0gZ2VvanNvbiBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lPVwiZ2VvanNvblwiXSBuYW1lIG9mIHRoZSB2YXJpYWJsZSB0byBkaXNwbGF5IGluIGVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEdlb0pTT04gdHlwZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuICogICBcInByb3BlcnRpZXNcIjoge30sXG4gKiAgIFwiZ2VvbWV0cnlcIjoge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA0MF1cbiAqICAgfVxuICogfVxuICogdmFyIGdlb20gPSB0dXJmLmdldFR5cGUocG9pbnQpXG4gKiAvLz1cIlBvaW50XCJcbiAqL1xuZnVuY3Rpb24gZ2V0VHlwZShnZW9qc29uLCBuYW1lKSB7XG4gICAgaWYgKCFnZW9qc29uKSB0aHJvdyBuZXcgRXJyb3IoKG5hbWUgfHwgJ2dlb2pzb24nKSArICcgaXMgcmVxdWlyZWQnKTtcbiAgICAvLyBHZW9KU09OIEZlYXR1cmUgJiBHZW9tZXRyeUNvbGxlY3Rpb25cbiAgICBpZiAoZ2VvanNvbi5nZW9tZXRyeSAmJiBnZW9qc29uLmdlb21ldHJ5LnR5cGUpIHJldHVybiBnZW9qc29uLmdlb21ldHJ5LnR5cGU7XG4gICAgLy8gR2VvSlNPTiBHZW9tZXRyeSAmIEZlYXR1cmVDb2xsZWN0aW9uXG4gICAgaWYgKGdlb2pzb24udHlwZSkgcmV0dXJuIGdlb2pzb24udHlwZTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKG5hbWUgfHwgJ2dlb2pzb24nKSArICcgaXMgaW52YWxpZCcpO1xufVxuXG5leHBvcnQgeyBnZXRDb29yZCwgZ2V0Q29vcmRzLCBjb250YWluc051bWJlciwgZ2VvanNvblR5cGUsIGZlYXR1cmVPZiwgY29sbGVjdGlvbk9mLCBnZXRHZW9tLCBnZXRHZW9tVHlwZSwgZ2V0VHlwZSB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvaW52YXJpYW50L21haW4uZXMuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar SnapMixin = {\n  _initSnappableMarkers: function _initSnappableMarkers() {\n    this.options.snapDistance = this.options.snapDistance || 30;\n\n    if (this.isPolygon()) {\n      // coords is a multidimansional array, handle all rings\n      this._markers.map(this._assignEvents, this);\n    } else {\n      // coords is one dimensional, handle the ring\n      this._assignEvents(this._markers);\n    }\n\n    this._layer.off('pm:dragstart', this._unsnap, this);\n\n    this._layer.on('pm:dragstart', this._unsnap, this);\n  },\n  _assignEvents: function _assignEvents(markerArr) {\n    var _this = this;\n\n    // loop through marker array and assign events to the markers\n    markerArr.forEach(function (marker) {\n      marker.off('drag', _this._handleSnapping, _this);\n      marker.on('drag', _this._handleSnapping, _this);\n      marker.off('dragend', _this._cleanupSnapping, _this);\n      marker.on('dragend', _this._cleanupSnapping, _this);\n    });\n  },\n  _unsnap: function _unsnap() {\n    // delete the last snap\n    delete this._snapLatLng;\n  },\n  _cleanupSnapping: function _cleanupSnapping() {\n    // delete it, we need to refresh this with each start of a drag because\n    // meanwhile, new layers could've been added to the map\n    delete this._snapList; // remove map event\n\n    this._map.off('pm:remove', this._handleSnapLayerRemoval, this);\n\n    if (this.debugIndicatorLines) {\n      this.debugIndicatorLines.forEach(function (line) {\n        line.remove();\n      });\n    }\n  },\n  _handleSnapLayerRemoval: function _handleSnapLayerRemoval(_ref) {\n    var layer = _ref.layer;\n\n    // find the layers index in snaplist\n    var index = this._snapList.findIndex(function (e) {\n      return e._leaflet_id === layer._leaflet_id;\n    }); // remove it from the snaplist\n\n\n    this._snapList.splice(index, 1);\n  },\n  _handleSnapping: function _handleSnapping(e) {\n    var _this2 = this;\n\n    // if snapping is disabled via holding ALT during drag, stop right here\n    if (e.originalEvent.altKey) {\n      return false;\n    } // create a list of polygons that the marker could snap to\n    // this isn't inside a movestart/dragstart callback because middlemarkers are initialized\n    // after dragstart/movestart so it wouldn't fire for them\n\n\n    if (this._snapList === undefined) {\n      this._createSnapList(e);\n    } // if there are no layers to snap to, stop here\n\n\n    if (this._snapList.length <= 0) {\n      return false;\n    }\n\n    var marker = e.target; // get the closest layer, it's closest latlng, segment and the distance\n\n    var closestLayer = this._calcClosestLayer(marker.getLatLng(), this._snapList);\n\n    var isMarker = closestLayer.layer instanceof L.Marker || closestLayer.layer instanceof L.CircleMarker; // find the final latlng that we want to snap to\n\n    var snapLatLng;\n\n    if (!isMarker) {\n      snapLatLng = this._checkPrioritiySnapping(closestLayer);\n    } else {\n      snapLatLng = closestLayer.latlng;\n    } // minimal distance before marker snaps (in pixels)\n\n\n    var minDistance = this.options.snapDistance; // event info for pm:snap and pm:unsnap\n\n    var eventInfo = {\n      marker: marker,\n      snapLatLng: snapLatLng,\n      segment: closestLayer.segment,\n      layer: this._layer,\n      layerInteractedWith: closestLayer.layer // for lack of a better property name\n\n    };\n\n    if (closestLayer.distance < minDistance) {\n      // snap the marker\n      marker.setLatLng(snapLatLng);\n      marker._snapped = true;\n\n      var triggerSnap = function triggerSnap() {\n        _this2._snapLatLng = snapLatLng;\n        marker.fire('pm:snap', eventInfo);\n\n        _this2._layer.fire('pm:snap', eventInfo);\n      }; // check if the snapping position differs from the last snap\n      // Thanks Max & car2go Team\n\n\n      var a = this._snapLatLng || {};\n      var b = snapLatLng || {};\n\n      if (a.lat !== b.lat || a.lng !== b.lng) {\n        triggerSnap();\n      }\n    } else if (this._snapLatLng) {\n      // no more snapping\n      // if it was previously snapped...\n      // ...unsnap\n      this._unsnap(eventInfo);\n\n      marker._snapped = false; // and fire unsnap event\n\n      eventInfo.marker.fire('pm:unsnap', eventInfo);\n\n      this._layer.fire('pm:unsnap', eventInfo);\n    }\n\n    return true;\n  },\n  // we got the point we want to snap to (C), but we need to check if a coord of the polygon\n  // receives priority over C as the snapping point. Let's check this here\n  _checkPrioritiySnapping: function _checkPrioritiySnapping(closestLayer) {\n    var map = this._map; // A and B are the points of the closest segment to P (the marker position we want to snap)\n\n    var A = closestLayer.segment[0];\n    var B = closestLayer.segment[1]; // C is the point we would snap to on the segment.\n    // The closest point on the closest segment of the closest polygon to P. That's right.\n\n    var C = closestLayer.latlng; // distances from A to C and B to C to check which one is closer to C\n\n    var distanceAC = this._getDistance(map, A, C);\n\n    var distanceBC = this._getDistance(map, B, C); // closest latlng of A and B to C\n\n\n    var closestVertexLatLng = distanceAC < distanceBC ? A : B; // distance between closestVertexLatLng and C\n\n    var shortestDistance = distanceAC < distanceBC ? distanceAC : distanceBC; // the distance that needs to be undercut to trigger priority\n\n    var priorityDistance = this.options.snapDistance; // the latlng we ultemately want to snap to\n\n    var snapLatlng; // if C is closer to the closestVertexLatLng (A or B) than the snapDistance,\n    // the closestVertexLatLng has priority over C as the snapping point.\n\n    if (shortestDistance < priorityDistance) {\n      snapLatlng = closestVertexLatLng;\n    } else {\n      snapLatlng = C;\n    } // return the copy of snapping point\n\n\n    return Object.assign({}, snapLatlng);\n  },\n  _createSnapList: function _createSnapList() {\n    var _this3 = this;\n\n    var layers = [];\n    var debugIndicatorLines = [];\n    var map = this._map; // find all layers that are or inherit from Polylines... and markers that are not\n    // temporary markers of polygon-edits\n\n    map.eachLayer(function (layer) {\n      if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.CircleMarker) {\n        layers.push(layer);\n        map.off('pm:remove', _this3._handleSnapLayerRemoval, _this3);\n        map.on('pm:remove', _this3._handleSnapLayerRemoval, _this3); // this is for debugging\n\n        var debugLine = L.polyline([], {\n          color: 'red',\n          pmIgnore: true\n        });\n        debugIndicatorLines.push(debugLine); // uncomment  this line to show helper lines for debugging\n        // debugLine.addTo(map);\n      }\n    }); // ...except myself\n\n    layers = layers.filter(function (layer) {\n      return _this3._layer !== layer;\n    }); // also remove everything that has no coordinates yet\n\n    layers = layers.filter(function (layer) {\n      return layer._latlng || layer._latlngs && layer._latlngs.length > 0;\n    }); // finally remove everything that's leaflet.pm specific temporary stuff\n\n    layers = layers.filter(function (layer) {\n      return !layer._pmTempLayer;\n    }); // save snaplist from layers and the other snap layers added from other classes/scripts\n\n    if (this._otherSnapLayers) {\n      this._snapList = layers.concat(this._otherSnapLayers);\n    } else {\n      this._snapList = layers;\n    }\n\n    this.debugIndicatorLines = debugIndicatorLines;\n  },\n  _calcClosestLayer: function _calcClosestLayer(latlng, layers) {\n    var _this4 = this;\n\n    // the closest polygon to our dragged marker latlng\n    var closestLayer = {}; // loop through the layers\n\n    layers.forEach(function (layer, index) {\n      // find the closest latlng, segment and the distance of this layer to the dragged marker latlng\n      var results = _this4._calcLayerDistances(latlng, layer); // show indicator lines, it's for debugging\n\n\n      _this4.debugIndicatorLines[index].setLatLngs([latlng, results.latlng]); // save the info if it doesn't exist or if the distance is smaller than the previous one\n\n\n      if (closestLayer.distance === undefined || results.distance < closestLayer.distance) {\n        closestLayer = results;\n        closestLayer.layer = layer;\n      }\n    }); // return the closest layer and it's data\n    // if there is no closest layer, return undefined\n\n    return closestLayer;\n  },\n  _calcLayerDistances: function _calcLayerDistances(latlng, layer) {\n    var _this5 = this;\n\n    var map = this._map; // is this a polyline, marker or polygon?\n\n    var isPolygon = layer instanceof L.Polygon;\n    var isPolyline = !(layer instanceof L.Polygon) && layer instanceof L.Polyline;\n    var isMarker = layer instanceof L.Marker || layer instanceof L.CircleMarker; // the point P which we want to snap (probpably the marker that is dragged)\n\n    var P = latlng;\n    var coords; // the coords of the layer\n\n    if (isPolygon) {\n      // polygon\n      coords = layer.getLatLngs()[0];\n    } else if (isPolyline) {\n      // polyline\n      coords = layer.getLatLngs();\n    } else if (isMarker) {\n      // marker\n      coords = layer.getLatLng(); // return the info for the marker, no more calculations needed\n\n      return {\n        latlng: Object.assign({}, coords),\n        distance: this._getDistance(map, coords, P)\n      };\n    } // the closest segment (line between two points) of the layer\n\n\n    var closestSegment; // the shortest distance from P to closestSegment\n\n    var shortestDistance; // loop through the coords of the layer\n\n    coords.forEach(function (coord, index) {\n      // take this coord (A)...\n      var A = coord;\n      var nextIndex; // and the next coord (B) as points\n\n      if (isPolygon) {\n        nextIndex = index + 1 === coords.length ? 0 : index + 1;\n      } else {\n        nextIndex = index + 1 === coords.length ? undefined : index + 1;\n      }\n\n      var B = coords[nextIndex];\n\n      if (B) {\n        // calc the distance between P and AB-segment\n        var distance = _this5._getDistanceToSegment(map, P, A, B); // is the distance shorter than the previous one? Save it and the segment\n\n\n        if (shortestDistance === undefined || distance < shortestDistance) {\n          shortestDistance = distance;\n          closestSegment = [A, B];\n        }\n      }\n\n      return true;\n    }); // now, take the closest segment (closestSegment) and calc the closest point to P on it.\n\n    var C = this._getClosestPointOnSegment(map, latlng, closestSegment[0], closestSegment[1]); // return the latlng of that sucker\n\n\n    return {\n      latlng: Object.assign({}, C),\n      segment: closestSegment,\n      distance: shortestDistance\n    };\n  },\n  _getClosestPointOnSegment: function _getClosestPointOnSegment(map, latlng, latlngA, latlngB) {\n    var maxzoom = map.getMaxZoom();\n\n    if (maxzoom === Infinity) {\n      maxzoom = map.getZoom();\n    }\n\n    var P = map.project(latlng, maxzoom);\n    var A = map.project(latlngA, maxzoom);\n    var B = map.project(latlngB, maxzoom);\n    var closest = L.LineUtil.closestPointOnSegment(P, A, B);\n    return map.unproject(closest, maxzoom);\n  },\n  _getDistanceToSegment: function _getDistanceToSegment(map, latlng, latlngA, latlngB) {\n    var P = map.latLngToLayerPoint(latlng);\n    var A = map.latLngToLayerPoint(latlngA);\n    var B = map.latLngToLayerPoint(latlngB);\n    return L.LineUtil.pointToSegmentDistance(P, A, B);\n  },\n  _getDistance: function _getDistance(map, latlngA, latlngB) {\n    return map.latLngToLayerPoint(latlngA).distanceTo(map.latLngToLayerPoint(latlngB));\n  }\n};\nvar _default = SnapMixin;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9NaXhpbnMvU25hcHBpbmcuanM/NjNhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBTbmFwTWl4aW4gPSB7XG4gIF9pbml0U25hcHBhYmxlTWFya2VyczogZnVuY3Rpb24gX2luaXRTbmFwcGFibGVNYXJrZXJzKCkge1xuICAgIHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2UgPSB0aGlzLm9wdGlvbnMuc25hcERpc3RhbmNlIHx8IDMwO1xuXG4gICAgaWYgKHRoaXMuaXNQb2x5Z29uKCkpIHtcbiAgICAgIC8vIGNvb3JkcyBpcyBhIG11bHRpZGltYW5zaW9uYWwgYXJyYXksIGhhbmRsZSBhbGwgcmluZ3NcbiAgICAgIHRoaXMuX21hcmtlcnMubWFwKHRoaXMuX2Fzc2lnbkV2ZW50cywgdGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvb3JkcyBpcyBvbmUgZGltZW5zaW9uYWwsIGhhbmRsZSB0aGUgcmluZ1xuICAgICAgdGhpcy5fYXNzaWduRXZlbnRzKHRoaXMuX21hcmtlcnMpO1xuICAgIH1cblxuICAgIHRoaXMuX2xheWVyLm9mZigncG06ZHJhZ3N0YXJ0JywgdGhpcy5fdW5zbmFwLCB0aGlzKTtcblxuICAgIHRoaXMuX2xheWVyLm9uKCdwbTpkcmFnc3RhcnQnLCB0aGlzLl91bnNuYXAsIHRoaXMpO1xuICB9LFxuICBfYXNzaWduRXZlbnRzOiBmdW5jdGlvbiBfYXNzaWduRXZlbnRzKG1hcmtlckFycikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAvLyBsb29wIHRocm91Z2ggbWFya2VyIGFycmF5IGFuZCBhc3NpZ24gZXZlbnRzIHRvIHRoZSBtYXJrZXJzXG4gICAgbWFya2VyQXJyLmZvckVhY2goZnVuY3Rpb24gKG1hcmtlcikge1xuICAgICAgbWFya2VyLm9mZignZHJhZycsIF90aGlzLl9oYW5kbGVTbmFwcGluZywgX3RoaXMpO1xuICAgICAgbWFya2VyLm9uKCdkcmFnJywgX3RoaXMuX2hhbmRsZVNuYXBwaW5nLCBfdGhpcyk7XG4gICAgICBtYXJrZXIub2ZmKCdkcmFnZW5kJywgX3RoaXMuX2NsZWFudXBTbmFwcGluZywgX3RoaXMpO1xuICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgX3RoaXMuX2NsZWFudXBTbmFwcGluZywgX3RoaXMpO1xuICAgIH0pO1xuICB9LFxuICBfdW5zbmFwOiBmdW5jdGlvbiBfdW5zbmFwKCkge1xuICAgIC8vIGRlbGV0ZSB0aGUgbGFzdCBzbmFwXG4gICAgZGVsZXRlIHRoaXMuX3NuYXBMYXRMbmc7XG4gIH0sXG4gIF9jbGVhbnVwU25hcHBpbmc6IGZ1bmN0aW9uIF9jbGVhbnVwU25hcHBpbmcoKSB7XG4gICAgLy8gZGVsZXRlIGl0LCB3ZSBuZWVkIHRvIHJlZnJlc2ggdGhpcyB3aXRoIGVhY2ggc3RhcnQgb2YgYSBkcmFnIGJlY2F1c2VcbiAgICAvLyBtZWFud2hpbGUsIG5ldyBsYXllcnMgY291bGQndmUgYmVlbiBhZGRlZCB0byB0aGUgbWFwXG4gICAgZGVsZXRlIHRoaXMuX3NuYXBMaXN0OyAvLyByZW1vdmUgbWFwIGV2ZW50XG5cbiAgICB0aGlzLl9tYXAub2ZmKCdwbTpyZW1vdmUnLCB0aGlzLl9oYW5kbGVTbmFwTGF5ZXJSZW1vdmFsLCB0aGlzKTtcblxuICAgIGlmICh0aGlzLmRlYnVnSW5kaWNhdG9yTGluZXMpIHtcbiAgICAgIHRoaXMuZGVidWdJbmRpY2F0b3JMaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIGxpbmUucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIF9oYW5kbGVTbmFwTGF5ZXJSZW1vdmFsOiBmdW5jdGlvbiBfaGFuZGxlU25hcExheWVyUmVtb3ZhbChfcmVmKSB7XG4gICAgdmFyIGxheWVyID0gX3JlZi5sYXllcjtcblxuICAgIC8vIGZpbmQgdGhlIGxheWVycyBpbmRleCBpbiBzbmFwbGlzdFxuICAgIHZhciBpbmRleCA9IHRoaXMuX3NuYXBMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGUuX2xlYWZsZXRfaWQgPT09IGxheWVyLl9sZWFmbGV0X2lkO1xuICAgIH0pOyAvLyByZW1vdmUgaXQgZnJvbSB0aGUgc25hcGxpc3RcblxuXG4gICAgdGhpcy5fc25hcExpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgfSxcbiAgX2hhbmRsZVNuYXBwaW5nOiBmdW5jdGlvbiBfaGFuZGxlU25hcHBpbmcoZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgLy8gaWYgc25hcHBpbmcgaXMgZGlzYWJsZWQgdmlhIGhvbGRpbmcgQUxUIGR1cmluZyBkcmFnLCBzdG9wIHJpZ2h0IGhlcmVcbiAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmFsdEtleSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gY3JlYXRlIGEgbGlzdCBvZiBwb2x5Z29ucyB0aGF0IHRoZSBtYXJrZXIgY291bGQgc25hcCB0b1xuICAgIC8vIHRoaXMgaXNuJ3QgaW5zaWRlIGEgbW92ZXN0YXJ0L2RyYWdzdGFydCBjYWxsYmFjayBiZWNhdXNlIG1pZGRsZW1hcmtlcnMgYXJlIGluaXRpYWxpemVkXG4gICAgLy8gYWZ0ZXIgZHJhZ3N0YXJ0L21vdmVzdGFydCBzbyBpdCB3b3VsZG4ndCBmaXJlIGZvciB0aGVtXG5cblxuICAgIGlmICh0aGlzLl9zbmFwTGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jcmVhdGVTbmFwTGlzdChlKTtcbiAgICB9IC8vIGlmIHRoZXJlIGFyZSBubyBsYXllcnMgdG8gc25hcCB0bywgc3RvcCBoZXJlXG5cblxuICAgIGlmICh0aGlzLl9zbmFwTGlzdC5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBtYXJrZXIgPSBlLnRhcmdldDsgLy8gZ2V0IHRoZSBjbG9zZXN0IGxheWVyLCBpdCdzIGNsb3Nlc3QgbGF0bG5nLCBzZWdtZW50IGFuZCB0aGUgZGlzdGFuY2VcblxuICAgIHZhciBjbG9zZXN0TGF5ZXIgPSB0aGlzLl9jYWxjQ2xvc2VzdExheWVyKG1hcmtlci5nZXRMYXRMbmcoKSwgdGhpcy5fc25hcExpc3QpO1xuXG4gICAgdmFyIGlzTWFya2VyID0gY2xvc2VzdExheWVyLmxheWVyIGluc3RhbmNlb2YgTC5NYXJrZXIgfHwgY2xvc2VzdExheWVyLmxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGVNYXJrZXI7IC8vIGZpbmQgdGhlIGZpbmFsIGxhdGxuZyB0aGF0IHdlIHdhbnQgdG8gc25hcCB0b1xuXG4gICAgdmFyIHNuYXBMYXRMbmc7XG5cbiAgICBpZiAoIWlzTWFya2VyKSB7XG4gICAgICBzbmFwTGF0TG5nID0gdGhpcy5fY2hlY2tQcmlvcml0aXlTbmFwcGluZyhjbG9zZXN0TGF5ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzbmFwTGF0TG5nID0gY2xvc2VzdExheWVyLmxhdGxuZztcbiAgICB9IC8vIG1pbmltYWwgZGlzdGFuY2UgYmVmb3JlIG1hcmtlciBzbmFwcyAoaW4gcGl4ZWxzKVxuXG5cbiAgICB2YXIgbWluRGlzdGFuY2UgPSB0aGlzLm9wdGlvbnMuc25hcERpc3RhbmNlOyAvLyBldmVudCBpbmZvIGZvciBwbTpzbmFwIGFuZCBwbTp1bnNuYXBcblxuICAgIHZhciBldmVudEluZm8gPSB7XG4gICAgICBtYXJrZXI6IG1hcmtlcixcbiAgICAgIHNuYXBMYXRMbmc6IHNuYXBMYXRMbmcsXG4gICAgICBzZWdtZW50OiBjbG9zZXN0TGF5ZXIuc2VnbWVudCxcbiAgICAgIGxheWVyOiB0aGlzLl9sYXllcixcbiAgICAgIGxheWVySW50ZXJhY3RlZFdpdGg6IGNsb3Nlc3RMYXllci5sYXllciAvLyBmb3IgbGFjayBvZiBhIGJldHRlciBwcm9wZXJ0eSBuYW1lXG5cbiAgICB9O1xuXG4gICAgaWYgKGNsb3Nlc3RMYXllci5kaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XG4gICAgICAvLyBzbmFwIHRoZSBtYXJrZXJcbiAgICAgIG1hcmtlci5zZXRMYXRMbmcoc25hcExhdExuZyk7XG4gICAgICBtYXJrZXIuX3NuYXBwZWQgPSB0cnVlO1xuXG4gICAgICB2YXIgdHJpZ2dlclNuYXAgPSBmdW5jdGlvbiB0cmlnZ2VyU25hcCgpIHtcbiAgICAgICAgX3RoaXMyLl9zbmFwTGF0TG5nID0gc25hcExhdExuZztcbiAgICAgICAgbWFya2VyLmZpcmUoJ3BtOnNuYXAnLCBldmVudEluZm8pO1xuXG4gICAgICAgIF90aGlzMi5fbGF5ZXIuZmlyZSgncG06c25hcCcsIGV2ZW50SW5mbyk7XG4gICAgICB9OyAvLyBjaGVjayBpZiB0aGUgc25hcHBpbmcgcG9zaXRpb24gZGlmZmVycyBmcm9tIHRoZSBsYXN0IHNuYXBcbiAgICAgIC8vIFRoYW5rcyBNYXggJiBjYXIyZ28gVGVhbVxuXG5cbiAgICAgIHZhciBhID0gdGhpcy5fc25hcExhdExuZyB8fCB7fTtcbiAgICAgIHZhciBiID0gc25hcExhdExuZyB8fCB7fTtcblxuICAgICAgaWYgKGEubGF0ICE9PSBiLmxhdCB8fCBhLmxuZyAhPT0gYi5sbmcpIHtcbiAgICAgICAgdHJpZ2dlclNuYXAoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX3NuYXBMYXRMbmcpIHtcbiAgICAgIC8vIG5vIG1vcmUgc25hcHBpbmdcbiAgICAgIC8vIGlmIGl0IHdhcyBwcmV2aW91c2x5IHNuYXBwZWQuLi5cbiAgICAgIC8vIC4uLnVuc25hcFxuICAgICAgdGhpcy5fdW5zbmFwKGV2ZW50SW5mbyk7XG5cbiAgICAgIG1hcmtlci5fc25hcHBlZCA9IGZhbHNlOyAvLyBhbmQgZmlyZSB1bnNuYXAgZXZlbnRcblxuICAgICAgZXZlbnRJbmZvLm1hcmtlci5maXJlKCdwbTp1bnNuYXAnLCBldmVudEluZm8pO1xuXG4gICAgICB0aGlzLl9sYXllci5maXJlKCdwbTp1bnNuYXAnLCBldmVudEluZm8pO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICAvLyB3ZSBnb3QgdGhlIHBvaW50IHdlIHdhbnQgdG8gc25hcCB0byAoQyksIGJ1dCB3ZSBuZWVkIHRvIGNoZWNrIGlmIGEgY29vcmQgb2YgdGhlIHBvbHlnb25cbiAgLy8gcmVjZWl2ZXMgcHJpb3JpdHkgb3ZlciBDIGFzIHRoZSBzbmFwcGluZyBwb2ludC4gTGV0J3MgY2hlY2sgdGhpcyBoZXJlXG4gIF9jaGVja1ByaW9yaXRpeVNuYXBwaW5nOiBmdW5jdGlvbiBfY2hlY2tQcmlvcml0aXlTbmFwcGluZyhjbG9zZXN0TGF5ZXIpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwOyAvLyBBIGFuZCBCIGFyZSB0aGUgcG9pbnRzIG9mIHRoZSBjbG9zZXN0IHNlZ21lbnQgdG8gUCAodGhlIG1hcmtlciBwb3NpdGlvbiB3ZSB3YW50IHRvIHNuYXApXG5cbiAgICB2YXIgQSA9IGNsb3Nlc3RMYXllci5zZWdtZW50WzBdO1xuICAgIHZhciBCID0gY2xvc2VzdExheWVyLnNlZ21lbnRbMV07IC8vIEMgaXMgdGhlIHBvaW50IHdlIHdvdWxkIHNuYXAgdG8gb24gdGhlIHNlZ21lbnQuXG4gICAgLy8gVGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIGNsb3Nlc3Qgc2VnbWVudCBvZiB0aGUgY2xvc2VzdCBwb2x5Z29uIHRvIFAuIFRoYXQncyByaWdodC5cblxuICAgIHZhciBDID0gY2xvc2VzdExheWVyLmxhdGxuZzsgLy8gZGlzdGFuY2VzIGZyb20gQSB0byBDIGFuZCBCIHRvIEMgdG8gY2hlY2sgd2hpY2ggb25lIGlzIGNsb3NlciB0byBDXG5cbiAgICB2YXIgZGlzdGFuY2VBQyA9IHRoaXMuX2dldERpc3RhbmNlKG1hcCwgQSwgQyk7XG5cbiAgICB2YXIgZGlzdGFuY2VCQyA9IHRoaXMuX2dldERpc3RhbmNlKG1hcCwgQiwgQyk7IC8vIGNsb3Nlc3QgbGF0bG5nIG9mIEEgYW5kIEIgdG8gQ1xuXG5cbiAgICB2YXIgY2xvc2VzdFZlcnRleExhdExuZyA9IGRpc3RhbmNlQUMgPCBkaXN0YW5jZUJDID8gQSA6IEI7IC8vIGRpc3RhbmNlIGJldHdlZW4gY2xvc2VzdFZlcnRleExhdExuZyBhbmQgQ1xuXG4gICAgdmFyIHNob3J0ZXN0RGlzdGFuY2UgPSBkaXN0YW5jZUFDIDwgZGlzdGFuY2VCQyA/IGRpc3RhbmNlQUMgOiBkaXN0YW5jZUJDOyAvLyB0aGUgZGlzdGFuY2UgdGhhdCBuZWVkcyB0byBiZSB1bmRlcmN1dCB0byB0cmlnZ2VyIHByaW9yaXR5XG5cbiAgICB2YXIgcHJpb3JpdHlEaXN0YW5jZSA9IHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2U7IC8vIHRoZSBsYXRsbmcgd2UgdWx0ZW1hdGVseSB3YW50IHRvIHNuYXAgdG9cblxuICAgIHZhciBzbmFwTGF0bG5nOyAvLyBpZiBDIGlzIGNsb3NlciB0byB0aGUgY2xvc2VzdFZlcnRleExhdExuZyAoQSBvciBCKSB0aGFuIHRoZSBzbmFwRGlzdGFuY2UsXG4gICAgLy8gdGhlIGNsb3Nlc3RWZXJ0ZXhMYXRMbmcgaGFzIHByaW9yaXR5IG92ZXIgQyBhcyB0aGUgc25hcHBpbmcgcG9pbnQuXG5cbiAgICBpZiAoc2hvcnRlc3REaXN0YW5jZSA8IHByaW9yaXR5RGlzdGFuY2UpIHtcbiAgICAgIHNuYXBMYXRsbmcgPSBjbG9zZXN0VmVydGV4TGF0TG5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzbmFwTGF0bG5nID0gQztcbiAgICB9IC8vIHJldHVybiB0aGUgY29weSBvZiBzbmFwcGluZyBwb2ludFxuXG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc25hcExhdGxuZyk7XG4gIH0sXG4gIF9jcmVhdGVTbmFwTGlzdDogZnVuY3Rpb24gX2NyZWF0ZVNuYXBMaXN0KCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIGxheWVycyA9IFtdO1xuICAgIHZhciBkZWJ1Z0luZGljYXRvckxpbmVzID0gW107XG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcDsgLy8gZmluZCBhbGwgbGF5ZXJzIHRoYXQgYXJlIG9yIGluaGVyaXQgZnJvbSBQb2x5bGluZXMuLi4gYW5kIG1hcmtlcnMgdGhhdCBhcmUgbm90XG4gICAgLy8gdGVtcG9yYXJ5IG1hcmtlcnMgb2YgcG9seWdvbi1lZGl0c1xuXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIEwuUG9seWxpbmUgfHwgbGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciB8fCBsYXllciBpbnN0YW5jZW9mIEwuQ2lyY2xlTWFya2VyKSB7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICAgICAgbWFwLm9mZigncG06cmVtb3ZlJywgX3RoaXMzLl9oYW5kbGVTbmFwTGF5ZXJSZW1vdmFsLCBfdGhpczMpO1xuICAgICAgICBtYXAub24oJ3BtOnJlbW92ZScsIF90aGlzMy5faGFuZGxlU25hcExheWVyUmVtb3ZhbCwgX3RoaXMzKTsgLy8gdGhpcyBpcyBmb3IgZGVidWdnaW5nXG5cbiAgICAgICAgdmFyIGRlYnVnTGluZSA9IEwucG9seWxpbmUoW10sIHtcbiAgICAgICAgICBjb2xvcjogJ3JlZCcsXG4gICAgICAgICAgcG1JZ25vcmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGRlYnVnSW5kaWNhdG9yTGluZXMucHVzaChkZWJ1Z0xpbmUpOyAvLyB1bmNvbW1lbnQg8J+RhyB0aGlzIGxpbmUgdG8gc2hvdyBoZWxwZXIgbGluZXMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAvLyBkZWJ1Z0xpbmUuYWRkVG8obWFwKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gLi4uZXhjZXB0IG15c2VsZlxuXG4gICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIHJldHVybiBfdGhpczMuX2xheWVyICE9PSBsYXllcjtcbiAgICB9KTsgLy8gYWxzbyByZW1vdmUgZXZlcnl0aGluZyB0aGF0IGhhcyBubyBjb29yZGluYXRlcyB5ZXRcblxuICAgIGxheWVycyA9IGxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICByZXR1cm4gbGF5ZXIuX2xhdGxuZyB8fCBsYXllci5fbGF0bG5ncyAmJiBsYXllci5fbGF0bG5ncy5sZW5ndGggPiAwO1xuICAgIH0pOyAvLyBmaW5hbGx5IHJlbW92ZSBldmVyeXRoaW5nIHRoYXQncyBsZWFmbGV0LnBtIHNwZWNpZmljIHRlbXBvcmFyeSBzdHVmZlxuXG4gICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIHJldHVybiAhbGF5ZXIuX3BtVGVtcExheWVyO1xuICAgIH0pOyAvLyBzYXZlIHNuYXBsaXN0IGZyb20gbGF5ZXJzIGFuZCB0aGUgb3RoZXIgc25hcCBsYXllcnMgYWRkZWQgZnJvbSBvdGhlciBjbGFzc2VzL3NjcmlwdHNcblxuICAgIGlmICh0aGlzLl9vdGhlclNuYXBMYXllcnMpIHtcbiAgICAgIHRoaXMuX3NuYXBMaXN0ID0gbGF5ZXJzLmNvbmNhdCh0aGlzLl9vdGhlclNuYXBMYXllcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zbmFwTGlzdCA9IGxheWVycztcbiAgICB9XG5cbiAgICB0aGlzLmRlYnVnSW5kaWNhdG9yTGluZXMgPSBkZWJ1Z0luZGljYXRvckxpbmVzO1xuICB9LFxuICBfY2FsY0Nsb3Nlc3RMYXllcjogZnVuY3Rpb24gX2NhbGNDbG9zZXN0TGF5ZXIobGF0bG5nLCBsYXllcnMpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIC8vIHRoZSBjbG9zZXN0IHBvbHlnb24gdG8gb3VyIGRyYWdnZWQgbWFya2VyIGxhdGxuZ1xuICAgIHZhciBjbG9zZXN0TGF5ZXIgPSB7fTsgLy8gbG9vcCB0aHJvdWdoIHRoZSBsYXllcnNcblxuICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllciwgaW5kZXgpIHtcbiAgICAgIC8vIGZpbmQgdGhlIGNsb3Nlc3QgbGF0bG5nLCBzZWdtZW50IGFuZCB0aGUgZGlzdGFuY2Ugb2YgdGhpcyBsYXllciB0byB0aGUgZHJhZ2dlZCBtYXJrZXIgbGF0bG5nXG4gICAgICB2YXIgcmVzdWx0cyA9IF90aGlzNC5fY2FsY0xheWVyRGlzdGFuY2VzKGxhdGxuZywgbGF5ZXIpOyAvLyBzaG93IGluZGljYXRvciBsaW5lcywgaXQncyBmb3IgZGVidWdnaW5nXG5cblxuICAgICAgX3RoaXM0LmRlYnVnSW5kaWNhdG9yTGluZXNbaW5kZXhdLnNldExhdExuZ3MoW2xhdGxuZywgcmVzdWx0cy5sYXRsbmddKTsgLy8gc2F2ZSB0aGUgaW5mbyBpZiBpdCBkb2Vzbid0IGV4aXN0IG9yIGlmIHRoZSBkaXN0YW5jZSBpcyBzbWFsbGVyIHRoYW4gdGhlIHByZXZpb3VzIG9uZVxuXG5cbiAgICAgIGlmIChjbG9zZXN0TGF5ZXIuZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCByZXN1bHRzLmRpc3RhbmNlIDwgY2xvc2VzdExheWVyLmRpc3RhbmNlKSB7XG4gICAgICAgIGNsb3Nlc3RMYXllciA9IHJlc3VsdHM7XG4gICAgICAgIGNsb3Nlc3RMYXllci5sYXllciA9IGxheWVyO1xuICAgICAgfVxuICAgIH0pOyAvLyByZXR1cm4gdGhlIGNsb3Nlc3QgbGF5ZXIgYW5kIGl0J3MgZGF0YVxuICAgIC8vIGlmIHRoZXJlIGlzIG5vIGNsb3Nlc3QgbGF5ZXIsIHJldHVybiB1bmRlZmluZWRcblxuICAgIHJldHVybiBjbG9zZXN0TGF5ZXI7XG4gIH0sXG4gIF9jYWxjTGF5ZXJEaXN0YW5jZXM6IGZ1bmN0aW9uIF9jYWxjTGF5ZXJEaXN0YW5jZXMobGF0bG5nLCBsYXllcikge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcDsgLy8gaXMgdGhpcyBhIHBvbHlsaW5lLCBtYXJrZXIgb3IgcG9seWdvbj9cblxuICAgIHZhciBpc1BvbHlnb24gPSBsYXllciBpbnN0YW5jZW9mIEwuUG9seWdvbjtcbiAgICB2YXIgaXNQb2x5bGluZSA9ICEobGF5ZXIgaW5zdGFuY2VvZiBMLlBvbHlnb24pICYmIGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5bGluZTtcbiAgICB2YXIgaXNNYXJrZXIgPSBsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyIHx8IGxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGVNYXJrZXI7IC8vIHRoZSBwb2ludCBQIHdoaWNoIHdlIHdhbnQgdG8gc25hcCAocHJvYnBhYmx5IHRoZSBtYXJrZXIgdGhhdCBpcyBkcmFnZ2VkKVxuXG4gICAgdmFyIFAgPSBsYXRsbmc7XG4gICAgdmFyIGNvb3JkczsgLy8gdGhlIGNvb3JkcyBvZiB0aGUgbGF5ZXJcblxuICAgIGlmIChpc1BvbHlnb24pIHtcbiAgICAgIC8vIHBvbHlnb25cbiAgICAgIGNvb3JkcyA9IGxheWVyLmdldExhdExuZ3MoKVswXTtcbiAgICB9IGVsc2UgaWYgKGlzUG9seWxpbmUpIHtcbiAgICAgIC8vIHBvbHlsaW5lXG4gICAgICBjb29yZHMgPSBsYXllci5nZXRMYXRMbmdzKCk7XG4gICAgfSBlbHNlIGlmIChpc01hcmtlcikge1xuICAgICAgLy8gbWFya2VyXG4gICAgICBjb29yZHMgPSBsYXllci5nZXRMYXRMbmcoKTsgLy8gcmV0dXJuIHRoZSBpbmZvIGZvciB0aGUgbWFya2VyLCBubyBtb3JlIGNhbGN1bGF0aW9ucyBuZWVkZWRcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGF0bG5nOiBPYmplY3QuYXNzaWduKHt9LCBjb29yZHMpLFxuICAgICAgICBkaXN0YW5jZTogdGhpcy5fZ2V0RGlzdGFuY2UobWFwLCBjb29yZHMsIFApXG4gICAgICB9O1xuICAgIH0gLy8gdGhlIGNsb3Nlc3Qgc2VnbWVudCAobGluZSBiZXR3ZWVuIHR3byBwb2ludHMpIG9mIHRoZSBsYXllclxuXG5cbiAgICB2YXIgY2xvc2VzdFNlZ21lbnQ7IC8vIHRoZSBzaG9ydGVzdCBkaXN0YW5jZSBmcm9tIFAgdG8gY2xvc2VzdFNlZ21lbnRcblxuICAgIHZhciBzaG9ydGVzdERpc3RhbmNlOyAvLyBsb29wIHRocm91Z2ggdGhlIGNvb3JkcyBvZiB0aGUgbGF5ZXJcblxuICAgIGNvb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChjb29yZCwgaW5kZXgpIHtcbiAgICAgIC8vIHRha2UgdGhpcyBjb29yZCAoQSkuLi5cbiAgICAgIHZhciBBID0gY29vcmQ7XG4gICAgICB2YXIgbmV4dEluZGV4OyAvLyBhbmQgdGhlIG5leHQgY29vcmQgKEIpIGFzIHBvaW50c1xuXG4gICAgICBpZiAoaXNQb2x5Z29uKSB7XG4gICAgICAgIG5leHRJbmRleCA9IGluZGV4ICsgMSA9PT0gY29vcmRzLmxlbmd0aCA/IDAgOiBpbmRleCArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0SW5kZXggPSBpbmRleCArIDEgPT09IGNvb3Jkcy5sZW5ndGggPyB1bmRlZmluZWQgOiBpbmRleCArIDE7XG4gICAgICB9XG5cbiAgICAgIHZhciBCID0gY29vcmRzW25leHRJbmRleF07XG5cbiAgICAgIGlmIChCKSB7XG4gICAgICAgIC8vIGNhbGMgdGhlIGRpc3RhbmNlIGJldHdlZW4gUCBhbmQgQUItc2VnbWVudFxuICAgICAgICB2YXIgZGlzdGFuY2UgPSBfdGhpczUuX2dldERpc3RhbmNlVG9TZWdtZW50KG1hcCwgUCwgQSwgQik7IC8vIGlzIHRoZSBkaXN0YW5jZSBzaG9ydGVyIHRoYW4gdGhlIHByZXZpb3VzIG9uZT8gU2F2ZSBpdCBhbmQgdGhlIHNlZ21lbnRcblxuXG4gICAgICAgIGlmIChzaG9ydGVzdERpc3RhbmNlID09PSB1bmRlZmluZWQgfHwgZGlzdGFuY2UgPCBzaG9ydGVzdERpc3RhbmNlKSB7XG4gICAgICAgICAgc2hvcnRlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgIGNsb3Nlc3RTZWdtZW50ID0gW0EsIEJdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pOyAvLyBub3csIHRha2UgdGhlIGNsb3Nlc3Qgc2VnbWVudCAoY2xvc2VzdFNlZ21lbnQpIGFuZCBjYWxjIHRoZSBjbG9zZXN0IHBvaW50IHRvIFAgb24gaXQuXG5cbiAgICB2YXIgQyA9IHRoaXMuX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudChtYXAsIGxhdGxuZywgY2xvc2VzdFNlZ21lbnRbMF0sIGNsb3Nlc3RTZWdtZW50WzFdKTsgLy8gcmV0dXJuIHRoZSBsYXRsbmcgb2YgdGhhdCBzdWNrZXJcblxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGxuZzogT2JqZWN0LmFzc2lnbih7fSwgQyksXG4gICAgICBzZWdtZW50OiBjbG9zZXN0U2VnbWVudCxcbiAgICAgIGRpc3RhbmNlOiBzaG9ydGVzdERpc3RhbmNlXG4gICAgfTtcbiAgfSxcbiAgX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudDogZnVuY3Rpb24gX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudChtYXAsIGxhdGxuZywgbGF0bG5nQSwgbGF0bG5nQikge1xuICAgIHZhciBtYXh6b29tID0gbWFwLmdldE1heFpvb20oKTtcblxuICAgIGlmIChtYXh6b29tID09PSBJbmZpbml0eSkge1xuICAgICAgbWF4em9vbSA9IG1hcC5nZXRab29tKCk7XG4gICAgfVxuXG4gICAgdmFyIFAgPSBtYXAucHJvamVjdChsYXRsbmcsIG1heHpvb20pO1xuICAgIHZhciBBID0gbWFwLnByb2plY3QobGF0bG5nQSwgbWF4em9vbSk7XG4gICAgdmFyIEIgPSBtYXAucHJvamVjdChsYXRsbmdCLCBtYXh6b29tKTtcbiAgICB2YXIgY2xvc2VzdCA9IEwuTGluZVV0aWwuY2xvc2VzdFBvaW50T25TZWdtZW50KFAsIEEsIEIpO1xuICAgIHJldHVybiBtYXAudW5wcm9qZWN0KGNsb3Nlc3QsIG1heHpvb20pO1xuICB9LFxuICBfZ2V0RGlzdGFuY2VUb1NlZ21lbnQ6IGZ1bmN0aW9uIF9nZXREaXN0YW5jZVRvU2VnbWVudChtYXAsIGxhdGxuZywgbGF0bG5nQSwgbGF0bG5nQikge1xuICAgIHZhciBQID0gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmcpO1xuICAgIHZhciBBID0gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmdBKTtcbiAgICB2YXIgQiA9IG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobGF0bG5nQik7XG4gICAgcmV0dXJuIEwuTGluZVV0aWwucG9pbnRUb1NlZ21lbnREaXN0YW5jZShQLCBBLCBCKTtcbiAgfSxcbiAgX2dldERpc3RhbmNlOiBmdW5jdGlvbiBfZ2V0RGlzdGFuY2UobWFwLCBsYXRsbmdBLCBsYXRsbmdCKSB7XG4gICAgcmV0dXJuIG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobGF0bG5nQSkuZGlzdGFuY2VUbyhtYXAubGF0TG5nVG9MYXllclBvaW50KGxhdGxuZ0IpKTtcbiAgfVxufTtcbnZhciBfZGVmYXVsdCA9IFNuYXBNaXhpbjtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL01peGlucy9TbmFwcGluZy5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__turf_helpers__ = __webpack_require__(1);\n\n\n/**\n * Takes a {@link LineString|linestring}, {@link MultiLineString|multi-linestring}, {@link MultiPolygon|multi-polygon}, or {@link Polygon|polygon} and returns {@link Point|points} at all self-intersections.\n *\n * @name kinks\n * @param {Feature<LineString|MultiLineString|MultiPolygon|Polygon>} featureIn input feature\n * @returns {FeatureCollection<Point>} self-intersections\n * @example\n * var poly = turf.polygon([[\n *   [-12.034835, 8.901183],\n *   [-12.060413, 8.899826],\n *   [-12.03638, 8.873199],\n *   [-12.059383, 8.871418],\n *   [-12.034835, 8.901183]\n * ]]);\n *\n * var kinks = turf.kinks(poly);\n *\n * //addToMap\n * var addToMap = [poly, kinks]\n */\nfunction kinks(featureIn) {\n    var coordinates;\n    var feature;\n    var results = {\n        type: 'FeatureCollection',\n        features: []\n    };\n    if (featureIn.type === 'Feature') {\n        feature = featureIn.geometry;\n    } else {\n        feature = featureIn;\n    }\n    if (feature.type === 'LineString') {\n        coordinates = [feature.coordinates];\n    } else if (feature.type === 'MultiLineString') {\n        coordinates = feature.coordinates;\n    } else if (feature.type === 'MultiPolygon') {\n        coordinates = [].concat.apply([], feature.coordinates);\n    } else if (feature.type === 'Polygon') {\n        coordinates = feature.coordinates;\n    } else {\n        throw new Error('Input must be a LineString, MultiLineString, ' +\n            'Polygon, or MultiPolygon Feature or Geometry');\n    }\n    coordinates.forEach(function (line1) {\n        coordinates.forEach(function (line2) {\n            for (var i = 0; i < line1.length - 1; i++) {\n                // start iteration at i, intersections for k < i have already been checked in previous outer loop iterations\n                for (var k = i; k < line2.length - 1; k++) {\n                    if (line1 === line2) {\n                        // segments are adjacent and always share a vertex, not a kink\n                        if (Math.abs(i - k) === 1) {\n                            continue;\n                        }\n                        // first and last segment in a closed lineString or ring always share a vertex, not a kink\n                        if (\n                            // segments are first and last segment of lineString\n                            i === 0 &&\n                            k === line1.length - 2 &&\n                            // lineString is closed\n                            line1[i][0] === line1[line1.length - 1][0] &&\n                            line1[i][1] === line1[line1.length - 1][1]\n                        ) {\n                            continue;\n                        }\n                    }\n\n                    var intersection = lineIntersects(line1[i][0], line1[i][1], line1[i + 1][0], line1[i + 1][1],\n                        line2[k][0], line2[k][1], line2[k + 1][0], line2[k + 1][1]);\n                    if (intersection) {\n                        results.features.push(Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"e\" /* point */])([intersection[0], intersection[1]]));\n                    }\n                }\n            }\n        });\n    });\n    return results;\n}\n\n\n// modified from http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\nfunction lineIntersects(line1StartX, line1StartY, line1EndX, line1EndY, line2StartX, line2StartY, line2EndX, line2EndY) {\n    // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\n    var denominator, a, b, numerator1, numerator2,\n        result = {\n            x: null,\n            y: null,\n            onLine1: false,\n            onLine2: false\n        };\n    denominator = ((line2EndY - line2StartY) * (line1EndX - line1StartX)) - ((line2EndX - line2StartX) * (line1EndY - line1StartY));\n    if (denominator === 0) {\n        if (result.x !== null && result.y !== null) {\n            return result;\n        } else {\n            return false;\n        }\n    }\n    a = line1StartY - line2StartY;\n    b = line1StartX - line2StartX;\n    numerator1 = ((line2EndX - line2StartX) * a) - ((line2EndY - line2StartY) * b);\n    numerator2 = ((line1EndX - line1StartX) * a) - ((line1EndY - line1StartY) * b);\n    a = numerator1 / denominator;\n    b = numerator2 / denominator;\n\n    // if we cast these lines infinitely in both directions, they intersect here:\n    result.x = line1StartX + (a * (line1EndX - line1StartX));\n    result.y = line1StartY + (a * (line1EndY - line1StartY));\n\n    // if line1 is a segment and line2 is infinite, they intersect if:\n    if (a >= 0 && a <= 1) {\n        result.onLine1 = true;\n    }\n    // if line2 is a segment and line1 is infinite, they intersect if:\n    if (b >= 0 && b <= 1) {\n        result.onLine2 = true;\n    }\n    // if line1 and line2 are segments, they intersect if both of the above are true\n    if (result.onLine1 && result.onLine2) {\n        return [result.x, result.y];\n    } else {\n        return false;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (kinks);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9raW5rcy9tYWluLmVzLmpzPzUzY2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcG9pbnQgfSBmcm9tICdAdHVyZi9oZWxwZXJzJztcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBMaW5lU3RyaW5nfGxpbmVzdHJpbmd9LCB7QGxpbmsgTXVsdGlMaW5lU3RyaW5nfG11bHRpLWxpbmVzdHJpbmd9LCB7QGxpbmsgTXVsdGlQb2x5Z29ufG11bHRpLXBvbHlnb259LCBvciB7QGxpbmsgUG9seWdvbnxwb2x5Z29ufSBhbmQgcmV0dXJucyB7QGxpbmsgUG9pbnR8cG9pbnRzfSBhdCBhbGwgc2VsZi1pbnRlcnNlY3Rpb25zLlxuICpcbiAqIEBuYW1lIGtpbmtzXG4gKiBAcGFyYW0ge0ZlYXR1cmU8TGluZVN0cmluZ3xNdWx0aUxpbmVTdHJpbmd8TXVsdGlQb2x5Z29ufFBvbHlnb24+fSBmZWF0dXJlSW4gaW5wdXQgZmVhdHVyZVxuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9uPFBvaW50Pn0gc2VsZi1pbnRlcnNlY3Rpb25zXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHkgPSB0dXJmLnBvbHlnb24oW1tcbiAqICAgWy0xMi4wMzQ4MzUsIDguOTAxMTgzXSxcbiAqICAgWy0xMi4wNjA0MTMsIDguODk5ODI2XSxcbiAqICAgWy0xMi4wMzYzOCwgOC44NzMxOTldLFxuICogICBbLTEyLjA1OTM4MywgOC44NzE0MThdLFxuICogICBbLTEyLjAzNDgzNSwgOC45MDExODNdXG4gKiBdXSk7XG4gKlxuICogdmFyIGtpbmtzID0gdHVyZi5raW5rcyhwb2x5KTtcbiAqXG4gKiAvL2FkZFRvTWFwXG4gKiB2YXIgYWRkVG9NYXAgPSBbcG9seSwga2lua3NdXG4gKi9cbmZ1bmN0aW9uIGtpbmtzKGZlYXR1cmVJbikge1xuICAgIHZhciBjb29yZGluYXRlcztcbiAgICB2YXIgZmVhdHVyZTtcbiAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgZmVhdHVyZXM6IFtdXG4gICAgfTtcbiAgICBpZiAoZmVhdHVyZUluLnR5cGUgPT09ICdGZWF0dXJlJykge1xuICAgICAgICBmZWF0dXJlID0gZmVhdHVyZUluLmdlb21ldHJ5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZlYXR1cmUgPSBmZWF0dXJlSW47XG4gICAgfVxuICAgIGlmIChmZWF0dXJlLnR5cGUgPT09ICdMaW5lU3RyaW5nJykge1xuICAgICAgICBjb29yZGluYXRlcyA9IFtmZWF0dXJlLmNvb3JkaW5hdGVzXTtcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmUudHlwZSA9PT0gJ011bHRpTGluZVN0cmluZycpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBmZWF0dXJlLmNvb3JkaW5hdGVzO1xuICAgIH0gZWxzZSBpZiAoZmVhdHVyZS50eXBlID09PSAnTXVsdGlQb2x5Z29uJykge1xuICAgICAgICBjb29yZGluYXRlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgZmVhdHVyZS5jb29yZGluYXRlcyk7XG4gICAgfSBlbHNlIGlmIChmZWF0dXJlLnR5cGUgPT09ICdQb2x5Z29uJykge1xuICAgICAgICBjb29yZGluYXRlcyA9IGZlYXR1cmUuY29vcmRpbmF0ZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnB1dCBtdXN0IGJlIGEgTGluZVN0cmluZywgTXVsdGlMaW5lU3RyaW5nLCAnICtcbiAgICAgICAgICAgICdQb2x5Z29uLCBvciBNdWx0aVBvbHlnb24gRmVhdHVyZSBvciBHZW9tZXRyeScpO1xuICAgIH1cbiAgICBjb29yZGluYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lMSkge1xuICAgICAgICBjb29yZGluYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lMikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lMS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBzdGFydCBpdGVyYXRpb24gYXQgaSwgaW50ZXJzZWN0aW9ucyBmb3IgayA8IGkgaGF2ZSBhbHJlYWR5IGJlZW4gY2hlY2tlZCBpbiBwcmV2aW91cyBvdXRlciBsb29wIGl0ZXJhdGlvbnNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gaTsgayA8IGxpbmUyLmxlbmd0aCAtIDE7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZTEgPT09IGxpbmUyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWdtZW50cyBhcmUgYWRqYWNlbnQgYW5kIGFsd2F5cyBzaGFyZSBhIHZlcnRleCwgbm90IGEga2lua1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGkgLSBrKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3QgYW5kIGxhc3Qgc2VnbWVudCBpbiBhIGNsb3NlZCBsaW5lU3RyaW5nIG9yIHJpbmcgYWx3YXlzIHNoYXJlIGEgdmVydGV4LCBub3QgYSBraW5rXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VnbWVudHMgYXJlIGZpcnN0IGFuZCBsYXN0IHNlZ21lbnQgb2YgbGluZVN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID09PSBsaW5lMS5sZW5ndGggLSAyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGluZVN0cmluZyBpcyBjbG9zZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lMVtpXVswXSA9PT0gbGluZTFbbGluZTEubGVuZ3RoIC0gMV1bMF0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lMVtpXVsxXSA9PT0gbGluZTFbbGluZTEubGVuZ3RoIC0gMV1bMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IGxpbmVJbnRlcnNlY3RzKGxpbmUxW2ldWzBdLCBsaW5lMVtpXVsxXSwgbGluZTFbaSArIDFdWzBdLCBsaW5lMVtpICsgMV1bMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lMltrXVswXSwgbGluZTJba11bMV0sIGxpbmUyW2sgKyAxXVswXSwgbGluZTJbayArIDFdWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5mZWF0dXJlcy5wdXNoKHBvaW50KFtpbnRlcnNlY3Rpb25bMF0sIGludGVyc2VjdGlvblsxXV0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5cblxuLy8gbW9kaWZpZWQgZnJvbSBodHRwOi8vanNmaWRkbGUubmV0L2p1c3Rpbl9jX3JvdW5kcy9HZDJTMi9saWdodC9cbmZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzKGxpbmUxU3RhcnRYLCBsaW5lMVN0YXJ0WSwgbGluZTFFbmRYLCBsaW5lMUVuZFksIGxpbmUyU3RhcnRYLCBsaW5lMlN0YXJ0WSwgbGluZTJFbmRYLCBsaW5lMkVuZFkpIHtcbiAgICAvLyBpZiB0aGUgbGluZXMgaW50ZXJzZWN0LCB0aGUgcmVzdWx0IGNvbnRhaW5zIHRoZSB4IGFuZCB5IG9mIHRoZSBpbnRlcnNlY3Rpb24gKHRyZWF0aW5nIHRoZSBsaW5lcyBhcyBpbmZpbml0ZSkgYW5kIGJvb2xlYW5zIGZvciB3aGV0aGVyIGxpbmUgc2VnbWVudCAxIG9yIGxpbmUgc2VnbWVudCAyIGNvbnRhaW4gdGhlIHBvaW50XG4gICAgdmFyIGRlbm9taW5hdG9yLCBhLCBiLCBudW1lcmF0b3IxLCBudW1lcmF0b3IyLFxuICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICB4OiBudWxsLFxuICAgICAgICAgICAgeTogbnVsbCxcbiAgICAgICAgICAgIG9uTGluZTE6IGZhbHNlLFxuICAgICAgICAgICAgb25MaW5lMjogZmFsc2VcbiAgICAgICAgfTtcbiAgICBkZW5vbWluYXRvciA9ICgobGluZTJFbmRZIC0gbGluZTJTdGFydFkpICogKGxpbmUxRW5kWCAtIGxpbmUxU3RhcnRYKSkgLSAoKGxpbmUyRW5kWCAtIGxpbmUyU3RhcnRYKSAqIChsaW5lMUVuZFkgLSBsaW5lMVN0YXJ0WSkpO1xuICAgIGlmIChkZW5vbWluYXRvciA9PT0gMCkge1xuICAgICAgICBpZiAocmVzdWx0LnggIT09IG51bGwgJiYgcmVzdWx0LnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYSA9IGxpbmUxU3RhcnRZIC0gbGluZTJTdGFydFk7XG4gICAgYiA9IGxpbmUxU3RhcnRYIC0gbGluZTJTdGFydFg7XG4gICAgbnVtZXJhdG9yMSA9ICgobGluZTJFbmRYIC0gbGluZTJTdGFydFgpICogYSkgLSAoKGxpbmUyRW5kWSAtIGxpbmUyU3RhcnRZKSAqIGIpO1xuICAgIG51bWVyYXRvcjIgPSAoKGxpbmUxRW5kWCAtIGxpbmUxU3RhcnRYKSAqIGEpIC0gKChsaW5lMUVuZFkgLSBsaW5lMVN0YXJ0WSkgKiBiKTtcbiAgICBhID0gbnVtZXJhdG9yMSAvIGRlbm9taW5hdG9yO1xuICAgIGIgPSBudW1lcmF0b3IyIC8gZGVub21pbmF0b3I7XG5cbiAgICAvLyBpZiB3ZSBjYXN0IHRoZXNlIGxpbmVzIGluZmluaXRlbHkgaW4gYm90aCBkaXJlY3Rpb25zLCB0aGV5IGludGVyc2VjdCBoZXJlOlxuICAgIHJlc3VsdC54ID0gbGluZTFTdGFydFggKyAoYSAqIChsaW5lMUVuZFggLSBsaW5lMVN0YXJ0WCkpO1xuICAgIHJlc3VsdC55ID0gbGluZTFTdGFydFkgKyAoYSAqIChsaW5lMUVuZFkgLSBsaW5lMVN0YXJ0WSkpO1xuXG4gICAgLy8gaWYgbGluZTEgaXMgYSBzZWdtZW50IGFuZCBsaW5lMiBpcyBpbmZpbml0ZSwgdGhleSBpbnRlcnNlY3QgaWY6XG4gICAgaWYgKGEgPj0gMCAmJiBhIDw9IDEpIHtcbiAgICAgICAgcmVzdWx0Lm9uTGluZTEgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBpZiBsaW5lMiBpcyBhIHNlZ21lbnQgYW5kIGxpbmUxIGlzIGluZmluaXRlLCB0aGV5IGludGVyc2VjdCBpZjpcbiAgICBpZiAoYiA+PSAwICYmIGIgPD0gMSkge1xuICAgICAgICByZXN1bHQub25MaW5lMiA9IHRydWU7XG4gICAgfVxuICAgIC8vIGlmIGxpbmUxIGFuZCBsaW5lMiBhcmUgc2VnbWVudHMsIHRoZXkgaW50ZXJzZWN0IGlmIGJvdGggb2YgdGhlIGFib3ZlIGFyZSB0cnVlXG4gICAgaWYgKHJlc3VsdC5vbkxpbmUxICYmIHJlc3VsdC5vbkxpbmUyKSB7XG4gICAgICAgIHJldHVybiBbcmVzdWx0LngsIHJlc3VsdC55XTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBraW5rcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0B0dXJmL2tpbmtzL21haW4uZXMuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

eval("!function(t,e){ true?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.jsts={})}(this,function(t){\"use strict\";function e(){}function n(t){this.message=t||\"\"}function i(t){this.message=t||\"\"}function r(t){this.message=t||\"\"}function o(){}function s(t){return null===t?Mt:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function h(){}function f(){this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}function g(){}function d(t){this.message=t||\"\"}function y(){this.array_=[]}\"fill\"in Array.prototype||Object.defineProperty(Array.prototype,\"fill\",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+\" is not an object\");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return\"number\"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return\"number\"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var _=function(){};_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(){},v=function(){},I={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},I.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,I);var E=function(){},x=function(){},N=function(){},C=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},S={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};C.prototype.setOrdinate=function(t,e){switch(t){case C.X:this.x=e;break;case C.Y:this.y=e;break;case C.Z:this.z=e;break;default:throw new m(\"Invalid ordinate index: \"+t)}},C.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,n)&&!!_.equalsWithTolerance(this.y,e.y,n)}},C.prototype.getOrdinate=function(t){switch(t){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.z}throw new m(\"Invalid ordinate index: \"+t)},C.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},C.prototype.equals=function(t){return t instanceof C&&this.equals2D(t)},C.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},C.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},C.prototype.clone=function(){},C.prototype.copy=function(){return new C(this)},C.prototype.toString=function(){return\"(\"+this.x+\", \"+this.y+\", \"+this.z+\")\"},C.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},C.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},C.prototype.hashCode=function(){var t=17;return t=37*t+C.hashCode(this.x),t=37*t+C.hashCode(this.y)},C.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},C.prototype.interfaces_=function(){return[E,x,e]},C.prototype.getClass=function(){return C},C.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},S.DimensionalComparator.get=function(){return L},S.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},S.NULL_ORDINATE.get=function(){return v.NaN},S.X.get=function(){return 0},S.Y.get=function(){return 1},S.Z.get=function(){return 2},Object.defineProperties(C,S);var L=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m(\"only 2 or 3 dimensions may be specified\");this._dimensionsToTest=e}};L.prototype.compare=function(t,e){var n=t,i=e,r=L.compare(n.x,i.x);if(0!==r)return r;var o=L.compare(n.y,i.y);if(0!==o)return o;if(this._dimensionsToTest<=2)return 0;return L.compare(n.z,i.z)},L.prototype.interfaces_=function(){return[N]},L.prototype.getClass=function(){return L},L.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var b=function(){};b.prototype.create=function(){},b.prototype.interfaces_=function(){return[]},b.prototype.getClass=function(){return b};var w=function(){},O={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};w.prototype.interfaces_=function(){return[]},w.prototype.getClass=function(){return w},w.toLocationSymbol=function(t){switch(t){case w.EXTERIOR:return\"e\";case w.BOUNDARY:return\"b\";case w.INTERIOR:return\"i\";case w.NONE:return\"-\"}throw new m(\"Unknown location value: \"+t)},O.INTERIOR.get=function(){return 0},O.BOUNDARY.get=function(){return 1},O.EXTERIOR.get=function(){return 2},O.NONE.get=function(){return-1},Object.defineProperties(w,O);var T=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},R=function(){},P={LOG_10:{configurable:!0}};R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.log10=function(t){var e=Math.log(t);return v.isInfinite(e)?e:v.isNaN(e)?e:e/R.LOG_10},R.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},R.clamp=function(){if(\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},R.wrap=function(t,e){return t<0?e- -t%e:t%e},R.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=r;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},R.average=function(t,e){return(t+e)/2},P.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(R,P);var D=function(t){this.str=t};D.prototype.append=function(t){this.str+=t},D.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},D.prototype.toString=function(t){return this.str};var M=function(t){this.value=t};M.prototype.intValue=function(){return this.value},M.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},M.isNaN=function(t){return Number.isNaN(t)};var A=function(){};A.isWhitespace=function(t){return t<=32&&t>=0||127===t},A.toUpperCase=function(t){return t.toUpperCase()};var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if(\"number\"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if(\"string\"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},G={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=F.magnitude(n._hi),r=F.TEN.pow(i);(n=n.divide(r)).gt(F.TEN)?(n=n.divide(F.TEN),i+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),i-=1);for(var o=i+1,s=new D,a=F.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(\".\");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,p=0;l>9?(c=!0,p=\"9\"):p=\"0\"+l,s.append(p),n=n.subtract(F.valueOf(l)).multiply(F.TEN),c&&n.selfAdd(F.TEN);var h=!0,f=F.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(h=!1),!h)break}return e[0]=i,s.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if(\"number\"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(\"number\"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?\"0.0\":this.isNaN()?\"NaN \":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(\"number\"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null,c=null,p=null;return u=this._hi/n,l=F.SPLIT*u,r=l-u,p=F.SPLIT*n,r=l-r,o=u-r,s=p-n,c=u*n,s=p-s,a=n-s,p=r*s-c+r*a+o*s+o*a,l=(this._hi-c-p+this._lo-u*i)/n,p=u+l,this._hi=p,this._lo=u-p+l,this}},F.prototype.dump=function(){return\"DD<\"+this._hi+\", \"+this._lo+\">\"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=F.SPLIT*o)-(e=s-o)),u=e*(i=(u=F.SPLIT*t._hi)-(i=u-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi;return new F(u=o+s,o-u+s)}if(\"number\"==typeof arguments[0]){var l=arguments[0];return v.isNaN(l)?F.createNaN():F.copy(this).selfDivide(l,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),n=F.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){if(this.isNaN())return this;return this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if(\"number\"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=F.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(\"number\"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return r=this._hi+e,s=r-this._hi,o=r-s,o=e-s+(this._hi-o),a=o+this._lo,n=r+a,i=a+(r-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,p=null,h=null,f=null,g=null,d=null,y=null;f=this._hi+u,p=this._lo+l,g=f-(d=f-this._hi),h=p-(y=p-this._lo);var _=(c=f+(d=(g=u-d+(this._hi-g))+p))+(d=(h=l-y+(this._lo-h))+(d+(f-c))),m=d+(c-_);return this._hi=_,this._lo=m,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(\"number\"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null;r=(u=F.SPLIT*this._hi)-this._hi,l=F.SPLIT*n,r=u-r,o=this._hi-r,s=l-n;var c=(u=this._hi*n)+(l=r*(s=l-s)-u+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),p=l+(r=u-c);return this._hi=c,this._lo=p,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if(\"number\"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return v.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if(\".\"===n.charAt(0))r=\"0\"+n;else if(i<0)r=\"0.\"+F.stringOfChar(\"0\",-i)+n;else if(-1===n.indexOf(\".\")){var o=i-n.length;r=n+F.stringOfChar(\"0\",o)+\".0\"}return this.isNegative()?\"-\"+r:r},F.prototype.reciprocal=function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;e=(r=1/this._hi)-(t=(o=F.SPLIT*r)-(t=o-r)),n=(a=F.SPLIT*this._hi)-this._hi;var u=r+(o=(1-(s=r*this._hi)-(a=t*(n=a-n)-s+t*(i=this._hi-n)+e*n+e*i)-r*this._lo)/this._hi);return new F(u,r-u+o)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=F.SCI_NOT_EXPONENT_CHAR+e[0];if(\"0\"===n.charAt(0))throw new Error(\"Found leading zero: \"+n);var r=\"\";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+\".\"+r;return this.isNegative()?\"-\"+o+i:o+i},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if(\"number\"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if(\"number\"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,E,x]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){if(\"string\"==typeof arguments[0]){var t=arguments[0];return F.parse(t)}if(\"number\"==typeof arguments[0]){var e=arguments[0];return new F(e)}},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;A.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);\"-\"!==r&&\"+\"!==r||(e++,\"-\"===r&&(i=!0))}for(var o=new F,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,A.isDigit(l)){var c=l-\"0\";o.selfMultiply(F.TEN),o.selfAdd(c),s++}else{if(\".\"!==l){if(\"e\"===l||\"E\"===l){var p=t.substring(e);try{u=M.parseInt(p)}catch(e){throw e instanceof Error?new Error(\"Invalid exponent \"+p+\" in string \"+t):e}break}throw new Error(\"Unexpected character '\"+l+\"' at position \"+e+\" in string \"+t)}a=s}}var h=o,f=s-a-u;if(0===f)h=o;else if(f>0){var g=F.TEN.pow(f);h=o.divide(g)}else if(f<0){var d=F.TEN.pow(-f);h=o.multiply(d)}return i?h.negate():h},F.createNaN=function(){return new F(v.NaN,v.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},F.stringOfChar=function(t,e){for(var n=new D,i=0;i<e;i++)n.append(t);return n.toString()},G.PI.get=function(){return new F(3.141592653589793,1.2246467991473532e-16)},G.TWO_PI.get=function(){return new F(6.283185307179586,2.4492935982947064e-16)},G.PI_2.get=function(){return new F(1.5707963267948966,6.123233995736766e-17)},G.E.get=function(){return new F(2.718281828459045,1.4456468917292502e-16)},G.NaN.get=function(){return new F(v.NaN,v.NaN)},G.EPS.get=function(){return 1.23259516440783e-32},G.SPLIT.get=function(){return 134217729},G.MAX_PRINT_DIGITS.get=function(){return 32},G.TEN.get=function(){return F.valueOf(10)},G.ONE.get=function(){return F.valueOf(1)},G.SCI_NOT_EXPONENT_CHAR.get=function(){return\"E\"},G.SCI_NOT_ZERO.get=function(){return\"0.0E0\"},Object.defineProperties(F,G);var q=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};q.prototype.interfaces_=function(){return[]},q.prototype.getClass=function(){return q},q.orientationIndex=function(t,e,n){var i=q.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),s=F.valueOf(n.x).selfAdd(-e.x),a=F.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},q.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},q.intersection=function(t,e,n,i){var r=F.valueOf(i.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(i.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=F.valueOf(i.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),u=F.valueOf(i.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),p=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),h=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),f=p.subtract(h).selfDivide(s).doubleValue(),g=F.valueOf(n.y).selfAdd(F.valueOf(i.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new C(c,g)},q.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return q.signum(s);i=r+o}else{if(!(r<0))return q.signum(s);if(o>=0)return q.signum(s);i=-r-o}var a=q.DP_SAFE_EPSILON*i;return s>=a||-s>=a?q.signum(s):2},q.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(q,B);var V=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},V.prototype.setOrdinate=function(t,e,n){},V.prototype.size=function(){},V.prototype.getOrdinate=function(t,e){},V.prototype.getCoordinate=function(){},V.prototype.getCoordinateCopy=function(t){},V.prototype.getDimension=function(){},V.prototype.getX=function(t){},V.prototype.clone=function(){},V.prototype.expandEnvelope=function(t){},V.prototype.copy=function(){},V.prototype.getY=function(t){},V.prototype.toCoordinateArray=function(){},V.prototype.interfaces_=function(){return[x]},V.prototype.getClass=function(){return V},Object.defineProperties(V,U);var z=function(){},X=function(t){function e(){t.call(this,\"Projective point not representable on the Cartesian plane.\")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(z),Y=function(){};Y.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},Y.getProperty=function(t){return{\"line.separator\":\"\\n\"}[t]};var k=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var p=arguments[0],h=arguments[1],f=arguments[2],g=arguments[3],d=p.y-h.y,y=h.x-p.x,_=p.x*h.y-h.x*p.y,m=f.y-g.y,v=g.x-f.x,I=f.x*g.y-g.x*f.y;this.x=y*I-v*_,this.y=m*_-d*I,this.w=d*v-m*y}};k.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new X;return t},k.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new X;return t},k.prototype.getCoordinate=function(){var t=new C;return t.x=this.getX(),t.y=this.getY(),t},k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k},k.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,l=n.x*i.y-i.x*n.y,c=r*u-a*o,p=(o*l-u*s)/c,h=(a*s-r*l)/c;if(v.isNaN(p)||v.isInfinite(p)||v.isNaN(h)||v.isInfinite(h))throw new X;return new C(p,h)};var j=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof C){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},H={serialVersionUID:{configurable:!0}};j.prototype.getArea=function(){return this.getWidth()*this.getHeight()},j.prototype.equals=function(t){if(!(t instanceof j))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},j.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new j;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new j(e,i,n,r)},j.prototype.isNull=function(){return this._maxx<this._minx},j.prototype.getMaxX=function(){return this._maxx},j.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof j){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy)}},j.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof C){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},j.prototype.getMinY=function(){return this._miny},j.prototype.getMinX=function(){return this._minx},j.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof j){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},j.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},j.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},j.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},j.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},j.prototype.toString=function(){return\"Env[\"+this._minx+\" : \"+this._maxx+\", \"+this._miny+\" : \"+this._maxy+\"]\"},j.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},j.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},j.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},j.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},j.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},j.prototype.centre=function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},j.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof j){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},j.prototype.getMaxY=function(){return this._maxy},j.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},j.prototype.hashCode=function(){var t=17;return t=37*t+C.hashCode(this._minx),t=37*t+C.hashCode(this._maxx),t=37*t+C.hashCode(this._miny),t=37*t+C.hashCode(this._maxy)},j.prototype.interfaces_=function(){return[E,e]},j.prototype.getClass=function(){return j},j.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u)&&(!(c<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),!(l>u)&&!(c<a)))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(j,H);var W={typeStr:/^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,emptyTypeStr:/^\\s*(\\w+)\\s*EMPTY\\s*$/,spaces:/\\s+/,parenComma:/\\)\\s*,\\s*\\(/,doubleParenComma:/\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/,trimParens:/^\\s*\\(?(.*?)\\)?\\s*$/},K=function(t){this.geometryFactory=t||new _e};K.prototype.read=function(t){var e,n,i;t=t.replace(/[\\n\\r]/g,\" \");var r=W.typeStr.exec(t);if(-1!==t.search(\"EMPTY\")&&((r=W.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Q[n]&&(e=Q[n].apply(this,[i]))),void 0===e)throw new Error(\"Could not parse WKT \"+t);return e},K.prototype.write=function(t){return this.extractGeometry(t)},K.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!J[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+\" EMPTY\":n+\"(\"+J[e].apply(this,[t])+\")\"};var J={coordinate:function(t){return t.x+\" \"+t.y},point:function(t){return J.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(\"(\"+J.point.apply(this,[t._geometries[n]])+\")\");return e.join(\",\")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(J.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(\",\")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(J.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(\",\")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(\"(\"+J.linestring.apply(this,[t._geometries[n]])+\")\");return e.join(\",\")},polygon:function(t){var e=[];e.push(\"(\"+J.linestring.apply(this,[t._shell])+\")\");for(var n=0,i=t._holes.length;n<i;++n)e.push(\"(\"+J.linestring.apply(this,[t._holes[n]])+\")\");return e.join(\",\")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(\"(\"+J.polygon.apply(this,[t._geometries[n]])+\")\");return e.join(\",\")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(\",\")}},Q={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(W.spaces);return this.geometryFactory.createPoint(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(\",\"),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,\"$1\"),i.push(Q.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(\",\"),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(W.spaces),i.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(\",\"),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(W.spaces),i.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(W.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,\"$1\"),i.push(Q.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(W.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(W.trimParens,\"$1\"),n=Q.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(W.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,\"$1\"),i.push(Q.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\\s*([A-Za-z])/g,\"|$1\")).trim().split(\"|\"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Z=function(t){this.parser=new K(t)};Z.prototype.write=function(t){return this.parser.write(t)},Z.toLineString=function(t,e){if(2!==arguments.length)throw new Error(\"Not implemented\");return\"LINESTRING ( \"+t.x+\" \"+t.y+\", \"+e.x+\" \"+e.y+\" )\"};var $=function(t){function e(e){t.call(this,e),this.name=\"RuntimeException\",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt(\"Should never reach here\"+(null!==t?\": \"+t:\"\"))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new tt(\"Expected \"+t+\" but encountered \"+e+(null!==n?\": \"+n:\"\"))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new C,this._intPt[1]=new C,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new D;return this.isEndPoint()&&t.append(\" endpoint\"),this._isProper&&t.append(\" proper\"),this.isCollinear()&&t.append(\" collinear\"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Z.toLineString(this._inputLines[0][0],this._inputLines[0][1])+\" - \"+Z.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),\"Bad distance calculation\"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return et.isTrue(!(0===o&&!t.equals(e)),\"Invalid distance calculation\"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it);var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new j(this._inputLines[0][0],this._inputLines[0][1]),n=new j(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,j.intersects(n,i,e)&&0===at.orientationIndex(n,i,e)&&0===at.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=k.intersection(t,n,i,r)}catch(s){if(!(s instanceof X))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new C(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=q.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);Y.out.println(\"DD in env = \"+s+\"  --------------------- \"+o),r.distance(o)>1e-4&&Y.out.println(\"Distance = \"+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new C(t),o=new C(e),s=new C(n),a=new C(i),u=new C;this.normalizeToEnvCentre(r,o,s,a,u);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=j.intersects(e,n,i),s=j.intersects(e,n,r),a=j.intersects(i,r,e),u=j.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,p=n.x>i.x?n.x:i.x,h=n.y>i.y?n.y:i.y,f=((o>l?o:l)+(a<p?a:p))/2,g=((s>c?s:c)+(u<h?u:h))/2;r.x=f,r.y=g,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!j.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,i),s=at.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(i,r,e),u=at.orientationIndex(i,r,n);if(a>0&&u>0||a<0&&u<0)return t.NO_INTERSECTION;return 0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new C(i):0===s?this._intPt[0]=new C(r):0===a?this._intPt[0]=new C(e):0===u&&(this._intPt[0]=new C(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=at.distancePointLine(t,n,i),s=at.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(i,r,o,s)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,(i-=s*e)<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(s=Math.floor(t/n),t-=s*n,(e-=s*i)<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ot.signOfDet2x2(r,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==w.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?w.BOUNDARY:this._crossingCount%2==1?w.INTERIOR:w.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof C&&T(arguments[1],V)){for(var t=arguments[0],e=arguments[1],n=new st(t),i=new C,r=new C,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new st(s),l=1;l<a.length;l++){var c=a[l],p=a[l-1];if(u.countSegment(c,p),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var at=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return q.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(T(arguments[0],V)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new C,l=new C,c=new C;s.getCoordinate(0,l),s.getCoordinate(1,c);var p=l.x;c.x-=p;for(var h=0,f=1;f<a-1;f++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(f+1,c),c.x-=p,h+=l.x*(u.y-c.y);return h/2}},at.distanceLineLine=function(t,e,n,i){if(t.equals(e))return at.distancePointLine(t,n,i);if(n.equals(i))return at.distancePointLine(i,t,e);var r=!1;if(j.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?R.min(at.distancePointLine(t,n,i),at.distancePointLine(e,n,i),at.distancePointLine(n,t,e),at.distancePointLine(i,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==w.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new C;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=a,o=u}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new m(\"Ring has fewer than 4 points, so orientation cannot be determined\");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=at.computeOrientation(u,n,l),p=!1;return p=0===c?u.x>l.x:c>0,p},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m(\"Line array must contain at least one vertex\");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=at.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},at.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return at.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return at.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},pt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new m(\"This method does not support GeometryCollection arguments\")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new j(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[x,E,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},pt.serialVersionUID.get=function(){return 0x799ea46522854c00},pt.SORTINDEX_POINT.get=function(){return 0},pt.SORTINDEX_MULTIPOINT.get=function(){return 1},pt.SORTINDEX_LINESTRING.get=function(){return 2},pt.SORTINDEX_LINEARRING.get=function(){return 3},pt.SORTINDEX_MULTILINESTRING.get=function(){return 4},pt.SORTINDEX_POLYGON.get=function(){return 5},pt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},pt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},pt.geometryChangedFilter.get=function(){return ht},Object.defineProperties(ct,pt);var ht=function(){};ht.interfaces_=function(){return[lt]},ht.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var gt=function(){},dt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};gt.prototype.isInBoundary=function(t){},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt},dt.Mod2BoundaryNodeRule.get=function(){return yt},dt.EndPointBoundaryNodeRule.get=function(){return _t},dt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},dt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},dt.MOD2_BOUNDARY_RULE.get=function(){return new yt},dt.ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},dt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},dt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},dt.OGC_SFS_BOUNDARY_RULE.get=function(){return gt.MOD2_BOUNDARY_RULE},Object.defineProperties(gt,dt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[gt]},yt.prototype.getClass=function(){return yt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>0},_t.prototype.interfaces_=function(){return[gt]},_t.prototype.getClass=function(){return _t};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[gt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[gt]},vt.prototype.getClass=function(){return vt};var It=function(){};It.prototype.add=function(){},It.prototype.addAll=function(){},It.prototype.isEmpty=function(){},It.prototype.iterator=function(){},It.prototype.size=function(){},It.prototype.toArray=function(){},It.prototype.remove=function(){},(n.prototype=new Error).name=\"IndexOutOfBoundsException\";var Et=function(){};Et.prototype.hasNext=function(){},Et.prototype.next=function(){},Et.prototype.remove=function(){};var xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(It);(i.prototype=new Error).name=\"NoSuchElementException\";var Nt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,It]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ct(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(xt),Ct=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Et),St=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&\"boolean\"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof C&&\"boolean\"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(r))return null}t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&\"boolean\"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if(\"boolean\"==typeof arguments[2]&&arguments[0]instanceof Array&&\"boolean\"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],u);else for(var c=a.length-1;c>=0;c--)this.add(a[c],u);return!0}if(\"boolean\"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var p=arguments[0],h=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(p>0){if(this.get(p-1).equals2D(h))return null}if(p<f){if(this.get(p).equals2D(h))return null}}}t.prototype.add.call(this,p,h)}}else if(4===arguments.length){var g=arguments[0],d=arguments[1],y=arguments[2],_=arguments[3],m=1;y>_&&(m=-1);for(var v=y;v!==_;v+=m)this.add(g[v],d);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new C(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Nt),Lt=function(){},bt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};bt.ForwardComparator.get=function(){return wt},bt.BidirectionalComparator.get=function(){return Ot},bt.coordArrayType.get=function(){return new Array(0).fill(null)},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt},Lt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Lt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Lt.indexOf(i,e)<0)return i}return null},Lt.scroll=function(t,e){var n=Lt.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);Y.arraycopy(t,n,i,0,t.length-n),Y.arraycopy(t,0,i,t.length-n,n),Y.arraycopy(i,0,t,0,t.length)},Lt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},Lt.intersection=function(t,e){for(var n=new St,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Lt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Lt.removeRepeatedPoints=function(t){if(!Lt.hasRepeatedPoints(t))return t;return new St(t,!1).toCoordinateArray()},Lt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Lt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Lt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new C(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new C(i[r+u])},Lt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},Lt.envelope=function(t){for(var e=new j,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Lt.toCoordinateArray=function(t){return t.toArray(Lt.coordArrayType)},Lt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Lt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Lt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},Lt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Lt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Lt.extract=function(t,e,n){e=R.clamp(e,0,t.length);var i=(n=R.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(Lt,bt);var wt=function(){};wt.prototype.compare=function(t,e){return Lt.compare(t,e)},wt.prototype.interfaces_=function(){return[N]},wt.prototype.getClass=function(){return wt};var Ot=function(){};Ot.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Lt.compare(n,i);return Lt.isEqualReversed(n,i)?0:r},Ot.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Lt.increasingDirection(n),o=Lt.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},Ot.prototype.interfaces_=function(){return[N]},Ot.prototype.getClass=function(){return Ot};var Tt=function(){};Tt.prototype.get=function(){},Tt.prototype.put=function(){},Tt.prototype.size=function(){},Tt.prototype.values=function(){},Tt.prototype.entrySet=function(){};var Rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Tt);(r.prototype=new Error).name=\"OperationNotSupported\",(o.prototype=new It).contains=function(){};var Pt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(Et),Mt=0;(p.prototype=new Rt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Mt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:Mt,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===l(a(a(t)))){var e=c(a(a(t)));1===s(e)?(u(a(t),Mt),u(e,Mt),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),Mt),u(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=l(a(a(t)));1===s(n)?(u(a(t),Mt),u(n,Mt),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),Mt),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Mt},p.prototype.values=function(){var t=new Nt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new Pt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},p.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},p.prototype.size=function(){return this.size_};var At=function(){};At.prototype.interfaces_=function(){return[]},At.prototype.getClass=function(){return At},h.prototype=new o,(f.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new r},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Ft(this)};var Ft=function(t){this.treeSet_=t,this.position_=0};Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new r};var Gt=function(){};Gt.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Gt.asList=function(t){for(var e=new Nt,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var qt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return\"F\"},Bt.SYM_TRUE.get=function(){return\"T\"},Bt.SYM_DONTCARE.get=function(){return\"*\"},Bt.SYM_P.get=function(){return\"0\"},Bt.SYM_L.get=function(){return\"1\"},Bt.SYM_A.get=function(){return\"2\"},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.toDimensionSymbol=function(t){switch(t){case qt.FALSE:return qt.SYM_FALSE;case qt.TRUE:return qt.SYM_TRUE;case qt.DONTCARE:return qt.SYM_DONTCARE;case qt.P:return qt.SYM_P;case qt.L:return qt.SYM_L;case qt.A:return qt.SYM_A}throw new m(\"Unknown dimension value: \"+t)},qt.toDimensionValue=function(t){switch(A.toUpperCase(t)){case qt.SYM_FALSE:return qt.FALSE;case qt.SYM_TRUE:return qt.TRUE;case qt.SYM_DONTCARE:return qt.DONTCARE;case qt.SYM_P:return qt.P;case qt.SYM_L:return qt.L;case qt.SYM_A:return qt.A}throw new m(\"Unknown dimension symbol: \"+t)},Object.defineProperties(qt,Bt);var Vt=function(){};Vt.prototype.filter=function(t){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var zt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m(\"geometries must not contain null elements\")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new j,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Gt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=qt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=qt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Gt.asList(this._geometries)),n=new f(Gt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),p=l.compareToSameClass(c,r);if(0!==p)return p;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(T(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(T(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],Vt)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(T(arguments[0],lt)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return\"GeometryCollection\"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Xt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?qt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Yt(this).getBoundary()},e.prototype.getGeometryType=function(){return\"MultiLineString\"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[At]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(zt),Yt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=gt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Yt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Yt.prototype.getBoundary=function(){return this._geom instanceof Kt?this.boundaryLineString(this._geom):this._geom instanceof Xt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Yt.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){return this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Yt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Yt.prototype.computeBoundaryCoordinates=function(t){var e=new Nt;this._endpointMap=new p;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Lt.toCoordinateArray(e)},Yt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new kt,this._endpointMap.put(t,e)),e.count++},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Yt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Yt(e,n).getBoundary()}};var kt=function(){this.count=null};kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt};var jt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},jt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=\"\",s=new function(){}(new function(){}(jt.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+jt.NEWLINE}catch(t){if(!(t instanceof g))throw t;et.shouldNeverReachHere()}return o}},jt.split=function(t,e){for(var n=e.length,i=new Nt,r=\"\"+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},jt.toString=function(){if(1===arguments.length){var t=arguments[0];return jt.SIMPLE_ORDINATE_FORMAT.format(t)}},jt.spaces=function(t){return jt.chars(\" \",t)},Ht.NEWLINE.get=function(){return Y.getProperty(\"line.separator\")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}(\"0.#\")},Object.defineProperties(jt,Ht);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,V.X)===t.getOrdinate(e-1,V.X)&&t.getOrdinate(0,V.Y)===t.getOrdinate(e-1,V.Y))},Wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(t.getOrdinate(r,o)!==e.getOrdinate(r,o)&&(!v.isNaN(s)||!v.isNaN(a)))return!1}return!0},Wt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Wt.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Wt.copy(e,r-1,i,o,1);return i},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Wt.swap(t,i,e-i)},Wt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Wt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Wt.copyCoord(t,e+o,n,i+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return\"()\";var n=t.getDimension(),i=new D;i.append(\"(\");for(var r=0;r<e;r++){r>0&&i.append(\" \");for(var o=0;o<n;o++)o>0&&i.append(\",\"),i.append(jt.toString(t.getOrdinate(r,o)))}return i.append(\")\"),i.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(n<=3)return Wt.createClosedRing(t,e,4);return e.getOrdinate(0,V.X)===e.getOrdinate(n-1,V.X)&&e.getOrdinate(0,V.Y)===e.getOrdinate(n-1,V.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Wt.copy(e,0,i,0,r);for(var o=r;o<n;o++)Wt.copy(e,0,i,o,1);return i};var Kt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new j:this._points.expandEnvelope(new j)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?qt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();Wt.reverse(t);return this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(T(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(T(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],Vt)){arguments[0].filter(this)}else if(T(arguments[0],lt)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return new Yt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return\"LineString\"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m(\"Invalid number of points in LineString (found \"+t.size()+\" - must be 0 or >= 2)\");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[At]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new j;var t=new j;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return qt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error(\"getX called on empty Point\");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(T(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(T(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],Vt)){arguments[0].filter(this)}else if(T(arguments[0],lt)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return\"Point\"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error(\"getY called on empty Point\");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var $t=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m(\"holes must not contain null elements\");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m(\"shell is empty but holes are not\");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o===(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Gt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);Y.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Lt.minCoordinate(e.getCoordinates());Lt.scroll(i,r),Y.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],at.isCCW(e.getCoordinates())===n&&Lt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,s=this._shell,a=o._shell,u=s.compareToSameClass(a,r);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),p=0;p<l&&p<c;){var h=this.getInteriorRingN(p),f=o.getInteriorRingN(p),g=h.compareToSameClass(f,r);if(0!==g)return g;p++}return p<l?1:p<c?-1:0}},e.prototype.apply=function(t){if(T(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(T(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(T(t,Vt))t.filter(this);else if(T(t,lt)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return\"Polygon\"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return qt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return\"MultiPoint\"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(zt),ee=function(t){function e(e,n){e instanceof C&&n instanceof _e&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return qt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();Wt.reverse(t);return this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m(\"Points of LinearRing do not form a closed linestring\");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m(\"Invalid number of points in LinearRing (found \"+this.getCoordinateSequence().size()+\" - must be 0 or >= 4)\")},e.prototype.getGeometryType=function(){return\"LinearRing\"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Kt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Nt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return\"MultiPolygon\"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(zt),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Qt?e.edit(t,this._factory):t instanceof Kt?e.edit(t,this._factory):(et.shouldNeverReachHere(\"Unsupported Geometry class: \"+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Nt,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Xt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Nt,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ie,re);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Kt?e.createLineString(n):t instanceof Qt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new C}else if(T(arguments[0],V)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new C}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case V.X:this._coordinates[t].x=n;break;case V.Y:this._coordinates[t].y=n;break;case V.Z:this._coordinates[t].z=n;break;default:throw new m(\"invalid ordinateIndex\")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case V.X:return this._coordinates[t].x;case V.Y:return this._coordinates[t].y;case V.Z:return this._coordinates[t].z}return v.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new C(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new D(17*this._coordinates.length);t.append(\"(\"),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(\", \"),t.append(this._coordinates[e]);return t.append(\")\"),t.toString()}return\"()\"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[V,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},pe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(T(arguments[0],V)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new ue(n):new ue(n,i)}},ce.prototype.interfaces_=function(){return[b,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},pe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pe.instanceObject.get=function(){return new ce},Object.defineProperties(ce,pe);var he=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Nt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Pt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Tt),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof de){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if(\"number\"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},ge={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new M(n).compareTo(new M(i))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t=\"UNKNOWN\";return this._modelType===fe.FLOATING?t=\"Floating\":this._modelType===fe.FLOATING_SINGLE?t=\"Floating-Single\":this._modelType===fe.FIXED&&(t=\"Fixed (Scale=\"+this.getScale()+\")\"),t},fe.prototype.makePrecise=function(){if(\"number\"==typeof arguments[0]){var t=arguments[0];if(v.isNaN(t))return t;if(this._modelType===fe.FLOATING_SINGLE){return t}return this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof C){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,E]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},ge.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ge.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,ge);var de=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};de.prototype.readResolve=function(){return de.nameToTypeMap.get(this._name)},de.prototype.toString=function(){return this._name},de.prototype.interfaces_=function(){return[e]},de.prototype.getClass=function(){return de},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new he},Object.defineProperties(de,ye),fe.Type=de,fe.FIXED=new de(\"FIXED\"),fe.FLOATING=new de(\"FLOATING\"),fe.FLOATING_SINGLE=new de(\"FLOATING SINGLE\");var _e=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?T(arguments[0],b)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};_e.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new C(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new C(t.getMinX(),t.getMinY()),new C(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new C(t.getMinX(),t.getMinY()),new C(t.getMinX(),t.getMaxY()),new C(t.getMaxX(),t.getMaxY()),new C(t.getMaxX(),t.getMinY()),new C(t.getMinX(),t.getMinY())]),null)},_e.prototype.createLineString=function(t){return t?t instanceof Array?new Kt(this.getCoordinateSequenceFactory().create(t),this):T(t,V)?new Kt(t,this):void 0:new Kt(this.getCoordinateSequenceFactory().create([]),this)},_e.prototype.createMultiLineString=function(){if(0===arguments.length)return new Xt(null,this);if(1===arguments.length){var t=arguments[0];return new Xt(t,this)}},_e.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(_e.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof $t)return this.createMultiPolygon(_e.toPolygonArray(t));if(a instanceof Kt)return this.createMultiLineString(_e.toLineStringArray(t));if(a instanceof Qt)return this.createMultiPoint(_e.toPointArray(t));et.shouldNeverReachHere(\"Unhandled class: \"+a.getClass().getName())}return a},_e.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_e.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(T(arguments[0],V)){var e=arguments[0];return new Qt(e,this)}}},_e.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_e.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(T(arguments[0],V)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new $t(i,r,this)}},_e.prototype.getSRID=function(){return this._SRID},_e.prototype.createGeometryCollection=function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){var t=arguments[0];return new zt(t,this)}},_e.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_e.prototype.getPrecisionModel=function(){return this._precisionModel},_e.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],V)){var e=arguments[0];return new ee(e,this)}}},_e.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},_e.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(T(arguments[0],V)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Wt.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},_e.prototype.interfaces_=function(){return[e]},_e.prototype.getClass=function(){return _e},_e.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},_e.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_e,me);var ve=[\"Point\",\"MultiPoint\",\"LineString\",\"MultiLineString\",\"Polygon\",\"MultiPolygon\"],Ie=function(t){this.geometryFactory=t||new _e};Ie.prototype.read=function(t){var e,n=(e=\"string\"==typeof t?JSON.parse(t):t).type;if(!Ee[n])throw new Error(\"Unknown GeoJSON type: \"+e.type);return-1!==ve.indexOf(n)?Ee[n].apply(this,[e.coordinates]):\"GeometryCollection\"===n?Ee[n].apply(this,[e.geometries]):Ee[n].apply(this,[e])},Ie.prototype.write=function(t){var e=t.getGeometryType();if(!xe[e])throw new Error(\"Geometry is not supported\");return xe[e].apply(this,[t])};var Ee={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!Ee[i])throw new Error(\"Unknown GeoJSON type: \"+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ee.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new C(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new C(t[0],t[1]),new C(t[2],t[1]),new C(t[2],t[3]),new C(t[0],t[3]),new C(t[0],t[1])])},Point:function(t){var e=new C(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ee.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ee.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ee.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ee.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=Ee.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Ee.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},xe={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:\"Point\",coordinates:xe.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=xe.Point.apply(this,[i]);e.push(r.coordinates)}return{type:\"MultiPoint\",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(xe.coordinate.apply(this,[r]))}return{type:\"LineString\",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=xe.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:\"MultiLineString\",coordinates:e}},Polygon:function(t){var e=[],n=xe.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=xe.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:\"Polygon\",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=xe.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:\"MultiPolygon\",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(xe[r].apply(this,[i]))}return{type:\"GeometryCollection\",geometries:e}}},Ne=function(t){this.geometryFactory=t||new _e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ie(this.geometryFactory)};Ne.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Ne.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ce=function(){this.parser=new Ie(this.geometryFactory)};Ce.prototype.write=function(t){return this.parser.write(t)};var Se=function(){},Le={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.opposite=function(t){return t===Se.LEFT?Se.RIGHT:t===Se.RIGHT?Se.LEFT:t},Le.ON.get=function(){return 0},Le.LEFT.get=function(){return 1},Le.RIGHT.get=function(){return 2},Object.defineProperties(Se,Le),(d.prototype=new Error).name=\"EmptyStackException\",(y.prototype=new xt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new d;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new d;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var be=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};be.prototype.getCoordinate=function(){return this._minCoord},be.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},be.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,\"rightmost point expected to be interior vertex of edge\");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=at.computeOrientation(this._minCoord,n,e),r=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===at.COUNTERCLOCKWISE?r=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===at.CLOCKWISE&&(r=!0),r&&(this._minIndex=this._minIndex-1)},be.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Se.LEFT;return n[e].y<n[e+1].y&&(i=Se.RIGHT),i},be.prototype.getEdge=function(){return this._orientedDe},be.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},be.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},be.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),\"inconsistency in rightmost processing\"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;this.getRightmostSide(this._minDe,this._minIndex)===Se.LEFT&&(this._orientedDe=this._minDe.getSym())},be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be};var we=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new C(i):null,this.name=\"TopologyException\"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+\" [ \"+e+\" ]\"},e}($),Oe=function(){this.array_=[]};Oe.prototype.addLast=function(t){this.array_.push(t)},Oe.prototype.removeFirst=function(){return this.array_.shift()},Oe.prototype.isEmpty=function(){return 0===this.array_.length};var Te=function(){this._finder=null,this._dirEdgeList=new Nt,this._nodes=new Nt,this._rightMostCoord=null,this._env=null,this._finder=new be};Te.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},Te.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Te.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new we(\"unable to find edge to compute depths at \"+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Te.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Se.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Te.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Te.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Se.RIGHT)>=1&&e.getDepth(Se.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Te.prototype.computeDepths=function(t){var e=new Pt,n=new Oe,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Te.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Te.prototype.getEnvelope=function(){if(null===this._env){for(var t=new j,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Te.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Te.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Se.LEFT,t.getDepth(Se.RIGHT)),e.setDepth(Se.RIGHT,t.getDepth(Se.LEFT))},Te.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Te.prototype.getNodes=function(){return this._nodes},Te.prototype.getDirectedEdges=function(){return this._dirEdgeList},Te.prototype.interfaces_=function(){return[E]},Te.prototype.getClass=function(){return Te};var Re=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Se.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Se.ON]=o,this.location[Se.LEFT]=s,this.location[Se.RIGHT]=a}};Re.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Re.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==w.NONE)return!1;return!0},Re.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===w.NONE&&(this.location[e]=t)},Re.prototype.isLine=function(){return 1===this.location.length},Re.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Se.ON]=this.location[Se.ON],e[Se.LEFT]=w.NONE,e[Se.RIGHT]=w.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===w.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Re.prototype.getLocations=function(){return this.location},Re.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Se.LEFT];this.location[Se.LEFT]=this.location[Se.RIGHT],this.location[Se.RIGHT]=t},Re.prototype.toString=function(){var t=new D;return this.location.length>1&&t.append(w.toLocationSymbol(this.location[Se.LEFT])),t.append(w.toLocationSymbol(this.location[Se.ON])),this.location.length>1&&t.append(w.toLocationSymbol(this.location[Se.RIGHT])),t.toString()},Re.prototype.setLocations=function(t,e,n){this.location[Se.ON]=t,this.location[Se.LEFT]=e,this.location[Se.RIGHT]=n},Re.prototype.get=function(t){return t<this.location.length?this.location[t]:w.NONE},Re.prototype.isArea=function(){return this.location.length>1},Re.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===w.NONE)return!0;return!1},Re.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Se.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Re.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(w.NONE)},Re.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Re.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Pe=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Re(e),this.elt[1]=new Re(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Re(n.elt[0]),this.elt[1]=new Re(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Re(w.NONE),this.elt[1]=new Re(w.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Re(o,s,a),this.elt[1]=new Re(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],p=arguments[3];this.elt[0]=new Re(w.NONE,w.NONE,w.NONE),this.elt[1]=new Re(w.NONE,w.NONE,w.NONE),this.elt[u].setLocations(l,c,p)}};Pe.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Pe.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Pe.prototype.isNull=function(t){return this.elt[t].isNull()},Pe.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Pe.prototype.isLine=function(t){return this.elt[t].isLine()},Pe.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])},Pe.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Pe.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Se.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Pe.prototype.toString=function(){var t=new D;return null!==this.elt[0]&&(t.append(\"A:\"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(\" B:\"),t.append(this.elt[1].toString())),t.toString()},Pe.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Pe.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Pe.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Se.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Pe.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Pe.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Pe.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.toLineLabel=function(t){for(var e=new Pe(w.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var De=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Nt,this._pts=new Nt,this._label=new Pe(w.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Nt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new we(\"Found null DirectedEdge\");if(e.getEdgeRing()===this)throw new we(\"Directed Edge visited twice during ring-building at \"+e.getCoordinate());this._edges.add(e);var i=e.getLabel();et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Se.RIGHT);if(i===w.NONE)return null;if(this._label.getLocation(n)===w.NONE)return this._label.setLocation(n,i),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Me=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Ae=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Nt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Me(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,\"found partial label\"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Ge=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Pe(0,w.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println(\"node \"+this._coord+\" lbl: \"+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=w.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==w.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Pe(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Pe)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===w.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=w.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case w.BOUNDARY:n=w.INTERIOR;break;case w.INTERIOR:default:n=w.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),qe=function(){this.nodeMap=new p,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};qe.prototype.find=function(t){return this.nodeMap.get(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof C){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Ge){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},qe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},qe.prototype.iterator=function(){return this.nodeMap.values().iterator()},qe.prototype.values=function(){return this.nodeMap.values()},qe.prototype.getBoundaryNodes=function(t){for(var e=new Nt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===w.BOUNDARY&&e.add(i)}return e},qe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Be=function(){},Ve={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){if(t===e)return!1;return 2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m(\"Cannot compute the quadrant for point ( \"+t+\", \"+e+\" )\");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new m(\"Cannot compute the quadrant for two identical points \"+n);return i.x>=n.x?i.y>=n.y?Be.NE:Be.SE:i.y>=n.y?Be.NW:Be.SW}},Ve.NE.get=function(){return 0},Ve.NW.get=function(){return 1},Ve.SW.get=function(){return 2},Ve.SE.get=function(){return 3},Object.defineProperties(Be,Ve);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf(\".\"),r=n.substring(i+1);t.print(\"  \"+r+\": \"+this._p0+\" - \"+this._p1+\" \"+this._quadrant+\":\"+e+\"   \"+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(\".\");return\"  \"+e.substring(n+1)+\": \"+this._p0+\" - \"+this._p1+\" \"+this._quadrant+\":\"+t+\"   \"+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),\"EdgeEnd with identical endpoints found\")},Ue.prototype.interfaces_=function(){return[E]},Ue.prototype.getClass=function(){return Ue};var ze=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Pe(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new we(\"assigned depths do not match\",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Se.LEFT)===w.INTERIOR&&this._label.getLocation(e,Se.RIGHT)===w.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(\" \"+this._depth[Se.LEFT]+\"/\"+this._depth[Se.RIGHT]),e.print(\" (\"+this.getDepthDelta()+\")\"),this._isInResult&&e.print(\" inResult\")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,w.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,w.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(\" \"),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Se.LEFT&&(i=-1);var r=Se.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===w.EXTERIOR&&e===w.INTERIOR?1:t===w.INTERIOR&&e===w.EXTERIOR?-1:0},e}(Ue),Xe=function(){};Xe.prototype.createNode=function(t){return new Ge(t,null)},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ye=function(){if(this._edges=new Nt,this._nodes=null,this._edgeEndList=new Nt,0===arguments.length)this._nodes=new qe(new Xe);else if(1===arguments.length){var t=arguments[0];this._nodes=new qe(t)}};Ye.prototype.printEdges=function(t){t.println(\"Edges:\");for(var e=0;e<this._edges.size();e++){t.println(\"edge \"+e+\":\");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ye.prototype.find=function(t){return this._nodes.find(t)},Ye.prototype.addNode=function(){if(arguments[0]instanceof Ge){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof C){var e=arguments[0];return this._nodes.addNode(e)}},Ye.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ye.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},Ye.prototype.debugPrintln=function(t){Y.out.println(t)},Ye.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===w.BOUNDARY},Ye.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},Ye.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&(at.computeOrientation(t,e,i)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,i))},Ye.prototype.getEdgeEnds=function(){return this._edgeEndList},Ye.prototype.debugPrint=function(t){Y.out.print(t)},Ye.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ye.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Ye.prototype.insertEdge=function(t){this._edges.add(t)},Ye.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ye.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new ze(n,!0),r=new ze(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Ye.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ye.prototype.getNodes=function(){return this._nodes.values()},Ye.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye},Ye.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var ke=function(){this._geometryFactory=null,this._shellList=new Nt;var t=arguments[0];this._geometryFactory=t};ke.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},ke.prototype.computePolygons=function(t){for(var e=new Nt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},ke.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new we(\"unable to assign hole to a shell\",i.getCoordinate(0));i.setShell(r)}}},ke.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Nt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},ke.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},ke.prototype.buildMaximalEdgeRings=function(t){for(var e=new Nt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ae(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},ke.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},ke.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},ke.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(i)&&at.isPointInRing(r,l.getCoordinates())&&(p=!0),p&&(null===o||s.contains(c))&&(o=u)}return o},ke.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return et.isTrue(e<=1,\"found two shells in MinimalEdgeRing list\"),n},ke.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ye.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new Nt,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var je=function(){};je.prototype.getBounds=function(){},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[je,e]},He.prototype.getClass=function(){return He};var We=function(){this._size=null,this._items=null,this._size=0,this._items=new Nt,this._items.add(null)};We.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ke=function(){};Ke.prototype.visitItem=function(t){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Je=function(){};Je.prototype.insert=function(t,e){},Je.prototype.remove=function(t,e){},Je.prototype.query=function(){},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var Qe=function(){if(this._childBoundables=new Nt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ze={serialVersionUID:{configurable:!0}};Qe.prototype.getLevel=function(){return this._level},Qe.prototype.size=function(){return this._childBoundables.size()},Qe.prototype.getChildBoundables=function(){return this._childBoundables},Qe.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Qe.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Qe.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Qe.prototype.interfaces_=function(){return[je,e]},Qe.prototype.getClass=function(){return Qe},Ze.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Qe,Ze);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Gt.sort(n,e):Gt.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},$e.singletonList=function(t){var e=new Nt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2);if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m(\"neither boundable is composite\")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[E]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Qe};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Nt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,\"Node capacity must be greater than 1\"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Qe?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof He&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Nt:t}if(1===arguments.length){for(var e=arguments[0],n=new Nt,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Qe){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof He?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,\"Cannot insert items into an STR packed R-tree after it has been built.\"),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Nt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Qe?this.boundablesAtLevel(n,s,r):(et.isTrue(s instanceof He),-1===n&&r.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Nt;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(T(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Qe?this.query(r,l,s):l instanceof He?s.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(T(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var c=arguments[0],p=arguments[1],h=arguments[2],f=p.getChildBoundables(),g=0;g<f.size();g++){var d=f.get(g);this.getIntersectsOp().intersects(d.getBounds(),c)&&(d instanceof Qe?this.query(c,d,h):d instanceof He?h.add(d.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&(u instanceof Qe&&(o=this.remove(n,u,r)))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Qe){var i=this.depth(n);i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Nt;n.add(this.createNode(e));var i=new Nt(t);$e.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Nt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new Nt;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(T(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(T(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Nt(t);$e.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(T(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0];return this.nearestNeighbour(i,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&T(arguments[1],on)){var r=arguments[0],o=arguments[1],s=new tn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&\"number\"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new We;for(c.add(a);!c.isEmpty()&&u>0;){var p=c.poll(),h=p.getDistance();if(h>=u)break;p.isLeaves()?(u=h,l=p):p.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],y=new He(f,g),_=new tn(this.getRoot(),y,d);return this.nearestNeighbour(_)[0]}},n.prototype.interfaces_=function(){return[Je,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return an},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[N]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[N]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new j(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qe),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=un.relativeSign(e.x,n.x),r=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(i,r);case 1:return un.compareValue(r,i);case 2:return un.compareValue(r,-i);case 3:return un.compareValue(-i,r);case 4:return un.compareValue(-i,-r);case 5:return un.compareValue(-r,-i);case 6:return un.compareValue(-r,i);case 7:return un.compareValue(i,-r)}return et.shouldNeverReachHere(\"invalid octant value\"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new C(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[E]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new p,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new St;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new Nt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new M(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new C(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new C(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new M(e[0])),i=r}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new C(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new C(e.coord)),new gn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(et.isTrue(i.coord.equals2D(t),\"Found equal nodes with different coordinates\"),i):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $(\"bad split edge start point at \"+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new $(\"bad split edge end point at \"+r)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var pn=function(){};pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},pn.octant=function(){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m(\"Cannot compute the octant for point ( \"+t+\", \"+e+\" )\");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new m(\"Cannot compute the octant for two identical points \"+r);return pn.octant(s,a)}};var hn=function(){};hn.prototype.getCoordinates=function(){},hn.prototype.size=function(){},hn.prototype.getCoordinate=function(t){},hn.prototype.isClosed=function(){},hn.prototype.setData=function(t){},hn.prototype.getData=function(){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[hn]},fn.prototype.getClass=function(){return fn};var gn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};gn.prototype.getCoordinates=function(){return this._pts},gn.prototype.size=function(){return this._pts.length},gn.prototype.getCoordinate=function(t){return this._pts[t]},gn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},gn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},gn.prototype.setData=function(t){this._data=t},gn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:pn.octant(t,e)},gn.prototype.getData=function(){return this._data},gn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new C(n.getIntersection(r));this.addIntersection(o,i)}},gn.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},gn.prototype.getNodeList=function(){return this._nodeList},gn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},gn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},gn.prototype.interfaces_=function(){return[fn]},gn.prototype.getClass=function(){return gn},gn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Nt;return gn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){r.next().getNodeList().addSplitEdges(i)}};var dn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new C,this.p1=new C;else if(1===arguments.length){var t=arguments[0];this.p0=new C(t.p0),this.p1=new C(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new C(e,n),this.p1=new C(i,r)}},yn={serialVersionUID:{configurable:!0}};dn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},dn.prototype.orientationIndex=function(){if(arguments[0]instanceof dn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof C){var i=arguments[0];return at.orientationIndex(this.p0,this.p1,i)}},dn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},dn.prototype.isVertical=function(){return this.p0.x===this.p1.x},dn.prototype.equals=function(t){if(!(t instanceof dn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},dn.prototype.intersection=function(t){var e=new rt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},dn.prototype.project=function(){if(arguments[0]instanceof C){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new C(t);var e=this.projectionFactor(t),n=new C;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof dn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new dn(s,a)}},dn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},dn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},dn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},dn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},dn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},dn.prototype.midPoint=function(){return dn.midPoint(this.p0,this.p1)},dn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;if(i<=0)return v.NaN;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},dn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=v.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},dn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);return this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},dn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},dn.prototype.getLength=function(){return this.p0.distance(this.p1)},dn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},dn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},dn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},dn.prototype.lineIntersection=function(t){try{return k.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof X))throw t}return null},dn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},dn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error(\"Cannot compute offset from zero-length line segment\");a=e*r/s,u=e*o/s}return new C(n-u,i+a)},dn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},dn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},dn.prototype.toString=function(){return\"LINESTRING( \"+this.p0.x+\" \"+this.p0.y+\", \"+this.p1.x+\" \"+this.p1.y+\")\"},dn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},dn.prototype.distance=function(){if(arguments[0]instanceof dn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof C){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},dn.prototype.pointAlong=function(t){var e=new C;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},dn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);n^=31*v.doubleToLongBits(this.p1.y);return e^(Math.trunc(n)^Math.trunc(n>>32))},dn.prototype.interfaces_=function(){return[E,e]},dn.prototype.getClass=function(){return dn},dn.midPoint=function(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(dn,yn);var _n=function(){this.tempEnv1=new j,this.tempEnv2=new j,this._overlapSeg1=new dn,this._overlapSeg2=new dn};_n.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new j(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],u=n._pts[i],l=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),p=Math.trunc((i+r)/2);t<c&&(i<p&&this.computeOverlapsInternal(t,c,n,i,p,o),p<r&&this.computeOverlapsInternal(t,c,n,p,r,o)),c<e&&(i<p&&this.computeOverlapsInternal(c,e,n,i,p,o),p<r&&this.computeOverlapsInternal(c,e,n,p,r,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new Nt;n.add(new M(e));do{var i=vn.findChainEnd(t,e);n.add(new M(i)),e=i}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Be.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){if(Be.quadrant(t[r-1],t[r])!==i)break}r++}return r-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Nt,r=vn.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new mn(e,r[o],r[o+1],n);i.add(s)}return i}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var In=function(){};In.prototype.computeNodes=function(t){},In.prototype.getNodedSubstrings=function(){},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};var En=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};En.prototype.setSegmentIntersector=function(t){this._segInt=t},En.prototype.interfaces_=function(){return[In]},En.prototype.getClass=function(){return En};var xn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Nt,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return gn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Nn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Nn},Object.defineProperties(e,n),e}(En),Nn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,n,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_n),Cn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Sn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cn.prototype.getEndCapStyle=function(){return this._endCapStyle},Cn.prototype.isSingleSided=function(){return this._isSingleSided},Cn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cn.JOIN_ROUND&&(this._quadrantSegments=Cn.DEFAULT_QUADRANT_SEGMENTS)},Cn.prototype.getJoinStyle=function(){return this._joinStyle},Cn.prototype.setJoinStyle=function(t){this._joinStyle=t},Cn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cn.prototype.getMitreLimit=function(){return this._mitreLimit},Cn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cn.prototype.setSingleSided=function(t){this._isSingleSided=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sn.CAP_ROUND.get=function(){return 1},Sn.CAP_FLAT.get=function(){return 2},Sn.CAP_SQUARE.get=function(){return 3},Sn.JOIN_ROUND.get=function(){return 1},Sn.JOIN_MITRE.get=function(){return 2},Sn.JOIN_BEVEL.get=function(){return 3},Sn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cn,Sn);var Ln=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},bn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ln.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&(!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i))},Ln.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Ln.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},Ln.prototype.isShallowConcavity=function(t,e,n,i){if(!(at.computeOrientation(t,e,n)===this._angleOrientation))return!1;return at.distancePointLine(e,t,n)<i},Ln.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Ln.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Ln.prototype.isConcave=function(t,e,n){var i=at.computeOrientation(t,e,n)===this._angleOrientation;return i},Ln.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Ln.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Ln.DELETE;)e++;return e},Ln.prototype.isShallow=function(t,e,n,i){return at.distancePointLine(e,t,n)<i},Ln.prototype.collapseLine=function(){for(var t=new St,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Ln.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.simplify=function(t,e){return new Ln(t).simplify(e)},bn.INIT.get=function(){return 0},bn.DELETE.get=function(){return 1},bn.KEEP.get=function(){return 1},bn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ln,bn);var wn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Nt},On={COORDINATE_ARRAY_TYPE:{configurable:!0}};wn.prototype.getCoordinates=function(){return this._ptList.toArray(wn.COORDINATE_ARRAY_TYPE)},wn.prototype.setPrecisionModel=function(t){this._precisionModel=t},wn.prototype.addPt=function(t){var e=new C(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},wn.prototype.revere=function(){},wn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},wn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},wn.prototype.toString=function(){return(new _e).createLineString(this.getCoordinates()).toString()},wn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new C(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},wn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},On.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(wn,On);var Tn=function(){},Rn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.toDegrees=function(t){return 180*t/Math.PI},Tn.normalize=function(t){for(;t>Math.PI;)t-=Tn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Tn.PI_TIMES_2;return t},Tn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Tn.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Tn.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Tn.interiorAngle=function(t,e,n){var i=Tn.angle(e,t),r=Tn.angle(e,n);return Math.abs(r-i)},Tn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Tn.PI_TIMES_2;t>=Tn.PI_TIMES_2&&(t=0)}else{for(;t>=Tn.PI_TIMES_2;)t-=Tn.PI_TIMES_2;t<0&&(t=0)}return t},Tn.angleBetween=function(t,e,n){var i=Tn.angle(e,t),r=Tn.angle(e,n);return Tn.diff(i,r)},Tn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Tn.toRadians=function(t){return t*Math.PI/180},Tn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Tn.COUNTERCLOCKWISE:n<0?Tn.CLOCKWISE:Tn.NONE},Tn.angleBetweenOriented=function(t,e,n){var i=Tn.angle(e,t),r=Tn.angle(e,n)-i;return r<=-Math.PI?r+Tn.PI_TIMES_2:r>Math.PI?r-Tn.PI_TIMES_2:r},Rn.PI_TIMES_2.get=function(){return 2*Math.PI},Rn.PI_OVER_2.get=function(){return Math.PI/2},Rn.PI_OVER_4.get=function(){return Math.PI/4},Rn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Rn.CLOCKWISE.get=function(){return at.CLOCKWISE},Rn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Tn,Rn);var Pn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new dn,this._seg1=new dn,this._offset0=new dn,this._offset1=new dn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Pn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),i=n===at.CLOCKWISE&&this._side===Se.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Se.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Pn.prototype.addLineEndCap=function(t,e){var n=new dn(t,e),i=new dn;this.computeOffsetSegment(n,Se.LEFT,this._distance,i);var r=new dn;this.computeOffsetSegment(n,Se.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Cn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Cn.CAP_SQUARE:var u=new C;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new C(i.p1.x+u.x,i.p1.y+u.y),c=new C(r.p1.x+u.x,r.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Pn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Pn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=k.intersection(e.p0,e.p1,n.p0,n.p1);(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof X))throw t;o=new C(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Pn.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);i===at.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,i,r),this._segList.addPt(n)},Pn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Pn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Pn.prototype.createSquare=function(t){this._segList.addPt(new C(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new C(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Pn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Pn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Pn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Pn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Pn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Tn.angle(r,this._seg0.p0),s=Tn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Tn.normalize(o+s),u=Tn.normalize(a+Math.PI),l=i*n,c=n-l*Math.abs(Math.sin(s)),p=r.x+l*Math.cos(u),h=r.y+l*Math.sin(u),f=new C(p,h),g=new dn(r,f),d=g.pointAlongOffset(1,c),y=g.pointAlongOffset(1,-c);this._side===Se.LEFT?(this._segList.addPt(d),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(d))},Pn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Se.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},Pn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new C;l<s;){var p=e+o*l;c.x=t.x+r*Math.cos(p),c.y=t.y+r*Math.sin(p),this._segList.addPt(c),l+=u}},Pn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Pn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new C((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new C((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Pn.prototype.createCircle=function(t){var e=new C(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Pn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Pn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new wn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Pn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Pn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Pn.prototype.closeRing=function(){this._segList.closeRing()},Pn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Pn,Dn);var Mn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Mn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Lt.reverse(o),o},Mn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Ln.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Se.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Ln.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Se.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Mn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Se.RIGHT&&(i=-i);var r=Ln.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},Mn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Ln.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Se.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Ln.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Se.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Mn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:e.createCircle(t);break;case Cn.CAP_SQUARE:e.createSquare(t)}},Mn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},Mn.prototype.getBufferParameters=function(){return this._bufParams},Mn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Mn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Mn.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Mn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Ln.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Se.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Ln.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Se.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Mn.prototype.getSegGen=function(t){return new Pn(this._precisionModel,this._bufParams,t)},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new C(t[n]);return e};var An=function(){this._subgraphs=null,this._seg=new dn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Fn={DepthSegment:{configurable:!0}};An.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Nt,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(T(arguments[2],xt)&&arguments[0]instanceof C&&arguments[1]instanceof ze)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++){this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse();if(!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(Se.LEFT);this._seg.p0.equals(u[l])||(c=s.getDepth(Se.RIGHT));var p=new Gn(this._seg,c);a.add(p)}}else if(T(arguments[2],xt)&&arguments[0]instanceof C&&T(arguments[1],xt))for(var h=arguments[0],f=arguments[1],g=arguments[2],d=f.iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(h,y,g)}},An.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;return $e.min(e)._leftDepth},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Fn.DepthSegment.get=function(){return Gn},Object.defineProperties(An,Fn);var Gn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new dn(t),this._leftDepth=e};Gn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Gn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Gn.prototype.toString=function(){return this._upwardSeg.toString()},Gn.prototype.interfaces_=function(){return[E]},Gn.prototype.getClass=function(){return Gn};var qn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};qn.prototype.area=function(){return qn.area(this.p0,this.p1,this.p2)},qn.prototype.signedArea=function(){return qn.signedArea(this.p0,this.p1,this.p2)},qn.prototype.interpolateZ=function(t){if(null===t)throw new m(\"Supplied point is null.\");return qn.interpolateZ(t,this.p0,this.p1,this.p2)},qn.prototype.longestSideLength=function(){return qn.longestSideLength(this.p0,this.p1,this.p2)},qn.prototype.isAcute=function(){return qn.isAcute(this.p0,this.p1,this.p2)},qn.prototype.circumcentre=function(){return qn.circumcentre(this.p0,this.p1,this.p2)},qn.prototype.area3D=function(){return qn.area3D(this.p0,this.p1,this.p2)},qn.prototype.centroid=function(){return qn.centroid(this.p0,this.p1,this.p2)},qn.prototype.inCentre=function(){return qn.inCentre(this.p0,this.p1,this.p2)},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn},qn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},qn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},qn.det=function(t,e,n,i){return t*i-e*n},qn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,c=s*l-a*u,p=t.x-r,h=t.y-o,f=(l*p-a*h)/c,g=(-u*p+s*h)/c;return e.z+f*(n.z-e.z)+g*(i.z-e.z)},qn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},qn.isAcute=function(t,e,n){return!!Tn.isAcute(t,e,n)&&(!!Tn.isAcute(e,n,t)&&!!Tn.isAcute(n,t,e))},qn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,l=2*qn.det(o,s,a,u),c=qn.det(s,o*o+s*s,u,a*a+u*u),p=qn.det(o,o*o+s*s,a,a*a+u*u);return new C(i-c/l,r+p/l)},qn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new k(t.x+n/2,t.y+i/2,1),o=new k(t.x-i+n/2,t.y+n+i/2,1);return new k(r,o)},qn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new C(t.x+r*o,t.y+r*s)},qn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-o*a,c=o*s-i*u,p=i*a-r*s,h=l*l+c*c+p*p,f=Math.sqrt(h)/2;return f},qn.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new C(i,r)},qn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,u=(i*t.y+r*e.y+o*n.y)/s;return new C(a,u)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Nt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,w.EXTERIOR,w.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Se.LEFT;this._distance<0&&(e=-this._distance,n=Se.RIGHT);var i=t.getExteriorRing(),r=Lt.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,w.EXTERIOR,w.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Lt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Se.opposite(n),w.INTERIOR,w.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new qn(t[0],t[1],t[2]),i=n.inCentre();return at.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Lt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,w.EXTERIOR,w.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new gn(t,new Pe(0,w.BOUNDARY,e,n));this._curveList.add(i)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=i,n=Se.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Kt?this.addLineString(t):t instanceof Qt?this.addPoint(t):t instanceof te?this.addCollection(t):t instanceof Xt?this.addCollection(t):t instanceof ne?this.addCollection(t):t instanceof zt&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Vn=function(){};Vn.prototype.locate=function(t){},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var t=this._parent.getGeometryN(this._index++);return t instanceof zt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[Et]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof zt)};var zn=function(){this._geom=null;var t=arguments[0];this._geom=t};zn.prototype.locate=function(t){return zn.locate(t,this._geom)},zn.prototype.interfaces_=function(){return[Vn]},zn.prototype.getClass=function(){return zn},zn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},zn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!zn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(zn.isPointInRing(t,r))return!1}return!0},zn.containsPoint=function(t,e){if(e instanceof $t)return zn.containsPointInPolygon(t,e);if(e instanceof zt)for(var n=new Un(e);n.hasNext();){var i=n.next();if(i!==e&&zn.containsPoint(t,i))return!0}return!1},zn.locate=function(t,e){return e.isEmpty()?w.EXTERIOR:zn.containsPoint(t,e)?w.INTERIOR:w.EXTERIOR};var Xn=function(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[w.NONE,w.NONE]};Xn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Xn.prototype.propagateSideLabels=function(t){for(var e=w.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Se.LEFT)!==w.NONE&&(e=i.getLocation(t,Se.LEFT))}if(e===w.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Se.ON)===w.NONE&&a.setLocation(t,Se.ON,r),a.isArea(t)){var u=a.getLocation(t,Se.LEFT),l=a.getLocation(t,Se.RIGHT);if(l!==w.NONE){if(l!==r)throw new we(\"side location conflict\",s.getCoordinate());u===w.NONE&&et.shouldNeverReachHere(\"found single null side (at \"+s.getCoordinate()+\")\"),r=u}else et.isTrue(a.getLocation(t,Se.LEFT)===w.NONE,\"found single null side\"),a.setLocation(t,Se.RIGHT,r),a.setLocation(t,Se.LEFT,r)}}},Xn.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;return t.next().getCoordinate()},Xn.prototype.print=function(t){Y.out.println(\"EdgeEndStar:   \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Xn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Xn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Se.LEFT);et.isTrue(i!==w.NONE,\"Found unlabelled area edge\");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),\"Found non-area edge\");var a=s.getLocation(t,Se.LEFT),u=s.getLocation(t,Se.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},Xn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},Xn.prototype.iterator=function(){return this.getEdges().iterator()},Xn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Nt(this._edgeMap.values())),this._edgeList},Xn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===w.NONE&&(this._ptInAreaLocation[t]=zn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Xn.prototype.toString=function(){var t=new D;t.append(\"EdgeEndStar:   \"+this.getCoordinate()),t.append(\"\\n\");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(\"\\n\")}return t.toString()},Xn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},Xn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===w.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=w.NONE;if(e[u])l=w.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Xn.prototype.getDegree=function(){return this._edgeMap.size()},Xn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Yn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new we(\"no outgoing dirEdge found\",this.getCoordinate());et.isTrue(t.isInResult(),\"unable to link last incoming dirEdge\"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Be.isNorthern(r)&&Be.isNorthern(o)?n:Be.isNorthern(r)||Be.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere(\"found two horizontal edges incident on node\"),null):i},e.prototype.print=function(t){Y.out.println(\"DirectedEdgeStar: \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print(\"out \"),n.print(t),t.println(),t.print(\"in \"),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Nt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Se.LEFT),i=t.getDepth(Se.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new we(\"depth mismatch at \"+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var l=this._edgeList.get(u);l.setEdgeDepths(Se.RIGHT,a),a=l.getDepth(Se.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,\"found null for first outgoing dirEdge\"),et.isTrue(e.getEdgeRing()===t,\"unable to link last incoming dirEdge\"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();){r.next().getEdgeRing()===n&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=w.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=w.INTERIOR;break}if(i.isInResult()){t=w.EXTERIOR;break}}}if(t===w.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===w.INTERIOR):(s.isInResult()&&(r=w.EXTERIOR),a.isInResult()&&(r=w.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Pe(w.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==w.INTERIOR&&o!==w.BOUNDARY||this._label.setLocation(r,w.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xn),kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Ge(t,new Yn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xe),jn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};jn.prototype.compareTo=function(t){var e=t;return jn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},jn.prototype.interfaces_=function(){return[E]},jn.prototype.getClass=function(){return jn},jn.orientation=function(t){return 1===Lt.increasingDirection(t)},jn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var p=(u+=r)===s,h=(l+=o)===a;if(p&&!h)return-1;if(!p&&h)return 1;if(p&&h)return 0}};var Hn=function(){this._edges=new Nt,this._ocaMap=new p};Hn.prototype.print=function(t){t.print(\"MULTILINESTRING ( \");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(\",\"),t.print(\"(\");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(\",\"),t.print(i[r].x+\" \"+i[r].y);t.println(\")\")}t.print(\")  \")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new jn(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new jn(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Wn=function(){};Wn.prototype.processIntersections=function(t,e,n,i){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Kn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Kn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Kn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Kn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kn.prototype.getLineIntersector=function(){return this._li},Kn.prototype.hasProperIntersection=function(){return this._hasProper},Kn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Kn.prototype.hasIntersection=function(){return this._hasIntersection},Kn.prototype.isDone=function(){return!1},Kn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Kn.prototype.interfaces_=function(){return[Wn]},Kn.prototype.getClass=function(){return Kn},Kn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Jn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new C(t),this.segmentIndex=e,this.dist=n};Jn.prototype.getSegmentIndex=function(){return this.segmentIndex},Jn.prototype.getCoordinate=function(){return this.coord},Jn.prototype.print=function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex),t.println(\" dist = \"+this.dist)},Jn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Jn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Jn.prototype.toString=function(){return this.coord+\" seg # = \"+this.segmentIndex+\" dist = \"+this.dist},Jn.prototype.getDistance=function(){return this.dist},Jn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Jn.prototype.interfaces_=function(){return[E]},Jn.prototype.getClass=function(){return Jn};var Qn=function(){this._nodeMap=new p,this.edge=null;var t=arguments[0];this.edge=t};Qn.prototype.print=function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Qn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Qn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Qn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Qn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new C(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new ni(o,new Pe(this.edge._label))},Qn.prototype.add=function(t,e,n){var i=new Jn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Qn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var Zn=function(){};Zn.prototype.getChainStartIndices=function(t){var e=0,n=new Nt;n.add(new M(e));do{var i=this.findChainEnd(t,e);n.add(new M(i)),e=i}while(e<t.length-1);return Zn.toIntArray(n)},Zn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){if(Be.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new j,this.env2=new j;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Zn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],p=this.pts[o],h=s.pts[a],f=s.pts[u];if(o-r==1&&u-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,p),this.env2.init(h,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((r+o)/2),d=Math.trunc((a+u)/2);r<g&&(a<d&&this.computeIntersectsForChain(r,g,s,a,d,l),d<u&&this.computeIntersectsForChain(r,g,s,d,u,l)),g<o&&(a<d&&this.computeIntersectsForChain(g,o,s,a,d,l),d<u&&this.computeIntersectsForChain(g,o,s,d,u,l))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var ti=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}};ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][Se.RIGHT]-this._depth[t][Se.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?w.EXTERIOR:w.INTERIOR},ti.prototype.toString=function(){return\"A: \"+this._depth[0][1]+\",\"+this._depth[0][2]+\" B: \"+this._depth[1][1]+\",\"+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==w.EXTERIOR&&i!==w.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===w.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===w.EXTERIOR?0:t===w.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei);var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];return new e(t,Pe.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print(\"edge \"+this._name+\": \"),t.print(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.print(\",\"),t.print(this.pts[e].x+\" \"+this.pts[e].y);t.print(\")  \"+this._label+\" \"+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print(\"edge \"+this._name+\": \");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+\" \");t.println(\"\")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new j;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new C(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new D;t.append(\"edge \"+this._name+\": \"),t.append(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.append(\",\"),t.append(this.pts[e].x+\" \"+this.pts[e].y);return t.append(\")  \"+this._label+\" \"+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Se.ON),e.getLocation(1,Se.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Se.LEFT),e.getLocation(1,Se.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Se.RIGHT),e.getLocation(1,Se.RIGHT),2))},e}(Fe),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Pe(t.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new Nt,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new An(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new Nt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Te;r.create(i),e.add(r)}}return $e.sort(e,$e.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new xn,n=new rt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Kn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Mn(n,this._bufParams),r=new Bn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Ye(new kn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new ke(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();if(a.size()<=0)return this.createEmptyResultGeometry();return this._geomFact.buildGeometry(a)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new ni(r.getCoordinates(),new Pe(s));this.insertUniqueEdge(a)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,Se.LEFT),n=t.getLocation(0,Se.RIGHT);return e===w.INTERIOR&&n===w.EXTERIOR?1:e===w.EXTERIOR&&n===w.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new _e,n=new Nt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(T(arguments[0],It))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Y.out.println(n)}},ri.prototype.scale=function(){if(T(arguments[0],It)){for(var t=arguments[0],e=new Nt,n=t.iterator();n.hasNext();){var i=n.next();e.add(new gn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new C(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return Lt.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[In]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new rt,this._segStrings=null;var t=arguments[0];this._segStrings=t},si={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new $(\"found endpt/interior pt intersection at index \"+o+\" :pt \"+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,o,l);else if(4===arguments.length){var c=arguments[0],p=arguments[1],h=arguments[2],f=arguments[3];if(c===h&&p===f)return null;var g=c.getCoordinates()[p],d=c.getCoordinates()[p+1],y=h.getCoordinates()[f],_=h.getCoordinates()[f+1];if(this._li.computeIntersection(g,d,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,d)||this.hasInteriorIntersection(this._li,y,_)))throw new $(\"found non-noded intersection at \"+g+\"-\"+d+\" and \"+y+\"-\"+_)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $(\"found non-noded collapse at \"+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},si.fact.get=function(){return new _e},Object.defineProperties(oi,si);var ai=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m(\"Scale factor must be non-zero\");1!==e&&(this._pt=new C(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new C,this._p1Scaled=new C),this.initCorners(this._pt)},ui={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ai.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),\"Found bad envelope test\"),a},ai.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new C(this._maxx,this._maxy),this._corner[1]=new C(this._minx,this._maxy),this._corner[2]=new C(this._minx,this._miny),this._corner[3]=new C(this._maxx,this._miny)},ai.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ai.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ai.prototype.getCoordinate=function(){return this._originalPt},ai.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ai.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ai.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new j(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ai.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},ai.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!i)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},ai.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ui.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ai,ui);var li=function(){this.tempEnv1=new j,this.selectedSegment=new dn};li.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._index=null;var t=arguments[0];this._index=t},pi={HotPixelSnapAction:{configurable:!0}};ci.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new hi(e,n,i);return this._index.query(r,{interfaces_:function(){return[Ke]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},pi.HotPixelSnapAction.get=function(){return hi},Object.defineProperties(ci,pi);var hi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),fi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Nt};fi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},fi.prototype.isDone=function(){return!1},fi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fi.prototype.interfaces_=function(){return[Wn]},fi.prototype.getClass=function(){return fi};var gi=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};gi.prototype.checkCorrectness=function(t){var e=gn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof z))throw t;t.printStackTrace()}},gi.prototype.getNodedSubstrings=function(){return gn.getNodedSubstrings(this._nodedSegStrings)},gi.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},gi.prototype.findInteriorIntersections=function(t,e){var n=new fi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},gi.prototype.computeVertexSnaps=function(){if(T(arguments[0],It))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof gn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new ai(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},gi.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new xn,this._pointSnapper=new ci(this._noder.getIndex()),this.snapRound(t,this._li)},gi.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ai(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},gi.prototype.interfaces_=function(){return[In]},gi.prototype.getClass=function(){return gi};var di=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};di.prototype.bufferFixedPrecision=function(t){var e=new ri(new gi(new fe(1)),t.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},di.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=di.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof we))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=di.precisionScaleFactor(this._argGeom,this._distance,n),r=new fe(i);this.bufferFixedPrecision(r)}},di.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},di.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},di.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},di.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},di.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new di(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&\"number\"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],o=new di(n);o.setQuadrantSegments(r);return o.getResultGeometry(i)}if(arguments[2]instanceof Cn&&arguments[0]instanceof ct&&\"number\"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new di(s,u).getResultGeometry(a)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],p=arguments[2],h=arguments[3],f=new di(l);f.setQuadrantSegments(p),f.setEndCapStyle(h);return f.getResultGeometry(c)}},di.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=R.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},yi.CAP_ROUND.get=function(){return Cn.CAP_ROUND},yi.CAP_BUTT.get=function(){return Cn.CAP_FLAT},yi.CAP_FLAT.get=function(){return Cn.CAP_FLAT},yi.CAP_SQUARE.get=function(){return Cn.CAP_SQUARE},yi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(di,yi);var _i=function(){this._pt=[new C,new C],this._distance=v.NaN,this._isNull=!0};_i.prototype.getCoordinates=function(){return this._pt},_i.prototype.getCoordinate=function(t){return this._pt[t]},_i.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},_i.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},_i.prototype.getDistance=function(){return this._distance},_i.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var mi=function(){};mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.computeDistance=function(){if(arguments[2]instanceof _i&&arguments[0]instanceof Kt&&arguments[1]instanceof C)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new dn,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof _i&&arguments[0]instanceof $t&&arguments[1]instanceof C){var a=arguments[0],u=arguments[1],l=arguments[2];mi.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)mi.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof _i&&arguments[0]instanceof ct&&arguments[1]instanceof C){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof Kt)mi.computeDistance(p,h,f);else if(p instanceof $t)mi.computeDistance(p,h,f);else if(p instanceof zt)for(var g=p,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);mi.computeDistance(y,h,f)}else f.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof _i&&arguments[0]instanceof dn&&arguments[1]instanceof C){var _=arguments[0],m=arguments[1],v=arguments[2],I=_.closestPoint(m);v.setMinimum(I,m)}};var vi=function(t){this._maxPtDist=new _i,this._inputGeom=t||null},Ii={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vi.prototype.computeMaxMidpointDistance=function(t){var e=new xi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.computeMaxVertexDistance=function(t){var e=new Ei(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vi.prototype.getDistancePoints=function(){return this._maxPtDist},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},Ii.MaxPointDistanceFilter.get=function(){return Ei},Ii.MaxMidpointDistanceFilter.get=function(){return xi},Object.defineProperties(vi,Ii);var Ei=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};Ei.prototype.filter=function(t){this._minPtDist.initialize(),mi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ei.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ei.prototype.interfaces_=function(){return[ft]},Ei.prototype.getClass=function(){return Ei};var xi=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};xi.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new C((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),mi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xi.prototype.isDone=function(){return!1},xi.prototype.isGeometryChanged=function(){return!1},xi.prototype.getMaxPointDistance=function(){return this._maxPtDist},xi.prototype.interfaces_=function(){return[Ut]},xi.prototype.getClass=function(){return xi};var Ni=function(t){this._comps=t||null};Ni.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Ni.prototype.interfaces_=function(){return[Vt]},Ni.prototype.getClass=function(){return Ni},Ni.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ni.getPolygons(t,new Nt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof zt&&e.apply(new Ni(n)),n}};var Ci=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Ci.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Kt&&this._lines.add(t)},Ci.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Ci.prototype.interfaces_=function(){return[lt]},Ci.prototype.getClass=function(){return Ci},Ci.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Ci.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Ci.getLines(e,n))}},Ci.getLines=function(){if(1===arguments.length){var t=arguments[0];return Ci.getLines(t,!1)}if(2===arguments.length){if(T(arguments[0],It)&&T(arguments[1],It)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Ci.getLines(r,n)}return n}if(arguments[0]instanceof ct&&\"boolean\"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new Nt;return o.apply(new Ci(a,s)),a}if(arguments[0]instanceof ct&&T(arguments[1],It)){var u=arguments[0],l=arguments[1];return u instanceof Kt?l.add(u):u.apply(new Ci(l)),l}}else if(3===arguments.length){if(\"boolean\"==typeof arguments[2]&&T(arguments[0],It)&&T(arguments[1],It)){for(var c=arguments[0],p=arguments[1],h=arguments[2],f=c.iterator();f.hasNext();){var g=f.next();Ci.getLines(g,p,h)}return p}if(\"boolean\"==typeof arguments[2]&&arguments[0]instanceof ct&&T(arguments[1],It)){var d=arguments[0],y=arguments[1],_=arguments[2];return d.apply(new Ci(y,_)),y}}};var Si=function(){if(this._boundaryRule=gt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m(\"Rule must be non-null\");this._boundaryRule=t}};Si.prototype.locateInternal=function(){if(arguments[0]instanceof C&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return w.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===w.EXTERIOR)return w.EXTERIOR;if(i===w.BOUNDARY)return w.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===w.INTERIOR)return w.EXTERIOR;if(s===w.BOUNDARY)return w.BOUNDARY}return w.INTERIOR}if(arguments[0]instanceof C&&arguments[1]instanceof Kt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return w.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?at.isOnLine(a,l)?w.INTERIOR:w.EXTERIOR:w.BOUNDARY}if(arguments[0]instanceof C&&arguments[1]instanceof Qt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?w.INTERIOR:w.EXTERIOR}},Si.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):w.EXTERIOR},Si.prototype.intersects=function(t,e){return this.locate(t,e)!==w.EXTERIOR},Si.prototype.updateLocationInfo=function(t){t===w.INTERIOR&&(this._isIn=!0),t===w.BOUNDARY&&this._numBoundaries++},Si.prototype.computeLocation=function(t,e){if(e instanceof Qt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Kt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Xt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof zt)for(var u=new Un(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Si.prototype.locate=function(t,e){return e.isEmpty()?w.EXTERIOR:e instanceof Kt?this.locateInternal(t,e):e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?w.BOUNDARY:this._numBoundaries>0||this._isIn?w.INTERIOR:w.EXTERIOR)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Li=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},bi={INSIDE_AREA:{configurable:!0}};Li.prototype.isInsideArea=function(){return this._segIndex===Li.INSIDE_AREA},Li.prototype.getCoordinate=function(){return this._pt},Li.prototype.getGeometryComponent=function(){return this._component},Li.prototype.getSegmentIndex=function(){return this._segIndex},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},bi.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Li,bi);var wi=function(t){this._pts=t||null};wi.prototype.filter=function(t){t instanceof Qt&&this._pts.add(t)},wi.prototype.interfaces_=function(){return[Vt]},wi.prototype.getClass=function(){return wi},wi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Qt?$e.singletonList(t):wi.getPoints(t,new Nt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof zt&&e.apply(new wi(n)),n}};var Oi=function(){this._locations=null;var t=arguments[0];this._locations=t};Oi.prototype.filter=function(t){(t instanceof Qt||t instanceof Kt||t instanceof $t)&&this._locations.add(new Li(t,0,t.getCoordinate()))},Oi.prototype.interfaces_=function(){return[Vt]},Oi.prototype.getClass=function(){return Oi},Oi.getLocations=function(t){var e=new Nt;return t.apply(new Oi(e)),e};var Ti=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Si,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Ti.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ni.getPolygons(this._geom[e]);if(r.size()>0){var o=Oi.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&T(arguments[0],xt)&&T(arguments[1],xt)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),p=0;p<a.size();p++)if(this.computeContainmentDistance(c,a.get(p),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Li&&arguments[1]instanceof $t){var h=arguments[0],f=arguments[1],g=arguments[2],d=h.getCoordinate();if(w.EXTERIOR!==this._ptLocator.locate(d,f))return this._minDistance=0,g[0]=h,g[1]=new Li(f,d),null}},Ti.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Ti.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Ci.getLines(this._geom[0]),n=Ci.getLines(this._geom[1]),i=wi.getPoints(this._geom[0]),r=wi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Ti.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ti.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ti.prototype.nearestPoints=function(){this.computeMinDistance();return[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ti.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=at.distancePointLine(r,i[o],i[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new dn(i[o],i[o+1]).closestPoint(r);n[0]=new Li(t,o,a),n[1]=new Li(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Kt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var p=u.getCoordinates(),h=l.getCoordinates(),f=0;f<p.length-1;f++)for(var g=0;g<h.length-1;g++){var d=at.distanceLineLine(p[f],p[f+1],h[g],h[g+1]);if(d<this._minDistance){this._minDistance=d;var y=new dn(p[f],p[f+1]),_=new dn(h[g],h[g+1]),m=y.closestPoints(_);c[0]=new Li(u,f,m[0]),c[1]=new Li(l,g,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ti.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Li(r,0,r.getCoordinate()),n[1]=new Li(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ti.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m(\"null geometries are not supported\");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ti.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.distance=function(t,e){return new Ti(t,e).distance()},Ti.isWithinDistance=function(t,e,n){return new Ti(t,e,n).distance()<=n},Ti.nearestPoints=function(t,e){return new Ti(t,e).nearestPoints()};var Ri=function(){this._pt=[new C,new C],this._distance=v.NaN,this._isNull=!0};Ri.prototype.getCoordinates=function(){return this._pt},Ri.prototype.getCoordinate=function(t){return this._pt[t]},Ri.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Ri.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Ri.prototype.toString=function(){return Z.toLineString(this._pt[0],this._pt[1])},Ri.prototype.getDistance=function(){return this._distance},Ri.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri};var Pi=function(){};Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.computeDistance=function(){if(arguments[2]instanceof Ri&&arguments[0]instanceof Kt&&arguments[1]instanceof C)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new dn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Ri&&arguments[0]instanceof $t&&arguments[1]instanceof C){var a=arguments[0],u=arguments[1],l=arguments[2];Pi.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Pi.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Ri&&arguments[0]instanceof ct&&arguments[1]instanceof C){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof Kt)Pi.computeDistance(p,h,f);else if(p instanceof $t)Pi.computeDistance(p,h,f);else if(p instanceof zt)for(var g=p,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);Pi.computeDistance(y,h,f)}else f.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof Ri&&arguments[0]instanceof dn&&arguments[1]instanceof C){var _=arguments[0],m=arguments[1],v=arguments[2],I=_.closestPoint(m);v.setMinimum(I,m)}};var Di=function(){this._g0=null,this._g1=null,this._ptDist=new Ri,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Mi={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Di.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Di.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m(\"Fraction is not in range (0.0 - 1.0]\");this._densifyFrac=t},Di.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Di.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Di.prototype.computeOrientedDistance=function(t,e,n){var i=new Ai(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Fi(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Di.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Di(t,e).distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Di(n,i);return o.setDensifyFraction(r),o.distance()}},Mi.MaxPointDistanceFilter.get=function(){return Ai},Mi.MaxDensifiedByFractionDistanceFilter.get=function(){return Fi},Object.defineProperties(Di,Mi);var Ai=function(){this._maxPtDist=new Ri,this._minPtDist=new Ri,this._euclideanDist=new Pi,this._geom=null;var t=arguments[0];this._geom=t};Ai.prototype.filter=function(t){this._minPtDist.initialize(),Pi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ai.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ai.prototype.interfaces_=function(){return[ft]},Ai.prototype.getClass=function(){return Ai};var Fi=function(){this._maxPtDist=new Ri,this._minPtDist=new Ri,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Fi.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*r,u=n.y+s*o,l=new C(a,u);this._minPtDist.initialize(),Pi.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fi.prototype.isDone=function(){return!1},Fi.prototype.isGeometryChanged=function(){return!1},Fi.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fi.prototype.interfaces_=function(){return[Ut]},Fi.prototype.getClass=function(){return Fi};var Gi=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},qi={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Gi.prototype.checkMaximumDistance=function(t,e,n){var i=new Di(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg=\"Distance between buffer curve and input is too large (\"+this._maxDistanceFound+\" at \"+Z.toLineString(r[0],r[1])+\")\"}},Gi.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Gi.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Gi.VERBOSE&&Y.out.println(\"Min Dist= \"+this._minDistanceFound+\"  err= \"+(1-this._minDistanceFound/this._bufDistance)+\"  Max Dist= \"+this._maxDistanceFound+\"  err= \"+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Gi.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof zt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Gi.prototype.getErrorIndicator=function(){return this._errorIndicator},Gi.prototype.checkMinimumDistance=function(t,e,n){var i=new Ti(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg=\"Distance between buffer curve and input is too small (\"+this._minDistanceFound+\" at \"+Z.toLineString(r[0],r[1])+\" )\"}},Gi.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Gi.prototype.getErrorLocation=function(){return this._errorLocation},Gi.prototype.getPolygonLines=function(t){for(var e=new Nt,n=new Ci(e),i=Ni.getPolygons(t).iterator();i.hasNext();){i.next().apply(n)}return t.getFactory().buildGeometry(e)},Gi.prototype.getErrorMessage=function(){return this._errMsg},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi},qi.VERBOSE.get=function(){return!1},qi.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Gi,qi);var Bi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Vi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bi.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new j(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new j(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg=\"Buffer envelope is incorrect\",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report(\"Envelope\")},Bi.prototype.checkDistance=function(){var t=new Gi(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report(\"Distance\")},Bi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg=\"Area of positive buffer is smaller than input\",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg=\"Area of negative buffer is larger than input\",this._errorIndicator=this._result),this.report(\"Area\")},Bi.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg=\"Result is not polygonal\",this._errorIndicator=this._result,this.report(\"Polygonal\")},Bi.prototype.getErrorIndicator=function(){return this._errorIndicator},Bi.prototype.getErrorLocation=function(){return this._errorLocation},Bi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg=\"Result is non-empty\",this._errorIndicator=this._result),void this.report(\"ExpectedEmpty\"))},Bi.prototype.report=function(t){if(!Bi.VERBOSE)return null;Y.out.println(\"Check \"+t+\": \"+(this._isValid?\"passed\":\"FAILED\"))},Bi.prototype.getErrorMessage=function(){return this._errorMsg},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.isValidMsg=function(t,e,n){var i=new Bi(t,e,n);return i.isValid()?null:i.getErrorMessage()},Bi.isValid=function(t,e,n){return!!new Bi(t,e,n).isValid()},Vi.VERBOSE.get=function(){return!1},Vi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bi,Vi);var Ui=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ui.prototype.getCoordinates=function(){return this._pts},Ui.prototype.size=function(){return this._pts.length},Ui.prototype.getCoordinate=function(t){return this._pts[t]},Ui.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ui.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:pn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ui.prototype.setData=function(t){this._data=t},Ui.prototype.getData=function(){return this._data},Ui.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},Ui.prototype.interfaces_=function(){return[hn]},Ui.prototype.getClass=function(){return Ui};var zi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Nt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zi.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zi.prototype.getIntersectionSegments=function(){return this._intSegments},zi.prototype.count=function(){return this._intersectionCount},zi.prototype.getIntersections=function(){return this._intersections},zi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zi.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zi.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly){if(!(this.isEndSegment(t,e)||this.isEndSegment(n,i)))return null}var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zi.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zi.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zi.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zi.prototype.interfaces_=function(){return[Wn]},zi.prototype.getClass=function(){return zi},zi.createAllIntersectionsFinder=function(t){var e=new zi(t);return e.setFindAllIntersections(!0),e},zi.createAnyIntersectionFinder=function(t){return new zi(t)},zi.createIntersectionCounter=function(t){var e=new zi(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Xi=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Xi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Xi.prototype.getIntersections=function(){return this._segInt.getIntersections()},Xi.prototype.isValid=function(){return this.execute(),this._isValid},Xi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new xn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Xi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new we(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Xi.prototype.getErrorMessage=function(){if(this._isValid)return\"no intersections found\";var t=this._segInt.getIntersectionSegments();return\"found non-noded intersection between \"+Z.toLineString(t[0],t[1])+\" and \"+Z.toLineString(t[2],t[3])},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.computeIntersections=function(t){var e=new Xi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Yi=function t(){this._nv=null;var e=arguments[0];this._nv=new Xi(t.toSegmentStrings(e))};Yi.prototype.checkValid=function(){this._nv.checkValid()},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi},Yi.toSegmentStrings=function(t){for(var e=new Nt,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ui(i.getCoordinates(),i))}return e},Yi.checkValid=function(t){new Yi(t).checkValid()};var ki=function(t){this._mapOp=t};ki.prototype.map=function(t){for(var e=new Nt,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(_e.toGeometryArray(e))},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.map=function(t,e){return new ki(e).map(t)};var ji=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Nt,this._resultLineList=new Nt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};ji.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},ji.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},ji.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},ji.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Lr.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},ji.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},ji.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},ji.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},ji.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Lr.isResultOfOp(i,e)&&e===Lr.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji};var Hi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Nt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Lr.INTERSECTION))){var i=n.getLabel();Lr.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Hi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var Wi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1);for(var r=new Nt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new Nt;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Wi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wi.prototype.getInputGeometry=function(){return this._inputGeom},Wi.prototype.transformMultiLineString=function(t,e){for(var n=new Nt,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wi.prototype.transformMultiPoint=function(t,e){for(var n=new Nt,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.transformMultiPolygon=function(t,e){for(var n=new Nt,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.copy=function(t){return t.copy()},Wi.prototype.transformGeometryCollection=function(t,e){for(var n=new Nt,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_e.toGeometryArray(n)):this._factory.buildGeometry(n)},Wi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Qt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Kt)return this.transformLineString(t,null);if(t instanceof Xt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof zt)return this.transformGeometryCollection(t,null);throw new m(\"Unknown Geometry subtype: \"+t.getClass().getName())},Wi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var Ki=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new dn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kt&&\"number\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&\"number\"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};Ki.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new C(o)),0===i&&this._isClosed&&t.set(t.size()-1,new C(o)))}},Ki.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Ki.prototype.snapTo=function(t){var e=new St(this._srcPts);this.snapVertices(e,t),this.snapSegments(e,t);return e.toCoordinateArray()},Ki.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new C(r),!1)}},Ki.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Ki.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Ji=function(t){this._srcGeom=t||null},Qi={SNAP_PRECISION_FACTOR:{configurable:!0}};Ji.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Zi(e,n).transform(this._srcGeom)},Ji.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Zi(t,n,!0).transform(this._srcGeom),r=i;return e&&T(r,Zt)&&(r=i.buffer(0)),r},Ji.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Ji.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Ji.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji},Ji.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Ji(t);i[0]=r.snapTo(e,n);var o=new Ji(e);return i[1]=o.snapTo(i[0],n),i},Ji.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Ji.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Ji.computeOverlaySnapTolerance(r),Ji.computeOverlaySnapTolerance(o))}},Ji.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Ji.SNAP_PRECISION_FACTOR},Ji.snapToSelf=function(t,e,n){return new Ji(t).snapToSelf(e,n)},Qi.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Ji,Qi);var Zi=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Ki(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wi),$i=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$i.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},$i.prototype.add=function(t){var e=v.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=$i.signExpBits(this._commonBits),this._isFirst=!1,null;if($i.signExpBits(e)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=$i.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=$i.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},$i.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n=\"0000000000000000000000000000000000000000000000000000000000000000\"+v.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+\"  \"+i.substring(1,12)+\"(exp) \"+i.substring(12)+\" [ \"+e+\" ]\"}},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$i.signExpBits=function(t){return t>>52},$i.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$i.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if($i.getBit(t,i)!==$i.getBit(e,i))return n;n++}return 52};var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord);t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new C(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ir(e);return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er);var nr=function(){this._commonBitsX=new $i,this._commonBitsY=new $i};nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new C(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[ft]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var t=arguments[0];this.trans=t};ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[Ut]},ir.prototype.getClass=function(){return ir};var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rr.prototype.selfSnap=function(t){return new Ji(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Lr.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||Y.out.println(\"Snapped geometry is invalid\")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=Ji.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t);return Ji.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,Lr.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Lr.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Lr.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Lr.DIFFERENCE)};var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Lr.overlayOp(this._geom[0],this._geom[1],t);n=!0}catch(t){if(!(t instanceof $))throw t;i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,Lr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Lr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Lr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Lr.DIFFERENCE)};var sr=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},ur={INSERT:{configurable:!0},DELETE:{configurable:!0}};ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[E]},ar.prototype.getClass=function(){return ar},ur.INSERT.get=function(){return 1},ur.DELETE.get=function(){return 2},Object.defineProperties(ar,ur);var lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};cr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(cr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},cr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cr.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},cr.prototype.hasProperIntersection=function(){return this._hasProper},cr.prototype.hasIntersection=function(){return this._hasIntersection},cr.prototype.isDone=function(){return this._isDone},cr.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},cr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cr.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var pr=function(t){function e(){t.call(this),this.events=new Nt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cr&&T(arguments[0],xt)&&T(arguments[1],xt)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if(\"boolean\"==typeof arguments[2]&&T(arguments[0],xt)&&arguments[1]instanceof cr){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new sr(n,r),s=new ar(e,n.getMinX(r),o);this.events.add(s),this.events.add(new ar(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),hr=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},fr={NodeComparator:{configurable:!0}};hr.prototype.getMin=function(){return this._min},hr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hr.prototype.getMax=function(){return this._max},hr.prototype.toString=function(){return Z.toLineString(new C(this._min,0),new C(this._max,0))},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},fr.NodeComparator.get=function(){return gr},Object.defineProperties(hr,fr);var gr=function(){};gr.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},gr.prototype.interfaces_=function(){return[N]},gr.prototype.getClass=function(){return gr};var dr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hr),yr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hr),_r=function(){this._leaves=new Nt,this._root=null,this._level=0};_r.prototype.buildTree=function(){$e.sort(this._leaves,new hr.NodeComparator);for(var t=this._leaves,e=null,n=new Nt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_r.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error(\"Index cannot be added to once it has been queried\");this._leaves.add(new dr(t,e,n))},_r.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_r.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_r.prototype.printNode=function(t){Y.out.println(Z.toLineString(new C(t._min,this._level),new C(t._max,this._level)))},_r.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_r.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new yr(t.get(n),t.get(n+1));e.add(r)}}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var mr=function(){this._items=new Nt};mr.prototype.visitItem=function(t){this._items.add(t)},mr.prototype.getItems=function(){return this._items},mr.prototype.interfaces_=function(){return[Ke]},mr.prototype.getClass=function(){return mr};var vr=function(){this._index=null;var t=arguments[0];if(!T(t,Zt))throw new m(\"Argument must be Polygonal\");this._index=new xr(t)},Ir={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vr.prototype.locate=function(t){var e=new st(t),n=new Er(e);return this._index.query(t.y,t.y,n),e.getLocation()},vr.prototype.interfaces_=function(){return[Vn]},vr.prototype.getClass=function(){return vr},Ir.SegmentVisitor.get=function(){return Er},Ir.IntervalIndexedGeometry.get=function(){return xr},Object.defineProperties(vr,Ir);var Er=function(){this._counter=null;var t=arguments[0];this._counter=t};Er.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Er.prototype.interfaces_=function(){return[Ke]},Er.prototype.getClass=function(){return Er};var xr=function(){this._index=new _r;var t=arguments[0];this.init(t)};xr.prototype.init=function(t){for(var e=Ci.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},xr.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new dn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},xr.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mr;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr};var Nr=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new he,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Si,2===arguments.length){var e=arguments[0],n=arguments[1],i=gt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;w.NONE;i.getLocation(t,Se.ON)===w.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new cr(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,u=i||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new cr(e,n,!0);i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Qt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,w.INTERIOR)}else if(arguments[0]instanceof C){var e=arguments[0];this.insertPoint(this._argIndex,e,w.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),w.EXTERIOR,w.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,w.INTERIOR,w.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],w.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],w.BOUNDARY)},e.prototype.addLineString=function(t){var e=Lt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ni(e,new Pe(this._argIndex,w.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,\"found LineString with single point\"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===w.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=Lt.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;at.isCCW(i)&&(r=n,o=e);var s=new ni(i,new Pe(this._argIndex,w.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],w.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Pe(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new pr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Kt)this.addLineString(e);else if(e instanceof Qt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Xt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof zt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return T(this._parentGeom,Zt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?w.BOUNDARY:w.INTERIOR},e}(Ye),Cr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Nr(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=gt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Nr(0,e,i),this._arg[1]=new Nr(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Nr(0,r,s),this._arg[1]=new Nr(1,o,s)}};Cr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Cr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Sr=function(){};Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Sr.map=function(){if(arguments[0]instanceof ct&&T(arguments[1],Sr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Nt,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(T(arguments[0],It)&&T(arguments[1],Sr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Nt,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Sr.MapOp=function(){};var Lr=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Si,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new Nt,this._resultLineList=new Nt,this._resultPointList=new Nt,this._graph=new Ye(new kn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Pe(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new Nt;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==w.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Nt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Nt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Yi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new ke(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new ji(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Hi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Se.RIGHT),r.getLocation(1,Se.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,Se.LEFT),\"depth of LEFT side has not been initialized\"),n.setLocation(r,Se.LEFT,i.getLocation(r,Se.LEFT)),et.isTrue(!i.isNull(r,Se.RIGHT),\"depth of RIGHT side has not been initialized\"),n.setLocation(r,Se.RIGHT,i.getLocation(r,Se.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cr);Lr.overlayOp=function(t,e,n){return new Lr(t,e).getResultGeometry(n)},Lr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Lr.createEmptyResult(Lr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return ki.map(t,{interfaces_:function(){return[Sr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Lr.INTERSECTION)},Lr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Lr.createEmptyResult(Lr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Lr.SYMDIFFERENCE)},Lr.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Lr.INTERSECTION:o=Math.min(i,r);break;case Lr.UNION:o=Math.max(i,r);break;case Lr.DIFFERENCE:o=i;break;case Lr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Lr.createEmptyResult=function(t,e,n,i){var r=null;switch(Lr.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Lr.difference=function(t,e){return t.isEmpty()?Lr.createEmptyResult(Lr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Lr.DIFFERENCE))},Lr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Lr.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===w.BOUNDARY&&(r=w.INTERIOR),o===w.BOUNDARY&&(o=w.INTERIOR),s){case Lr.INTERSECTION:return r===w.INTERIOR&&o===w.INTERIOR;case Lr.UNION:return r===w.INTERIOR||o===w.INTERIOR;case Lr.DIFFERENCE:return r===w.INTERIOR&&o!==w.INTERIOR;case Lr.SYMDIFFERENCE:return r===w.INTERIOR&&o!==w.INTERIOR||r!==w.INTERIOR&&o===w.INTERIOR}return!1}},Lr.INTERSECTION=1,Lr.UNION=2,Lr.DIFFERENCE=3,Lr.SYMDIFFERENCE=4;var br=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Si,this._seg=new dn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};br.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++){n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1);if(this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0}return!1},br.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?w.BOUNDARY:this._ptLocator.locate(t,this._g)},br.prototype.extractLinework=function(t){var e=new wr;t.apply(e);var n=e.getLinework(),i=_e.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br};var wr=function(){this._linework=null,this._linework=new Nt};wr.prototype.getLinework=function(){return this._linework},wr.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},wr.prototype.interfaces_=function(){return[Vt]},wr.prototype.getClass=function(){return wr};var Or=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Or.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Or.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Or.prototype.getPoints=function(t){for(var e=new Nt,n=Ci.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Or.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var p=new C(l-u,c+a);i.add(p)}if(this._doRight){var h=new C(l+u,c-a);i.add(h)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Tr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Nt;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new br(this._geom[0],this._boundaryDistanceTolerance),new br(this._geom[1],this._boundaryDistanceTolerance),new br(this._geom[2],this._boundaryDistanceTolerance)]},Rr={TOLERANCE:{configurable:!0}};Tr.prototype.reportResult=function(t,e,n){Y.out.println(\"Overlay result invalid - A:\"+w.toLocationSymbol(e[0])+\" B:\"+w.toLocationSymbol(e[1])+\" expected:\"+(n?\"i\":\"e\")+\" actual:\"+w.toLocationSymbol(e[2]))},Tr.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Tr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Tr.hasLocation(this._location,w.BOUNDARY)||this.isValidResult(i,this._location)}},Tr.prototype.addTestPts=function(t){var e=new Or(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Tr.prototype.isValidResult=function(t,e){var n=Lr.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===w.INTERIOR);return i||this.reportResult(t,e,n),i},Tr.prototype.getInvalidLocation=function(){return this._invalidLocation},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Tr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Ji.computeSizeBasedSnapTolerance(t),Ji.computeSizeBasedSnapTolerance(e))},Tr.isValid=function(t,e,n,i){return new Tr(t,e,i).isValid(n)},Rr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Tr,Rr);var Pr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Pr.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Pr.prototype.combine=function(){for(var t=new Nt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.combine=function(){if(1===arguments.length){var t=arguments[0];return new Pr(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Pr(Pr.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return new Pr(Pr.createList(i,r,o)).combine()}},Pr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Pr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Nt;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new Nt;return s.add(i),s.add(r),s.add(o),s}};var Dr=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Nt)},Mr={STRTREE_NODE_CAPACITY:{configurable:!0}};Dr.prototype.reduceToGeometries=function(t){for(var e=new Nt,n=t.iterator();n.hasNext();){var i=n.next(),r=null;T(i,xt)?r=this.unionTree(i):i instanceof ct&&(r=i),e.add(r)}return e},Dr.prototype.extractByEnvelope=function(t,e,n){for(var i=new Nt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Dr.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i)){return Pr.combine(t,e)}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Dr.prototype.union=function(){if(null===this._inputPolys)throw new Error(\"union() method cannot be called twice\");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Dr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Dr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Dr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Dr.getGeometry(e,n),Dr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Dr.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Dr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Dr.prototype.unionActual=function(t,e){return Dr.restrictToPolygons(t.union(e))},Dr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Dr.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Nt,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);i.add(s);return Pr.combine(i)},Dr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.restrictToPolygons=function(t){if(T(t,Zt))return t;var e=Ni.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_e.toPolygonArray(e))},Dr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Dr.union=function(t){return new Dr(t).union()},Mr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dr,Mr);var Ar=function(){};Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Lr.createEmptyResult(Lr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Lr.UNION)},t.GeoJSONReader=Ne,t.GeoJSONWriter=Ce,t.OverlayOp=Lr,t.UnionOp=Ar,t.BufferOp=di,Object.defineProperty(t,\"__esModule\",{value:!0})});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90dXJmLWpzdHMvanN0cy5taW4uanM/ZTlmYyJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9lKGV4cG9ydHMpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXhwb3J0c1wiXSxlKTplKHQuanN0cz17fSl9KHRoaXMsZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBuKHQpe3RoaXMubWVzc2FnZT10fHxcIlwifWZ1bmN0aW9uIGkodCl7dGhpcy5tZXNzYWdlPXR8fFwiXCJ9ZnVuY3Rpb24gcih0KXt0aGlzLm1lc3NhZ2U9dHx8XCJcIn1mdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIHModCl7cmV0dXJuIG51bGw9PT10P010OnQuY29sb3J9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbnVsbD09PXQ/bnVsbDp0LnBhcmVudH1mdW5jdGlvbiB1KHQsZSl7bnVsbCE9PXQmJih0LmNvbG9yPWUpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIG51bGw9PT10P251bGw6dC5sZWZ0fWZ1bmN0aW9uIGModCl7cmV0dXJuIG51bGw9PT10P251bGw6dC5yaWdodH1mdW5jdGlvbiBwKCl7dGhpcy5yb290Xz1udWxsLHRoaXMuc2l6ZV89MH1mdW5jdGlvbiBoKCl7fWZ1bmN0aW9uIGYoKXt0aGlzLmFycmF5Xz1bXSxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEl0JiZ0aGlzLmFkZEFsbChhcmd1bWVudHNbMF0pfWZ1bmN0aW9uIGcoKXt9ZnVuY3Rpb24gZCh0KXt0aGlzLm1lc3NhZ2U9dHx8XCJcIn1mdW5jdGlvbiB5KCl7dGhpcy5hcnJheV89W119XCJmaWxsXCJpbiBBcnJheS5wcm90b3R5cGV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsXCJmaWxsXCIse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10aGlzfHxudWxsPT09dGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKHRoaXMrXCIgaXMgbm90IGFuIG9iamVjdFwiKTt2YXIgZT1PYmplY3QodGhpcyksbj1NYXRoLm1heChNYXRoLm1pbihlLmxlbmd0aCw5MDA3MTk5MjU0NzQwOTkxKSwwKXx8MCxpPTEgaW4gYXJndW1lbnRzP3BhcnNlSW50KE51bWJlcihhcmd1bWVudHNbMV0pLDEwKXx8MDowO2k9aTwwP01hdGgubWF4KG4raSwwKTpNYXRoLm1pbihpLG4pO3ZhciByPTIgaW4gYXJndW1lbnRzJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/cGFyc2VJbnQoTnVtYmVyKGFyZ3VtZW50c1syXSksMTApfHwwOm47Zm9yKHI9cjwwP01hdGgubWF4KG4rYXJndW1lbnRzWzJdLDApOk1hdGgubWluKHIsbik7aTxyOyllW2ldPXQsKytpO3JldHVybiBlfSx3cml0YWJsZTohMH0pLE51bWJlci5pc0Zpbml0ZT1OdW1iZXIuaXNGaW5pdGV8fGZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZpc0Zpbml0ZSh0KX0sTnVtYmVyLmlzSW50ZWdlcj1OdW1iZXIuaXNJbnRlZ2VyfHxmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmaXNGaW5pdGUodCkmJk1hdGguZmxvb3IodCk9PT10fSxOdW1iZXIucGFyc2VGbG9hdD1OdW1iZXIucGFyc2VGbG9hdHx8cGFyc2VGbG9hdCxOdW1iZXIuaXNOYU49TnVtYmVyLmlzTmFOfHxmdW5jdGlvbih0KXtyZXR1cm4gdCE9dH0sTWF0aC50cnVuYz1NYXRoLnRydW5jfHxmdW5jdGlvbih0KXtyZXR1cm4gdDwwP01hdGguY2VpbCh0KTpNYXRoLmZsb29yKHQpfTt2YXIgXz1mdW5jdGlvbigpe307Xy5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sXy5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gX30sXy5wcm90b3R5cGUuZXF1YWxzV2l0aFRvbGVyYW5jZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIE1hdGguYWJzKHQtZSk8PW59O3ZhciBtPWZ1bmN0aW9uKCl7fSx2PWZ1bmN0aW9uKCl7fSxJPXtNQVhfVkFMVUU6e2NvbmZpZ3VyYWJsZTohMH19O3YuaXNOYU49ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlci5pc05hTih0KX0sdi5kb3VibGVUb0xvbmdCaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0fSx2LmxvbmdCaXRzVG9Eb3VibGU9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHYuaXNJbmZpbml0ZT1mdW5jdGlvbih0KXtyZXR1cm4hTnVtYmVyLmlzRmluaXRlKHQpfSxJLk1BWF9WQUxVRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTnVtYmVyLk1BWF9WQUxVRX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModixJKTt2YXIgRT1mdW5jdGlvbigpe30seD1mdW5jdGlvbigpe30sTj1mdW5jdGlvbigpe30sQz1mdW5jdGlvbiB0KCl7aWYodGhpcy54PW51bGwsdGhpcy55PW51bGwsdGhpcy56PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy54PTAsdGhpcy55PTAsdGhpcy56PXQuTlVMTF9PUkRJTkFURTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy54PWUueCx0aGlzLnk9ZS55LHRoaXMuej1lLnp9ZWxzZSAyPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy54PWFyZ3VtZW50c1swXSx0aGlzLnk9YXJndW1lbnRzWzFdLHRoaXMuej10Lk5VTExfT1JESU5BVEUpOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYodGhpcy54PWFyZ3VtZW50c1swXSx0aGlzLnk9YXJndW1lbnRzWzFdLHRoaXMuej1hcmd1bWVudHNbMl0pfSxTPXtEaW1lbnNpb25hbENvbXBhcmF0b3I6e2NvbmZpZ3VyYWJsZTohMH0sc2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfSxOVUxMX09SRElOQVRFOntjb25maWd1cmFibGU6ITB9LFg6e2NvbmZpZ3VyYWJsZTohMH0sWTp7Y29uZmlndXJhYmxlOiEwfSxaOntjb25maWd1cmFibGU6ITB9fTtDLnByb3RvdHlwZS5zZXRPcmRpbmF0ZT1mdW5jdGlvbih0LGUpe3N3aXRjaCh0KXtjYXNlIEMuWDp0aGlzLng9ZTticmVhaztjYXNlIEMuWTp0aGlzLnk9ZTticmVhaztjYXNlIEMuWjp0aGlzLno9ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBtKFwiSW52YWxpZCBvcmRpbmF0ZSBpbmRleDogXCIrdCl9fSxDLnByb3RvdHlwZS5lcXVhbHMyRD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMueD09PXQueCYmdGhpcy55PT09dC55fWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuISFfLmVxdWFsc1dpdGhUb2xlcmFuY2UodGhpcy54LGUueCxuKSYmISFfLmVxdWFsc1dpdGhUb2xlcmFuY2UodGhpcy55LGUueSxuKX19LEMucHJvdG90eXBlLmdldE9yZGluYXRlPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIEMuWDpyZXR1cm4gdGhpcy54O2Nhc2UgQy5ZOnJldHVybiB0aGlzLnk7Y2FzZSBDLlo6cmV0dXJuIHRoaXMuen10aHJvdyBuZXcgbShcIkludmFsaWQgb3JkaW5hdGUgaW5kZXg6IFwiK3QpfSxDLnByb3RvdHlwZS5lcXVhbHMzRD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PT09dC54JiZ0aGlzLnk9PT10LnkmJih0aGlzLno9PT10Lnp8fHYuaXNOYU4odGhpcy56KSkmJnYuaXNOYU4odC56KX0sQy5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQyYmdGhpcy5lcXVhbHMyRCh0KX0sQy5wcm90b3R5cGUuZXF1YWxJblo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gXy5lcXVhbHNXaXRoVG9sZXJhbmNlKHRoaXMueix0LnosZSl9LEMucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiB0aGlzLng8ZS54Py0xOnRoaXMueD5lLng/MTp0aGlzLnk8ZS55Py0xOnRoaXMueT5lLnk/MTowfSxDLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe30sQy5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe3JldHVybiBuZXcgQyh0aGlzKX0sQy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIihcIit0aGlzLngrXCIsIFwiK3RoaXMueStcIiwgXCIrdGhpcy56K1wiKVwifSxDLnByb3RvdHlwZS5kaXN0YW5jZTNEPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueC10Lngsbj10aGlzLnktdC55LGk9dGhpcy56LXQuejtyZXR1cm4gTWF0aC5zcXJ0KGUqZStuKm4raSppKX0sQy5wcm90b3R5cGUuZGlzdGFuY2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LXQueCxuPXRoaXMueS10Lnk7cmV0dXJuIE1hdGguc3FydChlKmUrbipuKX0sQy5wcm90b3R5cGUuaGFzaENvZGU9ZnVuY3Rpb24oKXt2YXIgdD0xNztyZXR1cm4gdD0zNyp0K0MuaGFzaENvZGUodGhpcy54KSx0PTM3KnQrQy5oYXNoQ29kZSh0aGlzLnkpfSxDLnByb3RvdHlwZS5zZXRDb29yZGluYXRlPWZ1bmN0aW9uKHQpe3RoaXMueD10LngsdGhpcy55PXQueSx0aGlzLno9dC56fSxDLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltFLHgsZV19LEMucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEN9LEMuaGFzaENvZGU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9di5kb3VibGVUb0xvbmdCaXRzKHQpO3JldHVybiBNYXRoLnRydW5jKChlXmUpPj4+MzIpfX0sUy5EaW1lbnNpb25hbENvbXBhcmF0b3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIEx9LFMuc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMHg1Y2JmMmMyMzVjN2U1ODAwfSxTLk5VTExfT1JESU5BVEUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHYuTmFOfSxTLlguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LFMuWS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0sUy5aLmdldD1mdW5jdGlvbigpe3JldHVybiAyfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDLFMpO3ZhciBMPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2RpbWVuc2lvbnNUb1Rlc3Q9MiwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdO2lmKDIhPT1lJiYzIT09ZSl0aHJvdyBuZXcgbShcIm9ubHkgMiBvciAzIGRpbWVuc2lvbnMgbWF5IGJlIHNwZWNpZmllZFwiKTt0aGlzLl9kaW1lbnNpb25zVG9UZXN0PWV9fTtMLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dCxpPWUscj1MLmNvbXBhcmUobi54LGkueCk7aWYoMCE9PXIpcmV0dXJuIHI7dmFyIG89TC5jb21wYXJlKG4ueSxpLnkpO2lmKDAhPT1vKXJldHVybiBvO2lmKHRoaXMuX2RpbWVuc2lvbnNUb1Rlc3Q8PTIpcmV0dXJuIDA7cmV0dXJuIEwuY29tcGFyZShuLnosaS56KX0sTC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bTl19LEwucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEx9LEwuY29tcGFyZT1mdW5jdGlvbih0LGUpe3JldHVybiB0PGU/LTE6dD5lPzE6di5pc05hTih0KT92LmlzTmFOKGUpPzA6LTE6di5pc05hTihlKT8xOjB9O3ZhciBiPWZ1bmN0aW9uKCl7fTtiLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oKXt9LGIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O3ZhciB3PWZ1bmN0aW9uKCl7fSxPPXtJTlRFUklPUjp7Y29uZmlndXJhYmxlOiEwfSxCT1VOREFSWTp7Y29uZmlndXJhYmxlOiEwfSxFWFRFUklPUjp7Y29uZmlndXJhYmxlOiEwfSxOT05FOntjb25maWd1cmFibGU6ITB9fTt3LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSx3LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB3fSx3LnRvTG9jYXRpb25TeW1ib2w9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2Ugdy5FWFRFUklPUjpyZXR1cm5cImVcIjtjYXNlIHcuQk9VTkRBUlk6cmV0dXJuXCJiXCI7Y2FzZSB3LklOVEVSSU9SOnJldHVyblwiaVwiO2Nhc2Ugdy5OT05FOnJldHVyblwiLVwifXRocm93IG5ldyBtKFwiVW5rbm93biBsb2NhdGlvbiB2YWx1ZTogXCIrdCl9LE8uSU5URVJJT1IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LE8uQk9VTkRBUlkuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDF9LE8uRVhURVJJT1IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDJ9LE8uTk9ORS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModyxPKTt2YXIgVD1mdW5jdGlvbih0LGUpe3JldHVybiB0LmludGVyZmFjZXNfJiZ0LmludGVyZmFjZXNfKCkuaW5kZXhPZihlKT4tMX0sUj1mdW5jdGlvbigpe30sUD17TE9HXzEwOntjb25maWd1cmFibGU6ITB9fTtSLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxSLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBSfSxSLmxvZzEwPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgubG9nKHQpO3JldHVybiB2LmlzSW5maW5pdGUoZSk/ZTp2LmlzTmFOKGUpP2U6ZS9SLkxPR18xMH0sUi5taW49ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dDtyZXR1cm4gZTxyJiYocj1lKSxuPHImJihyPW4pLGk8ciYmKHI9aSkscn0sUi5jbGFtcD1mdW5jdGlvbigpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gdDxlP2U6dD5uP246dH1pZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1syXSkmJk51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl07cmV0dXJuIGk8cj9yOmk+bz9vOml9fSxSLndyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdDwwP2UtIC10JWU6dCVlfSxSLm1heD1mdW5jdGlvbigpe2lmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT10O3JldHVybiBlPmkmJihpPWUpLG4+aSYmKGk9biksaX1pZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzWzNdLHU9cjtyZXR1cm4gbz51JiYodT1vKSxzPnUmJih1PXMpLGE+dSYmKHU9YSksdX19LFIuYXZlcmFnZT1mdW5jdGlvbih0LGUpe3JldHVybih0K2UpLzJ9LFAuTE9HXzEwLmdldD1mdW5jdGlvbigpe3JldHVybiBNYXRoLmxvZygxMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFIsUCk7dmFyIEQ9ZnVuY3Rpb24odCl7dGhpcy5zdHI9dH07RC5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe3RoaXMuc3RyKz10fSxELnByb3RvdHlwZS5zZXRDaGFyQXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cj10aGlzLnN0ci5zdWJzdHIoMCx0KStlK3RoaXMuc3RyLnN1YnN0cih0KzEpfSxELnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdHJ9O3ZhciBNPWZ1bmN0aW9uKHQpe3RoaXMudmFsdWU9dH07TS5wcm90b3R5cGUuaW50VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX0sTS5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlPHQ/LTE6dGhpcy52YWx1ZT50PzE6MH0sTS5pc05hTj1mdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyLmlzTmFOKHQpfTt2YXIgQT1mdW5jdGlvbigpe307QS5pc1doaXRlc3BhY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTMyJiZ0Pj0wfHwxMjc9PT10fSxBLnRvVXBwZXJDYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9O3ZhciBGPWZ1bmN0aW9uIHQoKXtpZih0aGlzLl9oaT0wLHRoaXMuX2xvPTAsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5pbml0KDApO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLmluaXQoZSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHQpe3ZhciBuPWFyZ3VtZW50c1swXTt0aGlzLmluaXQobil9ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgaT1hcmd1bWVudHNbMF07dC5jYWxsKHRoaXMsdC5wYXJzZShpKSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXTt0aGlzLmluaXQocixvKX19LEc9e1BJOntjb25maWd1cmFibGU6ITB9LFRXT19QSTp7Y29uZmlndXJhYmxlOiEwfSxQSV8yOntjb25maWd1cmFibGU6ITB9LEU6e2NvbmZpZ3VyYWJsZTohMH0sTmFOOntjb25maWd1cmFibGU6ITB9LEVQUzp7Y29uZmlndXJhYmxlOiEwfSxTUExJVDp7Y29uZmlndXJhYmxlOiEwfSxNQVhfUFJJTlRfRElHSVRTOntjb25maWd1cmFibGU6ITB9LFRFTjp7Y29uZmlndXJhYmxlOiEwfSxPTkU6e2NvbmZpZ3VyYWJsZTohMH0sU0NJX05PVF9FWFBPTkVOVF9DSEFSOntjb25maWd1cmFibGU6ITB9LFNDSV9OT1RfWkVSTzp7Y29uZmlndXJhYmxlOiEwfX07Ri5wcm90b3R5cGUubGU9ZnVuY3Rpb24odCl7cmV0dXJuKHRoaXMuX2hpPHQuX2hpfHx0aGlzLl9oaT09PXQuX2hpKSYmdGhpcy5fbG88PXQuX2xvfSxGLnByb3RvdHlwZS5leHRyYWN0U2lnbmlmaWNhbnREaWdpdHM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmFicygpLGk9Ri5tYWduaXR1ZGUobi5faGkpLHI9Ri5URU4ucG93KGkpOyhuPW4uZGl2aWRlKHIpKS5ndChGLlRFTik/KG49bi5kaXZpZGUoRi5URU4pLGkrPTEpOm4ubHQoRi5PTkUpJiYobj1uLm11bHRpcGx5KEYuVEVOKSxpLT0xKTtmb3IodmFyIG89aSsxLHM9bmV3IEQsYT1GLk1BWF9QUklOVF9ESUdJVFMtMSx1PTA7dTw9YTt1Kyspe3QmJnU9PT1vJiZzLmFwcGVuZChcIi5cIik7dmFyIGw9TWF0aC50cnVuYyhuLl9oaSk7aWYobDwwKWJyZWFrO3ZhciBjPSExLHA9MDtsPjk/KGM9ITAscD1cIjlcIik6cD1cIjBcIitsLHMuYXBwZW5kKHApLG49bi5zdWJ0cmFjdChGLnZhbHVlT2YobCkpLm11bHRpcGx5KEYuVEVOKSxjJiZuLnNlbGZBZGQoRi5URU4pO3ZhciBoPSEwLGY9Ri5tYWduaXR1ZGUobi5faGkpO2lmKGY8MCYmTWF0aC5hYnMoZik+PWEtdSYmKGg9ITEpLCFoKWJyZWFrfXJldHVybiBlWzBdPWkscy50b1N0cmluZygpfSxGLnByb3RvdHlwZS5zcXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBseSh0aGlzKX0sRi5wcm90b3R5cGUuZG91YmxlVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGkrdGhpcy5fbG99LEYucHJvdG90eXBlLnN1YnRyYWN0PWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBGKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuYWRkKHQubmVnYXRlKCkpfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5hZGQoLWUpfX0sRi5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5faGk9PT10Ll9oaSYmdGhpcy5fbG89PT10Ll9sb319LEYucHJvdG90eXBlLmlzWmVybz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5faGkmJjA9PT10aGlzLl9sb30sRi5wcm90b3R5cGUuc2VsZlN1YnRyYWN0PWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBGKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaXNOYU4oKT90aGlzOnRoaXMuc2VsZkFkZCgtdC5faGksLXQuX2xvKX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaXNOYU4oKT90aGlzOnRoaXMuc2VsZkFkZCgtZSwwKX19LEYucHJvdG90eXBlLmdldFNwZWNpYWxOdW1iZXJTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1plcm8oKT9cIjAuMFwiOnRoaXMuaXNOYU4oKT9cIk5hTiBcIjpudWxsfSxGLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGUodCk/dGhpczp0fSxGLnByb3RvdHlwZS5zZWxmRGl2aWRlPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgRil7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLnNlbGZEaXZpZGUodC5faGksdC5fbG8pfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmRGl2aWRlKGUsMCl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPW51bGwsbz1udWxsLHM9bnVsbCxhPW51bGwsdT1udWxsLGw9bnVsbCxjPW51bGwscD1udWxsO3JldHVybiB1PXRoaXMuX2hpL24sbD1GLlNQTElUKnUscj1sLXUscD1GLlNQTElUKm4scj1sLXIsbz11LXIscz1wLW4sYz11Km4scz1wLXMsYT1uLXMscD1yKnMtYytyKmErbypzK28qYSxsPSh0aGlzLl9oaS1jLXArdGhpcy5fbG8tdSppKS9uLHA9dStsLHRoaXMuX2hpPXAsdGhpcy5fbG89dS1wK2wsdGhpc319LEYucHJvdG90eXBlLmR1bXA9ZnVuY3Rpb24oKXtyZXR1cm5cIkREPFwiK3RoaXMuX2hpK1wiLCBcIit0aGlzLl9sbytcIj5cIn0sRi5wcm90b3R5cGUuZGl2aWRlPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBGKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1udWxsLG49bnVsbCxpPW51bGwscj1udWxsLG89bnVsbCxzPW51bGwsYT1udWxsLHU9bnVsbDtuPShvPXRoaXMuX2hpL3QuX2hpKS0oZT0ocz1GLlNQTElUKm8pLShlPXMtbykpLHU9ZSooaT0odT1GLlNQTElUKnQuX2hpKS0oaT11LXQuX2hpKSktKGE9byp0Ll9oaSkrZSoocj10Ll9oaS1pKStuKmkrbipyLHM9KHRoaXMuX2hpLWEtdSt0aGlzLl9sby1vKnQuX2xvKS90Ll9oaTtyZXR1cm4gbmV3IEYodT1vK3Msby11K3MpfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBsPWFyZ3VtZW50c1swXTtyZXR1cm4gdi5pc05hTihsKT9GLmNyZWF0ZU5hTigpOkYuY29weSh0aGlzKS5zZWxmRGl2aWRlKGwsMCl9fSxGLnByb3RvdHlwZS5nZT1mdW5jdGlvbih0KXtyZXR1cm4odGhpcy5faGk+dC5faGl8fHRoaXMuX2hpPT09dC5faGkpJiZ0aGlzLl9sbz49dC5fbG99LEYucHJvdG90eXBlLnBvdz1mdW5jdGlvbih0KXtpZigwPT09dClyZXR1cm4gRi52YWx1ZU9mKDEpO3ZhciBlPW5ldyBGKHRoaXMpLG49Ri52YWx1ZU9mKDEpLGk9TWF0aC5hYnModCk7aWYoaT4xKWZvcig7aT4wOylpJTI9PTEmJm4uc2VsZk11bHRpcGx5KGUpLChpLz0yKT4wJiYoZT1lLnNxcigpKTtlbHNlIG49ZTtyZXR1cm4gdDwwP24ucmVjaXByb2NhbCgpOm59LEYucHJvdG90eXBlLmNlaWw9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTmFOKCkpcmV0dXJuIEYuTmFOO3ZhciB0PU1hdGguY2VpbCh0aGlzLl9oaSksZT0wO3JldHVybiB0PT09dGhpcy5faGkmJihlPU1hdGguY2VpbCh0aGlzLl9sbykpLG5ldyBGKHQsZSl9LEYucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiB0aGlzLl9oaTxlLl9oaT8tMTp0aGlzLl9oaT5lLl9oaT8xOnRoaXMuX2xvPGUuX2xvPy0xOnRoaXMuX2xvPmUuX2xvPzE6MH0sRi5wcm90b3R5cGUucmludD1mdW5jdGlvbigpe2lmKHRoaXMuaXNOYU4oKSlyZXR1cm4gdGhpcztyZXR1cm4gdGhpcy5hZGQoLjUpLmZsb29yKCl9LEYucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBGKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaW5pdCh0KSx0aGlzfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5pbml0KGUpLHRoaXN9fSxGLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2UodCk/dGhpczp0fSxGLnByb3RvdHlwZS5zcXJ0PWZ1bmN0aW9uKCl7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gRi52YWx1ZU9mKDApO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXJldHVybiBGLk5hTjt2YXIgdD0xL01hdGguc3FydCh0aGlzLl9oaSksZT10aGlzLl9oaSp0LG49Ri52YWx1ZU9mKGUpLGk9dGhpcy5zdWJ0cmFjdChuLnNxcigpKS5faGkqKC41KnQpO3JldHVybiBuLmFkZChpKX0sRi5wcm90b3R5cGUuc2VsZkFkZD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEYpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmQWRkKHQuX2hpLHQuX2xvKX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1udWxsLGk9bnVsbCxyPW51bGwsbz1udWxsLHM9bnVsbCxhPW51bGw7cmV0dXJuIHI9dGhpcy5faGkrZSxzPXItdGhpcy5faGksbz1yLXMsbz1lLXMrKHRoaXMuX2hpLW8pLGE9byt0aGlzLl9sbyxuPXIrYSxpPWErKHItbiksdGhpcy5faGk9bitpLHRoaXMuX2xvPWkrKG4tdGhpcy5faGkpLHRoaXN9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB1PWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXSxjPW51bGwscD1udWxsLGg9bnVsbCxmPW51bGwsZz1udWxsLGQ9bnVsbCx5PW51bGw7Zj10aGlzLl9oaSt1LHA9dGhpcy5fbG8rbCxnPWYtKGQ9Zi10aGlzLl9oaSksaD1wLSh5PXAtdGhpcy5fbG8pO3ZhciBfPShjPWYrKGQ9KGc9dS1kKyh0aGlzLl9oaS1nKSkrcCkpKyhkPShoPWwteSsodGhpcy5fbG8taCkpKyhkKyhmLWMpKSksbT1kKyhjLV8pO3JldHVybiB0aGlzLl9oaT1fLHRoaXMuX2xvPW0sdGhpc319LEYucHJvdG90eXBlLnNlbGZNdWx0aXBseT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEYpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmTXVsdGlwbHkodC5faGksdC5fbG8pfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmTXVsdGlwbHkoZSwwKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9bnVsbCxvPW51bGwscz1udWxsLGE9bnVsbCx1PW51bGwsbD1udWxsO3I9KHU9Ri5TUExJVCp0aGlzLl9oaSktdGhpcy5faGksbD1GLlNQTElUKm4scj11LXIsbz10aGlzLl9oaS1yLHM9bC1uO3ZhciBjPSh1PXRoaXMuX2hpKm4pKyhsPXIqKHM9bC1zKS11K3IqKGE9bi1zKStvKnMrbyphKyh0aGlzLl9oaSppK3RoaXMuX2xvKm4pKSxwPWwrKHI9dS1jKTtyZXR1cm4gdGhpcy5faGk9Yyx0aGlzLl9sbz1wLHRoaXN9fSxGLnByb3RvdHlwZS5zZWxmU3FyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZk11bHRpcGx5KHRoaXMpfSxGLnByb3RvdHlwZS5mbG9vcj1mdW5jdGlvbigpe2lmKHRoaXMuaXNOYU4oKSlyZXR1cm4gRi5OYU47dmFyIHQ9TWF0aC5mbG9vcih0aGlzLl9oaSksZT0wO3JldHVybiB0PT09dGhpcy5faGkmJihlPU1hdGguZmxvb3IodGhpcy5fbG8pKSxuZXcgRih0LGUpfSxGLnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05hTigpP3RoaXM6bmV3IEYoLXRoaXMuX2hpLC10aGlzLl9sbyl9LEYucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7fSxGLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgRil7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0LmlzTmFOKCk/Ri5jcmVhdGVOYU4oKTpGLmNvcHkodGhpcykuc2VsZk11bHRpcGx5KHQpfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdi5pc05hTihlKT9GLmNyZWF0ZU5hTigpOkYuY29weSh0aGlzKS5zZWxmTXVsdGlwbHkoZSwwKX19LEYucHJvdG90eXBlLmlzTmFOPWZ1bmN0aW9uKCl7cmV0dXJuIHYuaXNOYU4odGhpcy5faGkpfSxGLnByb3RvdHlwZS5pbnRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBNYXRoLnRydW5jKHRoaXMuX2hpKX0sRi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1GLm1hZ25pdHVkZSh0aGlzLl9oaSk7cmV0dXJuIHQ+PS0zJiZ0PD0yMD90aGlzLnRvU3RhbmRhcmROb3RhdGlvbigpOnRoaXMudG9TY2lOb3RhdGlvbigpfSxGLnByb3RvdHlwZS50b1N0YW5kYXJkTm90YXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNwZWNpYWxOdW1iZXJTdHJpbmcoKTtpZihudWxsIT09dClyZXR1cm4gdDt2YXIgZT1uZXcgQXJyYXkoMSkuZmlsbChudWxsKSxuPXRoaXMuZXh0cmFjdFNpZ25pZmljYW50RGlnaXRzKCEwLGUpLGk9ZVswXSsxLHI9bjtpZihcIi5cIj09PW4uY2hhckF0KDApKXI9XCIwXCIrbjtlbHNlIGlmKGk8MClyPVwiMC5cIitGLnN0cmluZ09mQ2hhcihcIjBcIiwtaSkrbjtlbHNlIGlmKC0xPT09bi5pbmRleE9mKFwiLlwiKSl7dmFyIG89aS1uLmxlbmd0aDtyPW4rRi5zdHJpbmdPZkNoYXIoXCIwXCIsbykrXCIuMFwifXJldHVybiB0aGlzLmlzTmVnYXRpdmUoKT9cIi1cIityOnJ9LEYucHJvdG90eXBlLnJlY2lwcm9jYWw9ZnVuY3Rpb24oKXt2YXIgdD1udWxsLGU9bnVsbCxuPW51bGwsaT1udWxsLHI9bnVsbCxvPW51bGwscz1udWxsLGE9bnVsbDtlPShyPTEvdGhpcy5faGkpLSh0PShvPUYuU1BMSVQqciktKHQ9by1yKSksbj0oYT1GLlNQTElUKnRoaXMuX2hpKS10aGlzLl9oaTt2YXIgdT1yKyhvPSgxLShzPXIqdGhpcy5faGkpLShhPXQqKG49YS1uKS1zK3QqKGk9dGhpcy5faGktbikrZSpuK2UqaSktcip0aGlzLl9sbykvdGhpcy5faGkpO3JldHVybiBuZXcgRih1LHItdStvKX0sRi5wcm90b3R5cGUudG9TY2lOb3RhdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIEYuU0NJX05PVF9aRVJPO3ZhciB0PXRoaXMuZ2V0U3BlY2lhbE51bWJlclN0cmluZygpO2lmKG51bGwhPT10KXJldHVybiB0O3ZhciBlPW5ldyBBcnJheSgxKS5maWxsKG51bGwpLG49dGhpcy5leHRyYWN0U2lnbmlmaWNhbnREaWdpdHMoITEsZSksaT1GLlNDSV9OT1RfRVhQT05FTlRfQ0hBUitlWzBdO2lmKFwiMFwiPT09bi5jaGFyQXQoMCkpdGhyb3cgbmV3IEVycm9yKFwiRm91bmQgbGVhZGluZyB6ZXJvOiBcIituKTt2YXIgcj1cIlwiO24ubGVuZ3RoPjEmJihyPW4uc3Vic3RyaW5nKDEpKTt2YXIgbz1uLmNoYXJBdCgwKStcIi5cIityO3JldHVybiB0aGlzLmlzTmVnYXRpdmUoKT9cIi1cIitvK2k6bytpfSxGLnByb3RvdHlwZS5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05hTigpP0YuTmFOOnRoaXMuaXNOZWdhdGl2ZSgpP3RoaXMubmVnYXRlKCk6bmV3IEYodGhpcyl9LEYucHJvdG90eXBlLmlzUG9zaXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5faGk+MHx8MD09PXRoaXMuX2hpKSYmdGhpcy5fbG8+MH0sRi5wcm90b3R5cGUubHQ9ZnVuY3Rpb24odCl7cmV0dXJuKHRoaXMuX2hpPHQuX2hpfHx0aGlzLl9oaT09PXQuX2hpKSYmdGhpcy5fbG88dC5fbG99LEYucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgRil7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBGLmNvcHkodGhpcykuc2VsZkFkZCh0KX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIEYuY29weSh0aGlzKS5zZWxmQWRkKGUpfX0sRi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5faGk9dCx0aGlzLl9sbz0wfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBGKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5faGk9ZS5faGksdGhpcy5fbG89ZS5fbG99fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTt0aGlzLl9oaT1uLHRoaXMuX2xvPWl9fSxGLnByb3RvdHlwZS5ndD1mdW5jdGlvbih0KXtyZXR1cm4odGhpcy5faGk+dC5faGl8fHRoaXMuX2hpPT09dC5faGkpJiZ0aGlzLl9sbz50Ll9sb30sRi5wcm90b3R5cGUuaXNOZWdhdGl2ZT1mdW5jdGlvbigpe3JldHVybih0aGlzLl9oaTwwfHwwPT09dGhpcy5faGkpJiZ0aGlzLl9sbzwwfSxGLnByb3RvdHlwZS50cnVuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTmFOKCk/Ri5OYU46dGhpcy5pc1Bvc2l0aXZlKCk/dGhpcy5mbG9vcigpOnRoaXMuY2VpbCgpfSxGLnByb3RvdHlwZS5zaWdudW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGk+MD8xOnRoaXMuX2hpPDA/LTE6dGhpcy5fbG8+MD8xOnRoaXMuX2xvPDA/LTE6MH0sRi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bZSxFLHhdfSxGLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBGfSxGLnNxcj1mdW5jdGlvbih0KXtyZXR1cm4gRi52YWx1ZU9mKHQpLnNlbGZNdWx0aXBseSh0KX0sRi52YWx1ZU9mPWZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBGLnBhcnNlKHQpfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gbmV3IEYoZSl9fSxGLnNxcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIEYudmFsdWVPZih0KS5zcXJ0KCl9LEYucGFyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtBLmlzV2hpdGVzcGFjZSh0LmNoYXJBdChlKSk7KWUrKzt2YXIgaT0hMTtpZihlPG4pe3ZhciByPXQuY2hhckF0KGUpO1wiLVwiIT09ciYmXCIrXCIhPT1yfHwoZSsrLFwiLVwiPT09ciYmKGk9ITApKX1mb3IodmFyIG89bmV3IEYscz0wLGE9MCx1PTA7IShlPj1uKTspe3ZhciBsPXQuY2hhckF0KGUpO2lmKGUrKyxBLmlzRGlnaXQobCkpe3ZhciBjPWwtXCIwXCI7by5zZWxmTXVsdGlwbHkoRi5URU4pLG8uc2VsZkFkZChjKSxzKyt9ZWxzZXtpZihcIi5cIiE9PWwpe2lmKFwiZVwiPT09bHx8XCJFXCI9PT1sKXt2YXIgcD10LnN1YnN0cmluZyhlKTt0cnl7dT1NLnBhcnNlSW50KHApfWNhdGNoKGUpe3Rocm93IGUgaW5zdGFuY2VvZiBFcnJvcj9uZXcgRXJyb3IoXCJJbnZhbGlkIGV4cG9uZW50IFwiK3ArXCIgaW4gc3RyaW5nIFwiK3QpOmV9YnJlYWt9dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBjaGFyYWN0ZXIgJ1wiK2wrXCInIGF0IHBvc2l0aW9uIFwiK2UrXCIgaW4gc3RyaW5nIFwiK3QpfWE9c319dmFyIGg9byxmPXMtYS11O2lmKDA9PT1mKWg9bztlbHNlIGlmKGY+MCl7dmFyIGc9Ri5URU4ucG93KGYpO2g9by5kaXZpZGUoZyl9ZWxzZSBpZihmPDApe3ZhciBkPUYuVEVOLnBvdygtZik7aD1vLm11bHRpcGx5KGQpfXJldHVybiBpP2gubmVnYXRlKCk6aH0sRi5jcmVhdGVOYU49ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEYodi5OYU4sdi5OYU4pfSxGLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBGKHQpfSxGLm1hZ25pdHVkZT1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmFicyh0KSxuPU1hdGgubG9nKGUpL01hdGgubG9nKDEwKSxpPU1hdGgudHJ1bmMoTWF0aC5mbG9vcihuKSk7cmV0dXJuIDEwKk1hdGgucG93KDEwLGkpPD1lJiYoaSs9MSksaX0sRi5zdHJpbmdPZkNoYXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IEQsaT0wO2k8ZTtpKyspbi5hcHBlbmQodCk7cmV0dXJuIG4udG9TdHJpbmcoKX0sRy5QSS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEYoMy4xNDE1OTI2NTM1ODk3OTMsMS4yMjQ2NDY3OTkxNDczNTMyZS0xNil9LEcuVFdPX1BJLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgRig2LjI4MzE4NTMwNzE3OTU4NiwyLjQ0OTI5MzU5ODI5NDcwNjRlLTE2KX0sRy5QSV8yLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgRigxLjU3MDc5NjMyNjc5NDg5NjYsNi4xMjMyMzM5OTU3MzY3NjZlLTE3KX0sRy5FLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgRigyLjcxODI4MTgyODQ1OTA0NSwxLjQ0NTY0Njg5MTcyOTI1MDJlLTE2KX0sRy5OYU4uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBGKHYuTmFOLHYuTmFOKX0sRy5FUFMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDEuMjMyNTk1MTY0NDA3ODNlLTMyfSxHLlNQTElULmdldD1mdW5jdGlvbigpe3JldHVybiAxMzQyMTc3Mjl9LEcuTUFYX1BSSU5UX0RJR0lUUy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMzJ9LEcuVEVOLmdldD1mdW5jdGlvbigpe3JldHVybiBGLnZhbHVlT2YoMTApfSxHLk9ORS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gRi52YWx1ZU9mKDEpfSxHLlNDSV9OT1RfRVhQT05FTlRfQ0hBUi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm5cIkVcIn0sRy5TQ0lfTk9UX1pFUk8uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuXCIwLjBFMFwifSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhGLEcpO3ZhciBxPWZ1bmN0aW9uKCl7fSxCPXtEUF9TQUZFX0VQU0lMT046e2NvbmZpZ3VyYWJsZTohMH19O3EucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LHEucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHF9LHEub3JpZW50YXRpb25JbmRleD1mdW5jdGlvbih0LGUsbil7dmFyIGk9cS5vcmllbnRhdGlvbkluZGV4RmlsdGVyKHQsZSxuKTtpZihpPD0xKXJldHVybiBpO3ZhciByPUYudmFsdWVPZihlLngpLnNlbGZBZGQoLXQueCksbz1GLnZhbHVlT2YoZS55KS5zZWxmQWRkKC10LnkpLHM9Ri52YWx1ZU9mKG4ueCkuc2VsZkFkZCgtZS54KSxhPUYudmFsdWVPZihuLnkpLnNlbGZBZGQoLWUueSk7cmV0dXJuIHIuc2VsZk11bHRpcGx5KGEpLnNlbGZTdWJ0cmFjdChvLnNlbGZNdWx0aXBseShzKSkuc2lnbnVtKCl9LHEuc2lnbk9mRGV0MngyPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiB0Lm11bHRpcGx5KGkpLnNlbGZTdWJ0cmFjdChlLm11bHRpcGx5KG4pKS5zaWdudW0oKX0scS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9Ri52YWx1ZU9mKGkueSkuc2VsZlN1YnRyYWN0KG4ueSkuc2VsZk11bHRpcGx5KEYudmFsdWVPZihlLngpLnNlbGZTdWJ0cmFjdCh0LngpKSxvPUYudmFsdWVPZihpLngpLnNlbGZTdWJ0cmFjdChuLngpLnNlbGZNdWx0aXBseShGLnZhbHVlT2YoZS55KS5zZWxmU3VidHJhY3QodC55KSkscz1yLnN1YnRyYWN0KG8pLGE9Ri52YWx1ZU9mKGkueCkuc2VsZlN1YnRyYWN0KG4ueCkuc2VsZk11bHRpcGx5KEYudmFsdWVPZih0LnkpLnNlbGZTdWJ0cmFjdChuLnkpKSx1PUYudmFsdWVPZihpLnkpLnNlbGZTdWJ0cmFjdChuLnkpLnNlbGZNdWx0aXBseShGLnZhbHVlT2YodC54KS5zZWxmU3VidHJhY3Qobi54KSksbD1hLnN1YnRyYWN0KHUpLnNlbGZEaXZpZGUocykuZG91YmxlVmFsdWUoKSxjPUYudmFsdWVPZih0LngpLnNlbGZBZGQoRi52YWx1ZU9mKGUueCkuc2VsZlN1YnRyYWN0KHQueCkuc2VsZk11bHRpcGx5KGwpKS5kb3VibGVWYWx1ZSgpLHA9Ri52YWx1ZU9mKGUueCkuc2VsZlN1YnRyYWN0KHQueCkuc2VsZk11bHRpcGx5KEYudmFsdWVPZih0LnkpLnNlbGZTdWJ0cmFjdChuLnkpKSxoPUYudmFsdWVPZihlLnkpLnNlbGZTdWJ0cmFjdCh0LnkpLnNlbGZNdWx0aXBseShGLnZhbHVlT2YodC54KS5zZWxmU3VidHJhY3Qobi54KSksZj1wLnN1YnRyYWN0KGgpLnNlbGZEaXZpZGUocykuZG91YmxlVmFsdWUoKSxnPUYudmFsdWVPZihuLnkpLnNlbGZBZGQoRi52YWx1ZU9mKGkueSkuc2VsZlN1YnRyYWN0KG4ueSkuc2VsZk11bHRpcGx5KGYpKS5kb3VibGVWYWx1ZSgpO3JldHVybiBuZXcgQyhjLGcpfSxxLm9yaWVudGF0aW9uSW5kZXhGaWx0ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW51bGwscj0odC54LW4ueCkqKGUueS1uLnkpLG89KHQueS1uLnkpKihlLngtbi54KSxzPXItbztpZihyPjApe2lmKG88PTApcmV0dXJuIHEuc2lnbnVtKHMpO2k9citvfWVsc2V7aWYoIShyPDApKXJldHVybiBxLnNpZ251bShzKTtpZihvPj0wKXJldHVybiBxLnNpZ251bShzKTtpPS1yLW99dmFyIGE9cS5EUF9TQUZFX0VQU0lMT04qaTtyZXR1cm4gcz49YXx8LXM+PWE/cS5zaWdudW0ocyk6Mn0scS5zaWdudW09ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD8xOnQ8MD8tMTowfSxCLkRQX1NBRkVfRVBTSUxPTi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMWUtMTV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHEsQik7dmFyIFY9ZnVuY3Rpb24oKXt9LFU9e1g6e2NvbmZpZ3VyYWJsZTohMH0sWTp7Y29uZmlndXJhYmxlOiEwfSxaOntjb25maWd1cmFibGU6ITB9LE06e2NvbmZpZ3VyYWJsZTohMH19O1UuWC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sVS5ZLmdldD1mdW5jdGlvbigpe3JldHVybiAxfSxVLlouZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDJ9LFUuTS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gM30sVi5wcm90b3R5cGUuc2V0T3JkaW5hdGU9ZnVuY3Rpb24odCxlLG4pe30sVi5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe30sVi5wcm90b3R5cGUuZ2V0T3JkaW5hdGU9ZnVuY3Rpb24odCxlKXt9LFYucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXt9LFYucHJvdG90eXBlLmdldENvb3JkaW5hdGVDb3B5PWZ1bmN0aW9uKHQpe30sVi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uPWZ1bmN0aW9uKCl7fSxWLnByb3RvdHlwZS5nZXRYPWZ1bmN0aW9uKHQpe30sVi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt9LFYucHJvdG90eXBlLmV4cGFuZEVudmVsb3BlPWZ1bmN0aW9uKHQpe30sVi5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe30sVi5wcm90b3R5cGUuZ2V0WT1mdW5jdGlvbih0KXt9LFYucHJvdG90eXBlLnRvQ29vcmRpbmF0ZUFycmF5PWZ1bmN0aW9uKCl7fSxWLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVyblt4XX0sVi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gVn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVixVKTt2YXIgej1mdW5jdGlvbigpe30sWD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5jYWxsKHRoaXMsXCJQcm9qZWN0aXZlIHBvaW50IG5vdCByZXByZXNlbnRhYmxlIG9uIHRoZSBDYXJ0ZXNpYW4gcGxhbmUuXCIpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxlfSh6KSxZPWZ1bmN0aW9uKCl7fTtZLmFycmF5Y29weT1mdW5jdGlvbih0LGUsbixpLHIpe2Zvcih2YXIgbz0wLHM9ZTtzPGUrcjtzKyspbltpK29dPXRbc10sbysrfSxZLmdldFByb3BlcnR5PWZ1bmN0aW9uKHQpe3JldHVybntcImxpbmUuc2VwYXJhdG9yXCI6XCJcXG5cIn1bdF19O3ZhciBrPWZ1bmN0aW9uIHQoKXtpZih0aGlzLng9bnVsbCx0aGlzLnk9bnVsbCx0aGlzLnc9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aCl0aGlzLng9MCx0aGlzLnk9MCx0aGlzLnc9MTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy54PWUueCx0aGlzLnk9ZS55LHRoaXMudz0xfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTt0aGlzLng9bix0aGlzLnk9aSx0aGlzLnc9MX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiB0KXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV07dGhpcy54PXIueSpvLnctby55KnIudyx0aGlzLnk9by54KnIudy1yLngqby53LHRoaXMudz1yLngqby55LW8ueCpyLnl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgQyl7dmFyIHM9YXJndW1lbnRzWzBdLGE9YXJndW1lbnRzWzFdO3RoaXMueD1zLnktYS55LHRoaXMueT1hLngtcy54LHRoaXMudz1zLngqYS55LWEueCpzLnl9fWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB1PWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXSxjPWFyZ3VtZW50c1syXTt0aGlzLng9dSx0aGlzLnk9bCx0aGlzLnc9Y31lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcD1hcmd1bWVudHNbMF0saD1hcmd1bWVudHNbMV0sZj1hcmd1bWVudHNbMl0sZz1hcmd1bWVudHNbM10sZD1wLnktaC55LHk9aC54LXAueCxfPXAueCpoLnktaC54KnAueSxtPWYueS1nLnksdj1nLngtZi54LEk9Zi54KmcueS1nLngqZi55O3RoaXMueD15KkktdipfLHRoaXMueT1tKl8tZCpJLHRoaXMudz1kKnYtbSp5fX07ay5wcm90b3R5cGUuZ2V0WT1mdW5jdGlvbigpe3ZhciB0PXRoaXMueS90aGlzLnc7aWYodi5pc05hTih0KXx8di5pc0luZmluaXRlKHQpKXRocm93IG5ldyBYO3JldHVybiB0fSxrLnByb3RvdHlwZS5nZXRYPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy54L3RoaXMudztpZih2LmlzTmFOKHQpfHx2LmlzSW5maW5pdGUodCkpdGhyb3cgbmV3IFg7cmV0dXJuIHR9LGsucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQztyZXR1cm4gdC54PXRoaXMuZ2V0WCgpLHQueT10aGlzLmdldFkoKSx0fSxrLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxrLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBrfSxrLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10LnktZS55LG89ZS54LXQueCxzPXQueCplLnktZS54KnQueSxhPW4ueS1pLnksdT1pLngtbi54LGw9bi54KmkueS1pLngqbi55LGM9cip1LWEqbyxwPShvKmwtdSpzKS9jLGg9KGEqcy1yKmwpL2M7aWYodi5pc05hTihwKXx8di5pc0luZmluaXRlKHApfHx2LmlzTmFOKGgpfHx2LmlzSW5maW5pdGUoaCkpdGhyb3cgbmV3IFg7cmV0dXJuIG5ldyBDKHAsaCl9O3ZhciBqPWZ1bmN0aW9uIHQoKXtpZih0aGlzLl9taW54PW51bGwsdGhpcy5fbWF4eD1udWxsLHRoaXMuX21pbnk9bnVsbCx0aGlzLl9tYXh5PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5pbml0KCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5pbml0KGUueCxlLngsZS55LGUueSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHQpe3ZhciBuPWFyZ3VtZW50c1swXTt0aGlzLmluaXQobil9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTt0aGlzLmluaXQoaS54LHIueCxpLnksci55KX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbz1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl0sdT1hcmd1bWVudHNbM107dGhpcy5pbml0KG8scyxhLHUpfX0sSD17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07ai5wcm90b3R5cGUuZ2V0QXJlYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFdpZHRoKCkqdGhpcy5nZXRIZWlnaHQoKX0sai5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGopKXJldHVybiExO3ZhciBlPXQ7cmV0dXJuIHRoaXMuaXNOdWxsKCk/ZS5pc051bGwoKTp0aGlzLl9tYXh4PT09ZS5nZXRNYXhYKCkmJnRoaXMuX21heHk9PT1lLmdldE1heFkoKSYmdGhpcy5fbWlueD09PWUuZ2V0TWluWCgpJiZ0aGlzLl9taW55PT09ZS5nZXRNaW5ZKCl9LGoucHJvdG90eXBlLmludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtpZih0aGlzLmlzTnVsbCgpfHx0LmlzTnVsbCgpfHwhdGhpcy5pbnRlcnNlY3RzKHQpKXJldHVybiBuZXcgajt2YXIgZT10aGlzLl9taW54PnQuX21pbng/dGhpcy5fbWlueDp0Ll9taW54LG49dGhpcy5fbWlueT50Ll9taW55P3RoaXMuX21pbnk6dC5fbWlueSxpPXRoaXMuX21heHg8dC5fbWF4eD90aGlzLl9tYXh4OnQuX21heHgscj10aGlzLl9tYXh5PHQuX21heHk/dGhpcy5fbWF4eTp0Ll9tYXh5O3JldHVybiBuZXcgaihlLGksbixyKX0sai5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heHg8dGhpcy5fbWlueH0sai5wcm90b3R5cGUuZ2V0TWF4WD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXh4fSxqLnByb3RvdHlwZS5jb3ZlcnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY292ZXJzKHQueCx0LnkpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2Ygail7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiF0aGlzLmlzTnVsbCgpJiYhZS5pc051bGwoKSYmKGUuZ2V0TWluWCgpPj10aGlzLl9taW54JiZlLmdldE1heFgoKTw9dGhpcy5fbWF4eCYmZS5nZXRNaW5ZKCk+PXRoaXMuX21pbnkmJmUuZ2V0TWF4WSgpPD10aGlzLl9tYXh5KX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3JldHVybiF0aGlzLmlzTnVsbCgpJiYobj49dGhpcy5fbWlueCYmbjw9dGhpcy5fbWF4eCYmaT49dGhpcy5fbWlueSYmaTw9dGhpcy5fbWF4eSl9fSxqLnByb3RvdHlwZS5pbnRlcnNlY3RzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2Ygail7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiF0aGlzLmlzTnVsbCgpJiYhdC5pc051bGwoKSYmISh0Ll9taW54PnRoaXMuX21heHh8fHQuX21heHg8dGhpcy5fbWlueHx8dC5fbWlueT50aGlzLl9tYXh5fHx0Ll9tYXh5PHRoaXMuX21pbnkpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmludGVyc2VjdHMoZS54LGUueSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTtyZXR1cm4hdGhpcy5pc051bGwoKSYmIShuPnRoaXMuX21heHh8fG48dGhpcy5fbWlueHx8aT50aGlzLl9tYXh5fHxpPHRoaXMuX21pbnkpfX0sai5wcm90b3R5cGUuZ2V0TWluWT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9taW55fSxqLnByb3RvdHlwZS5nZXRNaW5YPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbnh9LGoucHJvdG90eXBlLmV4cGFuZFRvSW5jbHVkZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmV4cGFuZFRvSW5jbHVkZSh0LngsdC55KX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2Ygail7dmFyIGU9YXJndW1lbnRzWzBdO2lmKGUuaXNOdWxsKCkpcmV0dXJuIG51bGw7dGhpcy5pc051bGwoKT8odGhpcy5fbWlueD1lLmdldE1pblgoKSx0aGlzLl9tYXh4PWUuZ2V0TWF4WCgpLHRoaXMuX21pbnk9ZS5nZXRNaW5ZKCksdGhpcy5fbWF4eT1lLmdldE1heFkoKSk6KGUuX21pbng8dGhpcy5fbWlueCYmKHRoaXMuX21pbng9ZS5fbWlueCksZS5fbWF4eD50aGlzLl9tYXh4JiYodGhpcy5fbWF4eD1lLl9tYXh4KSxlLl9taW55PHRoaXMuX21pbnkmJih0aGlzLl9taW55PWUuX21pbnkpLGUuX21heHk+dGhpcy5fbWF4eSYmKHRoaXMuX21heHk9ZS5fbWF4eSkpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dGhpcy5pc051bGwoKT8odGhpcy5fbWlueD1uLHRoaXMuX21heHg9bix0aGlzLl9taW55PWksdGhpcy5fbWF4eT1pKToobjx0aGlzLl9taW54JiYodGhpcy5fbWlueD1uKSxuPnRoaXMuX21heHgmJih0aGlzLl9tYXh4PW4pLGk8dGhpcy5fbWlueSYmKHRoaXMuX21pbnk9aSksaT50aGlzLl9tYXh5JiYodGhpcy5fbWF4eT1pKSl9fSxqLnByb3RvdHlwZS5taW5FeHRlbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTnVsbCgpKXJldHVybiAwO3ZhciB0PXRoaXMuZ2V0V2lkdGgoKSxlPXRoaXMuZ2V0SGVpZ2h0KCk7cmV0dXJuIHQ8ZT90OmV9LGoucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOdWxsKCk/MDp0aGlzLl9tYXh4LXRoaXMuX21pbnh9LGoucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiB0aGlzLmlzTnVsbCgpP2UuaXNOdWxsKCk/MDotMTplLmlzTnVsbCgpPzE6dGhpcy5fbWlueDxlLl9taW54Py0xOnRoaXMuX21pbng+ZS5fbWlueD8xOnRoaXMuX21pbnk8ZS5fbWlueT8tMTp0aGlzLl9taW55PmUuX21pbnk/MTp0aGlzLl9tYXh4PGUuX21heHg/LTE6dGhpcy5fbWF4eD5lLl9tYXh4PzE6dGhpcy5fbWF4eTxlLl9tYXh5Py0xOnRoaXMuX21heHk+ZS5fbWF4eT8xOjB9LGoucHJvdG90eXBlLnRyYW5zbGF0ZT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaXNOdWxsKCkpcmV0dXJuIG51bGw7dGhpcy5pbml0KHRoaXMuZ2V0TWluWCgpK3QsdGhpcy5nZXRNYXhYKCkrdCx0aGlzLmdldE1pblkoKStlLHRoaXMuZ2V0TWF4WSgpK2UpfSxqLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiRW52W1wiK3RoaXMuX21pbngrXCIgOiBcIit0aGlzLl9tYXh4K1wiLCBcIit0aGlzLl9taW55K1wiIDogXCIrdGhpcy5fbWF4eStcIl1cIn0sai5wcm90b3R5cGUuc2V0VG9OdWxsPWZ1bmN0aW9uKCl7dGhpcy5fbWlueD0wLHRoaXMuX21heHg9LTEsdGhpcy5fbWlueT0wLHRoaXMuX21heHk9LTF9LGoucHJvdG90eXBlLmdldEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTnVsbCgpPzA6dGhpcy5fbWF4eS10aGlzLl9taW55fSxqLnByb3RvdHlwZS5tYXhFeHRlbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTnVsbCgpKXJldHVybiAwO3ZhciB0PXRoaXMuZ2V0V2lkdGgoKSxlPXRoaXMuZ2V0SGVpZ2h0KCk7cmV0dXJuIHQ+ZT90OmV9LGoucHJvdG90eXBlLmV4cGFuZEJ5PWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmV4cGFuZEJ5KHQsdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO2lmKHRoaXMuaXNOdWxsKCkpcmV0dXJuIG51bGw7dGhpcy5fbWlueC09ZSx0aGlzLl9tYXh4Kz1lLHRoaXMuX21pbnktPW4sdGhpcy5fbWF4eSs9biwodGhpcy5fbWlueD50aGlzLl9tYXh4fHx0aGlzLl9taW55PnRoaXMuX21heHkpJiZ0aGlzLnNldFRvTnVsbCgpfX0sai5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY292ZXJzKHQpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNvdmVycyhlKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmNvdmVycyhuLGkpfX0sai5wcm90b3R5cGUuY2VudHJlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOdWxsKCk/bnVsbDpuZXcgQygodGhpcy5nZXRNaW5YKCkrdGhpcy5nZXRNYXhYKCkpLzIsKHRoaXMuZ2V0TWluWSgpK3RoaXMuZ2V0TWF4WSgpKS8yKX0sai5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMuc2V0VG9OdWxsKCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbml0KHQueCx0LngsdC55LHQueSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGope3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLl9taW54PWUuX21pbngsdGhpcy5fbWF4eD1lLl9tYXh4LHRoaXMuX21pbnk9ZS5fbWlueSx0aGlzLl9tYXh5PWUuX21heHl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTt0aGlzLmluaXQobi54LGkueCxuLnksaS55KX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sYT1hcmd1bWVudHNbM107cjxvPyh0aGlzLl9taW54PXIsdGhpcy5fbWF4eD1vKToodGhpcy5fbWlueD1vLHRoaXMuX21heHg9ciksczxhPyh0aGlzLl9taW55PXMsdGhpcy5fbWF4eT1hKToodGhpcy5fbWlueT1hLHRoaXMuX21heHk9cyl9fSxqLnByb3RvdHlwZS5nZXRNYXhZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heHl9LGoucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuaW50ZXJzZWN0cyh0KSlyZXR1cm4gMDt2YXIgZT0wO3RoaXMuX21heHg8dC5fbWlueD9lPXQuX21pbngtdGhpcy5fbWF4eDp0aGlzLl9taW54PnQuX21heHgmJihlPXRoaXMuX21pbngtdC5fbWF4eCk7dmFyIG49MDtyZXR1cm4gdGhpcy5fbWF4eTx0Ll9taW55P249dC5fbWlueS10aGlzLl9tYXh5OnRoaXMuX21pbnk+dC5fbWF4eSYmKG49dGhpcy5fbWlueS10Ll9tYXh5KSwwPT09ZT9uOjA9PT1uP2U6TWF0aC5zcXJ0KGUqZStuKm4pfSxqLnByb3RvdHlwZS5oYXNoQ29kZT1mdW5jdGlvbigpe3ZhciB0PTE3O3JldHVybiB0PTM3KnQrQy5oYXNoQ29kZSh0aGlzLl9taW54KSx0PTM3KnQrQy5oYXNoQ29kZSh0aGlzLl9tYXh4KSx0PTM3KnQrQy5oYXNoQ29kZSh0aGlzLl9taW55KSx0PTM3KnQrQy5oYXNoQ29kZSh0aGlzLl9tYXh5KX0sai5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bRSxlXX0sai5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gan0sai5pbnRlcnNlY3RzPWZ1bmN0aW9uKCl7aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gbi54Pj0odC54PGUueD90Lng6ZS54KSYmbi54PD0odC54PmUueD90Lng6ZS54KSYmbi55Pj0odC55PGUueT90Lnk6ZS55KSYmbi55PD0odC55PmUueT90Lnk6ZS55KX1pZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdLHM9YXJndW1lbnRzWzNdLGE9TWF0aC5taW4oby54LHMueCksdT1NYXRoLm1heChvLngscy54KSxsPU1hdGgubWluKGkueCxyLngpLGM9TWF0aC5tYXgoaS54LHIueCk7cmV0dXJuIShsPnUpJiYoIShjPGEpJiYoYT1NYXRoLm1pbihvLnkscy55KSx1PU1hdGgubWF4KG8ueSxzLnkpLGw9TWF0aC5taW4oaS55LHIueSksYz1NYXRoLm1heChpLnksci55KSwhKGw+dSkmJiEoYzxhKSkpfX0sSC5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybiAweDUxODQ1Y2Q1NTIxODk4MDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGosSCk7dmFyIFc9e3R5cGVTdHI6L15cXHMqKFxcdyspXFxzKlxcKFxccyooLiopXFxzKlxcKVxccyokLyxlbXB0eVR5cGVTdHI6L15cXHMqKFxcdyspXFxzKkVNUFRZXFxzKiQvLHNwYWNlczovXFxzKy8scGFyZW5Db21tYTovXFwpXFxzKixcXHMqXFwoLyxkb3VibGVQYXJlbkNvbW1hOi9cXClcXHMqXFwpXFxzKixcXHMqXFwoXFxzKlxcKC8sdHJpbVBhcmVuczovXlxccypcXCg/KC4qPylcXCk/XFxzKiQvfSxLPWZ1bmN0aW9uKHQpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PXR8fG5ldyBfZX07Sy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXt2YXIgZSxuLGk7dD10LnJlcGxhY2UoL1tcXG5cXHJdL2csXCIgXCIpO3ZhciByPVcudHlwZVN0ci5leGVjKHQpO2lmKC0xIT09dC5zZWFyY2goXCJFTVBUWVwiKSYmKChyPVcuZW1wdHlUeXBlU3RyLmV4ZWModCkpWzJdPXZvaWQgMCksciYmKG49clsxXS50b0xvd2VyQ2FzZSgpLGk9clsyXSxRW25dJiYoZT1RW25dLmFwcGx5KHRoaXMsW2ldKSkpLHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IHBhcnNlIFdLVCBcIit0KTtyZXR1cm4gZX0sSy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXh0cmFjdEdlb21ldHJ5KHQpfSxLLnByb3RvdHlwZS5leHRyYWN0R2VvbWV0cnk9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRHZW9tZXRyeVR5cGUoKS50b0xvd2VyQ2FzZSgpO2lmKCFKW2VdKXJldHVybiBudWxsO3ZhciBuPWUudG9VcHBlckNhc2UoKTtyZXR1cm4gdC5pc0VtcHR5KCk/bitcIiBFTVBUWVwiOm4rXCIoXCIrSltlXS5hcHBseSh0aGlzLFt0XSkrXCIpXCJ9O3ZhciBKPXtjb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0LngrXCIgXCIrdC55fSxwb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gSi5jb29yZGluYXRlLmNhbGwodGhpcyx0Ll9jb29yZGluYXRlcy5fY29vcmRpbmF0ZXNbMF0pfSxtdWx0aXBvaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10Ll9nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaChcIihcIitKLnBvaW50LmFwcGx5KHRoaXMsW3QuX2dlb21ldHJpZXNbbl1dKStcIilcIik7cmV0dXJuIGUuam9pbihcIixcIil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxpPXQuX3BvaW50cy5fY29vcmRpbmF0ZXMubGVuZ3RoO248aTsrK24pZS5wdXNoKEouY29vcmRpbmF0ZS5hcHBseSh0aGlzLFt0Ll9wb2ludHMuX2Nvb3JkaW5hdGVzW25dXSkpO3JldHVybiBlLmpvaW4oXCIsXCIpfSxsaW5lYXJyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10Ll9wb2ludHMuX2Nvb3JkaW5hdGVzLmxlbmd0aDtuPGk7KytuKWUucHVzaChKLmNvb3JkaW5hdGUuYXBwbHkodGhpcyxbdC5fcG9pbnRzLl9jb29yZGluYXRlc1tuXV0pKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10Ll9nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaChcIihcIitKLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbdC5fZ2VvbWV0cmllc1tuXV0pK1wiKVwiKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0scG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT1bXTtlLnB1c2goXCIoXCIrSi5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW3QuX3NoZWxsXSkrXCIpXCIpO2Zvcih2YXIgbj0wLGk9dC5faG9sZXMubGVuZ3RoO248aTsrK24pZS5wdXNoKFwiKFwiK0oubGluZXN0cmluZy5hcHBseSh0aGlzLFt0Ll9ob2xlc1tuXV0pK1wiKVwiKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10Ll9nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaChcIihcIitKLnBvbHlnb24uYXBwbHkodGhpcyxbdC5fZ2VvbWV0cmllc1tuXV0pK1wiKVwiKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0sZ2VvbWV0cnljb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10Ll9nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaCh0aGlzLmV4dHJhY3RHZW9tZXRyeSh0Ll9nZW9tZXRyaWVzW25dKSk7cmV0dXJuIGUuam9pbihcIixcIil9fSxRPXtwb2ludDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludCgpO3ZhciBlPXQudHJpbSgpLnNwbGl0KFcuc3BhY2VzKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9pbnQobmV3IEMoTnVtYmVyLnBhcnNlRmxvYXQoZVswXSksTnVtYmVyLnBhcnNlRmxvYXQoZVsxXSkpKX0sbXVsdGlwb2ludDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KCk7Zm9yKHZhciBlLG49dC50cmltKCkuc3BsaXQoXCIsXCIpLGk9W10scj0wLG89bi5sZW5ndGg7cjxvOysrcillPW5bcl0ucmVwbGFjZShXLnRyaW1QYXJlbnMsXCIkMVwiKSxpLnB1c2goUS5wb2ludC5hcHBseSh0aGlzLFtlXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KGkpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcoKTtmb3IodmFyIGUsbj10LnRyaW0oKS5zcGxpdChcIixcIiksaT1bXSxyPTAsbz1uLmxlbmd0aDtyPG87KytyKWU9bltyXS50cmltKCkuc3BsaXQoVy5zcGFjZXMpLGkucHVzaChuZXcgQyhOdW1iZXIucGFyc2VGbG9hdChlWzBdKSxOdW1iZXIucGFyc2VGbG9hdChlWzFdKSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKGkpfSxsaW5lYXJyaW5nOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoKTtmb3IodmFyIGUsbj10LnRyaW0oKS5zcGxpdChcIixcIiksaT1bXSxyPTAsbz1uLmxlbmd0aDtyPG87KytyKWU9bltyXS50cmltKCkuc3BsaXQoVy5zcGFjZXMpLGkucHVzaChuZXcgQyhOdW1iZXIucGFyc2VGbG9hdChlWzBdKSxOdW1iZXIucGFyc2VGbG9hdChlWzFdKSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKGkpfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKCk7Zm9yKHZhciBlLG49dC50cmltKCkuc3BsaXQoVy5wYXJlbkNvbW1hKSxpPVtdLHI9MCxvPW4ubGVuZ3RoO3I8bzsrK3IpZT1uW3JdLnJlcGxhY2UoVy50cmltUGFyZW5zLFwiJDFcIiksaS5wdXNoKFEubGluZXN0cmluZy5hcHBseSh0aGlzLFtlXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoaSl9LHBvbHlnb246ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9seWdvbigpO2Zvcih2YXIgZSxuLGkscixvPXQudHJpbSgpLnNwbGl0KFcucGFyZW5Db21tYSkscz1bXSxhPTAsdT1vLmxlbmd0aDthPHU7KythKWU9b1thXS5yZXBsYWNlKFcudHJpbVBhcmVucyxcIiQxXCIpLG49US5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2VdKSxpPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcobi5fcG9pbnRzKSwwPT09YT9yPWk6cy5wdXNoKGkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2x5Z29uKHIscyl9LG11bHRpcG9seWdvbjpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvbHlnb24oKTtmb3IodmFyIGUsbj10LnRyaW0oKS5zcGxpdChXLmRvdWJsZVBhcmVuQ29tbWEpLGk9W10scj0wLG89bi5sZW5ndGg7cjxvOysrcillPW5bcl0ucmVwbGFjZShXLnRyaW1QYXJlbnMsXCIkMVwiKSxpLnB1c2goUS5wb2x5Z29uLmFwcGx5KHRoaXMsW2VdKSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9seWdvbihpKX0sZ2VvbWV0cnljb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbigpO2Zvcih2YXIgZT0odD10LnJlcGxhY2UoLyxcXHMqKFtBLVphLXpdKS9nLFwifCQxXCIpKS50cmltKCkuc3BsaXQoXCJ8XCIpLG49W10saT0wLHI9ZS5sZW5ndGg7aTxyOysraSluLnB1c2godGhpcy5yZWFkKGVbaV0pKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKG4pfX0sWj1mdW5jdGlvbih0KXt0aGlzLnBhcnNlcj1uZXcgSyh0KX07Wi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyc2VyLndyaXRlKHQpfSxaLnRvTGluZVN0cmluZz1mdW5jdGlvbih0LGUpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtyZXR1cm5cIkxJTkVTVFJJTkcgKCBcIit0LngrXCIgXCIrdC55K1wiLCBcIitlLngrXCIgXCIrZS55K1wiIClcIn07dmFyICQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlKSx0aGlzLm5hbWU9XCJSdW50aW1lRXhjZXB0aW9uXCIsdGhpcy5tZXNzYWdlPWUsdGhpcy5zdGFjaz0obmV3IHQpLnN0YWNrfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlfShFcnJvciksdHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2lmKHQuY2FsbCh0aGlzKSwwPT09YXJndW1lbnRzLmxlbmd0aCl0LmNhbGwodGhpcyk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdO3QuY2FsbCh0aGlzLGUpfX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX0oJCksZXQ9ZnVuY3Rpb24oKXt9O2V0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxldC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZXR9LGV0LnNob3VsZE5ldmVyUmVhY2hIZXJlPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpZXQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUobnVsbCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3Rocm93IG5ldyB0dChcIlNob3VsZCBuZXZlciByZWFjaCBoZXJlXCIrKG51bGwhPT10P1wiOiBcIit0OlwiXCIpKX19LGV0LmlzVHJ1ZT1mdW5jdGlvbigpe3ZhciB0LGU7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpdD1hcmd1bWVudHNbMF0sZXQuaXNUcnVlKHQsbnVsbCk7ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLCF0KSl0aHJvdyBudWxsPT09ZT9uZXcgdHQ6bmV3IHR0KGUpfSxldC5lcXVhbHM9ZnVuY3Rpb24oKXt2YXIgdCxlLG47aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sZXQuZXF1YWxzKHQsZSxudWxsKTtlbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoJiYodD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0sIWUuZXF1YWxzKHQpKSl0aHJvdyBuZXcgdHQoXCJFeHBlY3RlZCBcIit0K1wiIGJ1dCBlbmNvdW50ZXJlZCBcIitlKyhudWxsIT09bj9cIjogXCIrbjpcIlwiKSl9O3ZhciBudD1mdW5jdGlvbigpe3RoaXMuX3Jlc3VsdD1udWxsLHRoaXMuX2lucHV0TGluZXM9QXJyYXkoMikuZmlsbCgpLm1hcChmdW5jdGlvbigpe3JldHVybiBBcnJheSgyKX0pLHRoaXMuX2ludFB0PW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHRoaXMuX2ludExpbmVJbmRleD1udWxsLHRoaXMuX2lzUHJvcGVyPW51bGwsdGhpcy5fcGE9bnVsbCx0aGlzLl9wYj1udWxsLHRoaXMuX3ByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5faW50UHRbMF09bmV3IEMsdGhpcy5faW50UHRbMV09bmV3IEMsdGhpcy5fcGE9dGhpcy5faW50UHRbMF0sdGhpcy5fcGI9dGhpcy5faW50UHRbMV0sdGhpcy5fcmVzdWx0PTB9LGl0PXtET05UX0lOVEVSU0VDVDp7Y29uZmlndXJhYmxlOiEwfSxET19JTlRFUlNFQ1Q6e2NvbmZpZ3VyYWJsZTohMH0sQ09MTElORUFSOntjb25maWd1cmFibGU6ITB9LE5PX0lOVEVSU0VDVElPTjp7Y29uZmlndXJhYmxlOiEwfSxQT0lOVF9JTlRFUlNFQ1RJT046e2NvbmZpZ3VyYWJsZTohMH0sQ09MTElORUFSX0lOVEVSU0VDVElPTjp7Y29uZmlndXJhYmxlOiEwfX07bnQucHJvdG90eXBlLmdldEluZGV4QWxvbmdTZWdtZW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY29tcHV0ZUludExpbmVJbmRleCgpLHRoaXMuX2ludExpbmVJbmRleFt0XVtlXX0sbnQucHJvdG90eXBlLmdldFRvcG9sb2d5U3VtbWFyeT1mdW5jdGlvbigpe3ZhciB0PW5ldyBEO3JldHVybiB0aGlzLmlzRW5kUG9pbnQoKSYmdC5hcHBlbmQoXCIgZW5kcG9pbnRcIiksdGhpcy5faXNQcm9wZXImJnQuYXBwZW5kKFwiIHByb3BlclwiKSx0aGlzLmlzQ29sbGluZWFyKCkmJnQuYXBwZW5kKFwiIGNvbGxpbmVhclwiKSx0LnRvU3RyaW5nKCl9LG50LnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMuX2lucHV0TGluZXNbMF1bMF09dCx0aGlzLl9pbnB1dExpbmVzWzBdWzFdPWUsdGhpcy5faW5wdXRMaW5lc1sxXVswXT1uLHRoaXMuX2lucHV0TGluZXNbMV1bMV09aSx0aGlzLl9yZXN1bHQ9dGhpcy5jb21wdXRlSW50ZXJzZWN0KHQsZSxuLGkpfSxudC5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0aW9uTnVtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc3VsdH0sbnQucHJvdG90eXBlLmNvbXB1dGVJbnRMaW5lSW5kZXg9ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCludWxsPT09dGhpcy5faW50TGluZUluZGV4JiYodGhpcy5faW50TGluZUluZGV4PUFycmF5KDIpLmZpbGwoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkoMil9KSx0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoMCksdGhpcy5jb21wdXRlSW50TGluZUluZGV4KDEpKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5nZXRFZGdlRGlzdGFuY2UodCwwKT50aGlzLmdldEVkZ2VEaXN0YW5jZSh0LDEpPyh0aGlzLl9pbnRMaW5lSW5kZXhbdF1bMF09MCx0aGlzLl9pbnRMaW5lSW5kZXhbdF1bMV09MSk6KHRoaXMuX2ludExpbmVJbmRleFt0XVswXT0xLHRoaXMuX2ludExpbmVJbmRleFt0XVsxXT0wKX19LG50LnByb3RvdHlwZS5pc1Byb3Blcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyc2VjdGlvbigpJiZ0aGlzLl9pc1Byb3Blcn0sbnQucHJvdG90eXBlLnNldFByZWNpc2lvbk1vZGVsPWZ1bmN0aW9uKHQpe3RoaXMuX3ByZWNpc2lvbk1vZGVsPXR9LG50LnByb3RvdHlwZS5pc0ludGVyaW9ySW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuISF0aGlzLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oMCl8fCEhdGhpcy5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKDEpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHRoaXMuX3Jlc3VsdDtlKyspaWYoIXRoaXMuX2ludFB0W2VdLmVxdWFsczJEKHRoaXMuX2lucHV0TGluZXNbdF1bMF0pJiYhdGhpcy5faW50UHRbZV0uZXF1YWxzMkQodGhpcy5faW5wdXRMaW5lc1t0XVsxXSkpcmV0dXJuITA7cmV0dXJuITF9fSxudC5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnRQdFt0XX0sbnQucHJvdG90eXBlLmlzRW5kUG9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcnNlY3Rpb24oKSYmIXRoaXMuX2lzUHJvcGVyfSxudC5wcm90b3R5cGUuaGFzSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc3VsdCE9PW50Lk5PX0lOVEVSU0VDVElPTn0sbnQucHJvdG90eXBlLmdldEVkZ2VEaXN0YW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBudC5jb21wdXRlRWRnZURpc3RhbmNlKHRoaXMuX2ludFB0W2VdLHRoaXMuX2lucHV0TGluZXNbdF1bMF0sdGhpcy5faW5wdXRMaW5lc1t0XVsxXSl9LG50LnByb3RvdHlwZS5pc0NvbGxpbmVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXN1bHQ9PT1udC5DT0xMSU5FQVJfSU5URVJTRUNUSU9OfSxudC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gWi50b0xpbmVTdHJpbmcodGhpcy5faW5wdXRMaW5lc1swXVswXSx0aGlzLl9pbnB1dExpbmVzWzBdWzFdKStcIiAtIFwiK1oudG9MaW5lU3RyaW5nKHRoaXMuX2lucHV0TGluZXNbMV1bMF0sdGhpcy5faW5wdXRMaW5lc1sxXVsxXSkrdGhpcy5nZXRUb3BvbG9neVN1bW1hcnkoKX0sbnQucHJvdG90eXBlLmdldEVuZHBvaW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2lucHV0TGluZXNbdF1bZV19LG50LnByb3RvdHlwZS5pc0ludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuX3Jlc3VsdDtlKyspaWYodGhpcy5faW50UHRbZV0uZXF1YWxzMkQodCkpcmV0dXJuITA7cmV0dXJuITF9LG50LnByb3RvdHlwZS5nZXRJbnRlcnNlY3Rpb25BbG9uZ1NlZ21lbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb21wdXRlSW50TGluZUluZGV4KCksdGhpcy5faW50UHRbdGhpcy5faW50TGluZUluZGV4W3RdW2VdXX0sbnQucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LG50LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBudH0sbnQuY29tcHV0ZUVkZ2VEaXN0YW5jZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9TWF0aC5hYnMobi54LWUueCkscj1NYXRoLmFicyhuLnktZS55KSxvPS0xO2lmKHQuZXF1YWxzKGUpKW89MDtlbHNlIGlmKHQuZXF1YWxzKG4pKW89aT5yP2k6cjtlbHNle3ZhciBzPU1hdGguYWJzKHQueC1lLngpLGE9TWF0aC5hYnModC55LWUueSk7MCE9PShvPWk+cj9zOmEpfHx0LmVxdWFscyhlKXx8KG89TWF0aC5tYXgocyxhKSl9cmV0dXJuIGV0LmlzVHJ1ZSghKDA9PT1vJiYhdC5lcXVhbHMoZSkpLFwiQmFkIGRpc3RhbmNlIGNhbGN1bGF0aW9uXCIpLG99LG50Lm5vblJvYnVzdENvbXB1dGVFZGdlRGlzdGFuY2U9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQueC1lLngscj10LnktZS55LG89TWF0aC5zcXJ0KGkqaStyKnIpO3JldHVybiBldC5pc1RydWUoISgwPT09byYmIXQuZXF1YWxzKGUpKSxcIkludmFsaWQgZGlzdGFuY2UgY2FsY3VsYXRpb25cIiksb30saXQuRE9OVF9JTlRFUlNFQ1QuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGl0LkRPX0lOVEVSU0VDVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0saXQuQ09MTElORUFSLmdldD1mdW5jdGlvbigpe3JldHVybiAyfSxpdC5OT19JTlRFUlNFQ1RJT04uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGl0LlBPSU5UX0lOVEVSU0VDVElPTi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0saXQuQ09MTElORUFSX0lOVEVSU0VDVElPTi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobnQsaXQpO3ZhciBydD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmlzSW5TZWdtZW50RW52ZWxvcGVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBqKHRoaXMuX2lucHV0TGluZXNbMF1bMF0sdGhpcy5faW5wdXRMaW5lc1swXVsxXSksbj1uZXcgaih0aGlzLl9pbnB1dExpbmVzWzFdWzBdLHRoaXMuX2lucHV0TGluZXNbMV1bMV0pO3JldHVybiBlLmNvbnRhaW5zKHQpJiZuLmNvbnRhaW5zKHQpfSxlLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7aWYoMyE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHQucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXTtpZih0aGlzLl9pc1Byb3Blcj0hMSxqLmludGVyc2VjdHMobixpLGUpJiYwPT09YXQub3JpZW50YXRpb25JbmRleChuLGksZSkmJjA9PT1hdC5vcmllbnRhdGlvbkluZGV4KGksbixlKSlyZXR1cm4gdGhpcy5faXNQcm9wZXI9ITAsKGUuZXF1YWxzKG4pfHxlLmVxdWFscyhpKSkmJih0aGlzLl9pc1Byb3Blcj0hMSksdGhpcy5fcmVzdWx0PXQuUE9JTlRfSU5URVJTRUNUSU9OLG51bGw7dGhpcy5fcmVzdWx0PXQuTk9fSU5URVJTRUNUSU9OfSxlLnByb3RvdHlwZS5ub3JtYWxpemVUb01pbmltdW09ZnVuY3Rpb24odCxlLG4saSxyKXtyLng9dGhpcy5zbWFsbGVzdEluQWJzVmFsdWUodC54LGUueCxuLngsaS54KSxyLnk9dGhpcy5zbWFsbGVzdEluQWJzVmFsdWUodC55LGUueSxuLnksaS55KSx0LngtPXIueCx0LnktPXIueSxlLngtPXIueCxlLnktPXIueSxuLngtPXIueCxuLnktPXIueSxpLngtPXIueCxpLnktPXIueX0sZS5wcm90b3R5cGUuc2FmZUhDb29yZGluYXRlSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsbixpLHIpe3ZhciBvPW51bGw7dHJ5e289ay5pbnRlcnNlY3Rpb24odCxuLGkscil9Y2F0Y2gocyl7aWYoIShzIGluc3RhbmNlb2YgWCkpdGhyb3cgcztvPWUubmVhcmVzdEVuZHBvaW50KHQsbixpLHIpfXJldHVybiBvfSxlLnByb3RvdHlwZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxuLGkscil7dmFyIG89dGhpcy5pbnRlcnNlY3Rpb25XaXRoTm9ybWFsaXphdGlvbih0LG4saSxyKTtyZXR1cm4gdGhpcy5pc0luU2VnbWVudEVudmVsb3BlcyhvKXx8KG89bmV3IEMoZS5uZWFyZXN0RW5kcG9pbnQodCxuLGkscikpKSxudWxsIT09dGhpcy5fcHJlY2lzaW9uTW9kZWwmJnRoaXMuX3ByZWNpc2lvbk1vZGVsLm1ha2VQcmVjaXNlKG8pLG99LGUucHJvdG90eXBlLnNtYWxsZXN0SW5BYnNWYWx1ZT1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10LG89TWF0aC5hYnMocik7cmV0dXJuIE1hdGguYWJzKGUpPG8mJihyPWUsbz1NYXRoLmFicyhlKSksTWF0aC5hYnMobik8byYmKHI9bixvPU1hdGguYWJzKG4pKSxNYXRoLmFicyhpKTxvJiYocj1pKSxyfSxlLnByb3RvdHlwZS5jaGVja0REPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89cS5pbnRlcnNlY3Rpb24odCxlLG4saSkscz10aGlzLmlzSW5TZWdtZW50RW52ZWxvcGVzKG8pO1kub3V0LnByaW50bG4oXCJERCBpbiBlbnYgPSBcIitzK1wiICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gXCIrbyksci5kaXN0YW5jZShvKT4xZS00JiZZLm91dC5wcmludGxuKFwiRGlzdGFuY2UgPSBcIityLmRpc3RhbmNlKG8pKX0sZS5wcm90b3R5cGUuaW50ZXJzZWN0aW9uV2l0aE5vcm1hbGl6YXRpb249ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bmV3IEModCksbz1uZXcgQyhlKSxzPW5ldyBDKG4pLGE9bmV3IEMoaSksdT1uZXcgQzt0aGlzLm5vcm1hbGl6ZVRvRW52Q2VudHJlKHIsbyxzLGEsdSk7dmFyIGw9dGhpcy5zYWZlSENvb3JkaW5hdGVJbnRlcnNlY3Rpb24ocixvLHMsYSk7cmV0dXJuIGwueCs9dS54LGwueSs9dS55LGx9LGUucHJvdG90eXBlLmNvbXB1dGVDb2xsaW5lYXJJbnRlcnNlY3Rpb249ZnVuY3Rpb24oZSxuLGkscil7dmFyIG89ai5pbnRlcnNlY3RzKGUsbixpKSxzPWouaW50ZXJzZWN0cyhlLG4sciksYT1qLmludGVyc2VjdHMoaSxyLGUpLHU9ai5pbnRlcnNlY3RzKGkscixuKTtyZXR1cm4gbyYmcz8odGhpcy5faW50UHRbMF09aSx0aGlzLl9pbnRQdFsxXT1yLHQuQ09MTElORUFSX0lOVEVSU0VDVElPTik6YSYmdT8odGhpcy5faW50UHRbMF09ZSx0aGlzLl9pbnRQdFsxXT1uLHQuQ09MTElORUFSX0lOVEVSU0VDVElPTik6byYmYT8odGhpcy5faW50UHRbMF09aSx0aGlzLl9pbnRQdFsxXT1lLCFpLmVxdWFscyhlKXx8c3x8dT90LkNPTExJTkVBUl9JTlRFUlNFQ1RJT046dC5QT0lOVF9JTlRFUlNFQ1RJT04pOm8mJnU/KHRoaXMuX2ludFB0WzBdPWksdGhpcy5faW50UHRbMV09biwhaS5lcXVhbHMobil8fHN8fGE/dC5DT0xMSU5FQVJfSU5URVJTRUNUSU9OOnQuUE9JTlRfSU5URVJTRUNUSU9OKTpzJiZhPyh0aGlzLl9pbnRQdFswXT1yLHRoaXMuX2ludFB0WzFdPWUsIXIuZXF1YWxzKGUpfHxvfHx1P3QuQ09MTElORUFSX0lOVEVSU0VDVElPTjp0LlBPSU5UX0lOVEVSU0VDVElPTik6cyYmdT8odGhpcy5faW50UHRbMF09cix0aGlzLl9pbnRQdFsxXT1uLCFyLmVxdWFscyhuKXx8b3x8YT90LkNPTExJTkVBUl9JTlRFUlNFQ1RJT046dC5QT0lOVF9JTlRFUlNFQ1RJT04pOnQuTk9fSU5URVJTRUNUSU9OfSxlLnByb3RvdHlwZS5ub3JtYWxpemVUb0VudkNlbnRyZT1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPXQueDxlLng/dC54OmUueCxzPXQueTxlLnk/dC55OmUueSxhPXQueD5lLng/dC54OmUueCx1PXQueT5lLnk/dC55OmUueSxsPW4ueDxpLng/bi54OmkueCxjPW4ueTxpLnk/bi55OmkueSxwPW4ueD5pLng/bi54OmkueCxoPW4ueT5pLnk/bi55OmkueSxmPSgobz5sP286bCkrKGE8cD9hOnApKS8yLGc9KChzPmM/czpjKSsodTxoP3U6aCkpLzI7ci54PWYsci55PWcsdC54LT1yLngsdC55LT1yLnksZS54LT1yLngsZS55LT1yLnksbi54LT1yLngsbi55LT1yLnksaS54LT1yLngsaS55LT1yLnl9LGUucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Q9ZnVuY3Rpb24oZSxuLGkscil7aWYodGhpcy5faXNQcm9wZXI9ITEsIWouaW50ZXJzZWN0cyhlLG4saSxyKSlyZXR1cm4gdC5OT19JTlRFUlNFQ1RJT047dmFyIG89YXQub3JpZW50YXRpb25JbmRleChlLG4saSkscz1hdC5vcmllbnRhdGlvbkluZGV4KGUsbixyKTtpZihvPjAmJnM+MHx8bzwwJiZzPDApcmV0dXJuIHQuTk9fSU5URVJTRUNUSU9OO3ZhciBhPWF0Lm9yaWVudGF0aW9uSW5kZXgoaSxyLGUpLHU9YXQub3JpZW50YXRpb25JbmRleChpLHIsbik7aWYoYT4wJiZ1PjB8fGE8MCYmdTwwKXJldHVybiB0Lk5PX0lOVEVSU0VDVElPTjtyZXR1cm4gMD09PW8mJjA9PT1zJiYwPT09YSYmMD09PXU/dGhpcy5jb21wdXRlQ29sbGluZWFySW50ZXJzZWN0aW9uKGUsbixpLHIpOigwPT09b3x8MD09PXN8fDA9PT1hfHwwPT09dT8odGhpcy5faXNQcm9wZXI9ITEsZS5lcXVhbHMyRChpKXx8ZS5lcXVhbHMyRChyKT90aGlzLl9pbnRQdFswXT1lOm4uZXF1YWxzMkQoaSl8fG4uZXF1YWxzMkQocik/dGhpcy5faW50UHRbMF09bjowPT09bz90aGlzLl9pbnRQdFswXT1uZXcgQyhpKTowPT09cz90aGlzLl9pbnRQdFswXT1uZXcgQyhyKTowPT09YT90aGlzLl9pbnRQdFswXT1uZXcgQyhlKTowPT09dSYmKHRoaXMuX2ludFB0WzBdPW5ldyBDKG4pKSk6KHRoaXMuX2lzUHJvcGVyPSEwLHRoaXMuX2ludFB0WzBdPXRoaXMuaW50ZXJzZWN0aW9uKGUsbixpLHIpKSx0LlBPSU5UX0lOVEVSU0VDVElPTil9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGUubmVhcmVzdEVuZHBvaW50PWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQsbz1hdC5kaXN0YW5jZVBvaW50TGluZSh0LG4saSkscz1hdC5kaXN0YW5jZVBvaW50TGluZShlLG4saSk7cmV0dXJuIHM8byYmKG89cyxyPWUpLChzPWF0LmRpc3RhbmNlUG9pbnRMaW5lKG4sdCxlKSk8byYmKG89cyxyPW4pLChzPWF0LmRpc3RhbmNlUG9pbnRMaW5lKGksdCxlKSk8byYmKG89cyxyPWkpLHJ9LGV9KG50KSxvdD1mdW5jdGlvbigpe307b3QucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LG90LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBvdH0sb3Qub3JpZW50YXRpb25JbmRleD1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS54LXQueCxyPWUueS10Lnksbz1uLngtZS54LHM9bi55LWUueTtyZXR1cm4gb3Quc2lnbk9mRGV0MngyKGkscixvLHMpfSxvdC5zaWduT2ZEZXQyeDI9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bnVsbCxvPW51bGwscz1udWxsO2lmKHI9MSwwPT09dHx8MD09PWkpcmV0dXJuIDA9PT1lfHwwPT09bj8wOmU+MD9uPjA/LXI6cjpuPjA/cjotcjtpZigwPT09ZXx8MD09PW4pcmV0dXJuIGk+MD90PjA/cjotcjp0PjA/LXI6cjtpZihlPjA/aT4wP2U8PWl8fChyPS1yLG89dCx0PW4sbj1vLG89ZSxlPWksaT1vKTplPD0taT8ocj0tcixuPS1uLGk9LWkpOihvPXQsdD0tbixuPW8sbz1lLGU9LWksaT1vKTppPjA/LWU8PWk/KHI9LXIsdD0tdCxlPS1lKToobz0tdCx0PW4sbj1vLG89LWUsZT1pLGk9byk6ZT49aT8odD0tdCxlPS1lLG49LW4saT0taSk6KHI9LXIsbz0tdCx0PS1uLG49byxvPS1lLGU9LWksaT1vKSx0PjApe2lmKCEobj4wKSlyZXR1cm4gcjtpZighKHQ8PW4pKXJldHVybiByfWVsc2V7aWYobj4wKXJldHVybi1yO2lmKCEodD49bikpcmV0dXJuLXI7cj0tcix0PS10LG49LW59Zm9yKDs7KXtpZihzPU1hdGguZmxvb3Iobi90KSxuLT1zKnQsKGktPXMqZSk8MClyZXR1cm4tcjtpZihpPmUpcmV0dXJuIHI7aWYodD5uK24pe2lmKGU8aStpKXJldHVybiByfWVsc2V7aWYoZT5pK2kpcmV0dXJuLXI7bj10LW4saT1lLWkscj0tcn1pZigwPT09aSlyZXR1cm4gMD09PW4/MDotcjtpZigwPT09bilyZXR1cm4gcjtpZihzPU1hdGguZmxvb3IodC9uKSx0LT1zKm4sKGUtPXMqaSk8MClyZXR1cm4gcjtpZihlPmkpcmV0dXJuLXI7aWYobj50K3Qpe2lmKGk8ZStlKXJldHVybi1yfWVsc2V7aWYoaT5lK2UpcmV0dXJuIHI7dD1uLXQsZT1pLWUscj0tcn1pZigwPT09ZSlyZXR1cm4gMD09PXQ/MDpyO2lmKDA9PT10KXJldHVybi1yfX07dmFyIHN0PWZ1bmN0aW9uKCl7dGhpcy5fcD1udWxsLHRoaXMuX2Nyb3NzaW5nQ291bnQ9MCx0aGlzLl9pc1BvaW50T25TZWdtZW50PSExO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9wPXR9O3N0LnByb3RvdHlwZS5jb3VudFNlZ21lbnQ9ZnVuY3Rpb24odCxlKXtpZih0Lng8dGhpcy5fcC54JiZlLng8dGhpcy5fcC54KXJldHVybiBudWxsO2lmKHRoaXMuX3AueD09PWUueCYmdGhpcy5fcC55PT09ZS55KXJldHVybiB0aGlzLl9pc1BvaW50T25TZWdtZW50PSEwLG51bGw7aWYodC55PT09dGhpcy5fcC55JiZlLnk9PT10aGlzLl9wLnkpe3ZhciBuPXQueCxpPWUueDtyZXR1cm4gbj5pJiYobj1lLngsaT10LngpLHRoaXMuX3AueD49biYmdGhpcy5fcC54PD1pJiYodGhpcy5faXNQb2ludE9uU2VnbWVudD0hMCksbnVsbH1pZih0Lnk+dGhpcy5fcC55JiZlLnk8PXRoaXMuX3AueXx8ZS55PnRoaXMuX3AueSYmdC55PD10aGlzLl9wLnkpe3ZhciByPXQueC10aGlzLl9wLngsbz10LnktdGhpcy5fcC55LHM9ZS54LXRoaXMuX3AueCxhPWUueS10aGlzLl9wLnksdT1vdC5zaWduT2ZEZXQyeDIocixvLHMsYSk7aWYoMD09PXUpcmV0dXJuIHRoaXMuX2lzUG9pbnRPblNlZ21lbnQ9ITAsbnVsbDthPG8mJih1PS11KSx1PjAmJnRoaXMuX2Nyb3NzaW5nQ291bnQrK319LHN0LnByb3RvdHlwZS5pc1BvaW50SW5Qb2x5Z29uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TG9jYXRpb24oKSE9PXcuRVhURVJJT1J9LHN0LnByb3RvdHlwZS5nZXRMb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1BvaW50T25TZWdtZW50P3cuQk9VTkRBUlk6dGhpcy5fY3Jvc3NpbmdDb3VudCUyPT0xP3cuSU5URVJJT1I6dy5FWFRFUklPUn0sc3QucHJvdG90eXBlLmlzT25TZWdtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzUG9pbnRPblNlZ21lbnR9LHN0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxzdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gc3R9LHN0LmxvY2F0ZVBvaW50SW5SaW5nPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDJiZUKGFyZ3VtZW50c1sxXSxWKSl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPW5ldyBzdCh0KSxpPW5ldyBDLHI9bmV3IEMsbz0xO288ZS5zaXplKCk7bysrKWlmKGUuZ2V0Q29vcmRpbmF0ZShvLGkpLGUuZ2V0Q29vcmRpbmF0ZShvLTEsciksbi5jb3VudFNlZ21lbnQoaSxyKSxuLmlzT25TZWdtZW50KCkpcmV0dXJuIG4uZ2V0TG9jYXRpb24oKTtyZXR1cm4gbi5nZXRMb2NhdGlvbigpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciBzPWFyZ3VtZW50c1swXSxhPWFyZ3VtZW50c1sxXSx1PW5ldyBzdChzKSxsPTE7bDxhLmxlbmd0aDtsKyspe3ZhciBjPWFbbF0scD1hW2wtMV07aWYodS5jb3VudFNlZ21lbnQoYyxwKSx1LmlzT25TZWdtZW50KCkpcmV0dXJuIHUuZ2V0TG9jYXRpb24oKX1yZXR1cm4gdS5nZXRMb2NhdGlvbigpfX07dmFyIGF0PWZ1bmN0aW9uKCl7fSx1dD17Q0xPQ0tXSVNFOntjb25maWd1cmFibGU6ITB9LFJJR0hUOntjb25maWd1cmFibGU6ITB9LENPVU5URVJDTE9DS1dJU0U6e2NvbmZpZ3VyYWJsZTohMH0sTEVGVDp7Y29uZmlndXJhYmxlOiEwfSxDT0xMSU5FQVI6e2NvbmZpZ3VyYWJsZTohMH0sU1RSQUlHSFQ6e2NvbmZpZ3VyYWJsZTohMH19O2F0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxhdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gYXR9LGF0Lm9yaWVudGF0aW9uSW5kZXg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBxLm9yaWVudGF0aW9uSW5kZXgodCxlLG4pfSxhdC5zaWduZWRBcmVhPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHQubGVuZ3RoPDMpcmV0dXJuIDA7Zm9yKHZhciBlPTAsbj10WzBdLngsaT0xO2k8dC5sZW5ndGgtMTtpKyspe3ZhciByPXRbaV0ueC1uLG89dFtpKzFdLnk7ZSs9cioodFtpLTFdLnktbyl9cmV0dXJuIGUvMn1pZihUKGFyZ3VtZW50c1swXSxWKSl7dmFyIHM9YXJndW1lbnRzWzBdLGE9cy5zaXplKCk7aWYoYTwzKXJldHVybiAwO3ZhciB1PW5ldyBDLGw9bmV3IEMsYz1uZXcgQztzLmdldENvb3JkaW5hdGUoMCxsKSxzLmdldENvb3JkaW5hdGUoMSxjKTt2YXIgcD1sLng7Yy54LT1wO2Zvcih2YXIgaD0wLGY9MTtmPGEtMTtmKyspdS55PWwueSxsLng9Yy54LGwueT1jLnkscy5nZXRDb29yZGluYXRlKGYrMSxjKSxjLngtPXAsaCs9bC54Kih1LnktYy55KTtyZXR1cm4gaC8yfX0sYXQuZGlzdGFuY2VMaW5lTGluZT1mdW5jdGlvbih0LGUsbixpKXtpZih0LmVxdWFscyhlKSlyZXR1cm4gYXQuZGlzdGFuY2VQb2ludExpbmUodCxuLGkpO2lmKG4uZXF1YWxzKGkpKXJldHVybiBhdC5kaXN0YW5jZVBvaW50TGluZShpLHQsZSk7dmFyIHI9ITE7aWYoai5pbnRlcnNlY3RzKHQsZSxuLGkpKXt2YXIgbz0oZS54LXQueCkqKGkueS1uLnkpLShlLnktdC55KSooaS54LW4ueCk7aWYoMD09PW8pcj0hMDtlbHNle3ZhciBzPSh0Lnktbi55KSooaS54LW4ueCktKHQueC1uLngpKihpLnktbi55KSxhPSgodC55LW4ueSkqKGUueC10LngpLSh0Lngtbi54KSooZS55LXQueSkpL28sdT1zL287KHU8MHx8dT4xfHxhPDB8fGE+MSkmJihyPSEwKX19ZWxzZSByPSEwO3JldHVybiByP1IubWluKGF0LmRpc3RhbmNlUG9pbnRMaW5lKHQsbixpKSxhdC5kaXN0YW5jZVBvaW50TGluZShlLG4saSksYXQuZGlzdGFuY2VQb2ludExpbmUobix0LGUpLGF0LmRpc3RhbmNlUG9pbnRMaW5lKGksdCxlKSk6MH0sYXQuaXNQb2ludEluUmluZz1mdW5jdGlvbih0LGUpe3JldHVybiBhdC5sb2NhdGVQb2ludEluUmluZyh0LGUpIT09dy5FWFRFUklPUn0sYXQuY29tcHV0ZUxlbmd0aD1mdW5jdGlvbih0KXt2YXIgZT10LnNpemUoKTtpZihlPD0xKXJldHVybiAwO3ZhciBuPTAsaT1uZXcgQzt0LmdldENvb3JkaW5hdGUoMCxpKTtmb3IodmFyIHI9aS54LG89aS55LHM9MTtzPGU7cysrKXt0LmdldENvb3JkaW5hdGUocyxpKTt2YXIgYT1pLngsdT1pLnksbD1hLXIsYz11LW87bis9TWF0aC5zcXJ0KGwqbCtjKmMpLHI9YSxvPXV9cmV0dXJuIG59LGF0LmlzQ0NXPWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLTE7aWYoZTwzKXRocm93IG5ldyBtKFwiUmluZyBoYXMgZmV3ZXIgdGhhbiA0IHBvaW50cywgc28gb3JpZW50YXRpb24gY2Fubm90IGJlIGRldGVybWluZWRcIik7Zm9yKHZhciBuPXRbMF0saT0wLHI9MTtyPD1lO3IrKyl7dmFyIG89dFtyXTtvLnk+bi55JiYobj1vLGk9cil9dmFyIHM9aTtkb3socy09MSk8MCYmKHM9ZSl9d2hpbGUodFtzXS5lcXVhbHMyRChuKSYmcyE9PWkpO3ZhciBhPWk7ZG97YT0oYSsxKSVlfXdoaWxlKHRbYV0uZXF1YWxzMkQobikmJmEhPT1pKTt2YXIgdT10W3NdLGw9dFthXTtpZih1LmVxdWFsczJEKG4pfHxsLmVxdWFsczJEKG4pfHx1LmVxdWFsczJEKGwpKXJldHVybiExO3ZhciBjPWF0LmNvbXB1dGVPcmllbnRhdGlvbih1LG4sbCkscD0hMTtyZXR1cm4gcD0wPT09Yz91Lng+bC54OmM+MCxwfSxhdC5sb2NhdGVQb2ludEluUmluZz1mdW5jdGlvbih0LGUpe3JldHVybiBzdC5sb2NhdGVQb2ludEluUmluZyh0LGUpfSxhdC5kaXN0YW5jZVBvaW50TGluZVBlcnBlbmRpY3VsYXI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPShuLngtZS54KSoobi54LWUueCkrKG4ueS1lLnkpKihuLnktZS55KSxyPSgoZS55LXQueSkqKG4ueC1lLngpLShlLngtdC54KSoobi55LWUueSkpL2k7cmV0dXJuIE1hdGguYWJzKHIpKk1hdGguc3FydChpKX0sYXQuY29tcHV0ZU9yaWVudGF0aW9uPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gYXQub3JpZW50YXRpb25JbmRleCh0LGUsbil9LGF0LmRpc3RhbmNlUG9pbnRMaW5lPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZigwPT09ZS5sZW5ndGgpdGhyb3cgbmV3IG0oXCJMaW5lIGFycmF5IG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgdmVydGV4XCIpO2Zvcih2YXIgbj10LmRpc3RhbmNlKGVbMF0pLGk9MDtpPGUubGVuZ3RoLTE7aSsrKXt2YXIgcj1hdC5kaXN0YW5jZVBvaW50TGluZSh0LGVbaV0sZVtpKzFdKTtyPG4mJihuPXIpfXJldHVybiBufWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbz1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl07aWYocy54PT09YS54JiZzLnk9PT1hLnkpcmV0dXJuIG8uZGlzdGFuY2Uocyk7dmFyIHU9KGEueC1zLngpKihhLngtcy54KSsoYS55LXMueSkqKGEueS1zLnkpLGw9KChvLngtcy54KSooYS54LXMueCkrKG8ueS1zLnkpKihhLnktcy55KSkvdTtpZihsPD0wKXJldHVybiBvLmRpc3RhbmNlKHMpO2lmKGw+PTEpcmV0dXJuIG8uZGlzdGFuY2UoYSk7dmFyIGM9KChzLnktby55KSooYS54LXMueCktKHMueC1vLngpKihhLnktcy55KSkvdTtyZXR1cm4gTWF0aC5hYnMoYykqTWF0aC5zcXJ0KHUpfX0sYXQuaXNPbkxpbmU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IHJ0LGk9MTtpPGUubGVuZ3RoO2krKyl7dmFyIHI9ZVtpLTFdLG89ZVtpXTtpZihuLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxyLG8pLG4uaGFzSW50ZXJzZWN0aW9uKCkpcmV0dXJuITB9cmV0dXJuITF9LHV0LkNMT0NLV0lTRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMX0sdXQuUklHSFQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGF0LkNMT0NLV0lTRX0sdXQuQ09VTlRFUkNMT0NLV0lTRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0sdXQuTEVGVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gYXQuQ09VTlRFUkNMT0NLV0lTRX0sdXQuQ09MTElORUFSLmdldD1mdW5jdGlvbigpe3JldHVybiAwfSx1dC5TVFJBSUdIVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gYXQuQ09MTElORUFSfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhdCx1dCk7dmFyIGx0PWZ1bmN0aW9uKCl7fTtsdC5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQpe30sbHQucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGx0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBsdH07dmFyIGN0PWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2VudmVsb3BlPW51bGwsdGhpcy5fZmFjdG9yeT1udWxsLHRoaXMuX1NSSUQ9bnVsbCx0aGlzLl91c2VyRGF0YT1udWxsLHRoaXMuX2ZhY3Rvcnk9dCx0aGlzLl9TUklEPXQuZ2V0U1JJRCgpfSxwdD17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfSxTT1JUSU5ERVhfUE9JTlQ6e2NvbmZpZ3VyYWJsZTohMH0sU09SVElOREVYX01VTFRJUE9JTlQ6e2NvbmZpZ3VyYWJsZTohMH0sU09SVElOREVYX0xJTkVTVFJJTkc6e2NvbmZpZ3VyYWJsZTohMH0sU09SVElOREVYX0xJTkVBUlJJTkc6e2NvbmZpZ3VyYWJsZTohMH0sU09SVElOREVYX01VTFRJTElORVNUUklORzp7Y29uZmlndXJhYmxlOiEwfSxTT1JUSU5ERVhfUE9MWUdPTjp7Y29uZmlndXJhYmxlOiEwfSxTT1JUSU5ERVhfTVVMVElQT0xZR09OOntjb25maWd1cmFibGU6ITB9LFNPUlRJTkRFWF9HRU9NRVRSWUNPTExFQ1RJT046e2NvbmZpZ3VyYWJsZTohMH0sZ2VvbWV0cnlDaGFuZ2VkRmlsdGVyOntjb25maWd1cmFibGU6ITB9fTtjdC5wcm90b3R5cGUuaXNHZW9tZXRyeUNvbGxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTb3J0SW5kZXgoKT09PWN0LlNPUlRJTkRFWF9HRU9NRVRSWUNPTExFQ1RJT059LGN0LnByb3RvdHlwZS5nZXRGYWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZhY3Rvcnl9LGN0LnByb3RvdHlwZS5nZXRHZW9tZXRyeU49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXN9LGN0LnByb3RvdHlwZS5nZXRBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGN0LnByb3RvdHlwZS5pc1JlY3RhbmdsZT1mdW5jdGlvbigpe3JldHVybiExfSxjdC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBjdCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBudWxsIT09dCYmdGhpcy5lcXVhbHNUb3BvKHQpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgT2JqZWN0KXt2YXIgZT1hcmd1bWVudHNbMF07aWYoIShlIGluc3RhbmNlb2YgY3QpKXJldHVybiExO3ZhciBuPWU7cmV0dXJuIHRoaXMuZXF1YWxzRXhhY3Qobil9fSxjdC5wcm90b3R5cGUuZXF1YWxzRXhhY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PT10fHx0aGlzLmVxdWFsc0V4YWN0KHQsMCl9LGN0LnByb3RvdHlwZS5nZW9tZXRyeUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLmFwcGx5KGN0Lmdlb21ldHJ5Q2hhbmdlZEZpbHRlcil9LGN0LnByb3RvdHlwZS5nZW9tZXRyeUNoYW5nZWRBY3Rpb249ZnVuY3Rpb24oKXt0aGlzLl9lbnZlbG9wZT1udWxsfSxjdC5wcm90b3R5cGUuZXF1YWxzTm9ybT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQmJnRoaXMubm9ybSgpLmVxdWFsc0V4YWN0KHQubm9ybSgpKX0sY3QucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiAwfSxjdC5wcm90b3R5cGUuZ2V0TnVtR2VvbWV0cmllcz1mdW5jdGlvbigpe3JldHVybiAxfSxjdC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPXQ7cmV0dXJuIHRoaXMuZ2V0U29ydEluZGV4KCkhPT1lLmdldFNvcnRJbmRleCgpP3RoaXMuZ2V0U29ydEluZGV4KCktZS5nZXRTb3J0SW5kZXgoKTp0aGlzLmlzRW1wdHkoKSYmZS5pc0VtcHR5KCk/MDp0aGlzLmlzRW1wdHkoKT8tMTplLmlzRW1wdHkoKT8xOnRoaXMuY29tcGFyZVRvU2FtZUNsYXNzKHQpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuZ2V0U29ydEluZGV4KCkhPT1uLmdldFNvcnRJbmRleCgpP3RoaXMuZ2V0U29ydEluZGV4KCktbi5nZXRTb3J0SW5kZXgoKTp0aGlzLmlzRW1wdHkoKSYmbi5pc0VtcHR5KCk/MDp0aGlzLmlzRW1wdHkoKT8tMTpuLmlzRW1wdHkoKT8xOnRoaXMuY29tcGFyZVRvU2FtZUNsYXNzKG4saSl9fSxjdC5wcm90b3R5cGUuZ2V0VXNlckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlckRhdGF9LGN0LnByb3RvdHlwZS5nZXRTUklEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX1NSSUR9LGN0LnByb3RvdHlwZS5nZXRFbnZlbG9wZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS50b0dlb21ldHJ5KHRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKX0sY3QucHJvdG90eXBlLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uPWZ1bmN0aW9uKHQpe2lmKHQuZ2V0U29ydEluZGV4KCk9PT1jdC5TT1JUSU5ERVhfR0VPTUVUUllDT0xMRUNUSU9OKXRocm93IG5ldyBtKFwiVGhpcyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCBHZW9tZXRyeUNvbGxlY3Rpb24gYXJndW1lbnRzXCIpfSxjdC5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09bj90LmVxdWFscyhlKTp0LmRpc3RhbmNlKGUpPD1ufSxjdC5wcm90b3R5cGUubm9ybT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29weSgpO3JldHVybiB0Lm5vcm1hbGl6ZSgpLHR9LGN0LnByb3RvdHlwZS5nZXRQcmVjaXNpb25Nb2RlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9mYWN0b3J5LmdldFByZWNpc2lvbk1vZGVsKCl9LGN0LnByb3RvdHlwZS5nZXRFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9lbnZlbG9wZSYmKHRoaXMuX2VudmVsb3BlPXRoaXMuY29tcHV0ZUVudmVsb3BlSW50ZXJuYWwoKSksbmV3IGoodGhpcy5fZW52ZWxvcGUpfSxjdC5wcm90b3R5cGUuc2V0U1JJRD1mdW5jdGlvbih0KXt0aGlzLl9TUklEPXR9LGN0LnByb3RvdHlwZS5zZXRVc2VyRGF0YT1mdW5jdGlvbih0KXt0aGlzLl91c2VyRGF0YT10fSxjdC5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10Lml0ZXJhdG9yKCksaT1lLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCkmJmkuaGFzTmV4dCgpOyl7dmFyIHI9bi5uZXh0KCksbz1pLm5leHQoKSxzPXIuY29tcGFyZVRvKG8pO2lmKDAhPT1zKXJldHVybiBzfXJldHVybiBuLmhhc05leHQoKT8xOmkuaGFzTmV4dCgpPy0xOjB9LGN0LnByb3RvdHlwZS5oYXNoQ29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKS5oYXNoQ29kZSgpfSxjdC5wcm90b3R5cGUuaXNHZW9tZXRyeUNvbGxlY3Rpb25PckRlcml2ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTb3J0SW5kZXgoKT09PWN0LlNPUlRJTkRFWF9HRU9NRVRSWUNPTExFQ1RJT058fHRoaXMuZ2V0U29ydEluZGV4KCk9PT1jdC5TT1JUSU5ERVhfTVVMVElQT0lOVHx8dGhpcy5nZXRTb3J0SW5kZXgoKT09PWN0LlNPUlRJTkRFWF9NVUxUSUxJTkVTVFJJTkd8fHRoaXMuZ2V0U29ydEluZGV4KCk9PT1jdC5TT1JUSU5ERVhfTVVMVElQT0xZR09OfSxjdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5beCxFLGVdfSxjdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gY3R9LGN0Lmhhc05vbkVtcHR5RWxlbWVudHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRbZV0uaXNFbXB0eSgpKXJldHVybiEwO3JldHVybiExfSxjdC5oYXNOdWxsRWxlbWVudHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYobnVsbD09PXRbZV0pcmV0dXJuITA7cmV0dXJuITF9LHB0LnNlcmlhbFZlcnNpb25VSUQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB4Nzk5ZWE0NjUyMjg1NGMwMH0scHQuU09SVElOREVYX1BPSU5ULmdldD1mdW5jdGlvbigpe3JldHVybiAwfSxwdC5TT1JUSU5ERVhfTVVMVElQT0lOVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0scHQuU09SVElOREVYX0xJTkVTVFJJTkcuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDJ9LHB0LlNPUlRJTkRFWF9MSU5FQVJSSU5HLmdldD1mdW5jdGlvbigpe3JldHVybiAzfSxwdC5TT1JUSU5ERVhfTVVMVElMSU5FU1RSSU5HLmdldD1mdW5jdGlvbigpe3JldHVybiA0fSxwdC5TT1JUSU5ERVhfUE9MWUdPTi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gNX0scHQuU09SVElOREVYX01VTFRJUE9MWUdPTi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gNn0scHQuU09SVElOREVYX0dFT01FVFJZQ09MTEVDVElPTi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gN30scHQuZ2VvbWV0cnlDaGFuZ2VkRmlsdGVyLmdldD1mdW5jdGlvbigpe3JldHVybiBodH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY3QscHQpO3ZhciBodD1mdW5jdGlvbigpe307aHQuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bbHRdfSxodC5maWx0ZXI9ZnVuY3Rpb24odCl7dC5nZW9tZXRyeUNoYW5nZWRBY3Rpb24oKX07dmFyIGZ0PWZ1bmN0aW9uKCl7fTtmdC5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQpe30sZnQucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGZ0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBmdH07dmFyIGd0PWZ1bmN0aW9uKCl7fSxkdD17TW9kMkJvdW5kYXJ5Tm9kZVJ1bGU6e2NvbmZpZ3VyYWJsZTohMH0sRW5kUG9pbnRCb3VuZGFyeU5vZGVSdWxlOntjb25maWd1cmFibGU6ITB9LE11bHRpVmFsZW50RW5kUG9pbnRCb3VuZGFyeU5vZGVSdWxlOntjb25maWd1cmFibGU6ITB9LE1vbm9WYWxlbnRFbmRQb2ludEJvdW5kYXJ5Tm9kZVJ1bGU6e2NvbmZpZ3VyYWJsZTohMH0sTU9EMl9CT1VOREFSWV9SVUxFOntjb25maWd1cmFibGU6ITB9LEVORFBPSU5UX0JPVU5EQVJZX1JVTEU6e2NvbmZpZ3VyYWJsZTohMH0sTVVMVElWQUxFTlRfRU5EUE9JTlRfQk9VTkRBUllfUlVMRTp7Y29uZmlndXJhYmxlOiEwfSxNT05PVkFMRU5UX0VORFBPSU5UX0JPVU5EQVJZX1JVTEU6e2NvbmZpZ3VyYWJsZTohMH0sT0dDX1NGU19CT1VOREFSWV9SVUxFOntjb25maWd1cmFibGU6ITB9fTtndC5wcm90b3R5cGUuaXNJbkJvdW5kYXJ5PWZ1bmN0aW9uKHQpe30sZ3QucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGd0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBndH0sZHQuTW9kMkJvdW5kYXJ5Tm9kZVJ1bGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHl0fSxkdC5FbmRQb2ludEJvdW5kYXJ5Tm9kZVJ1bGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIF90fSxkdC5NdWx0aVZhbGVudEVuZFBvaW50Qm91bmRhcnlOb2RlUnVsZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbXR9LGR0Lk1vbm9WYWxlbnRFbmRQb2ludEJvdW5kYXJ5Tm9kZVJ1bGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHZ0fSxkdC5NT0QyX0JPVU5EQVJZX1JVTEUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB5dH0sZHQuRU5EUE9JTlRfQk9VTkRBUllfUlVMRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IF90fSxkdC5NVUxUSVZBTEVOVF9FTkRQT0lOVF9CT1VOREFSWV9SVUxFLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgbXR9LGR0Lk1PTk9WQUxFTlRfRU5EUE9JTlRfQk9VTkRBUllfUlVMRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHZ0fSxkdC5PR0NfU0ZTX0JPVU5EQVJZX1JVTEUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGd0Lk1PRDJfQk9VTkRBUllfUlVMRX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZ3QsZHQpO3ZhciB5dD1mdW5jdGlvbigpe307eXQucHJvdG90eXBlLmlzSW5Cb3VuZGFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdCUyPT0xfSx5dC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bZ3RdfSx5dC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4geXR9O3ZhciBfdD1mdW5jdGlvbigpe307X3QucHJvdG90eXBlLmlzSW5Cb3VuZGFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdD4wfSxfdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bZ3RdfSxfdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gX3R9O3ZhciBtdD1mdW5jdGlvbigpe307bXQucHJvdG90eXBlLmlzSW5Cb3VuZGFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdD4xfSxtdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bZ3RdfSxtdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gbXR9O3ZhciB2dD1mdW5jdGlvbigpe307dnQucHJvdG90eXBlLmlzSW5Cb3VuZGFyeT1mdW5jdGlvbih0KXtyZXR1cm4gMT09PXR9LHZ0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltndF19LHZ0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB2dH07dmFyIEl0PWZ1bmN0aW9uKCl7fTtJdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7fSxJdC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKCl7fSxJdC5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe30sSXQucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7fSxJdC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe30sSXQucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXt9LEl0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt9LChuLnByb3RvdHlwZT1uZXcgRXJyb3IpLm5hbWU9XCJJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXCI7dmFyIEV0PWZ1bmN0aW9uKCl7fTtFdC5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe30sRXQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt9LEV0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt9O3ZhciB4dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7fSxlfShJdCk7KGkucHJvdG90eXBlPW5ldyBFcnJvcikubmFtZT1cIk5vU3VjaEVsZW1lbnRFeGNlcHRpb25cIjt2YXIgTnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuY2FsbCh0aGlzKSx0aGlzLmFycmF5Xz1bXSxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEl0JiZ0aGlzLmFkZEFsbChhcmd1bWVudHNbMF0pfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbnN1cmVDYXBhY2l0eT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bdCxJdF19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5hcnJheV8ucHVzaCh0KTp0aGlzLmFycmF5Xy5zcGxpY2UoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSksITB9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5hcnJheV89W119LGUucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSk7cmV0dXJuITB9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYXJyYXlfW3RdO3JldHVybiB0aGlzLmFycmF5X1t0XT1lLG59LGUucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDdCh0aGlzKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5zaXplKCkpdGhyb3cgbmV3IG47cmV0dXJuIHRoaXMuYXJyYXlfW3RdfSxlLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmFycmF5Xy5sZW5ndGh9LGUucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnJheV8ubGVuZ3RofSxlLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXQucHVzaCh0aGlzLmFycmF5X1tlXSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9ITEsbj0wLGk9dGhpcy5hcnJheV8ubGVuZ3RoO248aTtuKyspaWYodGhpcy5hcnJheV9bbl09PT10KXt0aGlzLmFycmF5Xy5zcGxpY2UobiwxKSxlPSEwO2JyZWFrfXJldHVybiBlfSxlfSh4dCksQ3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyksdGhpcy5hcnJheUxpc3RfPWUsdGhpcy5wb3NpdGlvbl89MH1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMucG9zaXRpb25fPT09dGhpcy5hcnJheUxpc3RfLnNpemUoKSl0aHJvdyBuZXcgaTtyZXR1cm4gdGhpcy5hcnJheUxpc3RfLmdldCh0aGlzLnBvc2l0aW9uXysrKX0sZS5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uXzx0aGlzLmFycmF5TGlzdF8uc2l6ZSgpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlMaXN0Xy5zZXQodGhpcy5wb3NpdGlvbl8tMSx0KX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5hcnJheUxpc3RfLnJlbW92ZSh0aGlzLmFycmF5TGlzdF8uZ2V0KHRoaXMucG9zaXRpb25fKSl9LGV9KEV0KSxTdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7aWYodC5jYWxsKHRoaXMpLDA9PT1hcmd1bWVudHMubGVuZ3RoKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5lbnN1cmVDYXBhY2l0eShlLmxlbmd0aCksdGhpcy5hZGQoZSwhMCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3RoaXMuZW5zdXJlQ2FwYWNpdHkobi5sZW5ndGgpLHRoaXMuYWRkKG4saSl9fXQmJihlLl9fcHJvdG9fXz10KSwoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWU7dmFyIG49e2Nvb3JkQXJyYXlUeXBlOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5jb29yZEFycmF5VHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFycmF5KDApLmZpbGwobnVsbCl9LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0KHQpfSxlLnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPSExLHI9ZS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl0aGlzLmFkZChyLm5leHQoKSxuKSxpPSEwO3JldHVybiBpfXJldHVybiB0LnByb3RvdHlwZS5hZGRBbGwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpLG49MDtuPHRoaXMuc2l6ZSgpO24rKyllLmFkZChuLHRoaXMuZ2V0KG4pLmNvcHkoKSk7cmV0dXJuIGV9LGUucHJvdG90eXBlLnRvQ29vcmRpbmF0ZUFycmF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9BcnJheShlLmNvb3JkQXJyYXlUeXBlKX0sZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXTt0LnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLGUpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkmJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYWRkKG4saSwhMCksITB9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDJiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIHI9YXJndW1lbnRzWzBdO2lmKCFhcmd1bWVudHNbMV0mJnRoaXMuc2l6ZSgpPj0xKXtpZih0aGlzLmdldCh0aGlzLnNpemUoKS0xKS5lcXVhbHMyRChyKSlyZXR1cm4gbnVsbH10LnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLHIpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3QmJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgbz1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYWRkKG8scyksITB9fWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5JiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIGE9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzFdO2lmKGFyZ3VtZW50c1syXSlmb3IodmFyIGw9MDtsPGEubGVuZ3RoO2wrKyl0aGlzLmFkZChhW2xdLHUpO2Vsc2UgZm9yKHZhciBjPWEubGVuZ3RoLTE7Yz49MDtjLS0pdGhpcy5hZGQoYVtjXSx1KTtyZXR1cm4hMH1pZihcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1syXSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMF0pJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEMpe3ZhciBwPWFyZ3VtZW50c1swXSxoPWFyZ3VtZW50c1sxXTtpZighYXJndW1lbnRzWzJdKXt2YXIgZj10aGlzLnNpemUoKTtpZihmPjApe2lmKHA+MCl7aWYodGhpcy5nZXQocC0xKS5lcXVhbHMyRChoKSlyZXR1cm4gbnVsbH1pZihwPGYpe2lmKHRoaXMuZ2V0KHApLmVxdWFsczJEKGgpKXJldHVybiBudWxsfX19dC5wcm90b3R5cGUuYWRkLmNhbGwodGhpcyxwLGgpfX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZz1hcmd1bWVudHNbMF0sZD1hcmd1bWVudHNbMV0seT1hcmd1bWVudHNbMl0sXz1hcmd1bWVudHNbM10sbT0xO3k+XyYmKG09LTEpO2Zvcih2YXIgdj15O3YhPT1fO3YrPW0pdGhpcy5hZGQoZ1t2XSxkKTtyZXR1cm4hMH19LGUucHJvdG90eXBlLmNsb3NlUmluZz1mdW5jdGlvbigpe3RoaXMuc2l6ZSgpPjAmJnRoaXMuYWRkKG5ldyBDKHRoaXMuZ2V0KDApKSwhMSl9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsbiksZX0oTnQpLEx0PWZ1bmN0aW9uKCl7fSxidD17Rm9yd2FyZENvbXBhcmF0b3I6e2NvbmZpZ3VyYWJsZTohMH0sQmlkaXJlY3Rpb25hbENvbXBhcmF0b3I6e2NvbmZpZ3VyYWJsZTohMH0sY29vcmRBcnJheVR5cGU6e2NvbmZpZ3VyYWJsZTohMH19O2J0LkZvcndhcmRDb21wYXJhdG9yLmdldD1mdW5jdGlvbigpe3JldHVybiB3dH0sYnQuQmlkaXJlY3Rpb25hbENvbXBhcmF0b3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE90fSxidC5jb29yZEFycmF5VHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFycmF5KDApLmZpbGwobnVsbCl9LEx0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxMdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gTHR9LEx0LmlzUmluZz1mdW5jdGlvbih0KXtyZXR1cm4hKHQubGVuZ3RoPDQpJiYhIXRbMF0uZXF1YWxzMkQodFt0Lmxlbmd0aC0xXSl9LEx0LnB0Tm90SW5MaXN0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aWYoTHQuaW5kZXhPZihpLGUpPDApcmV0dXJuIGl9cmV0dXJuIG51bGx9LEx0LnNjcm9sbD1mdW5jdGlvbih0LGUpe3ZhciBuPUx0LmluZGV4T2YoZSx0KTtpZihuPDApcmV0dXJuIG51bGw7dmFyIGk9bmV3IEFycmF5KHQubGVuZ3RoKS5maWxsKG51bGwpO1kuYXJyYXljb3B5KHQsbixpLDAsdC5sZW5ndGgtbiksWS5hcnJheWNvcHkodCwwLGksdC5sZW5ndGgtbixuKSxZLmFycmF5Y29weShpLDAsdCwwLHQubGVuZ3RoKX0sTHQuZXF1YWxzPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZih0PT09ZSlyZXR1cm4hMDtpZihudWxsPT09dHx8bnVsbD09PWUpcmV0dXJuITE7aWYodC5sZW5ndGghPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcXVhbHMoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXTtpZihpPT09cilyZXR1cm4hMDtpZihudWxsPT09aXx8bnVsbD09PXIpcmV0dXJuITE7aWYoaS5sZW5ndGghPT1yLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKylpZigwIT09by5jb21wYXJlKGlbc10scltzXSkpcmV0dXJuITE7cmV0dXJuITB9fSxMdC5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IFN0LGk9MDtpPHQubGVuZ3RoO2krKyllLmludGVyc2VjdHModFtpXSkmJm4uYWRkKHRbaV0sITApO3JldHVybiBuLnRvQ29vcmRpbmF0ZUFycmF5KCl9LEx0Lmhhc1JlcGVhdGVkUG9pbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZS0xXS5lcXVhbHModFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LEx0LnJlbW92ZVJlcGVhdGVkUG9pbnRzPWZ1bmN0aW9uKHQpe2lmKCFMdC5oYXNSZXBlYXRlZFBvaW50cyh0KSlyZXR1cm4gdDtyZXR1cm4gbmV3IFN0KHQsITEpLnRvQ29vcmRpbmF0ZUFycmF5KCl9LEx0LnJldmVyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLTEsbj1NYXRoLnRydW5jKGUvMiksaT0wO2k8PW47aSsrKXt2YXIgcj10W2ldO3RbaV09dFtlLWldLHRbZS1pXT1yfX0sTHQucmVtb3ZlTnVsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9PXRbbl0mJmUrKzt2YXIgaT1uZXcgQXJyYXkoZSkuZmlsbChudWxsKTtpZigwPT09ZSlyZXR1cm4gaTtmb3IodmFyIHI9MCxvPTA7bzx0Lmxlbmd0aDtvKyspbnVsbCE9PXRbb10mJihpW3IrK109dFtvXSk7cmV0dXJuIGl9LEx0LmNvcHlEZWVwPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgQXJyYXkodC5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248dC5sZW5ndGg7bisrKWVbbl09bmV3IEModFtuXSk7cmV0dXJuIGV9aWYoNT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXSxzPWFyZ3VtZW50c1szXSxhPWFyZ3VtZW50c1s0XSx1PTA7dTxhO3UrKylvW3MrdV09bmV3IEMoaVtyK3VdKX0sTHQuaXNFcXVhbFJldmVyc2VkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl0scj1lW3QubGVuZ3RoLW4tMV07aWYoMCE9PWkuY29tcGFyZVRvKHIpKXJldHVybiExfXJldHVybiEwfSxMdC5lbnZlbG9wZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IGosbj0wO248dC5sZW5ndGg7bisrKWUuZXhwYW5kVG9JbmNsdWRlKHRbbl0pO3JldHVybiBlfSxMdC50b0Nvb3JkaW5hdGVBcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gdC50b0FycmF5KEx0LmNvb3JkQXJyYXlUeXBlKX0sTHQuYXRMZWFzdE5Db29yZGluYXRlc09yTm90aGluZz1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD49dD9lOltdfSxMdC5pbmRleE9mPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspaWYodC5lcXVhbHMoZVtuXSkpcmV0dXJuIG47cmV0dXJuLTF9LEx0LmluY3JlYXNpbmdEaXJlY3Rpb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTxNYXRoLnRydW5jKHQubGVuZ3RoLzIpO2UrKyl7dmFyIG49dC5sZW5ndGgtMS1lLGk9dFtlXS5jb21wYXJlVG8odFtuXSk7aWYoMCE9PWkpcmV0dXJuIGl9cmV0dXJuIDF9LEx0LmNvbXBhcmU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQubGVuZ3RoJiZuPGUubGVuZ3RoOyl7dmFyIGk9dFtuXS5jb21wYXJlVG8oZVtuXSk7aWYoMCE9PWkpcmV0dXJuIGk7bisrfXJldHVybiBuPGUubGVuZ3RoPy0xOm48dC5sZW5ndGg/MTowfSxMdC5taW5Db29yZGluYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49MDtuPHQubGVuZ3RoO24rKykobnVsbD09PWV8fGUuY29tcGFyZVRvKHRbbl0pPjApJiYoZT10W25dKTtyZXR1cm4gZX0sTHQuZXh0cmFjdD1mdW5jdGlvbih0LGUsbil7ZT1SLmNsYW1wKGUsMCx0Lmxlbmd0aCk7dmFyIGk9KG49Ui5jbGFtcChuLC0xLHQubGVuZ3RoKSktZSsxO248MCYmKGk9MCksZT49dC5sZW5ndGgmJihpPTApLG48ZSYmKGk9MCk7dmFyIHI9bmV3IEFycmF5KGkpLmZpbGwobnVsbCk7aWYoMD09PWkpcmV0dXJuIHI7Zm9yKHZhciBvPTAscz1lO3M8PW47cysrKXJbbysrXT10W3NdO3JldHVybiByfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhMdCxidCk7dmFyIHd0PWZ1bmN0aW9uKCl7fTt3dC5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbih0LGUpe3JldHVybiBMdC5jb21wYXJlKHQsZSl9LHd0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltOXX0sd3QucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHd0fTt2YXIgT3Q9ZnVuY3Rpb24oKXt9O090LnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dCxpPWU7aWYobi5sZW5ndGg8aS5sZW5ndGgpcmV0dXJuLTE7aWYobi5sZW5ndGg+aS5sZW5ndGgpcmV0dXJuIDE7aWYoMD09PW4ubGVuZ3RoKXJldHVybiAwO3ZhciByPUx0LmNvbXBhcmUobixpKTtyZXR1cm4gTHQuaXNFcXVhbFJldmVyc2VkKG4saSk/MDpyfSxPdC5wcm90b3R5cGUuT0xEY29tcGFyZT1mdW5jdGlvbih0LGUpe3ZhciBuPXQsaT1lO2lmKG4ubGVuZ3RoPGkubGVuZ3RoKXJldHVybi0xO2lmKG4ubGVuZ3RoPmkubGVuZ3RoKXJldHVybiAxO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4gMDtmb3IodmFyIHI9THQuaW5jcmVhc2luZ0RpcmVjdGlvbihuKSxvPUx0LmluY3JlYXNpbmdEaXJlY3Rpb24oaSkscz1yPjA/MDpuLmxlbmd0aC0xLGE9bz4wPzA6bi5sZW5ndGgtMSx1PTA7dTxuLmxlbmd0aDt1Kyspe3ZhciBsPW5bc10uY29tcGFyZVRvKGlbYV0pO2lmKDAhPT1sKXJldHVybiBsO3MrPXIsYSs9b31yZXR1cm4gMH0sT3QucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW05dfSxPdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gT3R9O3ZhciBUdD1mdW5jdGlvbigpe307VHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe30sVHQucHJvdG90eXBlLnB1dD1mdW5jdGlvbigpe30sVHQucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXt9LFR0LnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt9LFR0LnByb3RvdHlwZS5lbnRyeVNldD1mdW5jdGlvbigpe307dmFyIFJ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZX0oVHQpOyhyLnByb3RvdHlwZT1uZXcgRXJyb3IpLm5hbWU9XCJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRcIiwoby5wcm90b3R5cGU9bmV3IEl0KS5jb250YWlucz1mdW5jdGlvbigpe307dmFyIFB0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmNhbGwodGhpcyksdGhpcy5hcnJheV89W10sYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBJdCYmdGhpcy5hZGRBbGwoYXJndW1lbnRzWzBdKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLmFycmF5Xy5sZW5ndGg7ZTxuO2UrKyl7aWYodGhpcy5hcnJheV9bZV09PT10KXJldHVybiEwfXJldHVybiExfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuY29udGFpbnModCkmJih0aGlzLmFycmF5Xy5wdXNoKHQpLCEwKX0sZS5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXRoaXMuYWRkKGUubmV4dCgpKTtyZXR1cm4hMH0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcn0sZS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Xy5sZW5ndGh9LGUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sZS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTAsbj10aGlzLmFycmF5Xy5sZW5ndGg7ZTxuO2UrKyl0LnB1c2godGhpcy5hcnJheV9bZV0pO3JldHVybiB0fSxlLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgRHQodGhpcyl9LGV9KG8pLER0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMpLHRoaXMuaGFzaFNldF89ZSx0aGlzLnBvc2l0aW9uXz0wfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5wb3NpdGlvbl89PT10aGlzLmhhc2hTZXRfLnNpemUoKSl0aHJvdyBuZXcgaTtyZXR1cm4gdGhpcy5oYXNoU2V0Xy5hcnJheV9bdGhpcy5wb3NpdGlvbl8rK119LGUucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbl88dGhpcy5oYXNoU2V0Xy5zaXplKCl9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByfSxlfShFdCksTXQ9MDsocC5wcm90b3R5cGU9bmV3IFJ0KS5nZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMucm9vdF87bnVsbCE9PWU7KXt2YXIgbj10LmNvbXBhcmVUbyhlLmtleSk7aWYobjwwKWU9ZS5sZWZ0O2Vsc2V7aWYoIShuPjApKXJldHVybiBlLnZhbHVlO2U9ZS5yaWdodH19cmV0dXJuIG51bGx9LHAucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PT10aGlzLnJvb3RfKXJldHVybiB0aGlzLnJvb3RfPXtrZXk6dCx2YWx1ZTplLGxlZnQ6bnVsbCxyaWdodDpudWxsLHBhcmVudDpudWxsLGNvbG9yOk10LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGdldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleX19LHRoaXMuc2l6ZV89MSxudWxsO3ZhciBuLGkscj10aGlzLnJvb3RfO2Rve2lmKG49ciwoaT10LmNvbXBhcmVUbyhyLmtleSkpPDApcj1yLmxlZnQ7ZWxzZXtpZighKGk+MCkpe3ZhciBvPXIudmFsdWU7cmV0dXJuIHIudmFsdWU9ZSxvfXI9ci5yaWdodH19d2hpbGUobnVsbCE9PXIpO3ZhciBzPXtrZXk6dCxsZWZ0Om51bGwscmlnaHQ6bnVsbCx2YWx1ZTplLHBhcmVudDpuLGNvbG9yOk10LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGdldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleX19O3JldHVybiBpPDA/bi5sZWZ0PXM6bi5yaWdodD1zLHRoaXMuZml4QWZ0ZXJJbnNlcnRpb24ocyksdGhpcy5zaXplXysrLG51bGx9LHAucHJvdG90eXBlLmZpeEFmdGVySW5zZXJ0aW9uPWZ1bmN0aW9uKHQpe2Zvcih0LmNvbG9yPTE7bnVsbCE9dCYmdCE9PXRoaXMucm9vdF8mJjE9PT10LnBhcmVudC5jb2xvcjspaWYoYSh0KT09PWwoYShhKHQpKSkpe3ZhciBlPWMoYShhKHQpKSk7MT09PXMoZSk/KHUoYSh0KSxNdCksdShlLE10KSx1KGEoYSh0KSksMSksdD1hKGEodCkpKToodD09PWMoYSh0KSkmJih0PWEodCksdGhpcy5yb3RhdGVMZWZ0KHQpKSx1KGEodCksTXQpLHUoYShhKHQpKSwxKSx0aGlzLnJvdGF0ZVJpZ2h0KGEoYSh0KSkpKX1lbHNle3ZhciBuPWwoYShhKHQpKSk7MT09PXMobik/KHUoYSh0KSxNdCksdShuLE10KSx1KGEoYSh0KSksMSksdD1hKGEodCkpKToodD09PWwoYSh0KSkmJih0PWEodCksdGhpcy5yb3RhdGVSaWdodCh0KSksdShhKHQpLE10KSx1KGEoYSh0KSksMSksdGhpcy5yb3RhdGVMZWZ0KGEoYSh0KSkpKX10aGlzLnJvb3RfLmNvbG9yPU10fSxwLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgTnQsZT10aGlzLmdldEZpcnN0RW50cnkoKTtpZihudWxsIT09ZSlmb3IodC5hZGQoZS52YWx1ZSk7bnVsbCE9PShlPXAuc3VjY2Vzc29yKGUpKTspdC5hZGQoZS52YWx1ZSk7cmV0dXJuIHR9LHAucHJvdG90eXBlLmVudHJ5U2V0PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFB0LGU9dGhpcy5nZXRGaXJzdEVudHJ5KCk7aWYobnVsbCE9PWUpZm9yKHQuYWRkKGUpO251bGwhPT0oZT1wLnN1Y2Nlc3NvcihlKSk7KXQuYWRkKGUpO3JldHVybiB0fSxwLnByb3RvdHlwZS5yb3RhdGVMZWZ0PWZ1bmN0aW9uKHQpe2lmKG51bGwhPXQpe3ZhciBlPXQucmlnaHQ7dC5yaWdodD1lLmxlZnQsbnVsbCE9ZS5sZWZ0JiYoZS5sZWZ0LnBhcmVudD10KSxlLnBhcmVudD10LnBhcmVudCxudWxsPT09dC5wYXJlbnQ/dGhpcy5yb290Xz1lOnQucGFyZW50LmxlZnQ9PT10P3QucGFyZW50LmxlZnQ9ZTp0LnBhcmVudC5yaWdodD1lLGUubGVmdD10LHQucGFyZW50PWV9fSxwLnByb3RvdHlwZS5yb3RhdGVSaWdodD1mdW5jdGlvbih0KXtpZihudWxsIT10KXt2YXIgZT10LmxlZnQ7dC5sZWZ0PWUucmlnaHQsbnVsbCE9ZS5yaWdodCYmKGUucmlnaHQucGFyZW50PXQpLGUucGFyZW50PXQucGFyZW50LG51bGw9PT10LnBhcmVudD90aGlzLnJvb3RfPWU6dC5wYXJlbnQucmlnaHQ9PT10P3QucGFyZW50LnJpZ2h0PWU6dC5wYXJlbnQubGVmdD1lLGUucmlnaHQ9dCx0LnBhcmVudD1lfX0scC5wcm90b3R5cGUuZ2V0Rmlyc3RFbnRyeT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucm9vdF87aWYobnVsbCE9dClmb3IoO251bGwhPXQubGVmdDspdD10LmxlZnQ7cmV0dXJuIHR9LHAuc3VjY2Vzc29yPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXJldHVybiBudWxsO2lmKG51bGwhPT10LnJpZ2h0KXtmb3IodmFyIGU9dC5yaWdodDtudWxsIT09ZS5sZWZ0OyllPWUubGVmdDtyZXR1cm4gZX1mb3IodmFyIG49dC5wYXJlbnQsaT10O251bGwhPT1uJiZpPT09bi5yaWdodDspaT1uLG49bi5wYXJlbnQ7cmV0dXJuIG59LHAucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplX307dmFyIEF0PWZ1bmN0aW9uKCl7fTtBdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sQXQucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEF0fSxoLnByb3RvdHlwZT1uZXcgbywoZi5wcm90b3R5cGU9bmV3IGgpLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspe2lmKDA9PT10aGlzLmFycmF5X1tlXS5jb21wYXJlVG8odCkpcmV0dXJuITB9cmV0dXJuITF9LGYucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRhaW5zKHQpKXJldHVybiExO2Zvcih2YXIgZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspe2lmKDE9PT10aGlzLmFycmF5X1tlXS5jb21wYXJlVG8odCkpcmV0dXJuIHRoaXMuYXJyYXlfLnNwbGljZShlLDAsdCksITB9cmV0dXJuIHRoaXMuYXJyYXlfLnB1c2godCksITB9LGYucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSk7cmV0dXJuITB9LGYucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt0aHJvdyBuZXcgcn0sZi5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Xy5sZW5ndGh9LGYucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sZi5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTAsbj10aGlzLmFycmF5Xy5sZW5ndGg7ZTxuO2UrKyl0LnB1c2godGhpcy5hcnJheV9bZV0pO3JldHVybiB0fSxmLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgRnQodGhpcyl9O3ZhciBGdD1mdW5jdGlvbih0KXt0aGlzLnRyZWVTZXRfPXQsdGhpcy5wb3NpdGlvbl89MH07RnQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBvc2l0aW9uXz09PXRoaXMudHJlZVNldF8uc2l6ZSgpKXRocm93IG5ldyBpO3JldHVybiB0aGlzLnRyZWVTZXRfLmFycmF5X1t0aGlzLnBvc2l0aW9uXysrXX0sRnQucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbl88dGhpcy50cmVlU2V0Xy5zaXplKCl9LEZ0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcn07dmFyIEd0PWZ1bmN0aW9uKCl7fTtHdC5zb3J0PWZ1bmN0aW9uKCl7dmFyIHQsZSxuLGkscj1hcmd1bWVudHNbMF07aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpaT1mdW5jdGlvbih0LGUpe3JldHVybiB0LmNvbXBhcmVUbyhlKX0sci5zb3J0KGkpO2Vsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpbj1hcmd1bWVudHNbMV0saT1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNvbXBhcmUodCxlKX0sci5zb3J0KGkpO2Vsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpeyhlPXIuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSkpLnNvcnQoKTt2YXIgbz1yLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoZSxyLnNsaWNlKGFyZ3VtZW50c1syXSxyLmxlbmd0aCkpO2ZvcihyLnNwbGljZSgwLHIubGVuZ3RoKSx0PTA7dDxvLmxlbmd0aDt0Kyspci5wdXNoKG9bdF0pfWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGU9ci5zbGljZShhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSxuPWFyZ3VtZW50c1szXSxpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY29tcGFyZSh0LGUpfSxlLnNvcnQoaSksbz1yLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoZSxyLnNsaWNlKGFyZ3VtZW50c1syXSxyLmxlbmd0aCkpLHIuc3BsaWNlKDAsci5sZW5ndGgpLHQ9MDt0PG8ubGVuZ3RoO3QrKylyLnB1c2gob1t0XSl9LEd0LmFzTGlzdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IE50LG49MCxpPXQubGVuZ3RoO248aTtuKyspZS5hZGQodFtuXSk7cmV0dXJuIGV9O3ZhciBxdD1mdW5jdGlvbigpe30sQnQ9e1A6e2NvbmZpZ3VyYWJsZTohMH0sTDp7Y29uZmlndXJhYmxlOiEwfSxBOntjb25maWd1cmFibGU6ITB9LEZBTFNFOntjb25maWd1cmFibGU6ITB9LFRSVUU6e2NvbmZpZ3VyYWJsZTohMH0sRE9OVENBUkU6e2NvbmZpZ3VyYWJsZTohMH0sU1lNX0ZBTFNFOntjb25maWd1cmFibGU6ITB9LFNZTV9UUlVFOntjb25maWd1cmFibGU6ITB9LFNZTV9ET05UQ0FSRTp7Y29uZmlndXJhYmxlOiEwfSxTWU1fUDp7Y29uZmlndXJhYmxlOiEwfSxTWU1fTDp7Y29uZmlndXJhYmxlOiEwfSxTWU1fQTp7Y29uZmlndXJhYmxlOiEwfX07QnQuUC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sQnQuTC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0sQnQuQS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMn0sQnQuRkFMU0UuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuLTF9LEJ0LlRSVUUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuLTJ9LEJ0LkRPTlRDQVJFLmdldD1mdW5jdGlvbigpe3JldHVybi0zfSxCdC5TWU1fRkFMU0UuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuXCJGXCJ9LEJ0LlNZTV9UUlVFLmdldD1mdW5jdGlvbigpe3JldHVyblwiVFwifSxCdC5TWU1fRE9OVENBUkUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuXCIqXCJ9LEJ0LlNZTV9QLmdldD1mdW5jdGlvbigpe3JldHVyblwiMFwifSxCdC5TWU1fTC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm5cIjFcIn0sQnQuU1lNX0EuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuXCIyXCJ9LHF0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxxdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gcXR9LHF0LnRvRGltZW5zaW9uU3ltYm9sPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIHF0LkZBTFNFOnJldHVybiBxdC5TWU1fRkFMU0U7Y2FzZSBxdC5UUlVFOnJldHVybiBxdC5TWU1fVFJVRTtjYXNlIHF0LkRPTlRDQVJFOnJldHVybiBxdC5TWU1fRE9OVENBUkU7Y2FzZSBxdC5QOnJldHVybiBxdC5TWU1fUDtjYXNlIHF0Lkw6cmV0dXJuIHF0LlNZTV9MO2Nhc2UgcXQuQTpyZXR1cm4gcXQuU1lNX0F9dGhyb3cgbmV3IG0oXCJVbmtub3duIGRpbWVuc2lvbiB2YWx1ZTogXCIrdCl9LHF0LnRvRGltZW5zaW9uVmFsdWU9ZnVuY3Rpb24odCl7c3dpdGNoKEEudG9VcHBlckNhc2UodCkpe2Nhc2UgcXQuU1lNX0ZBTFNFOnJldHVybiBxdC5GQUxTRTtjYXNlIHF0LlNZTV9UUlVFOnJldHVybiBxdC5UUlVFO2Nhc2UgcXQuU1lNX0RPTlRDQVJFOnJldHVybiBxdC5ET05UQ0FSRTtjYXNlIHF0LlNZTV9QOnJldHVybiBxdC5QO2Nhc2UgcXQuU1lNX0w6cmV0dXJuIHF0Lkw7Y2FzZSBxdC5TWU1fQTpyZXR1cm4gcXQuQX10aHJvdyBuZXcgbShcIlVua25vd24gZGltZW5zaW9uIHN5bWJvbDogXCIrdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHF0LEJ0KTt2YXIgVnQ9ZnVuY3Rpb24oKXt9O1Z0LnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7fSxWdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sVnQucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFZ0fTt2YXIgVXQ9ZnVuY3Rpb24oKXt9O1V0LnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCxlKXt9LFV0LnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXt9LFV0LnByb3RvdHlwZS5pc0dlb21ldHJ5Q2hhbmdlZD1mdW5jdGlvbigpe30sVXQucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFV0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBVdH07dmFyIHp0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXtpZih0LmNhbGwodGhpcyxuKSx0aGlzLl9nZW9tZXRyaWVzPWV8fFtdLHQuaGFzTnVsbEVsZW1lbnRzKHRoaXMuX2dlb21ldHJpZXMpKXRocm93IG5ldyBtKFwiZ2VvbWV0cmllcyBtdXN0IG5vdCBjb250YWluIG51bGwgZWxlbWVudHNcIil9dCYmKGUuX19wcm90b19fPXQpLChlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLmNvbXB1dGVFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBqLGU9MDtlPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO2UrKyl0LmV4cGFuZFRvSW5jbHVkZSh0aGlzLl9nZW9tZXRyaWVzW2VdLmdldEVudmVsb3BlSW50ZXJuYWwoKSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLmdldEdlb21ldHJ5Tj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZ2VvbWV0cmllc1t0XX0sZS5wcm90b3R5cGUuZ2V0U29ydEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHQuU09SVElOREVYX0dFT01FVFJZQ09MTEVDVElPTn0sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2V0TnVtUG9pbnRzKCkpLmZpbGwobnVsbCksZT0tMSxuPTA7bjx0aGlzLl9nZW9tZXRyaWVzLmxlbmd0aDtuKyspZm9yKHZhciBpPXRoaXMuX2dlb21ldHJpZXNbbl0uZ2V0Q29vcmRpbmF0ZXMoKSxyPTA7cjxpLmxlbmd0aDtyKyspdFsrK2VdPWlbcl07cmV0dXJuIHR9LGUucHJvdG90eXBlLmdldEFyZWE9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTx0aGlzLl9nZW9tZXRyaWVzLmxlbmd0aDtlKyspdCs9dGhpcy5fZ2VvbWV0cmllc1tlXS5nZXRBcmVhKCk7cmV0dXJuIHR9LGUucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyhlKSlyZXR1cm4hMTt2YXIgaT1lO2lmKHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoIT09aS5fZ2VvbWV0cmllcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0aGlzLl9nZW9tZXRyaWVzLmxlbmd0aDtyKyspaWYoIXRoaXMuX2dlb21ldHJpZXNbcl0uZXF1YWxzRXhhY3QoaS5fZ2VvbWV0cmllc1tyXSxuKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO3QrKyl0aGlzLl9nZW9tZXRyaWVzW3RdLm5vcm1hbGl6ZSgpO0d0LnNvcnQodGhpcy5fZ2VvbWV0cmllcyl9LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bnVsbDp0aGlzLl9nZW9tZXRyaWVzWzBdLmdldENvb3JkaW5hdGUoKX0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnlEaW1lbnNpb249ZnVuY3Rpb24oKXtmb3IodmFyIHQ9cXQuRkFMU0UsZT0wO2U8dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQ9TWF0aC5tYXgodCx0aGlzLl9nZW9tZXRyaWVzW2VdLmdldEJvdW5kYXJ5RGltZW5zaW9uKCkpO3JldHVybiB0fSxlLnByb3RvdHlwZS5nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtmb3IodmFyIHQ9cXQuRkFMU0UsZT0wO2U8dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQ9TWF0aC5tYXgodCx0aGlzLl9nZW9tZXRyaWVzW2VdLmdldERpbWVuc2lvbigpKTtyZXR1cm4gdH0sZS5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQrPXRoaXMuX2dlb21ldHJpZXNbZV0uZ2V0TGVuZ3RoKCk7cmV0dXJuIHR9LGUucHJvdG90eXBlLmdldE51bVBvaW50cz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO2UrKyl0Kz10aGlzLl9nZW9tZXRyaWVzW2VdLmdldE51bVBvaW50cygpO3JldHVybiB0fSxlLnByb3RvdHlwZS5nZXROdW1HZW9tZXRyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb21ldHJpZXMubGVuZ3RofSxlLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2dlb21ldHJpZXMubGVuZ3RoLGU9bmV3IEFycmF5KHQpLmZpbGwobnVsbCksbj0wO248dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGg7bisrKWVbbl09dGhpcy5fZ2VvbWV0cmllc1tuXS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihlKX0sZS5wcm90b3R5cGUuY29tcGFyZVRvU2FtZUNsYXNzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBmKEd0LmFzTGlzdCh0aGlzLl9nZW9tZXRyaWVzKSksbj1uZXcgZihHdC5hc0xpc3QodC5fZ2VvbWV0cmllcykpO3JldHVybiB0aGlzLmNvbXBhcmUoZSxuKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWkscz10aGlzLmdldE51bUdlb21ldHJpZXMoKSxhPW8uZ2V0TnVtR2VvbWV0cmllcygpLHU9MDt1PHMmJnU8YTspe3ZhciBsPXRoaXMuZ2V0R2VvbWV0cnlOKHUpLGM9by5nZXRHZW9tZXRyeU4odSkscD1sLmNvbXBhcmVUb1NhbWVDbGFzcyhjLHIpO2lmKDAhPT1wKXJldHVybiBwO3UrK31yZXR1cm4gdTxzPzE6dTxhPy0xOjB9fSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbigpe2lmKFQoYXJndW1lbnRzWzBdLGZ0KSlmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO2UrKyl0aGlzLl9nZW9tZXRyaWVzW2VdLmFwcGx5KHQpO2Vsc2UgaWYoVChhcmd1bWVudHNbMF0sVXQpKXt2YXIgbj1hcmd1bWVudHNbMF07aWYoMD09PXRoaXMuX2dlb21ldHJpZXMubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgaT0wO2k8dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGgmJih0aGlzLl9nZW9tZXRyaWVzW2ldLmFwcGx5KG4pLCFuLmlzRG9uZSgpKTtpKyspO24uaXNHZW9tZXRyeUNoYW5nZWQoKSYmdGhpcy5nZW9tZXRyeUNoYW5nZWQoKX1lbHNlIGlmKFQoYXJndW1lbnRzWzBdLFZ0KSl7dmFyIHI9YXJndW1lbnRzWzBdO3IuZmlsdGVyKHRoaXMpO2Zvcih2YXIgbz0wO288dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGg7bysrKXRoaXMuX2dlb21ldHJpZXNbb10uYXBwbHkocil9ZWxzZSBpZihUKGFyZ3VtZW50c1swXSxsdCkpe3ZhciBzPWFyZ3VtZW50c1swXTtzLmZpbHRlcih0aGlzKTtmb3IodmFyIGE9MDthPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO2ErKyl0aGlzLl9nZW9tZXRyaWVzW2FdLmFwcGx5KHMpfX0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0aGlzKSxldC5zaG91bGROZXZlclJlYWNoSGVyZSgpLG51bGx9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtlLl9nZW9tZXRyaWVzPW5ldyBBcnJheSh0aGlzLl9nZW9tZXRyaWVzLmxlbmd0aCkuZmlsbChudWxsKTtmb3IodmFyIG49MDtuPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO24rKyllLl9nZW9tZXRyaWVzW25dPXRoaXMuX2dlb21ldHJpZXNbbl0uY2xvbmUoKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuXCJHZW9tZXRyeUNvbGxlY3Rpb25cIn0sZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5fZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248dC5sZW5ndGg7bisrKXRbbl09dGhpcy5fZ2VvbWV0cmllc1tuXS5jb3B5KCk7cmV0dXJuIG5ldyBlKHQsdGhpcy5fZmFjdG9yeSl9LGUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO3QrKylpZighdGhpcy5fZ2VvbWV0cmllc1t0XS5pc0VtcHR5KCkpcmV0dXJuITE7cmV0dXJuITB9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LG4uc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMHg0ZjA3YmNiMWY4NTdkODAwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9KGN0KSxYdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dCYmKGUuX19wcm90b19fPXQpLChlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLmdldFNvcnRJbmRleD1mdW5jdGlvbigpe3JldHVybiBjdC5TT1JUSU5ERVhfTVVMVElMSU5FU1RSSU5HfSxlLnByb3RvdHlwZS5lcXVhbHNFeGFjdD1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuISF0aGlzLmlzRXF1aXZhbGVudENsYXNzKGUpJiZ0LnByb3RvdHlwZS5lcXVhbHNFeGFjdC5jYWxsKHRoaXMsZSxuKX1yZXR1cm4gdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5nZXRCb3VuZGFyeURpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ2xvc2VkKCk/cXQuRkFMU0U6MH0sZS5wcm90b3R5cGUuaXNDbG9zZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4hMTtmb3IodmFyIHQ9MDt0PHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO3QrKylpZighdGhpcy5fZ2VvbWV0cmllc1t0XS5pc0Nsb3NlZCgpKXJldHVybiExO3JldHVybiEwfSxlLnByb3RvdHlwZS5nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gMX0sZS5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9nZW9tZXRyaWVzLmxlbmd0aCxlPW5ldyBBcnJheSh0KS5maWxsKG51bGwpLG49MDtuPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO24rKyllW3QtMS1uXT10aGlzLl9nZW9tZXRyaWVzW25dLnJldmVyc2UoKTtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGUpfSxlLnByb3RvdHlwZS5nZXRCb3VuZGFyeT1mdW5jdGlvbigpe3JldHVybiBuZXcgWXQodGhpcykuZ2V0Qm91bmRhcnkoKX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuXCJNdWx0aUxpbmVTdHJpbmdcIn0sZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5fZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248dC5sZW5ndGg7bisrKXRbbl09dGhpcy5fZ2VvbWV0cmllc1tuXS5jb3B5KCk7cmV0dXJuIG5ldyBlKHQsdGhpcy5fZmFjdG9yeSl9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0F0XX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sbi5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybiAweDcxNTVkMmFiNGFmYTgwMDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsbiksZX0oenQpLFl0PWZ1bmN0aW9uKCl7aWYodGhpcy5fZ2VvbT1udWxsLHRoaXMuX2dlb21GYWN0PW51bGwsdGhpcy5fYm5SdWxlPW51bGwsdGhpcy5fZW5kcG9pbnRNYXA9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9Z3QuTU9EMl9CT1VOREFSWV9SVUxFO3RoaXMuX2dlb209dCx0aGlzLl9nZW9tRmFjdD10LmdldEZhY3RvcnkoKSx0aGlzLl9iblJ1bGU9ZX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dGhpcy5fZ2VvbT1uLHRoaXMuX2dlb21GYWN0PW4uZ2V0RmFjdG9yeSgpLHRoaXMuX2JuUnVsZT1pfX07WXQucHJvdG90eXBlLmJvdW5kYXJ5TXVsdGlMaW5lU3RyaW5nPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2dlb20uaXNFbXB0eSgpKXJldHVybiB0aGlzLmdldEVtcHR5TXVsdGlQb2ludCgpO3ZhciBlPXRoaXMuY29tcHV0ZUJvdW5kYXJ5Q29vcmRpbmF0ZXModCk7cmV0dXJuIDE9PT1lLmxlbmd0aD90aGlzLl9nZW9tRmFjdC5jcmVhdGVQb2ludChlWzBdKTp0aGlzLl9nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50RnJvbUNvb3JkcyhlKX0sWXQucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb20gaW5zdGFuY2VvZiBLdD90aGlzLmJvdW5kYXJ5TGluZVN0cmluZyh0aGlzLl9nZW9tKTp0aGlzLl9nZW9tIGluc3RhbmNlb2YgWHQ/dGhpcy5ib3VuZGFyeU11bHRpTGluZVN0cmluZyh0aGlzLl9nZW9tKTp0aGlzLl9nZW9tLmdldEJvdW5kYXJ5KCl9LFl0LnByb3RvdHlwZS5ib3VuZGFyeUxpbmVTdHJpbmc9ZnVuY3Rpb24odCl7aWYodGhpcy5fZ2VvbS5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZ2V0RW1wdHlNdWx0aVBvaW50KCk7aWYodC5pc0Nsb3NlZCgpKXtyZXR1cm4gdGhpcy5fYm5SdWxlLmlzSW5Cb3VuZGFyeSgyKT90LmdldFN0YXJ0UG9pbnQoKTp0aGlzLl9nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50KCl9cmV0dXJuIHRoaXMuX2dlb21GYWN0LmNyZWF0ZU11bHRpUG9pbnQoW3QuZ2V0U3RhcnRQb2ludCgpLHQuZ2V0RW5kUG9pbnQoKV0pfSxZdC5wcm90b3R5cGUuZ2V0RW1wdHlNdWx0aVBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb21GYWN0LmNyZWF0ZU11bHRpUG9pbnQoKX0sWXQucHJvdG90eXBlLmNvbXB1dGVCb3VuZGFyeUNvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBOdDt0aGlzLl9lbmRwb2ludE1hcD1uZXcgcDtmb3IodmFyIG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dC5nZXRHZW9tZXRyeU4obik7MCE9PWkuZ2V0TnVtUG9pbnRzKCkmJih0aGlzLmFkZEVuZHBvaW50KGkuZ2V0Q29vcmRpbmF0ZU4oMCkpLHRoaXMuYWRkRW5kcG9pbnQoaS5nZXRDb29yZGluYXRlTihpLmdldE51bVBvaW50cygpLTEpKSl9Zm9yKHZhciByPXRoaXMuX2VuZHBvaW50TWFwLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpLHM9by5nZXRWYWx1ZSgpLmNvdW50O3RoaXMuX2JuUnVsZS5pc0luQm91bmRhcnkocykmJmUuYWRkKG8uZ2V0S2V5KCkpfXJldHVybiBMdC50b0Nvb3JkaW5hdGVBcnJheShlKX0sWXQucHJvdG90eXBlLmFkZEVuZHBvaW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2VuZHBvaW50TWFwLmdldCh0KTtudWxsPT09ZSYmKGU9bmV3IGt0LHRoaXMuX2VuZHBvaW50TWFwLnB1dCh0LGUpKSxlLmNvdW50Kyt9LFl0LnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxZdC5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gWXR9LFl0LmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gbmV3IFl0KHQpLmdldEJvdW5kYXJ5KCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtyZXR1cm4gbmV3IFl0KGUsbikuZ2V0Qm91bmRhcnkoKX19O3ZhciBrdD1mdW5jdGlvbigpe3RoaXMuY291bnQ9bnVsbH07a3QucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGt0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBrdH07dmFyIGp0PWZ1bmN0aW9uKCl7fSxIdD17TkVXTElORTp7Y29uZmlndXJhYmxlOiEwfSxTSU1QTEVfT1JESU5BVEVfRk9STUFUOntjb25maWd1cmFibGU6ITB9fTtqdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sanQucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGp0fSxqdC5jaGFycz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgQXJyYXkoZSkuZmlsbChudWxsKSxpPTA7aTxlO2krKyluW2ldPXQ7cmV0dXJuIFN0cmluZyhuKX0sanQuZ2V0U3RhY2tUcmFjZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgZnVuY3Rpb24oKXt9LG49bmV3IGZ1bmN0aW9uKCl7fShlKTtyZXR1cm4gdC5wcmludFN0YWNrVHJhY2UobiksZS50b1N0cmluZygpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89XCJcIixzPW5ldyBmdW5jdGlvbigpe30obmV3IGZ1bmN0aW9uKCl7fShqdC5nZXRTdGFja1RyYWNlKGkpKSksYT0wO2E8cjthKyspdHJ5e28rPXMucmVhZExpbmUoKStqdC5ORVdMSU5FfWNhdGNoKHQpe2lmKCEodCBpbnN0YW5jZW9mIGcpKXRocm93IHQ7ZXQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKX1yZXR1cm4gb319LGp0LnNwbGl0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUubGVuZ3RoLGk9bmV3IE50LHI9XCJcIit0LG89ci5pbmRleE9mKGUpO28+PTA7KXt2YXIgcz1yLnN1YnN0cmluZygwLG8pO2kuYWRkKHMpLG89KHI9ci5zdWJzdHJpbmcobytuKSkuaW5kZXhPZihlKX1yLmxlbmd0aD4wJiZpLmFkZChyKTtmb3IodmFyIGE9bmV3IEFycmF5KGkuc2l6ZSgpKS5maWxsKG51bGwpLHU9MDt1PGEubGVuZ3RoO3UrKylhW3VdPWkuZ2V0KHUpO3JldHVybiBhfSxqdC50b1N0cmluZz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIGp0LlNJTVBMRV9PUkRJTkFURV9GT1JNQVQuZm9ybWF0KHQpfX0sanQuc3BhY2VzPWZ1bmN0aW9uKHQpe3JldHVybiBqdC5jaGFycyhcIiBcIix0KX0sSHQuTkVXTElORS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gWS5nZXRQcm9wZXJ0eShcImxpbmUuc2VwYXJhdG9yXCIpfSxIdC5TSU1QTEVfT1JESU5BVEVfRk9STUFULmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgZnVuY3Rpb24oKXt9KFwiMC4jXCIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhqdCxIdCk7dmFyIFd0PWZ1bmN0aW9uKCl7fTtXdC5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sV3QucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFd0fSxXdC5jb3B5Q29vcmQ9ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciByPU1hdGgubWluKHQuZ2V0RGltZW5zaW9uKCksbi5nZXREaW1lbnNpb24oKSksbz0wO288cjtvKyspbi5zZXRPcmRpbmF0ZShpLG8sdC5nZXRPcmRpbmF0ZShlLG8pKX0sV3QuaXNSaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2l6ZSgpO3JldHVybiAwPT09ZXx8IShlPD0zKSYmKHQuZ2V0T3JkaW5hdGUoMCxWLlgpPT09dC5nZXRPcmRpbmF0ZShlLTEsVi5YKSYmdC5nZXRPcmRpbmF0ZSgwLFYuWSk9PT10LmdldE9yZGluYXRlKGUtMSxWLlkpKX0sV3QuaXNFcXVhbD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc2l6ZSgpO2lmKG4hPT1lLnNpemUoKSlyZXR1cm4hMTtmb3IodmFyIGk9TWF0aC5taW4odC5nZXREaW1lbnNpb24oKSxlLmdldERpbWVuc2lvbigpKSxyPTA7cjxuO3IrKylmb3IodmFyIG89MDtvPGk7bysrKXt2YXIgcz10LmdldE9yZGluYXRlKHIsbyksYT1lLmdldE9yZGluYXRlKHIsbyk7aWYodC5nZXRPcmRpbmF0ZShyLG8pIT09ZS5nZXRPcmRpbmF0ZShyLG8pJiYoIXYuaXNOYU4ocyl8fCF2LmlzTmFOKGEpKSlyZXR1cm4hMX1yZXR1cm4hMH0sV3QuZXh0ZW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmNyZWF0ZShuLGUuZ2V0RGltZW5zaW9uKCkpLHI9ZS5zaXplKCk7aWYoV3QuY29weShlLDAsaSwwLHIpLHI+MClmb3IodmFyIG89cjtvPG47bysrKVd0LmNvcHkoZSxyLTEsaSxvLDEpO3JldHVybiBpfSxXdC5yZXZlcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnNpemUoKS0xLG49TWF0aC50cnVuYyhlLzIpLGk9MDtpPD1uO2krKylXdC5zd2FwKHQsaSxlLWkpfSxXdC5zd2FwPWZ1bmN0aW9uKHQsZSxuKXtpZihlPT09bilyZXR1cm4gbnVsbDtmb3IodmFyIGk9MDtpPHQuZ2V0RGltZW5zaW9uKCk7aSsrKXt2YXIgcj10LmdldE9yZGluYXRlKGUsaSk7dC5zZXRPcmRpbmF0ZShlLGksdC5nZXRPcmRpbmF0ZShuLGkpKSx0LnNldE9yZGluYXRlKG4saSxyKX19LFd0LmNvcHk9ZnVuY3Rpb24odCxlLG4saSxyKXtmb3IodmFyIG89MDtvPHI7bysrKVd0LmNvcHlDb29yZCh0LGUrbyxuLGkrbyl9LFd0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPXQuc2l6ZSgpO2lmKDA9PT1lKXJldHVyblwiKClcIjt2YXIgbj10LmdldERpbWVuc2lvbigpLGk9bmV3IEQ7aS5hcHBlbmQoXCIoXCIpO2Zvcih2YXIgcj0wO3I8ZTtyKyspe3I+MCYmaS5hcHBlbmQoXCIgXCIpO2Zvcih2YXIgbz0wO288bjtvKyspbz4wJiZpLmFwcGVuZChcIixcIiksaS5hcHBlbmQoanQudG9TdHJpbmcodC5nZXRPcmRpbmF0ZShyLG8pKSl9cmV0dXJuIGkuYXBwZW5kKFwiKVwiKSxpLnRvU3RyaW5nKCl9fSxXdC5lbnN1cmVWYWxpZFJpbmc9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLnNpemUoKTtpZigwPT09bilyZXR1cm4gZTtpZihuPD0zKXJldHVybiBXdC5jcmVhdGVDbG9zZWRSaW5nKHQsZSw0KTtyZXR1cm4gZS5nZXRPcmRpbmF0ZSgwLFYuWCk9PT1lLmdldE9yZGluYXRlKG4tMSxWLlgpJiZlLmdldE9yZGluYXRlKDAsVi5ZKT09PWUuZ2V0T3JkaW5hdGUobi0xLFYuWSk/ZTpXdC5jcmVhdGVDbG9zZWRSaW5nKHQsZSxuKzEpfSxXdC5jcmVhdGVDbG9zZWRSaW5nPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmNyZWF0ZShuLGUuZ2V0RGltZW5zaW9uKCkpLHI9ZS5zaXplKCk7V3QuY29weShlLDAsaSwwLHIpO2Zvcih2YXIgbz1yO288bjtvKyspV3QuY29weShlLDAsaSxvLDEpO3JldHVybiBpfTt2YXIgS3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLG4pLHRoaXMuX3BvaW50cz1udWxsLHRoaXMuaW5pdChlKX10JiYoZS5fX3Byb3RvX189dCksKGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzZXJpYWxWZXJzaW9uVUlEOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUuY29tcHV0ZUVudmVsb3BlSW50ZXJuYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bmV3IGo6dGhpcy5fcG9pbnRzLmV4cGFuZEVudmVsb3BlKG5ldyBqKX0sZS5wcm90b3R5cGUuaXNSaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDbG9zZWQoKSYmdGhpcy5pc1NpbXBsZSgpfSxlLnByb3RvdHlwZS5nZXRTb3J0SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TT1JUSU5ERVhfTElORVNUUklOR30sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9pbnRzLnRvQ29vcmRpbmF0ZUFycmF5KCl9LGUucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyhlKSlyZXR1cm4hMTt2YXIgaT1lO2lmKHRoaXMuX3BvaW50cy5zaXplKCkhPT1pLl9wb2ludHMuc2l6ZSgpKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dGhpcy5fcG9pbnRzLnNpemUoKTtyKyspaWYoIXRoaXMuZXF1YWwodGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUociksaS5fcG9pbnRzLmdldENvb3JkaW5hdGUociksbikpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIHQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxNYXRoLnRydW5jKHRoaXMuX3BvaW50cy5zaXplKCkvMik7dCsrKXt2YXIgZT10aGlzLl9wb2ludHMuc2l6ZSgpLTEtdDtpZighdGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUodCkuZXF1YWxzKHRoaXMuX3BvaW50cy5nZXRDb29yZGluYXRlKGUpKSlyZXR1cm4gdGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUodCkuY29tcGFyZVRvKHRoaXMuX3BvaW50cy5nZXRDb29yZGluYXRlKGUpKT4wJiZXdC5yZXZlcnNlKHRoaXMuX3BvaW50cyksbnVsbH19LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bnVsbDp0aGlzLl9wb2ludHMuZ2V0Q29vcmRpbmF0ZSgwKX0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnlEaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Nsb3NlZCgpP3F0LkZBTFNFOjB9LGUucHJvdG90eXBlLmlzQ2xvc2VkPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNFbXB0eSgpJiZ0aGlzLmdldENvb3JkaW5hdGVOKDApLmVxdWFsczJEKHRoaXMuZ2V0Q29vcmRpbmF0ZU4odGhpcy5nZXROdW1Qb2ludHMoKS0xKSl9LGUucHJvdG90eXBlLmdldEVuZFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP251bGw6dGhpcy5nZXRQb2ludE4odGhpcy5nZXROdW1Qb2ludHMoKS0xKX0sZS5wcm90b3R5cGUuZ2V0RGltZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIDF9LGUucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiBhdC5jb21wdXRlTGVuZ3RoKHRoaXMuX3BvaW50cyl9LGUucHJvdG90eXBlLmdldE51bVBvaW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2ludHMuc2l6ZSgpfSxlLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcG9pbnRzLmNvcHkoKTtXdC5yZXZlcnNlKHQpO3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKHQpfSxlLnByb3RvdHlwZS5jb21wYXJlVG9TYW1lQ2xhc3M9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPTAsbj0wO2U8dGhpcy5fcG9pbnRzLnNpemUoKSYmbjx0Ll9wb2ludHMuc2l6ZSgpOyl7dmFyIGk9dGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUoZSkuY29tcGFyZVRvKHQuX3BvaW50cy5nZXRDb29yZGluYXRlKG4pKTtpZigwIT09aSlyZXR1cm4gaTtlKyssbisrfXJldHVybiBlPHRoaXMuX3BvaW50cy5zaXplKCk/MTpuPHQuX3BvaW50cy5zaXplKCk/LTE6MH1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdO3JldHVybiBhcmd1bWVudHNbMV0uY29tcGFyZSh0aGlzLl9wb2ludHMsci5fcG9pbnRzKX19LGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKCl7aWYoVChhcmd1bWVudHNbMF0sZnQpKWZvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wO2U8dGhpcy5fcG9pbnRzLnNpemUoKTtlKyspdC5maWx0ZXIodGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUoZSkpO2Vsc2UgaWYoVChhcmd1bWVudHNbMF0sVXQpKXt2YXIgbj1hcmd1bWVudHNbMF07aWYoMD09PXRoaXMuX3BvaW50cy5zaXplKCkpcmV0dXJuIG51bGw7Zm9yKHZhciBpPTA7aTx0aGlzLl9wb2ludHMuc2l6ZSgpJiYobi5maWx0ZXIodGhpcy5fcG9pbnRzLGkpLCFuLmlzRG9uZSgpKTtpKyspO24uaXNHZW9tZXRyeUNoYW5nZWQoKSYmdGhpcy5nZW9tZXRyeUNoYW5nZWQoKX1lbHNlIGlmKFQoYXJndW1lbnRzWzBdLFZ0KSl7YXJndW1lbnRzWzBdLmZpbHRlcih0aGlzKX1lbHNlIGlmKFQoYXJndW1lbnRzWzBdLGx0KSl7YXJndW1lbnRzWzBdLmZpbHRlcih0aGlzKX19LGUucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBZdCh0aGlzKS5nZXRCb3VuZGFyeSgpfSxlLnByb3RvdHlwZS5pc0VxdWl2YWxlbnRDbGFzcz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5fcG9pbnRzPXRoaXMuX3BvaW50cy5jbG9uZSgpLGV9LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGVOPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wb2ludHMuZ2V0Q29vcmRpbmF0ZSh0KX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuXCJMaW5lU3RyaW5nXCJ9LGUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy5fcG9pbnRzLmNvcHkoKSx0aGlzLl9mYWN0b3J5KX0sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvaW50c30sZS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fcG9pbnRzLnNpemUoKX0sZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbih0KXtpZihudWxsPT09dCYmKHQ9dGhpcy5nZXRGYWN0b3J5KCkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZShbXSkpLDE9PT10LnNpemUoKSl0aHJvdyBuZXcgbShcIkludmFsaWQgbnVtYmVyIG9mIHBvaW50cyBpbiBMaW5lU3RyaW5nIChmb3VuZCBcIit0LnNpemUoKStcIiAtIG11c3QgYmUgMCBvciA+PSAyKVwiKTt0aGlzLl9wb2ludHM9dH0sZS5wcm90b3R5cGUuaXNDb29yZGluYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fcG9pbnRzLnNpemUoKTtlKyspaWYodGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUoZSkuZXF1YWxzKHQpKXJldHVybiEwO3JldHVybiExfSxlLnByb3RvdHlwZS5nZXRTdGFydFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP251bGw6dGhpcy5nZXRQb2ludE4oMCl9LGUucHJvdG90eXBlLmdldFBvaW50Tj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQodGhpcy5fcG9pbnRzLmdldENvb3JkaW5hdGUodCkpfSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltBdF19LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LG4uc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMHgyYjJiNTFiYTQzNWM4ZTAwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9KGN0KSxKdD1mdW5jdGlvbigpe307SnQucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LEp0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBKdH07dmFyIFF0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxuKSx0aGlzLl9jb29yZGluYXRlcz1lfHxudWxsLHRoaXMuaW5pdCh0aGlzLl9jb29yZGluYXRlcyl9dCYmKGUuX19wcm90b19fPXQpLChlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLmNvbXB1dGVFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIG5ldyBqO3ZhciB0PW5ldyBqO3JldHVybiB0LmV4cGFuZFRvSW5jbHVkZSh0aGlzLl9jb29yZGluYXRlcy5nZXRYKDApLHRoaXMuX2Nvb3JkaW5hdGVzLmdldFkoMCkpLHR9LGUucHJvdG90eXBlLmdldFNvcnRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0LlNPUlRJTkRFWF9QT0lOVH0sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/W106W3RoaXMuZ2V0Q29vcmRpbmF0ZSgpXX0sZS5wcm90b3R5cGUuZXF1YWxzRXhhY3Q9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3JldHVybiEhdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyhlKSYmKCEoIXRoaXMuaXNFbXB0eSgpfHwhZS5pc0VtcHR5KCkpfHx0aGlzLmlzRW1wdHkoKT09PWUuaXNFbXB0eSgpJiZ0aGlzLmVxdWFsKGUuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLG4pKX1yZXR1cm4gdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuX2Nvb3JkaW5hdGVzLnNpemUoKT90aGlzLl9jb29yZGluYXRlcy5nZXRDb29yZGluYXRlKDApOm51bGx9LGUucHJvdG90eXBlLmdldEJvdW5kYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHF0LkZBTFNFfSxlLnByb3RvdHlwZS5nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZS5wcm90b3R5cGUuZ2V0TnVtUG9pbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpPzA6MX0sZS5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvcHkoKX0sZS5wcm90b3R5cGUuZ2V0WD1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmdldENvb3JkaW5hdGUoKSl0aHJvdyBuZXcgRXJyb3IoXCJnZXRYIGNhbGxlZCBvbiBlbXB0eSBQb2ludFwiKTtyZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlKCkueH0sZS5wcm90b3R5cGUuY29tcGFyZVRvU2FtZUNsYXNzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlKCkuY29tcGFyZVRvKHQuZ2V0Q29vcmRpbmF0ZSgpKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiBhcmd1bWVudHNbMV0uY29tcGFyZSh0aGlzLl9jb29yZGluYXRlcyxlLl9jb29yZGluYXRlcyl9fSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbigpe2lmKFQoYXJndW1lbnRzWzBdLGZ0KSl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiBudWxsO3QuZmlsdGVyKHRoaXMuZ2V0Q29vcmRpbmF0ZSgpKX1lbHNlIGlmKFQoYXJndW1lbnRzWzBdLFV0KSl7dmFyIGU9YXJndW1lbnRzWzBdO2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiBudWxsO2UuZmlsdGVyKHRoaXMuX2Nvb3JkaW5hdGVzLDApLGUuaXNHZW9tZXRyeUNoYW5nZWQoKSYmdGhpcy5nZW9tZXRyeUNoYW5nZWQoKX1lbHNlIGlmKFQoYXJndW1lbnRzWzBdLFZ0KSl7YXJndW1lbnRzWzBdLmZpbHRlcih0aGlzKX1lbHNlIGlmKFQoYXJndW1lbnRzWzBdLGx0KSl7YXJndW1lbnRzWzBdLmZpbHRlcih0aGlzKX19LGUucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiBlLl9jb29yZGluYXRlcz10aGlzLl9jb29yZGluYXRlcy5jbG9uZSgpLGV9LGUucHJvdG90eXBlLmdldEdlb21ldHJ5VHlwZT1mdW5jdGlvbigpe3JldHVyblwiUG9pbnRcIn0sZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLl9jb29yZGluYXRlcy5jb3B5KCksdGhpcy5fZmFjdG9yeSl9LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGVTZXF1ZW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb29yZGluYXRlc30sZS5wcm90b3R5cGUuZ2V0WT1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmdldENvb3JkaW5hdGUoKSl0aHJvdyBuZXcgRXJyb3IoXCJnZXRZIGNhbGxlZCBvbiBlbXB0eSBQb2ludFwiKTtyZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlKCkueX0sZS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fY29vcmRpbmF0ZXMuc2l6ZSgpfSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQpe251bGw9PT10JiYodD10aGlzLmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSksZXQuaXNUcnVlKHQuc2l6ZSgpPD0xKSx0aGlzLl9jb29yZGluYXRlcz10fSxlLnByb3RvdHlwZS5pc1NpbXBsZT1mdW5jdGlvbigpe3JldHVybiEwfSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltKdF19LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LG4uc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMHg0NDA3N2JhZDE2MWNiYzAwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9KGN0KSxadD1mdW5jdGlvbigpe307WnQucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFp0LnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBadH07dmFyICR0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkpe2lmKHQuY2FsbCh0aGlzLGkpLHRoaXMuX3NoZWxsPW51bGwsdGhpcy5faG9sZXM9bnVsbCxudWxsPT09ZSYmKGU9dGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZWFyUmluZygpKSxudWxsPT09biYmKG49W10pLHQuaGFzTnVsbEVsZW1lbnRzKG4pKXRocm93IG5ldyBtKFwiaG9sZXMgbXVzdCBub3QgY29udGFpbiBudWxsIGVsZW1lbnRzXCIpO2lmKGUuaXNFbXB0eSgpJiZ0Lmhhc05vbkVtcHR5RWxlbWVudHMobikpdGhyb3cgbmV3IG0oXCJzaGVsbCBpcyBlbXB0eSBidXQgaG9sZXMgYXJlIG5vdFwiKTt0aGlzLl9zaGVsbD1lLHRoaXMuX2hvbGVzPW59dCYmKGUuX19wcm90b19fPXQpLChlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLmNvbXB1dGVFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoZWxsLmdldEVudmVsb3BlSW50ZXJuYWwoKX0sZS5wcm90b3R5cGUuZ2V0U29ydEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHQuU09SVElOREVYX1BPTFlHT059LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuW107Zm9yKHZhciB0PW5ldyBBcnJheSh0aGlzLmdldE51bVBvaW50cygpKS5maWxsKG51bGwpLGU9LTEsbj10aGlzLl9zaGVsbC5nZXRDb29yZGluYXRlcygpLGk9MDtpPG4ubGVuZ3RoO2krKyl0WysrZV09bltpXTtmb3IodmFyIHI9MDtyPHRoaXMuX2hvbGVzLmxlbmd0aDtyKyspZm9yKHZhciBvPXRoaXMuX2hvbGVzW3JdLmdldENvb3JkaW5hdGVzKCkscz0wO3M8by5sZW5ndGg7cysrKXRbKytlXT1vW3NdO3JldHVybiB0fSxlLnByb3RvdHlwZS5nZXRBcmVhPWZ1bmN0aW9uKCl7dmFyIHQ9MDt0Kz1NYXRoLmFicyhhdC5zaWduZWRBcmVhKHRoaXMuX3NoZWxsLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKSk7Zm9yKHZhciBlPTA7ZTx0aGlzLl9ob2xlcy5sZW5ndGg7ZSsrKXQtPU1hdGguYWJzKGF0LnNpZ25lZEFyZWEodGhpcy5faG9sZXNbZV0uZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpKTtyZXR1cm4gdH0sZS5wcm90b3R5cGUuaXNSZWN0YW5nbGU9ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5nZXROdW1JbnRlcmlvclJpbmcoKSlyZXR1cm4hMTtpZihudWxsPT09dGhpcy5fc2hlbGwpcmV0dXJuITE7aWYoNSE9PXRoaXMuX3NoZWxsLmdldE51bVBvaW50cygpKXJldHVybiExO2Zvcih2YXIgdD10aGlzLl9zaGVsbC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSxlPXRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLG49MDtuPDU7bisrKXt2YXIgaT10LmdldFgobik7aWYoaSE9PWUuZ2V0TWluWCgpJiZpIT09ZS5nZXRNYXhYKCkpcmV0dXJuITE7dmFyIHI9dC5nZXRZKG4pO2lmKHIhPT1lLmdldE1pblkoKSYmciE9PWUuZ2V0TWF4WSgpKXJldHVybiExfWZvcih2YXIgbz10LmdldFgoMCkscz10LmdldFkoMCksYT0xO2E8PTQ7YSsrKXt2YXIgdT10LmdldFgoYSksbD10LmdldFkoYSk7aWYodSE9PW89PT0obCE9PXMpKXJldHVybiExO289dSxzPWx9cmV0dXJuITB9LGUucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyhlKSlyZXR1cm4hMTt2YXIgaT1lLHI9dGhpcy5fc2hlbGwsbz1pLl9zaGVsbDtpZighci5lcXVhbHNFeGFjdChvLG4pKXJldHVybiExO2lmKHRoaXMuX2hvbGVzLmxlbmd0aCE9PWkuX2hvbGVzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHM9MDtzPHRoaXMuX2hvbGVzLmxlbmd0aDtzKyspaWYoIXRoaXMuX2hvbGVzW3NdLmVxdWFsc0V4YWN0KGkuX2hvbGVzW3NdLG4pKXJldHVybiExO3JldHVybiEwfXJldHVybiB0LnByb3RvdHlwZS5lcXVhbHNFeGFjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLm5vcm1hbGl6ZT1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLm5vcm1hbGl6ZSh0aGlzLl9zaGVsbCwhMCk7Zm9yKHZhciB0PTA7dDx0aGlzLl9ob2xlcy5sZW5ndGg7dCsrKXRoaXMubm9ybWFsaXplKHRoaXMuX2hvbGVzW3RdLCExKTtHdC5zb3J0KHRoaXMuX2hvbGVzKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07aWYoZS5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dmFyIGk9bmV3IEFycmF5KGUuZ2V0Q29vcmRpbmF0ZXMoKS5sZW5ndGgtMSkuZmlsbChudWxsKTtZLmFycmF5Y29weShlLmdldENvb3JkaW5hdGVzKCksMCxpLDAsaS5sZW5ndGgpO3ZhciByPUx0Lm1pbkNvb3JkaW5hdGUoZS5nZXRDb29yZGluYXRlcygpKTtMdC5zY3JvbGwoaSxyKSxZLmFycmF5Y29weShpLDAsZS5nZXRDb29yZGluYXRlcygpLDAsaS5sZW5ndGgpLGUuZ2V0Q29vcmRpbmF0ZXMoKVtpLmxlbmd0aF09aVswXSxhdC5pc0NDVyhlLmdldENvb3JkaW5hdGVzKCkpPT09biYmTHQucmV2ZXJzZShlLmdldENvb3JkaW5hdGVzKCkpfX0sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGVsbC5nZXRDb29yZGluYXRlKCl9LGUucHJvdG90eXBlLmdldE51bUludGVyaW9yUmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob2xlcy5sZW5ndGh9LGUucHJvdG90eXBlLmdldEJvdW5kYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIDF9LGUucHJvdG90eXBlLmdldERpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiAyfSxlLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD0wO3QrPXRoaXMuX3NoZWxsLmdldExlbmd0aCgpO2Zvcih2YXIgZT0wO2U8dGhpcy5faG9sZXMubGVuZ3RoO2UrKyl0Kz10aGlzLl9ob2xlc1tlXS5nZXRMZW5ndGgoKTtyZXR1cm4gdH0sZS5wcm90b3R5cGUuZ2V0TnVtUG9pbnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX3NoZWxsLmdldE51bVBvaW50cygpLGU9MDtlPHRoaXMuX2hvbGVzLmxlbmd0aDtlKyspdCs9dGhpcy5faG9sZXNbZV0uZ2V0TnVtUG9pbnRzKCk7cmV0dXJuIHR9LGUucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvcHkoKTt0Ll9zaGVsbD10aGlzLl9zaGVsbC5jb3B5KCkucmV2ZXJzZSgpLHQuX2hvbGVzPW5ldyBBcnJheSh0aGlzLl9ob2xlcy5sZW5ndGgpLmZpbGwobnVsbCk7Zm9yKHZhciBlPTA7ZTx0aGlzLl9ob2xlcy5sZW5ndGg7ZSsrKXQuX2hvbGVzW2VdPXRoaXMuX2hvbGVzW2VdLmNvcHkoKS5yZXZlcnNlKCk7cmV0dXJuIHR9LGUucHJvdG90eXBlLmNvbnZleEh1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFeHRlcmlvclJpbmcoKS5jb252ZXhIdWxsKCl9LGUucHJvdG90eXBlLmNvbXBhcmVUb1NhbWVDbGFzcz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLl9zaGVsbCxuPXQuX3NoZWxsO3JldHVybiBlLmNvbXBhcmVUb1NhbWVDbGFzcyhuKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89aSxzPXRoaXMuX3NoZWxsLGE9by5fc2hlbGwsdT1zLmNvbXBhcmVUb1NhbWVDbGFzcyhhLHIpO2lmKDAhPT11KXJldHVybiB1O2Zvcih2YXIgbD10aGlzLmdldE51bUludGVyaW9yUmluZygpLGM9by5nZXROdW1JbnRlcmlvclJpbmcoKSxwPTA7cDxsJiZwPGM7KXt2YXIgaD10aGlzLmdldEludGVyaW9yUmluZ04ocCksZj1vLmdldEludGVyaW9yUmluZ04ocCksZz1oLmNvbXBhcmVUb1NhbWVDbGFzcyhmLHIpO2lmKDAhPT1nKXJldHVybiBnO3ArK31yZXR1cm4gcDxsPzE6cDxjPy0xOjB9fSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtpZihUKHQsZnQpKXt0aGlzLl9zaGVsbC5hcHBseSh0KTtmb3IodmFyIGU9MDtlPHRoaXMuX2hvbGVzLmxlbmd0aDtlKyspdGhpcy5faG9sZXNbZV0uYXBwbHkodCl9ZWxzZSBpZihUKHQsVXQpKXtpZih0aGlzLl9zaGVsbC5hcHBseSh0KSwhdC5pc0RvbmUoKSlmb3IodmFyIG49MDtuPHRoaXMuX2hvbGVzLmxlbmd0aCYmKHRoaXMuX2hvbGVzW25dLmFwcGx5KHQpLCF0LmlzRG9uZSgpKTtuKyspO3QuaXNHZW9tZXRyeUNoYW5nZWQoKSYmdGhpcy5nZW9tZXRyeUNoYW5nZWQoKX1lbHNlIGlmKFQodCxWdCkpdC5maWx0ZXIodGhpcyk7ZWxzZSBpZihUKHQsbHQpKXt0LmZpbHRlcih0aGlzKSx0aGlzLl9zaGVsbC5hcHBseSh0KTtmb3IodmFyIGk9MDtpPHRoaXMuX2hvbGVzLmxlbmd0aDtpKyspdGhpcy5faG9sZXNbaV0uYXBwbHkodCl9fSxlLnByb3RvdHlwZS5nZXRCb3VuZGFyeT1mdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoKTt2YXIgdD1uZXcgQXJyYXkodGhpcy5faG9sZXMubGVuZ3RoKzEpLmZpbGwobnVsbCk7dFswXT10aGlzLl9zaGVsbDtmb3IodmFyIGU9MDtlPHRoaXMuX2hvbGVzLmxlbmd0aDtlKyspdFtlKzFdPXRoaXMuX2hvbGVzW2VdO3JldHVybiB0Lmxlbmd0aDw9MT90aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKHRbMF0uZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpOnRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpTGluZVN0cmluZyh0KX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO2UuX3NoZWxsPXRoaXMuX3NoZWxsLmNsb25lKCksZS5faG9sZXM9bmV3IEFycmF5KHRoaXMuX2hvbGVzLmxlbmd0aCkuZmlsbChudWxsKTtmb3IodmFyIG49MDtuPHRoaXMuX2hvbGVzLmxlbmd0aDtuKyspZS5faG9sZXNbbl09dGhpcy5faG9sZXNbbl0uY2xvbmUoKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuXCJQb2x5Z29uXCJ9LGUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fc2hlbGwuY29weSgpLG49bmV3IEFycmF5KHRoaXMuX2hvbGVzLmxlbmd0aCkuZmlsbChudWxsKSxpPTA7aTxuLmxlbmd0aDtpKyspbltpXT10aGlzLl9ob2xlc1tpXS5jb3B5KCk7cmV0dXJuIG5ldyBlKHQsbix0aGlzLl9mYWN0b3J5KX0sZS5wcm90b3R5cGUuZ2V0RXh0ZXJpb3JSaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoZWxsfSxlLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoZWxsLmlzRW1wdHkoKX0sZS5wcm90b3R5cGUuZ2V0SW50ZXJpb3JSaW5nTj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faG9sZXNbdF19LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1p0XX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sbi5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybi0weDMwN2ZmZWZkOGRjOTcyMDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsbiksZX0oY3QpLHRlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX10JiYoZS5fX3Byb3RvX189dCksKGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzZXJpYWxWZXJzaW9uVUlEOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUuZ2V0U29ydEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIGN0LlNPUlRJTkRFWF9NVUxUSVBPSU5UfSxlLnByb3RvdHlwZS5pc1ZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtyZXR1cm4hIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3MoZSkmJnQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmNhbGwodGhpcyxlLG4pfXJldHVybiB0LnByb3RvdHlwZS5lcXVhbHNFeGFjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLl9nZW9tZXRyaWVzW2VdLmdldENvb3JkaW5hdGUoKX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLmdldEJvdW5kYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHF0LkZBTFNFfSxlLnByb3RvdHlwZS5nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKG51bGwpfSxlLnByb3RvdHlwZS5nZXRHZW9tZXRyeVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpUG9pbnRcIn0sZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5fZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248dC5sZW5ndGg7bisrKXRbbl09dGhpcy5fZ2VvbWV0cmllc1tuXS5jb3B5KCk7cmV0dXJuIG5ldyBlKHQsdGhpcy5fZmFjdG9yeSl9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0p0XX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sbi5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybi0weDZmYjFlZDQxNjJlMGZjMDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsbiksZX0oenQpLGVlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXtlIGluc3RhbmNlb2YgQyYmbiBpbnN0YW5jZW9mIF9lJiYoZT1uLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoZSkpLHQuY2FsbCh0aGlzLGUsbiksdGhpcy52YWxpZGF0ZUNvbnN0cnVjdGlvbigpfXQmJihlLl9fcHJvdG9fXz10KSwoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWU7dmFyIG49e01JTklNVU1fVkFMSURfU0laRTp7Y29uZmlndXJhYmxlOiEwfSxzZXJpYWxWZXJzaW9uVUlEOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUuZ2V0U29ydEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIGN0LlNPUlRJTkRFWF9MSU5FQVJSSU5HfSxlLnByb3RvdHlwZS5nZXRCb3VuZGFyeURpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiBxdC5GQUxTRX0sZS5wcm90b3R5cGUuaXNDbG9zZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuaXNFbXB0eSgpfHx0LnByb3RvdHlwZS5pc0Nsb3NlZC5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcG9pbnRzLmNvcHkoKTtXdC5yZXZlcnNlKHQpO3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKHQpfSxlLnByb3RvdHlwZS52YWxpZGF0ZUNvbnN0cnVjdGlvbj1mdW5jdGlvbigpe2lmKCF0aGlzLmlzRW1wdHkoKSYmIXQucHJvdG90eXBlLmlzQ2xvc2VkLmNhbGwodGhpcykpdGhyb3cgbmV3IG0oXCJQb2ludHMgb2YgTGluZWFyUmluZyBkbyBub3QgZm9ybSBhIGNsb3NlZCBsaW5lc3RyaW5nXCIpO2lmKHRoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkuc2l6ZSgpPj0xJiZ0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLnNpemUoKTxlLk1JTklNVU1fVkFMSURfU0laRSl0aHJvdyBuZXcgbShcIkludmFsaWQgbnVtYmVyIG9mIHBvaW50cyBpbiBMaW5lYXJSaW5nIChmb3VuZCBcIit0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLnNpemUoKStcIiAtIG11c3QgYmUgMCBvciA+PSA0KVwiKX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuXCJMaW5lYXJSaW5nXCJ9LGUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy5fcG9pbnRzLmNvcHkoKSx0aGlzLl9mYWN0b3J5KX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sbi5NSU5JTVVNX1ZBTElEX1NJWkUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDR9LG4uc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMHgzYjIyOWUyNjIzNjdhNjAwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9KEt0KSxuZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dCYmKGUuX19wcm90b19fPXQpLChlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLmdldFNvcnRJbmRleD1mdW5jdGlvbigpe3JldHVybiBjdC5TT1JUSU5ERVhfTVVMVElQT0xZR09OfSxlLnByb3RvdHlwZS5lcXVhbHNFeGFjdD1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuISF0aGlzLmlzRXF1aXZhbGVudENsYXNzKGUpJiZ0LnByb3RvdHlwZS5lcXVhbHNFeGFjdC5jYWxsKHRoaXMsZSxuKX1yZXR1cm4gdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5nZXRCb3VuZGFyeURpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiAxfSxlLnByb3RvdHlwZS5nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gMn0sZS5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9nZW9tZXRyaWVzLmxlbmd0aCxlPW5ldyBBcnJheSh0KS5maWxsKG51bGwpLG49MDtuPHRoaXMuX2dlb21ldHJpZXMubGVuZ3RoO24rKyllW25dPXRoaXMuX2dlb21ldHJpZXNbbl0ucmV2ZXJzZSgpO3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aVBvbHlnb24oZSl9LGUucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpTGluZVN0cmluZygpO2Zvcih2YXIgdD1uZXcgTnQsZT0wO2U8dGhpcy5fZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKWZvcih2YXIgbj10aGlzLl9nZW9tZXRyaWVzW2VdLmdldEJvdW5kYXJ5KCksaT0wO2k8bi5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXQuYWRkKG4uZ2V0R2VvbWV0cnlOKGkpKTt2YXIgcj1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpTGluZVN0cmluZyh0LnRvQXJyYXkocikpfSxlLnByb3RvdHlwZS5nZXRHZW9tZXRyeVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpUG9seWdvblwifSxlLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSh0aGlzLl9nZW9tZXRyaWVzLmxlbmd0aCkuZmlsbChudWxsKSxuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXT10aGlzLl9nZW9tZXRyaWVzW25dLmNvcHkoKTtyZXR1cm4gbmV3IGUodCx0aGlzLl9mYWN0b3J5KX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bWnRdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxuLnNlcmlhbFZlcnNpb25VSUQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuLTB4N2E1YWExMzY5MTcxOTgwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9KHp0KSxpZT1mdW5jdGlvbih0KXt0aGlzLl9mYWN0b3J5PXR8fG51bGwsdGhpcy5faXNVc2VyRGF0YUNvcGllZD0hMX0scmU9e05vT3BHZW9tZXRyeU9wZXJhdGlvbjp7Y29uZmlndXJhYmxlOiEwfSxDb29yZGluYXRlT3BlcmF0aW9uOntjb25maWd1cmFibGU6ITB9LENvb3JkaW5hdGVTZXF1ZW5jZU9wZXJhdGlvbjp7Y29uZmlndXJhYmxlOiEwfX07aWUucHJvdG90eXBlLnNldENvcHlVc2VyRGF0YT1mdW5jdGlvbih0KXt0aGlzLl9pc1VzZXJEYXRhQ29waWVkPXR9LGllLnByb3RvdHlwZS5lZGl0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5lZGl0SW50ZXJuYWwodCxlKTtyZXR1cm4gdGhpcy5faXNVc2VyRGF0YUNvcGllZCYmbi5zZXRVc2VyRGF0YSh0LmdldFVzZXJEYXRhKCkpLG59LGllLnByb3RvdHlwZS5lZGl0SW50ZXJuYWw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09PXRoaXMuX2ZhY3RvcnkmJih0aGlzLl9mYWN0b3J5PXQuZ2V0RmFjdG9yeSgpKSx0IGluc3RhbmNlb2YgenQ/dGhpcy5lZGl0R2VvbWV0cnlDb2xsZWN0aW9uKHQsZSk6dCBpbnN0YW5jZW9mICR0P3RoaXMuZWRpdFBvbHlnb24odCxlKTp0IGluc3RhbmNlb2YgUXQ/ZS5lZGl0KHQsdGhpcy5fZmFjdG9yeSk6dCBpbnN0YW5jZW9mIEt0P2UuZWRpdCh0LHRoaXMuX2ZhY3RvcnkpOihldC5zaG91bGROZXZlclJlYWNoSGVyZShcIlVuc3VwcG9ydGVkIEdlb21ldHJ5IGNsYXNzOiBcIit0LmdldENsYXNzKCkuZ2V0TmFtZSgpKSxudWxsKX0saWUucHJvdG90eXBlLmVkaXRHZW9tZXRyeUNvbGxlY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZS5lZGl0KHQsdGhpcy5fZmFjdG9yeSksaT1uZXcgTnQscj0wO3I8bi5nZXROdW1HZW9tZXRyaWVzKCk7cisrKXt2YXIgbz10aGlzLmVkaXQobi5nZXRHZW9tZXRyeU4ociksZSk7bnVsbD09PW98fG8uaXNFbXB0eSgpfHxpLmFkZChvKX1yZXR1cm4gbi5nZXRDbGFzcygpPT09dGU/dGhpcy5fZmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KGkudG9BcnJheShbXSkpOm4uZ2V0Q2xhc3MoKT09PVh0P3RoaXMuX2ZhY3RvcnkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGkudG9BcnJheShbXSkpOm4uZ2V0Q2xhc3MoKT09PW5lP3RoaXMuX2ZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKGkudG9BcnJheShbXSkpOnRoaXMuX2ZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKGkudG9BcnJheShbXSkpfSxpZS5wcm90b3R5cGUuZWRpdFBvbHlnb249ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmVkaXQodCx0aGlzLl9mYWN0b3J5KTtpZihudWxsPT09biYmKG49dGhpcy5fZmFjdG9yeS5jcmVhdGVQb2x5Z29uKG51bGwpKSxuLmlzRW1wdHkoKSlyZXR1cm4gbjt2YXIgaT10aGlzLmVkaXQobi5nZXRFeHRlcmlvclJpbmcoKSxlKTtpZihudWxsPT09aXx8aS5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuX2ZhY3RvcnkuY3JlYXRlUG9seWdvbigpO2Zvcih2YXIgcj1uZXcgTnQsbz0wO288bi5nZXROdW1JbnRlcmlvclJpbmcoKTtvKyspe3ZhciBzPXRoaXMuZWRpdChuLmdldEludGVyaW9yUmluZ04obyksZSk7bnVsbD09PXN8fHMuaXNFbXB0eSgpfHxyLmFkZChzKX1yZXR1cm4gdGhpcy5fZmFjdG9yeS5jcmVhdGVQb2x5Z29uKGksci50b0FycmF5KFtdKSl9LGllLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxpZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gaWV9LGllLkdlb21ldHJ5RWRpdG9yT3BlcmF0aW9uPWZ1bmN0aW9uKCl7fSxyZS5Ob09wR2VvbWV0cnlPcGVyYXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG9lfSxyZS5Db29yZGluYXRlT3BlcmF0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiBzZX0scmUuQ29vcmRpbmF0ZVNlcXVlbmNlT3BlcmF0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiBhZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaWUscmUpO3ZhciBvZT1mdW5jdGlvbigpe307b2UucHJvdG90eXBlLmVkaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdH0sb2UucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW2llLkdlb21ldHJ5RWRpdG9yT3BlcmF0aW9uXX0sb2UucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIG9lfTt2YXIgc2U9ZnVuY3Rpb24oKXt9O3NlLnByb3RvdHlwZS5lZGl0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5lZGl0Q29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlcygpLHQpO3JldHVybiBudWxsPT09bj90OnQgaW5zdGFuY2VvZiBlZT9lLmNyZWF0ZUxpbmVhclJpbmcobik6dCBpbnN0YW5jZW9mIEt0P2UuY3JlYXRlTGluZVN0cmluZyhuKTp0IGluc3RhbmNlb2YgUXQ/bi5sZW5ndGg+MD9lLmNyZWF0ZVBvaW50KG5bMF0pOmUuY3JlYXRlUG9pbnQoKTp0fSxzZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5baWUuR2VvbWV0cnlFZGl0b3JPcGVyYXRpb25dfSxzZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gc2V9O3ZhciBhZT1mdW5jdGlvbigpe307YWUucHJvdG90eXBlLmVkaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIGVlP2UuY3JlYXRlTGluZWFyUmluZyh0aGlzLmVkaXQodC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSk6dCBpbnN0YW5jZW9mIEt0P2UuY3JlYXRlTGluZVN0cmluZyh0aGlzLmVkaXQodC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSk6dCBpbnN0YW5jZW9mIFF0P2UuY3JlYXRlUG9pbnQodGhpcy5lZGl0KHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksdCkpOnR9LGFlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltpZS5HZW9tZXRyeUVkaXRvck9wZXJhdGlvbl19LGFlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBhZX07dmFyIHVlPWZ1bmN0aW9uKCl7aWYodGhpcy5fZGltZW5zaW9uPTMsdGhpcy5fY29vcmRpbmF0ZXM9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl0aGlzLl9jb29yZGluYXRlcz1hcmd1bWVudHNbMF0sdGhpcy5fZGltZW5zaW9uPTM7ZWxzZSBpZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1swXSkpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9jb29yZGluYXRlcz1uZXcgQXJyYXkodCkuZmlsbChudWxsKTtmb3IodmFyIGU9MDtlPHQ7ZSsrKXRoaXMuX2Nvb3JkaW5hdGVzW2VdPW5ldyBDfWVsc2UgaWYoVChhcmd1bWVudHNbMF0sVikpe3ZhciBuPWFyZ3VtZW50c1swXTtpZihudWxsPT09bilyZXR1cm4gdGhpcy5fY29vcmRpbmF0ZXM9bmV3IEFycmF5KDApLmZpbGwobnVsbCksbnVsbDt0aGlzLl9kaW1lbnNpb249bi5nZXREaW1lbnNpb24oKSx0aGlzLl9jb29yZGluYXRlcz1uZXcgQXJyYXkobi5zaXplKCkpLmZpbGwobnVsbCk7Zm9yKHZhciBpPTA7aTx0aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7aSsrKXRoaXMuX2Nvb3JkaW5hdGVzW2ldPW4uZ2V0Q29vcmRpbmF0ZUNvcHkoaSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV07dGhpcy5fY29vcmRpbmF0ZXM9cix0aGlzLl9kaW1lbnNpb249byxudWxsPT09ciYmKHRoaXMuX2Nvb3JkaW5hdGVzPW5ldyBBcnJheSgwKS5maWxsKG51bGwpKX1lbHNlIGlmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgcz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV07dGhpcy5fY29vcmRpbmF0ZXM9bmV3IEFycmF5KHMpLmZpbGwobnVsbCksdGhpcy5fZGltZW5zaW9uPWE7Zm9yKHZhciB1PTA7dTxzO3UrKyl0aGlzLl9jb29yZGluYXRlc1t1XT1uZXcgQ319LGxlPXtzZXJpYWxWZXJzaW9uVUlEOntjb25maWd1cmFibGU6ITB9fTt1ZS5wcm90b3R5cGUuc2V0T3JkaW5hdGU9ZnVuY3Rpb24odCxlLG4pe3N3aXRjaChlKXtjYXNlIFYuWDp0aGlzLl9jb29yZGluYXRlc1t0XS54PW47YnJlYWs7Y2FzZSBWLlk6dGhpcy5fY29vcmRpbmF0ZXNbdF0ueT1uO2JyZWFrO2Nhc2UgVi5aOnRoaXMuX2Nvb3JkaW5hdGVzW3RdLno9bjticmVhaztkZWZhdWx0OnRocm93IG5ldyBtKFwiaW52YWxpZCBvcmRpbmF0ZUluZGV4XCIpfX0sdWUucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RofSx1ZS5wcm90b3R5cGUuZ2V0T3JkaW5hdGU9ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSBWLlg6cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGVzW3RdLng7Y2FzZSBWLlk6cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGVzW3RdLnk7Y2FzZSBWLlo6cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGVzW3RdLnp9cmV0dXJuIHYuTmFOfSx1ZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGVzW3RdfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07bi54PXRoaXMuX2Nvb3JkaW5hdGVzW2VdLngsbi55PXRoaXMuX2Nvb3JkaW5hdGVzW2VdLnksbi56PXRoaXMuX2Nvb3JkaW5hdGVzW2VdLnp9fSx1ZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDKHRoaXMuX2Nvb3JkaW5hdGVzW3RdKX0sdWUucHJvdG90eXBlLmdldERpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaW1lbnNpb259LHVlLnByb3RvdHlwZS5nZXRYPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jb29yZGluYXRlc1t0XS54fSx1ZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuc2l6ZSgpKS5maWxsKG51bGwpLGU9MDtlPHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aDtlKyspdFtlXT10aGlzLl9jb29yZGluYXRlc1tlXS5jbG9uZSgpO3JldHVybiBuZXcgdWUodCx0aGlzLl9kaW1lbnNpb24pfSx1ZS5wcm90b3R5cGUuZXhwYW5kRW52ZWxvcGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7ZSsrKXQuZXhwYW5kVG9JbmNsdWRlKHRoaXMuX2Nvb3JkaW5hdGVzW2VdKTtyZXR1cm4gdH0sdWUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuc2l6ZSgpKS5maWxsKG51bGwpLGU9MDtlPHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aDtlKyspdFtlXT10aGlzLl9jb29yZGluYXRlc1tlXS5jb3B5KCk7cmV0dXJuIG5ldyB1ZSh0LHRoaXMuX2RpbWVuc2lvbil9LHVlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aD4wKXt2YXIgdD1uZXcgRCgxNyp0aGlzLl9jb29yZGluYXRlcy5sZW5ndGgpO3QuYXBwZW5kKFwiKFwiKSx0LmFwcGVuZCh0aGlzLl9jb29yZGluYXRlc1swXSk7Zm9yKHZhciBlPTE7ZTx0aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7ZSsrKXQuYXBwZW5kKFwiLCBcIiksdC5hcHBlbmQodGhpcy5fY29vcmRpbmF0ZXNbZV0pO3JldHVybiB0LmFwcGVuZChcIilcIiksdC50b1N0cmluZygpfXJldHVyblwiKClcIn0sdWUucHJvdG90eXBlLmdldFk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGVzW3RdLnl9LHVlLnByb3RvdHlwZS50b0Nvb3JkaW5hdGVBcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb29yZGluYXRlc30sdWUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1YsZV19LHVlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB1ZX0sbGUuc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMHhjYjQ0YTc3OGRiMThlMDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHVlLGxlKTt2YXIgY2U9ZnVuY3Rpb24oKXt9LHBlPXtzZXJpYWxWZXJzaW9uVUlEOntjb25maWd1cmFibGU6ITB9LGluc3RhbmNlT2JqZWN0Ontjb25maWd1cmFibGU6ITB9fTtjZS5wcm90b3R5cGUucmVhZFJlc29sdmU9ZnVuY3Rpb24oKXtyZXR1cm4gY2UuaW5zdGFuY2UoKX0sY2UucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIG5ldyB1ZSh0KX1pZihUKGFyZ3VtZW50c1swXSxWKSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiBuZXcgdWUoZSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTtyZXR1cm4gaT4zJiYoaT0zKSxpPDI/bmV3IHVlKG4pOm5ldyB1ZShuLGkpfX0sY2UucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW2IsZV19LGNlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBjZX0sY2UuaW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gY2UuaW5zdGFuY2VPYmplY3R9LHBlLnNlcmlhbFZlcnNpb25VSUQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuLTB4MzhlNDlmYTZjZjZmMmUwMH0scGUuaW5zdGFuY2VPYmplY3QuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY2UscGUpO3ZhciBoZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5jYWxsKHRoaXMpLHRoaXMubWFwXz1uZXcgTWFwfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFwXy5nZXQodCl8fG51bGx9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm1hcF8uc2V0KHQsZSksZX0sZS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBOdCxlPXRoaXMubWFwXy52YWx1ZXMoKSxuPWUubmV4dCgpOyFuLmRvbmU7KXQuYWRkKG4udmFsdWUpLG49ZS5uZXh0KCk7cmV0dXJuIHR9LGUucHJvdG90eXBlLmVudHJ5U2V0PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFB0O3JldHVybiB0aGlzLm1hcF8uZW50cmllcygpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuYWRkKGUpfSksdH0sZS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcF8uc2l6ZSgpfSxlfShUdCksZmU9ZnVuY3Rpb24gdCgpe2lmKHRoaXMuX21vZGVsVHlwZT1udWxsLHRoaXMuX3NjYWxlPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5fbW9kZWxUeXBlPXQuRkxPQVRJTkc7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aClpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGRlKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5fbW9kZWxUeXBlPWUsZT09PXQuRklYRUQmJnRoaXMuc2V0U2NhbGUoMSl9ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgbj1hcmd1bWVudHNbMF07dGhpcy5fbW9kZWxUeXBlPXQuRklYRUQsdGhpcy5zZXRTY2FsZShuKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgdCl7dmFyIGk9YXJndW1lbnRzWzBdO3RoaXMuX21vZGVsVHlwZT1pLl9tb2RlbFR5cGUsdGhpcy5fc2NhbGU9aS5fc2NhbGV9fSxnZT17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfSxtYXhpbXVtUHJlY2lzZVZhbHVlOntjb25maWd1cmFibGU6ITB9fTtmZS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGZlKSlyZXR1cm4hMTt2YXIgZT10O3JldHVybiB0aGlzLl9tb2RlbFR5cGU9PT1lLl9tb2RlbFR5cGUmJnRoaXMuX3NjYWxlPT09ZS5fc2NhbGV9LGZlLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7dmFyIGU9dCxuPXRoaXMuZ2V0TWF4aW11bVNpZ25pZmljYW50RGlnaXRzKCksaT1lLmdldE1heGltdW1TaWduaWZpY2FudERpZ2l0cygpO3JldHVybiBuZXcgTShuKS5jb21wYXJlVG8obmV3IE0oaSkpfSxmZS5wcm90b3R5cGUuZ2V0U2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGV9LGZlLnByb3RvdHlwZS5pc0Zsb2F0aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGVsVHlwZT09PWZlLkZMT0FUSU5HfHx0aGlzLl9tb2RlbFR5cGU9PT1mZS5GTE9BVElOR19TSU5HTEV9LGZlLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGVsVHlwZX0sZmUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9XCJVTktOT1dOXCI7cmV0dXJuIHRoaXMuX21vZGVsVHlwZT09PWZlLkZMT0FUSU5HP3Q9XCJGbG9hdGluZ1wiOnRoaXMuX21vZGVsVHlwZT09PWZlLkZMT0FUSU5HX1NJTkdMRT90PVwiRmxvYXRpbmctU2luZ2xlXCI6dGhpcy5fbW9kZWxUeXBlPT09ZmUuRklYRUQmJih0PVwiRml4ZWQgKFNjYWxlPVwiK3RoaXMuZ2V0U2NhbGUoKStcIilcIiksdH0sZmUucHJvdG90eXBlLm1ha2VQcmVjaXNlPWZ1bmN0aW9uKCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHYuaXNOYU4odCkpcmV0dXJuIHQ7aWYodGhpcy5fbW9kZWxUeXBlPT09ZmUuRkxPQVRJTkdfU0lOR0xFKXtyZXR1cm4gdH1yZXR1cm4gdGhpcy5fbW9kZWxUeXBlPT09ZmUuRklYRUQ/TWF0aC5yb3VuZCh0KnRoaXMuX3NjYWxlKS90aGlzLl9zY2FsZTp0fWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIGU9YXJndW1lbnRzWzBdO2lmKHRoaXMuX21vZGVsVHlwZT09PWZlLkZMT0FUSU5HKXJldHVybiBudWxsO2UueD10aGlzLm1ha2VQcmVjaXNlKGUueCksZS55PXRoaXMubWFrZVByZWNpc2UoZS55KX19LGZlLnByb3RvdHlwZS5nZXRNYXhpbXVtU2lnbmlmaWNhbnREaWdpdHM9ZnVuY3Rpb24oKXt2YXIgdD0xNjtyZXR1cm4gdGhpcy5fbW9kZWxUeXBlPT09ZmUuRkxPQVRJTkc/dD0xNjp0aGlzLl9tb2RlbFR5cGU9PT1mZS5GTE9BVElOR19TSU5HTEU/dD02OnRoaXMuX21vZGVsVHlwZT09PWZlLkZJWEVEJiYodD0xK01hdGgudHJ1bmMoTWF0aC5jZWlsKE1hdGgubG9nKHRoaXMuZ2V0U2NhbGUoKSkvTWF0aC5sb2coMTApKSkpLHR9LGZlLnByb3RvdHlwZS5zZXRTY2FsZT1mdW5jdGlvbih0KXt0aGlzLl9zY2FsZT1NYXRoLmFicyh0KX0sZmUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW2UsRV19LGZlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBmZX0sZmUubW9zdFByZWNpc2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jb21wYXJlVG8oZSk+PTA/dDplfSxnZS5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybiAweDZiZWU2NDA0ZTlhMjVjMDB9LGdlLm1heGltdW1QcmVjaXNlVmFsdWUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDkwMDcxOTkyNTQ3NDA5OTJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGZlLGdlKTt2YXIgZGU9ZnVuY3Rpb24gdChlKXt0aGlzLl9uYW1lPWV8fG51bGwsdC5uYW1lVG9UeXBlTWFwLnB1dChlLHRoaXMpfSx5ZT17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfSxuYW1lVG9UeXBlTWFwOntjb25maWd1cmFibGU6ITB9fTtkZS5wcm90b3R5cGUucmVhZFJlc29sdmU9ZnVuY3Rpb24oKXtyZXR1cm4gZGUubmFtZVRvVHlwZU1hcC5nZXQodGhpcy5fbmFtZSl9LGRlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYW1lfSxkZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bZV19LGRlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBkZX0seWUuc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tNTUyODYwMjYzMTczMTU5ZTR9LHllLm5hbWVUb1R5cGVNYXAuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBoZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZGUseWUpLGZlLlR5cGU9ZGUsZmUuRklYRUQ9bmV3IGRlKFwiRklYRURcIiksZmUuRkxPQVRJTkc9bmV3IGRlKFwiRkxPQVRJTkdcIiksZmUuRkxPQVRJTkdfU0lOR0xFPW5ldyBkZShcIkZMT0FUSU5HIFNJTkdMRVwiKTt2YXIgX2U9ZnVuY3Rpb24gdCgpe3RoaXMuX3ByZWNpc2lvbk1vZGVsPW5ldyBmZSx0aGlzLl9TUklEPTAsdGhpcy5fY29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeT10LmdldERlZmF1bHRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCksMD09PWFyZ3VtZW50cy5sZW5ndGh8fCgxPT09YXJndW1lbnRzLmxlbmd0aD9UKGFyZ3VtZW50c1swXSxiKT90aGlzLl9jb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5PWFyZ3VtZW50c1swXTphcmd1bWVudHNbMF1pbnN0YW5jZW9mIGZlJiYodGhpcy5fcHJlY2lzaW9uTW9kZWw9YXJndW1lbnRzWzBdKToyPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcHJlY2lzaW9uTW9kZWw9YXJndW1lbnRzWzBdLHRoaXMuX1NSSUQ9YXJndW1lbnRzWzFdKTozPT09YXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuX3ByZWNpc2lvbk1vZGVsPWFyZ3VtZW50c1swXSx0aGlzLl9TUklEPWFyZ3VtZW50c1sxXSx0aGlzLl9jb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5PWFyZ3VtZW50c1syXSkpfSxtZT17c2VyaWFsVmVyc2lvblVJRDp7Y29uZmlndXJhYmxlOiEwfX07X2UucHJvdG90eXBlLnRvR2VvbWV0cnk9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNOdWxsKCk/dGhpcy5jcmVhdGVQb2ludChudWxsKTp0LmdldE1pblgoKT09PXQuZ2V0TWF4WCgpJiZ0LmdldE1pblkoKT09PXQuZ2V0TWF4WSgpP3RoaXMuY3JlYXRlUG9pbnQobmV3IEModC5nZXRNaW5YKCksdC5nZXRNaW5ZKCkpKTp0LmdldE1pblgoKT09PXQuZ2V0TWF4WCgpfHx0LmdldE1pblkoKT09PXQuZ2V0TWF4WSgpP3RoaXMuY3JlYXRlTGluZVN0cmluZyhbbmV3IEModC5nZXRNaW5YKCksdC5nZXRNaW5ZKCkpLG5ldyBDKHQuZ2V0TWF4WCgpLHQuZ2V0TWF4WSgpKV0pOnRoaXMuY3JlYXRlUG9seWdvbih0aGlzLmNyZWF0ZUxpbmVhclJpbmcoW25ldyBDKHQuZ2V0TWluWCgpLHQuZ2V0TWluWSgpKSxuZXcgQyh0LmdldE1pblgoKSx0LmdldE1heFkoKSksbmV3IEModC5nZXRNYXhYKCksdC5nZXRNYXhZKCkpLG5ldyBDKHQuZ2V0TWF4WCgpLHQuZ2V0TWluWSgpKSxuZXcgQyh0LmdldE1pblgoKSx0LmdldE1pblkoKSldKSxudWxsKX0sX2UucHJvdG90eXBlLmNyZWF0ZUxpbmVTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dCBpbnN0YW5jZW9mIEFycmF5P25ldyBLdCh0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCksdGhpcyk6VCh0LFYpP25ldyBLdCh0LHRoaXMpOnZvaWQgMDpuZXcgS3QodGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSx0aGlzKX0sX2UucHJvdG90eXBlLmNyZWF0ZU11bHRpTGluZVN0cmluZz1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBuZXcgWHQobnVsbCx0aGlzKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBuZXcgWHQodCx0aGlzKX19LF9lLnByb3RvdHlwZS5idWlsZEdlb21ldHJ5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49ITEsaT0hMSxyPXQuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpLHM9by5nZXRDbGFzcygpO251bGw9PT1lJiYoZT1zKSxzIT09ZSYmKG49ITApLG8uaXNHZW9tZXRyeUNvbGxlY3Rpb25PckRlcml2ZWQoKSYmKGk9ITApfWlmKG51bGw9PT1lKXJldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbigpO2lmKG58fGkpcmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKF9lLnRvR2VvbWV0cnlBcnJheSh0KSk7dmFyIGE9dC5pdGVyYXRvcigpLm5leHQoKTtpZih0LnNpemUoKT4xKXtpZihhIGluc3RhbmNlb2YgJHQpcmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2x5Z29uKF9lLnRvUG9seWdvbkFycmF5KHQpKTtpZihhIGluc3RhbmNlb2YgS3QpcmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKF9lLnRvTGluZVN0cmluZ0FycmF5KHQpKTtpZihhIGluc3RhbmNlb2YgUXQpcmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChfZS50b1BvaW50QXJyYXkodCkpO2V0LnNob3VsZE5ldmVyUmVhY2hIZXJlKFwiVW5oYW5kbGVkIGNsYXNzOiBcIithLmdldENsYXNzKCkuZ2V0TmFtZSgpKX1yZXR1cm4gYX0sX2UucHJvdG90eXBlLmNyZWF0ZU11bHRpUG9pbnRGcm9tQ29vcmRzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9pbnQobnVsbCE9PXQ/dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpOm51bGwpfSxfZS5wcm90b3R5cGUuY3JlYXRlUG9pbnQ9ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5jcmVhdGVQb2ludCh0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoW10pKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY3JlYXRlUG9pbnQobnVsbCE9PXQ/dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFt0XSk6bnVsbCl9aWYoVChhcmd1bWVudHNbMF0sVikpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gbmV3IFF0KGUsdGhpcyl9fX0sX2UucHJvdG90eXBlLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeX0sX2UucHJvdG90eXBlLmNyZWF0ZVBvbHlnb249ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbmV3ICR0KG51bGwsbnVsbCx0aGlzKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoVChhcmd1bWVudHNbMF0sVikpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jcmVhdGVQb2x5Z29uKHRoaXMuY3JlYXRlTGluZWFyUmluZyh0KSl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZVBvbHlnb24odGhpcy5jcmVhdGVMaW5lYXJSaW5nKGUpKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGVlKXt2YXIgbj1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY3JlYXRlUG9seWdvbihuLG51bGwpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07cmV0dXJuIG5ldyAkdChpLHIsdGhpcyl9fSxfZS5wcm90b3R5cGUuZ2V0U1JJRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9TUklEfSxfZS5wcm90b3R5cGUuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG5ldyB6dChudWxsLHRoaXMpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIG5ldyB6dCh0LHRoaXMpfX0sX2UucHJvdG90eXBlLmNyZWF0ZUdlb21ldHJ5PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaWUodGhpcykuZWRpdCh0LHtlZGl0OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5fY29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeS5jcmVhdGUodCl9fX0pfSxfZS5wcm90b3R5cGUuZ2V0UHJlY2lzaW9uTW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJlY2lzaW9uTW9kZWx9LF9lLnByb3RvdHlwZS5jcmVhdGVMaW5lYXJSaW5nPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuY3JlYXRlTGluZWFyUmluZyh0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoW10pKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZUxpbmVhclJpbmcobnVsbCE9PXQ/dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpOm51bGwpfWlmKFQoYXJndW1lbnRzWzBdLFYpKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIG5ldyBlZShlLHRoaXMpfX19LF9lLnByb3RvdHlwZS5jcmVhdGVNdWx0aVBvbHlnb249ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbmV3IG5lKG51bGwsdGhpcyk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gbmV3IG5lKHQsdGhpcyl9fSxfZS5wcm90b3R5cGUuY3JlYXRlTXVsdGlQb2ludD1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBuZXcgdGUobnVsbCx0aGlzKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBuZXcgdGUodCx0aGlzKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChudWxsIT09ZT90aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoZSk6bnVsbCl9aWYoVChhcmd1bWVudHNbMF0sVikpe3ZhciBuPWFyZ3VtZW50c1swXTtpZihudWxsPT09bilyZXR1cm4gdGhpcy5jcmVhdGVNdWx0aVBvaW50KG5ldyBBcnJheSgwKS5maWxsKG51bGwpKTtmb3IodmFyIGk9bmV3IEFycmF5KG4uc2l6ZSgpKS5maWxsKG51bGwpLHI9MDtyPG4uc2l6ZSgpO3IrKyl7dmFyIG89dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKDEsbi5nZXREaW1lbnNpb24oKSk7V3QuY29weShuLHIsbywwLDEpLGlbcl09dGhpcy5jcmVhdGVQb2ludChvKX1yZXR1cm4gdGhpcy5jcmVhdGVNdWx0aVBvaW50KGkpfX19LF9lLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltlXX0sX2UucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIF9lfSxfZS50b011bHRpUG9seWdvbkFycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSxfZS50b0dlb21ldHJ5QXJyYXk9ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LF9lLmdldERlZmF1bHRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuIGNlLmluc3RhbmNlKCl9LF9lLnRvTXVsdGlMaW5lU3RyaW5nQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LF9lLnRvTGluZVN0cmluZ0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSxfZS50b011bHRpUG9pbnRBcnJheT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHQudG9BcnJheShlKX0sX2UudG9MaW5lYXJSaW5nQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LF9lLnRvUG9pbnRBcnJheT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHQudG9BcnJheShlKX0sX2UudG9Qb2x5Z29uQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LF9lLmNyZWF0ZVBvaW50RnJvbUludGVybmFsQ29vcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5nZXRQcmVjaXNpb25Nb2RlbCgpLm1ha2VQcmVjaXNlKHQpLGUuZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvaW50KHQpfSxtZS5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybi0weDVlYTc1ZjIwNTFlZWI0MDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKF9lLG1lKTt2YXIgdmU9W1wiUG9pbnRcIixcIk11bHRpUG9pbnRcIixcIkxpbmVTdHJpbmdcIixcIk11bHRpTGluZVN0cmluZ1wiLFwiUG9seWdvblwiLFwiTXVsdGlQb2x5Z29uXCJdLEllPWZ1bmN0aW9uKHQpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PXR8fG5ldyBfZX07SWUucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7dmFyIGUsbj0oZT1cInN0cmluZ1wiPT10eXBlb2YgdD9KU09OLnBhcnNlKHQpOnQpLnR5cGU7aWYoIUVlW25dKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gR2VvSlNPTiB0eXBlOiBcIitlLnR5cGUpO3JldHVybi0xIT09dmUuaW5kZXhPZihuKT9FZVtuXS5hcHBseSh0aGlzLFtlLmNvb3JkaW5hdGVzXSk6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PW4/RWVbbl0uYXBwbHkodGhpcyxbZS5nZW9tZXRyaWVzXSk6RWVbbl0uYXBwbHkodGhpcyxbZV0pfSxJZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRHZW9tZXRyeVR5cGUoKTtpZigheGVbZV0pdGhyb3cgbmV3IEVycm9yKFwiR2VvbWV0cnkgaXMgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4geGVbZV0uYXBwbHkodGhpcyxbdF0pfTt2YXIgRWU9e0ZlYXR1cmU6ZnVuY3Rpb24odCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO2lmKHQuZ2VvbWV0cnkpe3ZhciBpPXQuZ2VvbWV0cnkudHlwZTtpZighRWVbaV0pdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBHZW9KU09OIHR5cGU6IFwiK3QudHlwZSk7ZS5nZW9tZXRyeT10aGlzLnJlYWQodC5nZW9tZXRyeSl9cmV0dXJuIHQuYmJveCYmKGUuYmJveD1FZS5iYm94LmFwcGx5KHRoaXMsW3QuYmJveF0pKSxlfSxGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbih0KXt2YXIgZT17fTtpZih0LmZlYXR1cmVzKXtlLmZlYXR1cmVzPVtdO2Zvcih2YXIgbj0wO248dC5mZWF0dXJlcy5sZW5ndGg7KytuKWUuZmVhdHVyZXMucHVzaCh0aGlzLnJlYWQodC5mZWF0dXJlc1tuXSkpfXJldHVybiB0LmJib3gmJihlLmJib3g9dGhpcy5wYXJzZS5iYm94LmFwcGx5KHRoaXMsW3QuYmJveF0pKSxlfSxjb29yZGluYXRlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7KytuKXt2YXIgaT10W25dO2UucHVzaChuZXcgQyhpWzBdLGlbMV0pKX1yZXR1cm4gZX0sYmJveDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhbbmV3IEModFswXSx0WzFdKSxuZXcgQyh0WzJdLHRbMV0pLG5ldyBDKHRbMl0sdFszXSksbmV3IEModFswXSx0WzNdKSxuZXcgQyh0WzBdLHRbMV0pXSl9LFBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBDKHRbMF0sdFsxXSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvaW50KGUpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDsrK24pZS5wdXNoKEVlLlBvaW50LmFwcGx5KHRoaXMsW3Rbbl1dKSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9pbnQoZSl9LExpbmVTdHJpbmc6ZnVuY3Rpb24odCl7dmFyIGU9RWUuY29vcmRpbmF0ZXMuYXBwbHkodGhpcyxbdF0pO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKGUpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoOysrbillLnB1c2goRWUuTGluZVN0cmluZy5hcHBseSh0aGlzLFt0W25dXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoZSl9LFBvbHlnb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPUVlLmNvb3JkaW5hdGVzLmFwcGx5KHRoaXMsW3RbMF1dKSxuPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoZSksaT1bXSxyPTE7cjx0Lmxlbmd0aDsrK3Ipe3ZhciBvPXRbcl0scz1FZS5jb29yZGluYXRlcy5hcHBseSh0aGlzLFtvXSksYT10aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKHMpO2kucHVzaChhKX1yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9seWdvbihuLGkpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoOysrbil7dmFyIGk9dFtuXTtlLnB1c2goRWUuUG9seWdvbi5hcHBseSh0aGlzLFtpXSkpfXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvbHlnb24oZSl9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7KytuKXt2YXIgaT10W25dO2UucHVzaCh0aGlzLnJlYWQoaSkpfXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oZSl9fSx4ZT17Y29vcmRpbmF0ZTpmdW5jdGlvbih0KXtyZXR1cm5bdC54LHQueV19LFBvaW50OmZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOlwiUG9pbnRcIixjb29yZGluYXRlczp4ZS5jb29yZGluYXRlLmFwcGx5KHRoaXMsW3QuZ2V0Q29vcmRpbmF0ZSgpXSl9fSxNdWx0aVBvaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Ll9nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuX2dlb21ldHJpZXNbbl0scj14ZS5Qb2ludC5hcHBseSh0aGlzLFtpXSk7ZS5wdXNoKHIuY29vcmRpbmF0ZXMpfXJldHVybnt0eXBlOlwiTXVsdGlQb2ludFwiLGNvb3JkaW5hdGVzOmV9fSxMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPXQuZ2V0Q29vcmRpbmF0ZXMoKSxpPTA7aTxuLmxlbmd0aDsrK2kpe3ZhciByPW5baV07ZS5wdXNoKHhlLmNvb3JkaW5hdGUuYXBwbHkodGhpcyxbcl0pKX1yZXR1cm57dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczplfX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Ll9nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuX2dlb21ldHJpZXNbbl0scj14ZS5MaW5lU3RyaW5nLmFwcGx5KHRoaXMsW2ldKTtlLnB1c2goci5jb29yZGluYXRlcyl9cmV0dXJue3R5cGU6XCJNdWx0aUxpbmVTdHJpbmdcIixjb29yZGluYXRlczplfX0sUG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT1bXSxuPXhlLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbdC5fc2hlbGxdKTtlLnB1c2gobi5jb29yZGluYXRlcyk7Zm9yKHZhciBpPTA7aTx0Ll9ob2xlcy5sZW5ndGg7KytpKXt2YXIgcj10Ll9ob2xlc1tpXSxvPXhlLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbcl0pO2UucHVzaChvLmNvb3JkaW5hdGVzKX1yZXR1cm57dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczplfX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Ll9nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuX2dlb21ldHJpZXNbbl0scj14ZS5Qb2x5Z29uLmFwcGx5KHRoaXMsW2ldKTtlLnB1c2goci5jb29yZGluYXRlcyl9cmV0dXJue3R5cGU6XCJNdWx0aVBvbHlnb25cIixjb29yZGluYXRlczplfX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Ll9nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuX2dlb21ldHJpZXNbbl0scj1pLmdldEdlb21ldHJ5VHlwZSgpO2UucHVzaCh4ZVtyXS5hcHBseSh0aGlzLFtpXSkpfXJldHVybnt0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsZ2VvbWV0cmllczplfX19LE5lPWZ1bmN0aW9uKHQpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PXR8fG5ldyBfZSx0aGlzLnByZWNpc2lvbk1vZGVsPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmdldFByZWNpc2lvbk1vZGVsKCksdGhpcy5wYXJzZXI9bmV3IEllKHRoaXMuZ2VvbWV0cnlGYWN0b3J5KX07TmUucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJzZXIucmVhZCh0KTtyZXR1cm4gdGhpcy5wcmVjaXNpb25Nb2RlbC5nZXRUeXBlKCk9PT1mZS5GSVhFRCYmdGhpcy5yZWR1Y2VQcmVjaXNpb24oZSksZX0sTmUucHJvdG90eXBlLnJlZHVjZVByZWNpc2lvbj1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKHQuY29vcmRpbmF0ZSl0aGlzLnByZWNpc2lvbk1vZGVsLm1ha2VQcmVjaXNlKHQuY29vcmRpbmF0ZSk7ZWxzZSBpZih0LnBvaW50cylmb3IoZT0wLG49dC5wb2ludHMubGVuZ3RoO2U8bjtlKyspdGhpcy5wcmVjaXNpb25Nb2RlbC5tYWtlUHJlY2lzZSh0LnBvaW50c1tlXSk7ZWxzZSBpZih0Lmdlb21ldHJpZXMpZm9yKGU9MCxuPXQuZ2VvbWV0cmllcy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnJlZHVjZVByZWNpc2lvbih0Lmdlb21ldHJpZXNbZV0pfTt2YXIgQ2U9ZnVuY3Rpb24oKXt0aGlzLnBhcnNlcj1uZXcgSWUodGhpcy5nZW9tZXRyeUZhY3RvcnkpfTtDZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyc2VyLndyaXRlKHQpfTt2YXIgU2U9ZnVuY3Rpb24oKXt9LExlPXtPTjp7Y29uZmlndXJhYmxlOiEwfSxMRUZUOntjb25maWd1cmFibGU6ITB9LFJJR0hUOntjb25maWd1cmFibGU6ITB9fTtTZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sU2UucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFNlfSxTZS5vcHBvc2l0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdD09PVNlLkxFRlQ/U2UuUklHSFQ6dD09PVNlLlJJR0hUP1NlLkxFRlQ6dH0sTGUuT04uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LExlLkxFRlQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDF9LExlLlJJR0hULmdldD1mdW5jdGlvbigpe3JldHVybiAyfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhTZSxMZSksKGQucHJvdG90eXBlPW5ldyBFcnJvcikubmFtZT1cIkVtcHR5U3RhY2tFeGNlcHRpb25cIiwoeS5wcm90b3R5cGU9bmV3IHh0KS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlfLnB1c2godCksITB9LHkucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZih0PDB8fHQ+PXRoaXMuc2l6ZSgpKXRocm93IG5ldyBFcnJvcjtyZXR1cm4gdGhpcy5hcnJheV9bdF19LHkucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlfLnB1c2godCksdH0seS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKHQpe2lmKDA9PT10aGlzLmFycmF5Xy5sZW5ndGgpdGhyb3cgbmV3IGQ7cmV0dXJuIHRoaXMuYXJyYXlfLnBvcCgpfSx5LnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuYXJyYXlfLmxlbmd0aCl0aHJvdyBuZXcgZDtyZXR1cm4gdGhpcy5hcnJheV9bdGhpcy5hcnJheV8ubGVuZ3RoLTFdfSx5LnByb3RvdHlwZS5lbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hcnJheV8ubGVuZ3RofSx5LnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW1wdHkoKX0seS5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5Xy5pbmRleE9mKHQpfSx5LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlfLmxlbmd0aH0seS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTAsbj10aGlzLmFycmF5Xy5sZW5ndGg7ZTxuO2UrKyl0LnB1c2godGhpcy5hcnJheV9bZV0pO3JldHVybiB0fTt2YXIgYmU9ZnVuY3Rpb24oKXt0aGlzLl9taW5JbmRleD0tMSx0aGlzLl9taW5Db29yZD1udWxsLHRoaXMuX21pbkRlPW51bGwsdGhpcy5fb3JpZW50ZWREZT1udWxsfTtiZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9taW5Db29yZH0sYmUucHJvdG90eXBlLmdldFJpZ2h0bW9zdFNpZGU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldFJpZ2h0bW9zdFNpZGVPZlNlZ21lbnQodCxlKTtyZXR1cm4gbjwwJiYobj10aGlzLmdldFJpZ2h0bW9zdFNpZGVPZlNlZ21lbnQodCxlLTEpKSxuPDAmJih0aGlzLl9taW5Db29yZD1udWxsLHRoaXMuY2hlY2tGb3JSaWdodG1vc3RDb29yZGluYXRlKHQpKSxufSxiZS5wcm90b3R5cGUuZmluZFJpZ2h0bW9zdEVkZ2VBdFZlcnRleD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX21pbkRlLmdldEVkZ2UoKS5nZXRDb29yZGluYXRlcygpO2V0LmlzVHJ1ZSh0aGlzLl9taW5JbmRleD4wJiZ0aGlzLl9taW5JbmRleDx0Lmxlbmd0aCxcInJpZ2h0bW9zdCBwb2ludCBleHBlY3RlZCB0byBiZSBpbnRlcmlvciB2ZXJ0ZXggb2YgZWRnZVwiKTt2YXIgZT10W3RoaXMuX21pbkluZGV4LTFdLG49dFt0aGlzLl9taW5JbmRleCsxXSxpPWF0LmNvbXB1dGVPcmllbnRhdGlvbih0aGlzLl9taW5Db29yZCxuLGUpLHI9ITE7ZS55PHRoaXMuX21pbkNvb3JkLnkmJm4ueTx0aGlzLl9taW5Db29yZC55JiZpPT09YXQuQ09VTlRFUkNMT0NLV0lTRT9yPSEwOmUueT50aGlzLl9taW5Db29yZC55JiZuLnk+dGhpcy5fbWluQ29vcmQueSYmaT09PWF0LkNMT0NLV0lTRSYmKHI9ITApLHImJih0aGlzLl9taW5JbmRleD10aGlzLl9taW5JbmRleC0xKX0sYmUucHJvdG90eXBlLmdldFJpZ2h0bW9zdFNpZGVPZlNlZ21lbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldEVkZ2UoKS5nZXRDb29yZGluYXRlcygpO2lmKGU8MHx8ZSsxPj1uLmxlbmd0aClyZXR1cm4tMTtpZihuW2VdLnk9PT1uW2UrMV0ueSlyZXR1cm4tMTt2YXIgaT1TZS5MRUZUO3JldHVybiBuW2VdLnk8bltlKzFdLnkmJihpPVNlLlJJR0hUKSxpfSxiZS5wcm90b3R5cGUuZ2V0RWRnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRlZERlfSxiZS5wcm90b3R5cGUuY2hlY2tGb3JSaWdodG1vc3RDb29yZGluYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldEVkZ2UoKS5nZXRDb29yZGluYXRlcygpLG49MDtuPGUubGVuZ3RoLTE7bisrKShudWxsPT09dGhpcy5fbWluQ29vcmR8fGVbbl0ueD50aGlzLl9taW5Db29yZC54KSYmKHRoaXMuX21pbkRlPXQsdGhpcy5fbWluSW5kZXg9bix0aGlzLl9taW5Db29yZD1lW25dKX0sYmUucHJvdG90eXBlLmZpbmRSaWdodG1vc3RFZGdlQXROb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWluRGUuZ2V0Tm9kZSgpLmdldEVkZ2VzKCk7dGhpcy5fbWluRGU9dC5nZXRSaWdodG1vc3RFZGdlKCksdGhpcy5fbWluRGUuaXNGb3J3YXJkKCl8fCh0aGlzLl9taW5EZT10aGlzLl9taW5EZS5nZXRTeW0oKSx0aGlzLl9taW5JbmRleD10aGlzLl9taW5EZS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKS5sZW5ndGgtMSl9LGJlLnByb3RvdHlwZS5maW5kRWRnZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5pc0ZvcndhcmQoKSYmdGhpcy5jaGVja0ZvclJpZ2h0bW9zdENvb3JkaW5hdGUobil9ZXQuaXNUcnVlKDAhPT10aGlzLl9taW5JbmRleHx8dGhpcy5fbWluQ29vcmQuZXF1YWxzKHRoaXMuX21pbkRlLmdldENvb3JkaW5hdGUoKSksXCJpbmNvbnNpc3RlbmN5IGluIHJpZ2h0bW9zdCBwcm9jZXNzaW5nXCIpLDA9PT10aGlzLl9taW5JbmRleD90aGlzLmZpbmRSaWdodG1vc3RFZGdlQXROb2RlKCk6dGhpcy5maW5kUmlnaHRtb3N0RWRnZUF0VmVydGV4KCksdGhpcy5fb3JpZW50ZWREZT10aGlzLl9taW5EZTt0aGlzLmdldFJpZ2h0bW9zdFNpZGUodGhpcy5fbWluRGUsdGhpcy5fbWluSW5kZXgpPT09U2UuTEVGVCYmKHRoaXMuX29yaWVudGVkRGU9dGhpcy5fbWluRGUuZ2V0U3ltKCkpfSxiZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sYmUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGJlfTt2YXIgd2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShuLGkpe3QuY2FsbCh0aGlzLGUubXNnV2l0aENvb3JkKG4saSkpLHRoaXMucHQ9aT9uZXcgQyhpKTpudWxsLHRoaXMubmFtZT1cIlRvcG9sb2d5RXhjZXB0aW9uXCJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdH0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZS5tc2dXaXRoQ29vcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT90OnQrXCIgWyBcIitlK1wiIF1cIn0sZX0oJCksT2U9ZnVuY3Rpb24oKXt0aGlzLmFycmF5Xz1bXX07T2UucHJvdG90eXBlLmFkZExhc3Q9ZnVuY3Rpb24odCl7dGhpcy5hcnJheV8ucHVzaCh0KX0sT2UucHJvdG90eXBlLnJlbW92ZUZpcnN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlfLnNoaWZ0KCl9LE9lLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmFycmF5Xy5sZW5ndGh9O3ZhciBUZT1mdW5jdGlvbigpe3RoaXMuX2ZpbmRlcj1udWxsLHRoaXMuX2RpckVkZ2VMaXN0PW5ldyBOdCx0aGlzLl9ub2Rlcz1uZXcgTnQsdGhpcy5fcmlnaHRNb3N0Q29vcmQ9bnVsbCx0aGlzLl9lbnY9bnVsbCx0aGlzLl9maW5kZXI9bmV3IGJlfTtUZS5wcm90b3R5cGUuY2xlYXJWaXNpdGVkRWRnZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fZGlyRWRnZUxpc3QuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3QubmV4dCgpLnNldFZpc2l0ZWQoITEpfX0sVGUucHJvdG90eXBlLmdldFJpZ2h0bW9zdENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmlnaHRNb3N0Q29vcmR9LFRlLnByb3RvdHlwZS5jb21wdXRlTm9kZURlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dC5nZXRFZGdlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpLmlzVmlzaXRlZCgpfHxpLmdldFN5bSgpLmlzVmlzaXRlZCgpKXtlPWk7YnJlYWt9fWlmKG51bGw9PT1lKXRocm93IG5ldyB3ZShcInVuYWJsZSB0byBmaW5kIGVkZ2UgdG8gY29tcHV0ZSBkZXB0aHMgYXQgXCIrdC5nZXRDb29yZGluYXRlKCkpO3QuZ2V0RWRnZXMoKS5jb21wdXRlRGVwdGhzKGUpO2Zvcih2YXIgcj10LmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpO28uc2V0VmlzaXRlZCghMCksdGhpcy5jb3B5U3ltRGVwdGhzKG8pfX0sVGUucHJvdG90eXBlLmNvbXB1dGVEZXB0aD1mdW5jdGlvbih0KXt0aGlzLmNsZWFyVmlzaXRlZEVkZ2VzKCk7dmFyIGU9dGhpcy5fZmluZGVyLmdldEVkZ2UoKTtlLnNldEVkZ2VEZXB0aHMoU2UuUklHSFQsdCksdGhpcy5jb3B5U3ltRGVwdGhzKGUpLHRoaXMuY29tcHV0ZURlcHRocyhlKX0sVGUucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXt0aGlzLmFkZFJlYWNoYWJsZSh0KSx0aGlzLl9maW5kZXIuZmluZEVkZ2UodGhpcy5fZGlyRWRnZUxpc3QpLHRoaXMuX3JpZ2h0TW9zdENvb3JkPXRoaXMuX2ZpbmRlci5nZXRDb29yZGluYXRlKCl9LFRlLnByb3RvdHlwZS5maW5kUmVzdWx0RWRnZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fZGlyRWRnZUxpc3QuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpO2UuZ2V0RGVwdGgoU2UuUklHSFQpPj0xJiZlLmdldERlcHRoKFNlLkxFRlQpPD0wJiYhZS5pc0ludGVyaW9yQXJlYUVkZ2UoKSYmZS5zZXRJblJlc3VsdCghMCl9fSxUZS5wcm90b3R5cGUuY29tcHV0ZURlcHRocz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgUHQsbj1uZXcgT2UsaT10LmdldE5vZGUoKTtmb3Iobi5hZGRMYXN0KGkpLGUuYWRkKGkpLHQuc2V0VmlzaXRlZCghMCk7IW4uaXNFbXB0eSgpOyl7dmFyIHI9bi5yZW1vdmVGaXJzdCgpO2UuYWRkKHIpLHRoaXMuY29tcHV0ZU5vZGVEZXB0aChyKTtmb3IodmFyIG89ci5nZXRFZGdlcygpLml0ZXJhdG9yKCk7by5oYXNOZXh0KCk7KXt2YXIgcz1vLm5leHQoKS5nZXRTeW0oKTtpZighcy5pc1Zpc2l0ZWQoKSl7dmFyIGE9cy5nZXROb2RlKCk7ZS5jb250YWlucyhhKXx8KG4uYWRkTGFzdChhKSxlLmFkZChhKSl9fX19LFRlLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gdGhpcy5fcmlnaHRNb3N0Q29vcmQueDxlLl9yaWdodE1vc3RDb29yZC54Py0xOnRoaXMuX3JpZ2h0TW9zdENvb3JkLng+ZS5fcmlnaHRNb3N0Q29vcmQueD8xOjB9LFRlLnByb3RvdHlwZS5nZXRFbnZlbG9wZT1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9lbnYpe2Zvcih2YXIgdD1uZXcgaixlPXRoaXMuX2RpckVkZ2VMaXN0Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKSxpPTA7aTxuLmxlbmd0aC0xO2krKyl0LmV4cGFuZFRvSW5jbHVkZShuW2ldKTt0aGlzLl9lbnY9dH1yZXR1cm4gdGhpcy5fZW52fSxUZS5wcm90b3R5cGUuYWRkUmVhY2hhYmxlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB5O2ZvcihlLmFkZCh0KTshZS5lbXB0eSgpOyl7dmFyIG49ZS5wb3AoKTt0aGlzLmFkZChuLGUpfX0sVGUucHJvdG90eXBlLmNvcHlTeW1EZXB0aHM9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRTeW0oKTtlLnNldERlcHRoKFNlLkxFRlQsdC5nZXREZXB0aChTZS5SSUdIVCkpLGUuc2V0RGVwdGgoU2UuUklHSFQsdC5nZXREZXB0aChTZS5MRUZUKSl9LFRlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXt0LnNldFZpc2l0ZWQoITApLHRoaXMuX25vZGVzLmFkZCh0KTtmb3IodmFyIG49dC5nZXRFZGdlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTt0aGlzLl9kaXJFZGdlTGlzdC5hZGQoaSk7dmFyIHI9aS5nZXRTeW0oKS5nZXROb2RlKCk7ci5pc1Zpc2l0ZWQoKXx8ZS5wdXNoKHIpfX0sVGUucHJvdG90eXBlLmdldE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGVzfSxUZS5wcm90b3R5cGUuZ2V0RGlyZWN0ZWRFZGdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXJFZGdlTGlzdH0sVGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0VdfSxUZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gVGV9O3ZhciBSZT1mdW5jdGlvbiB0KCl7aWYodGhpcy5sb2NhdGlvbj1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5pbml0KGUubGVuZ3RoKX1lbHNlIGlmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSl7dmFyIG49YXJndW1lbnRzWzBdO3RoaXMuaW5pdCgxKSx0aGlzLmxvY2F0aW9uW1NlLk9OXT1ufWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB0KXt2YXIgaT1hcmd1bWVudHNbMF07aWYodGhpcy5pbml0KGkubG9jYXRpb24ubGVuZ3RoKSxudWxsIT09aSlmb3IodmFyIHI9MDtyPHRoaXMubG9jYXRpb24ubGVuZ3RoO3IrKyl0aGlzLmxvY2F0aW9uW3JdPWkubG9jYXRpb25bcl19fWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBvPWFyZ3VtZW50c1swXSxzPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXTt0aGlzLmluaXQoMyksdGhpcy5sb2NhdGlvbltTZS5PTl09byx0aGlzLmxvY2F0aW9uW1NlLkxFRlRdPXMsdGhpcy5sb2NhdGlvbltTZS5SSUdIVF09YX19O1JlLnByb3RvdHlwZS5zZXRBbGxMb2NhdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmxvY2F0aW9uLmxlbmd0aDtlKyspdGhpcy5sb2NhdGlvbltlXT10fSxSZS5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmxvY2F0aW9uLmxlbmd0aDt0KyspaWYodGhpcy5sb2NhdGlvblt0XSE9PXcuTk9ORSlyZXR1cm4hMTtyZXR1cm4hMH0sUmUucHJvdG90eXBlLnNldEFsbExvY2F0aW9uc0lmTnVsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubG9jYXRpb24ubGVuZ3RoO2UrKyl0aGlzLmxvY2F0aW9uW2VdPT09dy5OT05FJiYodGhpcy5sb2NhdGlvbltlXT10KX0sUmUucHJvdG90eXBlLmlzTGluZT1mdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5sb2NhdGlvbi5sZW5ndGh9LFJlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0LmxvY2F0aW9uLmxlbmd0aD50aGlzLmxvY2F0aW9uLmxlbmd0aCl7dmFyIGU9bmV3IEFycmF5KDMpLmZpbGwobnVsbCk7ZVtTZS5PTl09dGhpcy5sb2NhdGlvbltTZS5PTl0sZVtTZS5MRUZUXT13Lk5PTkUsZVtTZS5SSUdIVF09dy5OT05FLHRoaXMubG9jYXRpb249ZX1mb3IodmFyIG49MDtuPHRoaXMubG9jYXRpb24ubGVuZ3RoO24rKyl0aGlzLmxvY2F0aW9uW25dPT09dy5OT05FJiZuPHQubG9jYXRpb24ubGVuZ3RoJiYodGhpcy5sb2NhdGlvbltuXT10LmxvY2F0aW9uW25dKX0sUmUucHJvdG90eXBlLmdldExvY2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9ufSxSZS5wcm90b3R5cGUuZmxpcD1mdW5jdGlvbigpe2lmKHRoaXMubG9jYXRpb24ubGVuZ3RoPD0xKXJldHVybiBudWxsO3ZhciB0PXRoaXMubG9jYXRpb25bU2UuTEVGVF07dGhpcy5sb2NhdGlvbltTZS5MRUZUXT10aGlzLmxvY2F0aW9uW1NlLlJJR0hUXSx0aGlzLmxvY2F0aW9uW1NlLlJJR0hUXT10fSxSZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRDtyZXR1cm4gdGhpcy5sb2NhdGlvbi5sZW5ndGg+MSYmdC5hcHBlbmQody50b0xvY2F0aW9uU3ltYm9sKHRoaXMubG9jYXRpb25bU2UuTEVGVF0pKSx0LmFwcGVuZCh3LnRvTG9jYXRpb25TeW1ib2wodGhpcy5sb2NhdGlvbltTZS5PTl0pKSx0aGlzLmxvY2F0aW9uLmxlbmd0aD4xJiZ0LmFwcGVuZCh3LnRvTG9jYXRpb25TeW1ib2wodGhpcy5sb2NhdGlvbltTZS5SSUdIVF0pKSx0LnRvU3RyaW5nKCl9LFJlLnByb3RvdHlwZS5zZXRMb2NhdGlvbnM9ZnVuY3Rpb24odCxlLG4pe3RoaXMubG9jYXRpb25bU2UuT05dPXQsdGhpcy5sb2NhdGlvbltTZS5MRUZUXT1lLHRoaXMubG9jYXRpb25bU2UuUklHSFRdPW59LFJlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8dGhpcy5sb2NhdGlvbi5sZW5ndGg/dGhpcy5sb2NhdGlvblt0XTp3Lk5PTkV9LFJlLnByb3RvdHlwZS5pc0FyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhdGlvbi5sZW5ndGg+MX0sUmUucHJvdG90eXBlLmlzQW55TnVsbD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5sb2NhdGlvbi5sZW5ndGg7dCsrKWlmKHRoaXMubG9jYXRpb25bdF09PT13Lk5PTkUpcmV0dXJuITA7cmV0dXJuITF9LFJlLnByb3RvdHlwZS5zZXRMb2NhdGlvbj1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zZXRMb2NhdGlvbihTZS5PTix0KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5sb2NhdGlvbltlXT1ufX0sUmUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24odCl7dGhpcy5sb2NhdGlvbj1uZXcgQXJyYXkodCkuZmlsbChudWxsKSx0aGlzLnNldEFsbExvY2F0aW9ucyh3Lk5PTkUpfSxSZS5wcm90b3R5cGUuaXNFcXVhbE9uU2lkZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvY2F0aW9uW2VdPT09dC5sb2NhdGlvbltlXX0sUmUucHJvdG90eXBlLmFsbFBvc2l0aW9uc0VxdWFsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhdGlvbi5sZW5ndGg7ZSsrKWlmKHRoaXMubG9jYXRpb25bZV0hPT10KXJldHVybiExO3JldHVybiEwfSxSZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sUmUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFJlfTt2YXIgUGU9ZnVuY3Rpb24gdCgpe2lmKHRoaXMuZWx0PW5ldyBBcnJheSgyKS5maWxsKG51bGwpLDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1swXSkpe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLmVsdFswXT1uZXcgUmUoZSksdGhpcy5lbHRbMV09bmV3IFJlKGUpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB0KXt2YXIgbj1hcmd1bWVudHNbMF07dGhpcy5lbHRbMF09bmV3IFJlKG4uZWx0WzBdKSx0aGlzLmVsdFsxXT1uZXcgUmUobi5lbHRbMV0pfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07dGhpcy5lbHRbMF09bmV3IFJlKHcuTk9ORSksdGhpcy5lbHRbMV09bmV3IFJlKHcuTk9ORSksdGhpcy5lbHRbaV0uc2V0TG9jYXRpb24ocil9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG89YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO3RoaXMuZWx0WzBdPW5ldyBSZShvLHMsYSksdGhpcy5lbHRbMV09bmV3IFJlKG8scyxhKX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdT1hcmd1bWVudHNbMF0sbD1hcmd1bWVudHNbMV0sYz1hcmd1bWVudHNbMl0scD1hcmd1bWVudHNbM107dGhpcy5lbHRbMF09bmV3IFJlKHcuTk9ORSx3Lk5PTkUsdy5OT05FKSx0aGlzLmVsdFsxXT1uZXcgUmUody5OT05FLHcuTk9ORSx3Lk5PTkUpLHRoaXMuZWx0W3VdLnNldExvY2F0aW9ucyhsLGMscCl9fTtQZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlDb3VudD1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuZWx0WzBdLmlzTnVsbCgpfHx0KyssdGhpcy5lbHRbMV0uaXNOdWxsKCl8fHQrKyx0fSxQZS5wcm90b3R5cGUuc2V0QWxsTG9jYXRpb25zPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbHRbdF0uc2V0QWxsTG9jYXRpb25zKGUpfSxQZS5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVsdFt0XS5pc051bGwoKX0sUGUucHJvdG90eXBlLnNldEFsbExvY2F0aW9uc0lmTnVsbD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zZXRBbGxMb2NhdGlvbnNJZk51bGwoMCx0KSx0aGlzLnNldEFsbExvY2F0aW9uc0lmTnVsbCgxLHQpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTt0aGlzLmVsdFtlXS5zZXRBbGxMb2NhdGlvbnNJZk51bGwobil9fSxQZS5wcm90b3R5cGUuaXNMaW5lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVsdFt0XS5pc0xpbmUoKX0sUGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8MjtlKyspbnVsbD09PXRoaXMuZWx0W2VdJiZudWxsIT09dC5lbHRbZV0/dGhpcy5lbHRbZV09bmV3IFJlKHQuZWx0W2VdKTp0aGlzLmVsdFtlXS5tZXJnZSh0LmVsdFtlXSl9LFBlLnByb3RvdHlwZS5mbGlwPWZ1bmN0aW9uKCl7dGhpcy5lbHRbMF0uZmxpcCgpLHRoaXMuZWx0WzFdLmZsaXAoKX0sUGUucHJvdG90eXBlLmdldExvY2F0aW9uPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5lbHRbdF0uZ2V0KFNlLk9OKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmVsdFtlXS5nZXQobil9fSxQZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRDtyZXR1cm4gbnVsbCE9PXRoaXMuZWx0WzBdJiYodC5hcHBlbmQoXCJBOlwiKSx0LmFwcGVuZCh0aGlzLmVsdFswXS50b1N0cmluZygpKSksbnVsbCE9PXRoaXMuZWx0WzFdJiYodC5hcHBlbmQoXCIgQjpcIiksdC5hcHBlbmQodGhpcy5lbHRbMV0udG9TdHJpbmcoKSkpLHQudG9TdHJpbmcoKX0sUGUucHJvdG90eXBlLmlzQXJlYT1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmVsdFswXS5pc0FyZWEoKXx8dGhpcy5lbHRbMV0uaXNBcmVhKCk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5lbHRbdF0uaXNBcmVhKCl9fSxQZS5wcm90b3R5cGUuaXNBbnlOdWxsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVsdFt0XS5pc0FueU51bGwoKX0sUGUucHJvdG90eXBlLnNldExvY2F0aW9uPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmVsdFt0XS5zZXRMb2NhdGlvbihTZS5PTixlKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl07dGhpcy5lbHRbbl0uc2V0TG9jYXRpb24oaSxyKX19LFBlLnByb3RvdHlwZS5pc0VxdWFsT25TaWRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZWx0WzBdLmlzRXF1YWxPblNpZGUodC5lbHRbMF0sZSkmJnRoaXMuZWx0WzFdLmlzRXF1YWxPblNpZGUodC5lbHRbMV0sZSl9LFBlLnByb3RvdHlwZS5hbGxQb3NpdGlvbnNFcXVhbD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVsdFt0XS5hbGxQb3NpdGlvbnNFcXVhbChlKX0sUGUucHJvdG90eXBlLnRvTGluZT1mdW5jdGlvbih0KXt0aGlzLmVsdFt0XS5pc0FyZWEoKSYmKHRoaXMuZWx0W3RdPW5ldyBSZSh0aGlzLmVsdFt0XS5sb2NhdGlvblswXSkpfSxQZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sUGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFBlfSxQZS50b0xpbmVMYWJlbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFBlKHcuTk9ORSksbj0wO248MjtuKyspZS5zZXRMb2NhdGlvbihuLHQuZ2V0TG9jYXRpb24obikpO3JldHVybiBlfTt2YXIgRGU9ZnVuY3Rpb24oKXt0aGlzLl9zdGFydERlPW51bGwsdGhpcy5fbWF4Tm9kZURlZ3JlZT0tMSx0aGlzLl9lZGdlcz1uZXcgTnQsdGhpcy5fcHRzPW5ldyBOdCx0aGlzLl9sYWJlbD1uZXcgUGUody5OT05FKSx0aGlzLl9yaW5nPW51bGwsdGhpcy5faXNIb2xlPW51bGwsdGhpcy5fc2hlbGw9bnVsbCx0aGlzLl9ob2xlcz1uZXcgTnQsdGhpcy5fZ2VvbWV0cnlGYWN0b3J5PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuX2dlb21ldHJ5RmFjdG9yeT1lLHRoaXMuY29tcHV0ZVBvaW50cyh0KSx0aGlzLmNvbXB1dGVSaW5nKCl9O0RlLnByb3RvdHlwZS5jb21wdXRlUmluZz1mdW5jdGlvbigpe2lmKG51bGwhPT10aGlzLl9yaW5nKXJldHVybiBudWxsO2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5fcHRzLnNpemUoKSkuZmlsbChudWxsKSxlPTA7ZTx0aGlzLl9wdHMuc2l6ZSgpO2UrKyl0W2VdPXRoaXMuX3B0cy5nZXQoZSk7dGhpcy5fcmluZz10aGlzLl9nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyh0KSx0aGlzLl9pc0hvbGU9YXQuaXNDQ1codGhpcy5fcmluZy5nZXRDb29yZGluYXRlcygpKX0sRGUucHJvdG90eXBlLmlzSXNvbGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuX2xhYmVsLmdldEdlb21ldHJ5Q291bnQoKX0sRGUucHJvdG90eXBlLmNvbXB1dGVQb2ludHM9ZnVuY3Rpb24odCl7dGhpcy5fc3RhcnREZT10O3ZhciBlPXQsbj0hMDtkb3tpZihudWxsPT09ZSl0aHJvdyBuZXcgd2UoXCJGb3VuZCBudWxsIERpcmVjdGVkRWRnZVwiKTtpZihlLmdldEVkZ2VSaW5nKCk9PT10aGlzKXRocm93IG5ldyB3ZShcIkRpcmVjdGVkIEVkZ2UgdmlzaXRlZCB0d2ljZSBkdXJpbmcgcmluZy1idWlsZGluZyBhdCBcIitlLmdldENvb3JkaW5hdGUoKSk7dGhpcy5fZWRnZXMuYWRkKGUpO3ZhciBpPWUuZ2V0TGFiZWwoKTtldC5pc1RydWUoaS5pc0FyZWEoKSksdGhpcy5tZXJnZUxhYmVsKGkpLHRoaXMuYWRkUG9pbnRzKGUuZ2V0RWRnZSgpLGUuaXNGb3J3YXJkKCksbiksbj0hMSx0aGlzLnNldEVkZ2VSaW5nKGUsdGhpcyksZT10aGlzLmdldE5leHQoZSl9d2hpbGUoZSE9PXRoaXMuX3N0YXJ0RGUpfSxEZS5wcm90b3R5cGUuZ2V0TGluZWFyUmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yaW5nfSxEZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcHRzLmdldCh0KX0sRGUucHJvdG90eXBlLmNvbXB1dGVNYXhOb2RlRGVncmVlPWZ1bmN0aW9uKCl7dGhpcy5fbWF4Tm9kZURlZ3JlZT0wO3ZhciB0PXRoaXMuX3N0YXJ0RGU7ZG97dmFyIGU9dC5nZXROb2RlKCkuZ2V0RWRnZXMoKS5nZXRPdXRnb2luZ0RlZ3JlZSh0aGlzKTtlPnRoaXMuX21heE5vZGVEZWdyZWUmJih0aGlzLl9tYXhOb2RlRGVncmVlPWUpLHQ9dGhpcy5nZXROZXh0KHQpfXdoaWxlKHQhPT10aGlzLl9zdGFydERlKTt0aGlzLl9tYXhOb2RlRGVncmVlKj0yfSxEZS5wcm90b3R5cGUuYWRkUG9pbnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldENvb3JkaW5hdGVzKCk7aWYoZSl7dmFyIHI9MTtuJiYocj0wKTtmb3IodmFyIG89cjtvPGkubGVuZ3RoO28rKyl0aGlzLl9wdHMuYWRkKGlbb10pfWVsc2V7dmFyIHM9aS5sZW5ndGgtMjtuJiYocz1pLmxlbmd0aC0xKTtmb3IodmFyIGE9czthPj0wO2EtLSl0aGlzLl9wdHMuYWRkKGlbYV0pfX0sRGUucHJvdG90eXBlLmlzSG9sZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0hvbGV9LERlLnByb3RvdHlwZS5zZXRJblJlc3VsdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3N0YXJ0RGU7ZG97dC5nZXRFZGdlKCkuc2V0SW5SZXN1bHQoITApLHQ9dC5nZXROZXh0KCl9d2hpbGUodCE9PXRoaXMuX3N0YXJ0RGUpfSxEZS5wcm90b3R5cGUuY29udGFpbnNQb2ludD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldExpbmVhclJpbmcoKTtpZighZS5nZXRFbnZlbG9wZUludGVybmFsKCkuY29udGFpbnModCkpcmV0dXJuITE7aWYoIWF0LmlzUG9pbnRJblJpbmcodCxlLmdldENvb3JkaW5hdGVzKCkpKXJldHVybiExO2Zvcih2YXIgbj10aGlzLl9ob2xlcy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7aWYobi5uZXh0KCkuY29udGFpbnNQb2ludCh0KSlyZXR1cm4hMX1yZXR1cm4hMH0sRGUucHJvdG90eXBlLmFkZEhvbGU9ZnVuY3Rpb24odCl7dGhpcy5faG9sZXMuYWRkKHQpfSxEZS5wcm90b3R5cGUuaXNTaGVsbD1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fc2hlbGx9LERlLnByb3RvdHlwZS5nZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYWJlbH0sRGUucHJvdG90eXBlLmdldEVkZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VkZ2VzfSxEZS5wcm90b3R5cGUuZ2V0TWF4Tm9kZURlZ3JlZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhOb2RlRGVncmVlPDAmJnRoaXMuY29tcHV0ZU1heE5vZGVEZWdyZWUoKSx0aGlzLl9tYXhOb2RlRGVncmVlfSxEZS5wcm90b3R5cGUuZ2V0U2hlbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hlbGx9LERlLnByb3RvdHlwZS5tZXJnZUxhYmVsPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm1lcmdlTGFiZWwodCwwKSx0aGlzLm1lcmdlTGFiZWwodCwxKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1lLmdldExvY2F0aW9uKG4sU2UuUklHSFQpO2lmKGk9PT13Lk5PTkUpcmV0dXJuIG51bGw7aWYodGhpcy5fbGFiZWwuZ2V0TG9jYXRpb24obik9PT13Lk5PTkUpcmV0dXJuIHRoaXMuX2xhYmVsLnNldExvY2F0aW9uKG4saSksbnVsbH19LERlLnByb3RvdHlwZS5zZXRTaGVsbD1mdW5jdGlvbih0KXt0aGlzLl9zaGVsbD10LG51bGwhPT10JiZ0LmFkZEhvbGUodGhpcyl9LERlLnByb3RvdHlwZS50b1BvbHlnb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLl9ob2xlcy5zaXplKCkpLmZpbGwobnVsbCksbj0wO248dGhpcy5faG9sZXMuc2l6ZSgpO24rKyllW25dPXRoaXMuX2hvbGVzLmdldChuKS5nZXRMaW5lYXJSaW5nKCk7cmV0dXJuIHQuY3JlYXRlUG9seWdvbih0aGlzLmdldExpbmVhclJpbmcoKSxlKX0sRGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LERlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBEZX07dmFyIE1lPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dC5jYWxsKHRoaXMsZSxuKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuc2V0RWRnZVJpbmc9ZnVuY3Rpb24odCxlKXt0LnNldE1pbkVkZ2VSaW5nKGUpfSxlLnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmdldE5leHRNaW4oKX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX0oRGUpLEFlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dC5jYWxsKHRoaXMsZSxuKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYnVpbGRNaW5pbWFsUmluZ3M9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgTnQsZT10aGlzLl9zdGFydERlO2Rve2lmKG51bGw9PT1lLmdldE1pbkVkZ2VSaW5nKCkpe3ZhciBuPW5ldyBNZShlLHRoaXMuX2dlb21ldHJ5RmFjdG9yeSk7dC5hZGQobil9ZT1lLmdldE5leHQoKX13aGlsZShlIT09dGhpcy5fc3RhcnREZSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLnNldEVkZ2VSaW5nPWZ1bmN0aW9uKHQsZSl7dC5zZXRFZGdlUmluZyhlKX0sZS5wcm90b3R5cGUubGlua0RpcmVjdGVkRWRnZXNGb3JNaW5pbWFsRWRnZVJpbmdzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc3RhcnREZTtkb3t0LmdldE5vZGUoKS5nZXRFZGdlcygpLmxpbmtNaW5pbWFsRGlyZWN0ZWRFZGdlcyh0aGlzKSx0PXQuZ2V0TmV4dCgpfXdoaWxlKHQhPT10aGlzLl9zdGFydERlKX0sZS5wcm90b3R5cGUuZ2V0TmV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC5nZXROZXh0KCl9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9KERlKSxGZT1mdW5jdGlvbigpe2lmKHRoaXMuX2xhYmVsPW51bGwsdGhpcy5faXNJblJlc3VsdD0hMSx0aGlzLl9pc0NvdmVyZWQ9ITEsdGhpcy5faXNDb3ZlcmVkU2V0PSExLHRoaXMuX2lzVmlzaXRlZD0hMSwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2xhYmVsPXR9fTtGZS5wcm90b3R5cGUuc2V0VmlzaXRlZD1mdW5jdGlvbih0KXt0aGlzLl9pc1Zpc2l0ZWQ9dH0sRmUucHJvdG90eXBlLnNldEluUmVzdWx0PWZ1bmN0aW9uKHQpe3RoaXMuX2lzSW5SZXN1bHQ9dH0sRmUucHJvdG90eXBlLmlzQ292ZXJlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvdmVyZWR9LEZlLnByb3RvdHlwZS5pc0NvdmVyZWRTZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDb3ZlcmVkU2V0fSxGZS5wcm90b3R5cGUuc2V0TGFiZWw9ZnVuY3Rpb24odCl7dGhpcy5fbGFiZWw9dH0sRmUucHJvdG90eXBlLmdldExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhYmVsfSxGZS5wcm90b3R5cGUuc2V0Q292ZXJlZD1mdW5jdGlvbih0KXt0aGlzLl9pc0NvdmVyZWQ9dCx0aGlzLl9pc0NvdmVyZWRTZXQ9ITB9LEZlLnByb3RvdHlwZS51cGRhdGVJTT1mdW5jdGlvbih0KXtldC5pc1RydWUodGhpcy5fbGFiZWwuZ2V0R2VvbWV0cnlDb3VudCgpPj0yLFwiZm91bmQgcGFydGlhbCBsYWJlbFwiKSx0aGlzLmNvbXB1dGVJTSh0KX0sRmUucHJvdG90eXBlLmlzSW5SZXN1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJblJlc3VsdH0sRmUucHJvdG90eXBlLmlzVmlzaXRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1Zpc2l0ZWR9LEZlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxGZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gRmV9O3ZhciBHZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5jYWxsKHRoaXMpLHRoaXMuX2Nvb3JkPW51bGwsdGhpcy5fZWRnZXM9bnVsbDt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5fY29vcmQ9ZSx0aGlzLl9lZGdlcz1uLHRoaXMuX2xhYmVsPW5ldyBQZSgwLHcuTk9ORSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmlzSW5jaWRlbnRFZGdlSW5SZXN1bHQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nZXRFZGdlcygpLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe2lmKHQubmV4dCgpLmdldEVkZ2UoKS5pc0luUmVzdWx0KCkpcmV0dXJuITB9cmV0dXJuITF9LGUucHJvdG90eXBlLmlzSXNvbGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuX2xhYmVsLmdldEdlb21ldHJ5Q291bnQoKX0sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb29yZH0sZS5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dC5wcmludGxuKFwibm9kZSBcIit0aGlzLl9jb29yZCtcIiBsYmw6IFwiK3RoaXMuX2xhYmVsKX0sZS5wcm90b3R5cGUuY29tcHV0ZUlNPWZ1bmN0aW9uKHQpe30sZS5wcm90b3R5cGUuY29tcHV0ZU1lcmdlZExvY2F0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49dy5OT05FO2lmKG49dGhpcy5fbGFiZWwuZ2V0TG9jYXRpb24oZSksIXQuaXNOdWxsKGUpKXt2YXIgaT10LmdldExvY2F0aW9uKGUpO24hPT13LkJPVU5EQVJZJiYobj1pKX1yZXR1cm4gbn0sZS5wcm90b3R5cGUuc2V0TGFiZWw9ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdC5wcm90b3R5cGUuc2V0TGFiZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtudWxsPT09dGhpcy5fbGFiZWw/dGhpcy5fbGFiZWw9bmV3IFBlKGUsbik6dGhpcy5fbGFiZWwuc2V0TG9jYXRpb24oZSxuKX0sZS5wcm90b3R5cGUuZ2V0RWRnZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWRnZXN9LGUucHJvdG90eXBlLm1lcmdlTGFiZWw9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGUpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm1lcmdlTGFiZWwodC5fbGFiZWwpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBQZSlmb3IodmFyIG49YXJndW1lbnRzWzBdLGk9MDtpPDI7aSsrKXt2YXIgcj10aGlzLmNvbXB1dGVNZXJnZWRMb2NhdGlvbihuLGkpO3RoaXMuX2xhYmVsLmdldExvY2F0aW9uKGkpPT09dy5OT05FJiZ0aGlzLl9sYWJlbC5zZXRMb2NhdGlvbihpLHIpfX0sZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3RoaXMuX2VkZ2VzLmluc2VydCh0KSx0LnNldE5vZGUodGhpcyl9LGUucHJvdG90eXBlLnNldExhYmVsQm91bmRhcnk9ZnVuY3Rpb24odCl7aWYobnVsbD09PXRoaXMuX2xhYmVsKXJldHVybiBudWxsO3ZhciBlPXcuTk9ORTtudWxsIT09dGhpcy5fbGFiZWwmJihlPXRoaXMuX2xhYmVsLmdldExvY2F0aW9uKHQpKTt2YXIgbj1udWxsO3N3aXRjaChlKXtjYXNlIHcuQk9VTkRBUlk6bj13LklOVEVSSU9SO2JyZWFrO2Nhc2Ugdy5JTlRFUklPUjpkZWZhdWx0Om49dy5CT1VOREFSWX10aGlzLl9sYWJlbC5zZXRMb2NhdGlvbih0LG4pfSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxlfShGZSkscWU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVNYXA9bmV3IHAsdGhpcy5ub2RlRmFjdD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLm5vZGVGYWN0PXR9O3FlLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vZGVNYXAuZ2V0KHQpfSxxZS5wcm90b3R5cGUuYWRkTm9kZT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dGhpcy5ub2RlTWFwLmdldCh0KTtyZXR1cm4gbnVsbD09PWUmJihlPXRoaXMubm9kZUZhY3QuY3JlYXRlTm9kZSh0KSx0aGlzLm5vZGVNYXAucHV0KHQsZSkpLGV9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBHZSl7dmFyIG49YXJndW1lbnRzWzBdLGk9dGhpcy5ub2RlTWFwLmdldChuLmdldENvb3JkaW5hdGUoKSk7cmV0dXJuIG51bGw9PT1pPyh0aGlzLm5vZGVNYXAucHV0KG4uZ2V0Q29vcmRpbmF0ZSgpLG4pLG4pOihpLm1lcmdlTGFiZWwobiksaSl9fSxxZS5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe2UubmV4dCgpLnByaW50KHQpfX0scWUucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC52YWx1ZXMoKS5pdGVyYXRvcigpfSxxZS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC52YWx1ZXMoKX0scWUucHJvdG90eXBlLmdldEJvdW5kYXJ5Tm9kZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBOdCxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KT09PXcuQk9VTkRBUlkmJmUuYWRkKGkpfXJldHVybiBlfSxxZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Q29vcmRpbmF0ZSgpO3RoaXMuYWRkTm9kZShlKS5hZGQodCl9LHFlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxxZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gcWV9O3ZhciBCZT1mdW5jdGlvbigpe30sVmU9e05FOntjb25maWd1cmFibGU6ITB9LE5XOntjb25maWd1cmFibGU6ITB9LFNXOntjb25maWd1cmFibGU6ITB9LFNFOntjb25maWd1cmFibGU6ITB9fTtCZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sQmUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEJlfSxCZS5pc05vcnRoZXJuPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09QmUuTkV8fHQ9PT1CZS5OV30sQmUuaXNPcHBvc2l0ZT1mdW5jdGlvbih0LGUpe2lmKHQ9PT1lKXJldHVybiExO3JldHVybiAyPT09KHQtZSs0KSU0fSxCZS5jb21tb25IYWxmUGxhbmU9ZnVuY3Rpb24odCxlKXtpZih0PT09ZSlyZXR1cm4gdDtpZigyPT09KHQtZSs0KSU0KXJldHVybi0xO3ZhciBuPXQ8ZT90OmU7cmV0dXJuIDA9PT1uJiYzPT09KHQ+ZT90OmUpPzM6bn0sQmUuaXNJbkhhbGZQbGFuZT1mdW5jdGlvbih0LGUpe3JldHVybiBlPT09QmUuU0U/dD09PUJlLlNFfHx0PT09QmUuU1c6dD09PWV8fHQ9PT1lKzF9LEJlLnF1YWRyYW50PWZ1bmN0aW9uKCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKDA9PT10JiYwPT09ZSl0aHJvdyBuZXcgbShcIkNhbm5vdCBjb21wdXRlIHRoZSBxdWFkcmFudCBmb3IgcG9pbnQgKCBcIit0K1wiLCBcIitlK1wiIClcIik7cmV0dXJuIHQ+PTA/ZT49MD9CZS5ORTpCZS5TRTplPj0wP0JlLk5XOkJlLlNXfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07aWYoaS54PT09bi54JiZpLnk9PT1uLnkpdGhyb3cgbmV3IG0oXCJDYW5ub3QgY29tcHV0ZSB0aGUgcXVhZHJhbnQgZm9yIHR3byBpZGVudGljYWwgcG9pbnRzIFwiK24pO3JldHVybiBpLng+PW4ueD9pLnk+PW4ueT9CZS5ORTpCZS5TRTppLnk+PW4ueT9CZS5OVzpCZS5TV319LFZlLk5FLmdldD1mdW5jdGlvbigpe3JldHVybiAwfSxWZS5OVy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0sVmUuU1cuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDJ9LFZlLlNFLmdldD1mdW5jdGlvbigpe3JldHVybiAzfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhCZSxWZSk7dmFyIFVlPWZ1bmN0aW9uKCl7aWYodGhpcy5fZWRnZT1udWxsLHRoaXMuX2xhYmVsPW51bGwsdGhpcy5fbm9kZT1udWxsLHRoaXMuX3AwPW51bGwsdGhpcy5fcDE9bnVsbCx0aGlzLl9keD1udWxsLHRoaXMuX2R5PW51bGwsdGhpcy5fcXVhZHJhbnQ9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2VkZ2U9dH1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMl07dGhpcy5fZWRnZT1lLHRoaXMuaW5pdChuLGkpLHRoaXMuX2xhYmVsPW51bGx9ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzWzNdO3RoaXMuX2VkZ2U9cix0aGlzLmluaXQobyxzKSx0aGlzLl9sYWJlbD1hfX07VWUucHJvdG90eXBlLmNvbXBhcmVEaXJlY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2R4PT09dC5fZHgmJnRoaXMuX2R5PT09dC5fZHk/MDp0aGlzLl9xdWFkcmFudD50Ll9xdWFkcmFudD8xOnRoaXMuX3F1YWRyYW50PHQuX3F1YWRyYW50Py0xOmF0LmNvbXB1dGVPcmllbnRhdGlvbih0Ll9wMCx0Ll9wMSx0aGlzLl9wMSl9LFVlLnByb3RvdHlwZS5nZXREeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9keX0sVWUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcDB9LFVlLnByb3RvdHlwZS5zZXROb2RlPWZ1bmN0aW9uKHQpe3RoaXMuX25vZGU9dH0sVWUucHJvdG90eXBlLnByaW50PWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguYXRhbjIodGhpcy5fZHksdGhpcy5fZHgpLG49dGhpcy5nZXRDbGFzcygpLmdldE5hbWUoKSxpPW4ubGFzdEluZGV4T2YoXCIuXCIpLHI9bi5zdWJzdHJpbmcoaSsxKTt0LnByaW50KFwiICBcIityK1wiOiBcIit0aGlzLl9wMCtcIiAtIFwiK3RoaXMuX3AxK1wiIFwiK3RoaXMuX3F1YWRyYW50K1wiOlwiK2UrXCIgICBcIit0aGlzLl9sYWJlbCl9LFVlLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gdGhpcy5jb21wYXJlRGlyZWN0aW9uKGUpfSxVZS5wcm90b3R5cGUuZ2V0RGlyZWN0ZWRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3AxfSxVZS5wcm90b3R5cGUuZ2V0RHg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHh9LFVlLnByb3RvdHlwZS5nZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYWJlbH0sVWUucHJvdG90eXBlLmdldEVkZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWRnZX0sVWUucHJvdG90eXBlLmdldFF1YWRyYW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3F1YWRyYW50fSxVZS5wcm90b3R5cGUuZ2V0Tm9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlfSxVZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1NYXRoLmF0YW4yKHRoaXMuX2R5LHRoaXMuX2R4KSxlPXRoaXMuZ2V0Q2xhc3MoKS5nZXROYW1lKCksbj1lLmxhc3RJbmRleE9mKFwiLlwiKTtyZXR1cm5cIiAgXCIrZS5zdWJzdHJpbmcobisxKStcIjogXCIrdGhpcy5fcDArXCIgLSBcIit0aGlzLl9wMStcIiBcIit0aGlzLl9xdWFkcmFudCtcIjpcIit0K1wiICAgXCIrdGhpcy5fbGFiZWx9LFVlLnByb3RvdHlwZS5jb21wdXRlTGFiZWw9ZnVuY3Rpb24odCl7fSxVZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbih0LGUpe3RoaXMuX3AwPXQsdGhpcy5fcDE9ZSx0aGlzLl9keD1lLngtdC54LHRoaXMuX2R5PWUueS10LnksdGhpcy5fcXVhZHJhbnQ9QmUucXVhZHJhbnQodGhpcy5fZHgsdGhpcy5fZHkpLGV0LmlzVHJ1ZSghKDA9PT10aGlzLl9keCYmMD09PXRoaXMuX2R5KSxcIkVkZ2VFbmQgd2l0aCBpZGVudGljYWwgZW5kcG9pbnRzIGZvdW5kXCIpfSxVZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bRV19LFVlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBVZX07dmFyIHplPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07aWYodC5jYWxsKHRoaXMsZSksdGhpcy5faXNGb3J3YXJkPW51bGwsdGhpcy5faXNJblJlc3VsdD0hMSx0aGlzLl9pc1Zpc2l0ZWQ9ITEsdGhpcy5fc3ltPW51bGwsdGhpcy5fbmV4dD1udWxsLHRoaXMuX25leHRNaW49bnVsbCx0aGlzLl9lZGdlUmluZz1udWxsLHRoaXMuX21pbkVkZ2VSaW5nPW51bGwsdGhpcy5fZGVwdGg9WzAsLTk5OSwtOTk5XSx0aGlzLl9pc0ZvcndhcmQ9bixuKXRoaXMuaW5pdChlLmdldENvb3JkaW5hdGUoMCksZS5nZXRDb29yZGluYXRlKDEpKTtlbHNle3ZhciBpPWUuZ2V0TnVtUG9pbnRzKCktMTt0aGlzLmluaXQoZS5nZXRDb29yZGluYXRlKGkpLGUuZ2V0Q29vcmRpbmF0ZShpLTEpKX10aGlzLmNvbXB1dGVEaXJlY3RlZExhYmVsKCl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldE5leHRNaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV4dE1pbn0sZS5wcm90b3R5cGUuZ2V0RGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2RlcHRoW3RdfSxlLnByb3RvdHlwZS5zZXRWaXNpdGVkPWZ1bmN0aW9uKHQpe3RoaXMuX2lzVmlzaXRlZD10fSxlLnByb3RvdHlwZS5jb21wdXRlRGlyZWN0ZWRMYWJlbD1mdW5jdGlvbigpe3RoaXMuX2xhYmVsPW5ldyBQZSh0aGlzLl9lZGdlLmdldExhYmVsKCkpLHRoaXMuX2lzRm9yd2FyZHx8dGhpcy5fbGFiZWwuZmxpcCgpfSxlLnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25leHR9LGUucHJvdG90eXBlLnNldERlcHRoPWZ1bmN0aW9uKHQsZSl7aWYoLTk5OSE9PXRoaXMuX2RlcHRoW3RdJiZ0aGlzLl9kZXB0aFt0XSE9PWUpdGhyb3cgbmV3IHdlKFwiYXNzaWduZWQgZGVwdGhzIGRvIG5vdCBtYXRjaFwiLHRoaXMuZ2V0Q29vcmRpbmF0ZSgpKTt0aGlzLl9kZXB0aFt0XT1lfSxlLnByb3RvdHlwZS5pc0ludGVyaW9yQXJlYUVkZ2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9ITAsZT0wO2U8MjtlKyspdGhpcy5fbGFiZWwuaXNBcmVhKGUpJiZ0aGlzLl9sYWJlbC5nZXRMb2NhdGlvbihlLFNlLkxFRlQpPT09dy5JTlRFUklPUiYmdGhpcy5fbGFiZWwuZ2V0TG9jYXRpb24oZSxTZS5SSUdIVCk9PT13LklOVEVSSU9SfHwodD0hMSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLnNldE5leHRNaW49ZnVuY3Rpb24odCl7dGhpcy5fbmV4dE1pbj10fSxlLnByb3RvdHlwZS5wcmludD1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5wcmludC5jYWxsKHRoaXMsZSksZS5wcmludChcIiBcIit0aGlzLl9kZXB0aFtTZS5MRUZUXStcIi9cIit0aGlzLl9kZXB0aFtTZS5SSUdIVF0pLGUucHJpbnQoXCIgKFwiK3RoaXMuZ2V0RGVwdGhEZWx0YSgpK1wiKVwiKSx0aGlzLl9pc0luUmVzdWx0JiZlLnByaW50KFwiIGluUmVzdWx0XCIpfSxlLnByb3RvdHlwZS5zZXRNaW5FZGdlUmluZz1mdW5jdGlvbih0KXt0aGlzLl9taW5FZGdlUmluZz10fSxlLnByb3RvdHlwZS5pc0xpbmVFZGdlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbGFiZWwuaXNMaW5lKDApfHx0aGlzLl9sYWJlbC5pc0xpbmUoMSksZT0hdGhpcy5fbGFiZWwuaXNBcmVhKDApfHx0aGlzLl9sYWJlbC5hbGxQb3NpdGlvbnNFcXVhbCgwLHcuRVhURVJJT1IpLG49IXRoaXMuX2xhYmVsLmlzQXJlYSgxKXx8dGhpcy5fbGFiZWwuYWxsUG9zaXRpb25zRXF1YWwoMSx3LkVYVEVSSU9SKTtyZXR1cm4gdCYmZSYmbn0sZS5wcm90b3R5cGUuc2V0RWRnZVJpbmc9ZnVuY3Rpb24odCl7dGhpcy5fZWRnZVJpbmc9dH0sZS5wcm90b3R5cGUuZ2V0TWluRWRnZVJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluRWRnZVJpbmd9LGUucHJvdG90eXBlLmdldERlcHRoRGVsdGE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9lZGdlLmdldERlcHRoRGVsdGEoKTtyZXR1cm4gdGhpcy5faXNGb3J3YXJkfHwodD0tdCksdH0sZS5wcm90b3R5cGUuc2V0SW5SZXN1bHQ9ZnVuY3Rpb24odCl7dGhpcy5faXNJblJlc3VsdD10fSxlLnByb3RvdHlwZS5nZXRTeW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3ltfSxlLnByb3RvdHlwZS5pc0ZvcndhcmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNGb3J3YXJkfSxlLnByb3RvdHlwZS5nZXRFZGdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VkZ2V9LGUucHJvdG90eXBlLnByaW50RWRnZT1mdW5jdGlvbih0KXt0aGlzLnByaW50KHQpLHQucHJpbnQoXCIgXCIpLHRoaXMuX2lzRm9yd2FyZD90aGlzLl9lZGdlLnByaW50KHQpOnRoaXMuX2VkZ2UucHJpbnRSZXZlcnNlKHQpfSxlLnByb3RvdHlwZS5zZXRTeW09ZnVuY3Rpb24odCl7dGhpcy5fc3ltPXR9LGUucHJvdG90eXBlLnNldFZpc2l0ZWRFZGdlPWZ1bmN0aW9uKHQpe3RoaXMuc2V0VmlzaXRlZCh0KSx0aGlzLl9zeW0uc2V0VmlzaXRlZCh0KX0sZS5wcm90b3R5cGUuc2V0RWRnZURlcHRocz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0RWRnZSgpLmdldERlcHRoRGVsdGEoKTt0aGlzLl9pc0ZvcndhcmR8fChuPS1uKTt2YXIgaT0xO3Q9PT1TZS5MRUZUJiYoaT0tMSk7dmFyIHI9U2Uub3Bwb3NpdGUodCksbz1lK24qaTt0aGlzLnNldERlcHRoKHQsZSksdGhpcy5zZXREZXB0aChyLG8pfSxlLnByb3RvdHlwZS5nZXRFZGdlUmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZGdlUmluZ30sZS5wcm90b3R5cGUuaXNJblJlc3VsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luUmVzdWx0fSxlLnByb3RvdHlwZS5zZXROZXh0PWZ1bmN0aW9uKHQpe3RoaXMuX25leHQ9dH0sZS5wcm90b3R5cGUuaXNWaXNpdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmlzaXRlZH0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZS5kZXB0aEZhY3Rvcj1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09dy5FWFRFUklPUiYmZT09PXcuSU5URVJJT1I/MTp0PT09dy5JTlRFUklPUiYmZT09PXcuRVhURVJJT1I/LTE6MH0sZX0oVWUpLFhlPWZ1bmN0aW9uKCl7fTtYZS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEdlKHQsbnVsbCl9LFhlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxYZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gWGV9O3ZhciBZZT1mdW5jdGlvbigpe2lmKHRoaXMuX2VkZ2VzPW5ldyBOdCx0aGlzLl9ub2Rlcz1udWxsLHRoaXMuX2VkZ2VFbmRMaXN0PW5ldyBOdCwwPT09YXJndW1lbnRzLmxlbmd0aCl0aGlzLl9ub2Rlcz1uZXcgcWUobmV3IFhlKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fbm9kZXM9bmV3IHFlKHQpfX07WWUucHJvdG90eXBlLnByaW50RWRnZXM9ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiRWRnZXM6XCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5fZWRnZXMuc2l6ZSgpO2UrKyl7dC5wcmludGxuKFwiZWRnZSBcIitlK1wiOlwiKTt2YXIgbj10aGlzLl9lZGdlcy5nZXQoZSk7bi5wcmludCh0KSxuLmVpTGlzdC5wcmludCh0KX19LFllLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ub2Rlcy5maW5kKHQpfSxZZS5wcm90b3R5cGUuYWRkTm9kZT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgR2Upe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5fbm9kZXMuYWRkTm9kZSh0KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5fbm9kZXMuYWRkTm9kZShlKX19LFllLnByb3RvdHlwZS5nZXROb2RlSXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZXMuaXRlcmF0b3IoKX0sWWUucHJvdG90eXBlLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX25vZGVzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt0Lm5leHQoKS5nZXRFZGdlcygpLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCl9fSxZZS5wcm90b3R5cGUuZGVidWdQcmludGxuPWZ1bmN0aW9uKHQpe1kub3V0LnByaW50bG4odCl9LFllLnByb3RvdHlwZS5pc0JvdW5kYXJ5Tm9kZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX25vZGVzLmZpbmQoZSk7aWYobnVsbD09PW4pcmV0dXJuITE7dmFyIGk9bi5nZXRMYWJlbCgpO3JldHVybiBudWxsIT09aSYmaS5nZXRMb2NhdGlvbih0KT09PXcuQk9VTkRBUll9LFllLnByb3RvdHlwZS5saW5rQWxsRGlyZWN0ZWRFZGdlcz1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9ub2Rlcy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dC5uZXh0KCkuZ2V0RWRnZXMoKS5saW5rQWxsRGlyZWN0ZWRFZGdlcygpfX0sWWUucHJvdG90eXBlLm1hdGNoSW5TYW1lRGlyZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiEhdC5lcXVhbHMobikmJihhdC5jb21wdXRlT3JpZW50YXRpb24odCxlLGkpPT09YXQuQ09MTElORUFSJiZCZS5xdWFkcmFudCh0LGUpPT09QmUucXVhZHJhbnQobixpKSl9LFllLnByb3RvdHlwZS5nZXRFZGdlRW5kcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZGdlRW5kTGlzdH0sWWUucHJvdG90eXBlLmRlYnVnUHJpbnQ9ZnVuY3Rpb24odCl7WS5vdXQucHJpbnQodCl9LFllLnByb3RvdHlwZS5nZXRFZGdlSXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWRnZXMuaXRlcmF0b3IoKX0sWWUucHJvdG90eXBlLmZpbmRFZGdlSW5TYW1lRGlyZWN0aW9uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0aGlzLl9lZGdlcy5zaXplKCk7bisrKXt2YXIgaT10aGlzLl9lZGdlcy5nZXQobikscj1pLmdldENvb3JkaW5hdGVzKCk7aWYodGhpcy5tYXRjaEluU2FtZURpcmVjdGlvbih0LGUsclswXSxyWzFdKSlyZXR1cm4gaTtpZih0aGlzLm1hdGNoSW5TYW1lRGlyZWN0aW9uKHQsZSxyW3IubGVuZ3RoLTFdLHJbci5sZW5ndGgtMl0pKXJldHVybiBpfXJldHVybiBudWxsfSxZZS5wcm90b3R5cGUuaW5zZXJ0RWRnZT1mdW5jdGlvbih0KXt0aGlzLl9lZGdlcy5hZGQodCl9LFllLnByb3RvdHlwZS5maW5kRWRnZUVuZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtpZihuLmdldEVkZ2UoKT09PXQpcmV0dXJuIG59cmV0dXJuIG51bGx9LFllLnByb3RvdHlwZS5hZGRFZGdlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5fZWRnZXMuYWRkKG4pO3ZhciBpPW5ldyB6ZShuLCEwKSxyPW5ldyB6ZShuLCExKTtpLnNldFN5bShyKSxyLnNldFN5bShpKSx0aGlzLmFkZChpKSx0aGlzLmFkZChyKX19LFllLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dGhpcy5fbm9kZXMuYWRkKHQpLHRoaXMuX2VkZ2VFbmRMaXN0LmFkZCh0KX0sWWUucHJvdG90eXBlLmdldE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGVzLnZhbHVlcygpfSxZZS5wcm90b3R5cGUuZmluZEVkZ2U9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMuX2VkZ2VzLnNpemUoKTtuKyspe3ZhciBpPXRoaXMuX2VkZ2VzLmdldChuKSxyPWkuZ2V0Q29vcmRpbmF0ZXMoKTtpZih0LmVxdWFscyhyWzBdKSYmZS5lcXVhbHMoclsxXSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LFllLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxZZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gWWV9LFllLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5nZXRFZGdlcygpLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCl9fTt2YXIga2U9ZnVuY3Rpb24oKXt0aGlzLl9nZW9tZXRyeUZhY3Rvcnk9bnVsbCx0aGlzLl9zaGVsbExpc3Q9bmV3IE50O3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9nZW9tZXRyeUZhY3Rvcnk9dH07a2UucHJvdG90eXBlLnNvcnRTaGVsbHNBbmRIb2xlcz1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO3IuaXNIb2xlKCk/bi5hZGQocik6ZS5hZGQocil9fSxrZS5wcm90b3R5cGUuY29tcHV0ZVBvbHlnb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgTnQsbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKS50b1BvbHlnb24odGhpcy5fZ2VvbWV0cnlGYWN0b3J5KTtlLmFkZChpKX1yZXR1cm4gZX0sa2UucHJvdG90eXBlLnBsYWNlRnJlZUhvbGVzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKG51bGw9PT1pLmdldFNoZWxsKCkpe3ZhciByPXRoaXMuZmluZEVkZ2VSaW5nQ29udGFpbmluZyhpLHQpO2lmKG51bGw9PT1yKXRocm93IG5ldyB3ZShcInVuYWJsZSB0byBhc3NpZ24gaG9sZSB0byBhIHNoZWxsXCIsaS5nZXRDb29yZGluYXRlKDApKTtpLnNldFNoZWxsKHIpfX19LGtlLnByb3RvdHlwZS5idWlsZE1pbmltYWxFZGdlUmluZ3M9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1uZXcgTnQscj10Lml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgbz1yLm5leHQoKTtpZihvLmdldE1heE5vZGVEZWdyZWUoKT4yKXtvLmxpbmtEaXJlY3RlZEVkZ2VzRm9yTWluaW1hbEVkZ2VSaW5ncygpO3ZhciBzPW8uYnVpbGRNaW5pbWFsUmluZ3MoKSxhPXRoaXMuZmluZFNoZWxsKHMpO251bGwhPT1hPyh0aGlzLnBsYWNlUG9seWdvbkhvbGVzKGEscyksZS5hZGQoYSkpOm4uYWRkQWxsKHMpfWVsc2UgaS5hZGQobyl9cmV0dXJuIGl9LGtlLnByb3RvdHlwZS5jb250YWluc1BvaW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9zaGVsbExpc3QuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe2lmKGUubmV4dCgpLmNvbnRhaW5zUG9pbnQodCkpcmV0dXJuITB9cmV0dXJuITF9LGtlLnByb3RvdHlwZS5idWlsZE1heGltYWxFZGdlUmluZ3M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBOdCxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKGkuaXNJblJlc3VsdCgpJiZpLmdldExhYmVsKCkuaXNBcmVhKCkmJm51bGw9PT1pLmdldEVkZ2VSaW5nKCkpe3ZhciByPW5ldyBBZShpLHRoaXMuX2dlb21ldHJ5RmFjdG9yeSk7ZS5hZGQociksci5zZXRJblJlc3VsdCgpfX1yZXR1cm4gZX0sa2UucHJvdG90eXBlLnBsYWNlUG9seWdvbkhvbGVzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kuaXNIb2xlKCkmJmkuc2V0U2hlbGwodCl9fSxrZS5wcm90b3R5cGUuZ2V0UG9seWdvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wdXRlUG9seWdvbnModGhpcy5fc2hlbGxMaXN0KX0sa2UucHJvdG90eXBlLmZpbmRFZGdlUmluZ0NvbnRhaW5pbmc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5nZXRMaW5lYXJSaW5nKCksaT1uLmdldEVudmVsb3BlSW50ZXJuYWwoKSxyPW4uZ2V0Q29vcmRpbmF0ZU4oMCksbz1udWxsLHM9bnVsbCxhPWUuaXRlcmF0b3IoKTthLmhhc05leHQoKTspe3ZhciB1PWEubmV4dCgpLGw9dS5nZXRMaW5lYXJSaW5nKCksYz1sLmdldEVudmVsb3BlSW50ZXJuYWwoKTtudWxsIT09byYmKHM9by5nZXRMaW5lYXJSaW5nKCkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKTt2YXIgcD0hMTtjLmNvbnRhaW5zKGkpJiZhdC5pc1BvaW50SW5SaW5nKHIsbC5nZXRDb29yZGluYXRlcygpKSYmKHA9ITApLHAmJihudWxsPT09b3x8cy5jb250YWlucyhjKSkmJihvPXUpfXJldHVybiBvfSxrZS5wcm90b3R5cGUuZmluZFNoZWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49bnVsbCxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO3IuaXNIb2xlKCl8fChuPXIsZSsrKX1yZXR1cm4gZXQuaXNUcnVlKGU8PTEsXCJmb3VuZCB0d28gc2hlbGxzIGluIE1pbmltYWxFZGdlUmluZyBsaXN0XCIpLG59LGtlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuYWRkKHQuZ2V0RWRnZUVuZHMoKSx0LmdldE5vZGVzKCkpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtZZS5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcyhuKTt2YXIgaT10aGlzLmJ1aWxkTWF4aW1hbEVkZ2VSaW5ncyhlKSxyPW5ldyBOdCxvPXRoaXMuYnVpbGRNaW5pbWFsRWRnZVJpbmdzKGksdGhpcy5fc2hlbGxMaXN0LHIpO3RoaXMuc29ydFNoZWxsc0FuZEhvbGVzKG8sdGhpcy5fc2hlbGxMaXN0LHIpLHRoaXMucGxhY2VGcmVlSG9sZXModGhpcy5fc2hlbGxMaXN0LHIpfX0sa2UucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGtlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBrZX07dmFyIGplPWZ1bmN0aW9uKCl7fTtqZS5wcm90b3R5cGUuZ2V0Qm91bmRzPWZ1bmN0aW9uKCl7fSxqZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0samUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGplfTt2YXIgSGU9ZnVuY3Rpb24oKXt0aGlzLl9ib3VuZHM9bnVsbCx0aGlzLl9pdGVtPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuX2JvdW5kcz10LHRoaXMuX2l0ZW09ZX07SGUucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbX0sSGUucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib3VuZHN9LEhlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltqZSxlXX0sSGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEhlfTt2YXIgV2U9ZnVuY3Rpb24oKXt0aGlzLl9zaXplPW51bGwsdGhpcy5faXRlbXM9bnVsbCx0aGlzLl9zaXplPTAsdGhpcy5faXRlbXM9bmV3IE50LHRoaXMuX2l0ZW1zLmFkZChudWxsKX07V2UucHJvdG90eXBlLnBvbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLl9pdGVtcy5nZXQoMSk7cmV0dXJuIHRoaXMuX2l0ZW1zLnNldCgxLHRoaXMuX2l0ZW1zLmdldCh0aGlzLl9zaXplKSksdGhpcy5fc2l6ZS09MSx0aGlzLnJlb3JkZXIoMSksdH0sV2UucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2l6ZX0sV2UucHJvdG90eXBlLnJlb3JkZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW51bGwsbj10aGlzLl9pdGVtcy5nZXQodCk7Mip0PD10aGlzLl9zaXplJiYoKGU9Mip0KSE9PXRoaXMuX3NpemUmJnRoaXMuX2l0ZW1zLmdldChlKzEpLmNvbXBhcmVUbyh0aGlzLl9pdGVtcy5nZXQoZSkpPDAmJmUrKyx0aGlzLl9pdGVtcy5nZXQoZSkuY29tcGFyZVRvKG4pPDApO3Q9ZSl0aGlzLl9pdGVtcy5zZXQodCx0aGlzLl9pdGVtcy5nZXQoZSkpO3RoaXMuX2l0ZW1zLnNldCh0LG4pfSxXZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9zaXplPTAsdGhpcy5faXRlbXMuY2xlYXIoKX0sV2UucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3NpemV9LFdlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dGhpcy5faXRlbXMuYWRkKG51bGwpLHRoaXMuX3NpemUrPTE7dmFyIGU9dGhpcy5fc2l6ZTtmb3IodGhpcy5faXRlbXMuc2V0KDAsdCk7dC5jb21wYXJlVG8odGhpcy5faXRlbXMuZ2V0KE1hdGgudHJ1bmMoZS8yKSkpPDA7ZS89Mil0aGlzLl9pdGVtcy5zZXQoZSx0aGlzLl9pdGVtcy5nZXQoTWF0aC50cnVuYyhlLzIpKSk7dGhpcy5faXRlbXMuc2V0KGUsdCl9LFdlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxXZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gV2V9O3ZhciBLZT1mdW5jdGlvbigpe307S2UucHJvdG90eXBlLnZpc2l0SXRlbT1mdW5jdGlvbih0KXt9LEtlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxLZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gS2V9O3ZhciBKZT1mdW5jdGlvbigpe307SmUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0LGUpe30sSmUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0LGUpe30sSmUucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKCl7fSxKZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sSmUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEplfTt2YXIgUWU9ZnVuY3Rpb24oKXtpZih0aGlzLl9jaGlsZEJvdW5kYWJsZXM9bmV3IE50LHRoaXMuX2JvdW5kcz1udWxsLHRoaXMuX2xldmVsPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9sZXZlbD10fX0sWmU9e3NlcmlhbFZlcnNpb25VSUQ6e2NvbmZpZ3VyYWJsZTohMH19O1FlLnByb3RvdHlwZS5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZXZlbH0sUWUucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRCb3VuZGFibGVzLnNpemUoKX0sUWUucHJvdG90eXBlLmdldENoaWxkQm91bmRhYmxlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZEJvdW5kYWJsZXN9LFFlLnByb3RvdHlwZS5hZGRDaGlsZEJvdW5kYWJsZT1mdW5jdGlvbih0KXtldC5pc1RydWUobnVsbD09PXRoaXMuX2JvdW5kcyksdGhpcy5fY2hpbGRCb3VuZGFibGVzLmFkZCh0KX0sUWUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRCb3VuZGFibGVzLmlzRW1wdHkoKX0sUWUucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fYm91bmRzJiYodGhpcy5fYm91bmRzPXRoaXMuY29tcHV0ZUJvdW5kcygpKSx0aGlzLl9ib3VuZHN9LFFlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltqZSxlXX0sUWUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFFlfSxaZS5zZXJpYWxWZXJzaW9uVUlELmdldD1mdW5jdGlvbigpe3JldHVybiAweDVhMWU1NWVjNDEzNjk4MDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFFlLFplKTt2YXIgJGU9ZnVuY3Rpb24oKXt9OyRlLnJldmVyc2VPcmRlcj1mdW5jdGlvbigpe3JldHVybntjb21wYXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuY29tcGFyZVRvKHQpfX19LCRlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gJGUuc29ydCh0KSx0LmdldCgwKX0sJGUuc29ydD1mdW5jdGlvbih0LGUpe3ZhciBuPXQudG9BcnJheSgpO2U/R3Quc29ydChuLGUpOkd0LnNvcnQobik7Zm9yKHZhciBpPXQuaXRlcmF0b3IoKSxyPTAsbz1uLmxlbmd0aDtyPG87cisrKWkubmV4dCgpLGkuc2V0KG5bcl0pfSwkZS5zaW5nbGV0b25MaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBOdDtyZXR1cm4gZS5hZGQodCksZX07dmFyIHRuPWZ1bmN0aW9uKCl7dGhpcy5fYm91bmRhYmxlMT1udWxsLHRoaXMuX2JvdW5kYWJsZTI9bnVsbCx0aGlzLl9kaXN0YW5jZT1udWxsLHRoaXMuX2l0ZW1EaXN0YW5jZT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLl9ib3VuZGFibGUxPXQsdGhpcy5fYm91bmRhYmxlMj1lLHRoaXMuX2l0ZW1EaXN0YW5jZT1uLHRoaXMuX2Rpc3RhbmNlPXRoaXMuZGlzdGFuY2UoKX07dG4ucHJvdG90eXBlLmV4cGFuZFRvUXVldWU9ZnVuY3Rpb24odCxlKXt2YXIgbj10bi5pc0NvbXBvc2l0ZSh0aGlzLl9ib3VuZGFibGUxKSxpPXRuLmlzQ29tcG9zaXRlKHRoaXMuX2JvdW5kYWJsZTIpO2lmKG4mJmkpcmV0dXJuIHRuLmFyZWEodGhpcy5fYm91bmRhYmxlMSk+dG4uYXJlYSh0aGlzLl9ib3VuZGFibGUyKT8odGhpcy5leHBhbmQodGhpcy5fYm91bmRhYmxlMSx0aGlzLl9ib3VuZGFibGUyLHQsZSksbnVsbCk6KHRoaXMuZXhwYW5kKHRoaXMuX2JvdW5kYWJsZTIsdGhpcy5fYm91bmRhYmxlMSx0LGUpLG51bGwpO2lmKG4pcmV0dXJuIHRoaXMuZXhwYW5kKHRoaXMuX2JvdW5kYWJsZTEsdGhpcy5fYm91bmRhYmxlMix0LGUpLG51bGw7aWYoaSlyZXR1cm4gdGhpcy5leHBhbmQodGhpcy5fYm91bmRhYmxlMix0aGlzLl9ib3VuZGFibGUxLHQsZSksbnVsbDt0aHJvdyBuZXcgbShcIm5laXRoZXIgYm91bmRhYmxlIGlzIGNvbXBvc2l0ZVwiKX0sdG4ucHJvdG90eXBlLmlzTGVhdmVzPWZ1bmN0aW9uKCl7cmV0dXJuISh0bi5pc0NvbXBvc2l0ZSh0aGlzLl9ib3VuZGFibGUxKXx8dG4uaXNDb21wb3NpdGUodGhpcy5fYm91bmRhYmxlMikpfSx0bi5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuX2Rpc3RhbmNlPGUuX2Rpc3RhbmNlPy0xOnRoaXMuX2Rpc3RhbmNlPmUuX2Rpc3RhbmNlPzE6MH0sdG4ucHJvdG90eXBlLmV4cGFuZD1mdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIHI9dC5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCkscz1uZXcgdG4obyxlLHRoaXMuX2l0ZW1EaXN0YW5jZSk7cy5nZXREaXN0YW5jZSgpPGkmJm4uYWRkKHMpfX0sdG4ucHJvdG90eXBlLmdldEJvdW5kYWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/dGhpcy5fYm91bmRhYmxlMTp0aGlzLl9ib3VuZGFibGUyfSx0bi5wcm90b3R5cGUuZ2V0RGlzdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdGFuY2V9LHRuLnByb3RvdHlwZS5kaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhdmVzKCk/dGhpcy5faXRlbURpc3RhbmNlLmRpc3RhbmNlKHRoaXMuX2JvdW5kYWJsZTEsdGhpcy5fYm91bmRhYmxlMik6dGhpcy5fYm91bmRhYmxlMS5nZXRCb3VuZHMoKS5kaXN0YW5jZSh0aGlzLl9ib3VuZGFibGUyLmdldEJvdW5kcygpKX0sdG4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0VdfSx0bi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdG59LHRuLmFyZWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0Qm91bmRzKCkuZ2V0QXJlYSgpfSx0bi5pc0NvbXBvc2l0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFFlfTt2YXIgZW49ZnVuY3Rpb24gdCgpe2lmKHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLl9idWlsdD0hMSx0aGlzLl9pdGVtQm91bmRhYmxlcz1uZXcgTnQsdGhpcy5fbm9kZUNhcGFjaXR5PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPXQuREVGQVVMVF9OT0RFX0NBUEFDSVRZO3RoaXMuX25vZGVDYXBhY2l0eT1lfWVsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXTtldC5pc1RydWUobj4xLFwiTm9kZSBjYXBhY2l0eSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxXCIpLHRoaXMuX25vZGVDYXBhY2l0eT1ufX0sbm49e0ludGVyc2VjdHNPcDp7Y29uZmlndXJhYmxlOiEwfSxzZXJpYWxWZXJzaW9uVUlEOntjb25maWd1cmFibGU6ITB9LERFRkFVTFRfTk9ERV9DQVBBQ0lUWTp7Y29uZmlndXJhYmxlOiEwfX07ZW4ucHJvdG90eXBlLmdldE5vZGVDYXBhY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlQ2FwYWNpdHl9LGVuLnByb3RvdHlwZS5sYXN0Tm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQodC5zaXplKCktMSl9LGVuLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuaXNFbXB0eSgpPzA6KHRoaXMuYnVpbGQoKSx0aGlzLnNpemUodGhpcy5fcm9vdCkpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9MCxlPWFyZ3VtZW50c1swXS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7biBpbnN0YW5jZW9mIFFlP3QrPXRoaXMuc2l6ZShuKTpuIGluc3RhbmNlb2YgSGUmJih0Kz0xKX1yZXR1cm4gdH19LGVuLnByb3RvdHlwZS5yZW1vdmVJdGVtPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW51bGwsaT10LmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtyIGluc3RhbmNlb2YgSGUmJnIuZ2V0SXRlbSgpPT09ZSYmKG49cil9cmV0dXJuIG51bGwhPT1uJiYodC5nZXRDaGlsZEJvdW5kYWJsZXMoKS5yZW1vdmUobiksITApfSxlbi5wcm90b3R5cGUuaXRlbXNUcmVlPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe3RoaXMuYnVpbGQoKTt2YXIgdD10aGlzLml0ZW1zVHJlZSh0aGlzLl9yb290KTtyZXR1cm4gbnVsbD09PXQ/bmV3IE50OnR9aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgZT1hcmd1bWVudHNbMF0sbj1uZXcgTnQsaT1lLmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtpZihyIGluc3RhbmNlb2YgUWUpe3ZhciBvPXRoaXMuaXRlbXNUcmVlKHIpO251bGwhPT1vJiZuLmFkZChvKX1lbHNlIHIgaW5zdGFuY2VvZiBIZT9uLmFkZChyLmdldEl0ZW0oKSk6ZXQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKX1yZXR1cm4gbi5zaXplKCk8PTA/bnVsbDpufX0sZW4ucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0LGUpe2V0LmlzVHJ1ZSghdGhpcy5fYnVpbHQsXCJDYW5ub3QgaW5zZXJ0IGl0ZW1zIGludG8gYW4gU1RSIHBhY2tlZCBSLXRyZWUgYWZ0ZXIgaXQgaGFzIGJlZW4gYnVpbHQuXCIpLHRoaXMuX2l0ZW1Cb3VuZGFibGVzLmFkZChuZXcgSGUodCxlKSl9LGVuLnByb3RvdHlwZS5ib3VuZGFibGVzQXRMZXZlbD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgTnQ7cmV0dXJuIHRoaXMuYm91bmRhYmxlc0F0TGV2ZWwodCx0aGlzLl9yb290LGUpLGV9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTtpZihldC5pc1RydWUobj4tMiksaS5nZXRMZXZlbCgpPT09bilyZXR1cm4gci5hZGQoaSksbnVsbDtmb3IodmFyIG89aS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO28uaGFzTmV4dCgpOyl7dmFyIHM9by5uZXh0KCk7cyBpbnN0YW5jZW9mIFFlP3RoaXMuYm91bmRhYmxlc0F0TGV2ZWwobixzLHIpOihldC5pc1RydWUocyBpbnN0YW5jZW9mIEhlKSwtMT09PW4mJnIuYWRkKHMpKX1yZXR1cm4gbnVsbH19LGVuLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5idWlsZCgpO3ZhciBlPW5ldyBOdDtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/ZToodGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKHRoaXMuX3Jvb3QuZ2V0Qm91bmRzKCksdCkmJnRoaXMucXVlcnkodCx0aGlzLl9yb290LGUpLGUpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07aWYodGhpcy5idWlsZCgpLHRoaXMuaXNFbXB0eSgpKXJldHVybiBudWxsO3RoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyh0aGlzLl9yb290LmdldEJvdW5kcygpLG4pJiZ0aGlzLnF1ZXJ5KG4sdGhpcy5fcm9vdCxpKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKFQoYXJndW1lbnRzWzJdLEtlKSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3QmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgUWUpZm9yKHZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxzPWFyZ3VtZW50c1syXSxhPW8uZ2V0Q2hpbGRCb3VuZGFibGVzKCksdT0wO3U8YS5zaXplKCk7dSsrKXt2YXIgbD1hLmdldCh1KTt0aGlzLmdldEludGVyc2VjdHNPcCgpLmludGVyc2VjdHMobC5nZXRCb3VuZHMoKSxyKSYmKGwgaW5zdGFuY2VvZiBRZT90aGlzLnF1ZXJ5KHIsbCxzKTpsIGluc3RhbmNlb2YgSGU/cy52aXNpdEl0ZW0obC5nZXRJdGVtKCkpOmV0LnNob3VsZE5ldmVyUmVhY2hIZXJlKCkpfWVsc2UgaWYoVChhcmd1bWVudHNbMl0seHQpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBRZSlmb3IodmFyIGM9YXJndW1lbnRzWzBdLHA9YXJndW1lbnRzWzFdLGg9YXJndW1lbnRzWzJdLGY9cC5nZXRDaGlsZEJvdW5kYWJsZXMoKSxnPTA7ZzxmLnNpemUoKTtnKyspe3ZhciBkPWYuZ2V0KGcpO3RoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyhkLmdldEJvdW5kcygpLGMpJiYoZCBpbnN0YW5jZW9mIFFlP3RoaXMucXVlcnkoYyxkLGgpOmQgaW5zdGFuY2VvZiBIZT9oLmFkZChkLmdldEl0ZW0oKSk6ZXQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKSl9fSxlbi5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9idWlsdClyZXR1cm4gbnVsbDt0aGlzLl9yb290PXRoaXMuX2l0ZW1Cb3VuZGFibGVzLmlzRW1wdHkoKT90aGlzLmNyZWF0ZU5vZGUoMCk6dGhpcy5jcmVhdGVIaWdoZXJMZXZlbHModGhpcy5faXRlbUJvdW5kYWJsZXMsLTEpLHRoaXMuX2l0ZW1Cb3VuZGFibGVzPW51bGwsdGhpcy5fYnVpbHQ9ITB9LGVuLnByb3RvdHlwZS5nZXRSb290PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVpbGQoKSx0aGlzLl9yb290fSxlbi5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5idWlsZCgpLCEhdGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKHRoaXMuX3Jvb3QuZ2V0Qm91bmRzKCksdCkmJnRoaXMucmVtb3ZlKHQsdGhpcy5fcm9vdCxlKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLG89dGhpcy5yZW1vdmVJdGVtKGkscik7aWYobylyZXR1cm4hMDtmb3IodmFyIHM9bnVsbCxhPWkuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXRlcmF0b3IoKTthLmhhc05leHQoKTspe3ZhciB1PWEubmV4dCgpO2lmKHRoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyh1LmdldEJvdW5kcygpLG4pJiYodSBpbnN0YW5jZW9mIFFlJiYobz10aGlzLnJlbW92ZShuLHUscikpKSl7cz11O2JyZWFrfX1yZXR1cm4gbnVsbCE9PXMmJnMuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXNFbXB0eSgpJiZpLmdldENoaWxkQm91bmRhYmxlcygpLnJlbW92ZShzKSxvfX0sZW4ucHJvdG90eXBlLmNyZWF0ZUhpZ2hlckxldmVscz1mdW5jdGlvbih0LGUpe2V0LmlzVHJ1ZSghdC5pc0VtcHR5KCkpO3ZhciBuPXRoaXMuY3JlYXRlUGFyZW50Qm91bmRhYmxlcyh0LGUrMSk7cmV0dXJuIDE9PT1uLnNpemUoKT9uLmdldCgwKTp0aGlzLmNyZWF0ZUhpZ2hlckxldmVscyhuLGUrMSl9LGVuLnByb3RvdHlwZS5kZXB0aD1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmlzRW1wdHkoKT8wOih0aGlzLmJ1aWxkKCksdGhpcy5kZXB0aCh0aGlzLl9yb290KSk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD0wLGU9YXJndW1lbnRzWzBdLmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtpZihuIGluc3RhbmNlb2YgUWUpe3ZhciBpPXRoaXMuZGVwdGgobik7aT50JiYodD1pKX19cmV0dXJuIHQrMX19LGVuLnByb3RvdHlwZS5jcmVhdGVQYXJlbnRCb3VuZGFibGVzPWZ1bmN0aW9uKHQsZSl7ZXQuaXNUcnVlKCF0LmlzRW1wdHkoKSk7dmFyIG49bmV3IE50O24uYWRkKHRoaXMuY3JlYXRlTm9kZShlKSk7dmFyIGk9bmV3IE50KHQpOyRlLnNvcnQoaSx0aGlzLmdldENvbXBhcmF0b3IoKSk7Zm9yKHZhciByPWkuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpO3RoaXMubGFzdE5vZGUobikuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuc2l6ZSgpPT09dGhpcy5nZXROb2RlQ2FwYWNpdHkoKSYmbi5hZGQodGhpcy5jcmVhdGVOb2RlKGUpKSx0aGlzLmxhc3ROb2RlKG4pLmFkZENoaWxkQm91bmRhYmxlKG8pfXJldHVybiBufSxlbi5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWlsdD90aGlzLl9yb290LmlzRW1wdHkoKTp0aGlzLl9pdGVtQm91bmRhYmxlcy5pc0VtcHR5KCl9LGVuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltlXX0sZW4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGVufSxlbi5jb21wYXJlRG91Ymxlcz1mdW5jdGlvbih0LGUpe3JldHVybiB0PmU/MTp0PGU/LTE6MH0sbm4uSW50ZXJzZWN0c09wLmdldD1mdW5jdGlvbigpe3JldHVybiBybn0sbm4uc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMHgzNWVmNjRjODJkNGM1NDAwfSxubi5ERUZBVUxUX05PREVfQ0FQQUNJVFkuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDEwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlbixubik7dmFyIHJuPWZ1bmN0aW9uKCl7fSxvbj1mdW5jdGlvbigpe307b24ucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKHQsZSl7fSxvbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sb24ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIG9ufTt2YXIgc249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihlKXtlPWV8fG4uREVGQVVMVF9OT0RFX0NBUEFDSVRZLHQuY2FsbCh0aGlzLGUpfXQmJihuLl9fcHJvdG9fXz10KSwobi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPW47dmFyIGk9e1NUUnRyZWVOb2RlOntjb25maWd1cmFibGU6ITB9LHNlcmlhbFZlcnNpb25VSUQ6e2NvbmZpZ3VyYWJsZTohMH0seENvbXBhcmF0b3I6e2NvbmZpZ3VyYWJsZTohMH0seUNvbXBhcmF0b3I6e2NvbmZpZ3VyYWJsZTohMH0saW50ZXJzZWN0c09wOntjb25maWd1cmFibGU6ITB9LERFRkFVTFRfTk9ERV9DQVBBQ0lUWTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4ucHJvdG90eXBlLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZXM9ZnVuY3Rpb24odCxlKXtldC5pc1RydWUodC5sZW5ndGg+MCk7Zm9yKHZhciBuPW5ldyBOdCxpPTA7aTx0Lmxlbmd0aDtpKyspbi5hZGRBbGwodGhpcy5jcmVhdGVQYXJlbnRCb3VuZGFibGVzRnJvbVZlcnRpY2FsU2xpY2UodFtpXSxlKSk7cmV0dXJuIG59LG4ucHJvdG90eXBlLmNyZWF0ZU5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBhbih0KX0sbi5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90LnByb3RvdHlwZS5zaXplLmNhbGwodGhpcyk6dC5wcm90b3R5cGUuc2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG4ucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0LnByb3RvdHlwZS5pbnNlcnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtpZihlLmlzTnVsbCgpKXJldHVybiBudWxsO3QucHJvdG90eXBlLmluc2VydC5jYWxsKHRoaXMsZSxuKX0sbi5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0c09wPWZ1bmN0aW9uKCl7cmV0dXJuIG4uaW50ZXJzZWN0c09wfSxuLnByb3RvdHlwZS52ZXJ0aWNhbFNsaWNlcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1NYXRoLnRydW5jKE1hdGguY2VpbCh0LnNpemUoKS9lKSksaT1uZXcgQXJyYXkoZSkuZmlsbChudWxsKSxyPXQuaXRlcmF0b3IoKSxvPTA7bzxlO28rKyl7aVtvXT1uZXcgTnQ7Zm9yKHZhciBzPTA7ci5oYXNOZXh0KCkmJnM8bjspe3ZhciBhPXIubmV4dCgpO2lbb10uYWRkKGEpLHMrK319cmV0dXJuIGl9LG4ucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdC5wcm90b3R5cGUucXVlcnkuY2FsbCh0aGlzLGUpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dC5wcm90b3R5cGUucXVlcnkuY2FsbCh0aGlzLG4saSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aClpZihUKGFyZ3VtZW50c1syXSxLZSkmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgT2JqZWN0JiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIFFlKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl07dC5wcm90b3R5cGUucXVlcnkuY2FsbCh0aGlzLHIsbyxzKX1lbHNlIGlmKFQoYXJndW1lbnRzWzJdLHh0KSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3QmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgUWUpe3ZhciBhPWFyZ3VtZW50c1swXSx1PWFyZ3VtZW50c1sxXSxsPWFyZ3VtZW50c1syXTt0LnByb3RvdHlwZS5xdWVyeS5jYWxsKHRoaXMsYSx1LGwpfX0sbi5wcm90b3R5cGUuZ2V0Q29tcGFyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuLnlDb21wYXJhdG9yfSxuLnByb3RvdHlwZS5jcmVhdGVQYXJlbnRCb3VuZGFibGVzRnJvbVZlcnRpY2FsU2xpY2U9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wcm90b3R5cGUuY3JlYXRlUGFyZW50Qm91bmRhYmxlcy5jYWxsKHRoaXMsZSxuKX0sbi5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtyZXR1cm4gdC5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyxlLG4pfXJldHVybiB0LnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuLnByb3RvdHlwZS5kZXB0aD1mdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90LnByb3RvdHlwZS5kZXB0aC5jYWxsKHRoaXMpOnQucHJvdG90eXBlLmRlcHRoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbi5wcm90b3R5cGUuY3JlYXRlUGFyZW50Qm91bmRhYmxlcz1mdW5jdGlvbih0LGUpe2V0LmlzVHJ1ZSghdC5pc0VtcHR5KCkpO3ZhciBpPU1hdGgudHJ1bmMoTWF0aC5jZWlsKHQuc2l6ZSgpL3RoaXMuZ2V0Tm9kZUNhcGFjaXR5KCkpKSxyPW5ldyBOdCh0KTskZS5zb3J0KHIsbi54Q29tcGFyYXRvcik7dmFyIG89dGhpcy52ZXJ0aWNhbFNsaWNlcyhyLE1hdGgudHJ1bmMoTWF0aC5jZWlsKE1hdGguc3FydChpKSkpKTtyZXR1cm4gdGhpcy5jcmVhdGVQYXJlbnRCb3VuZGFibGVzRnJvbVZlcnRpY2FsU2xpY2VzKG8sZSl9LG4ucHJvdG90eXBlLm5lYXJlc3ROZWlnaGJvdXI9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoVChhcmd1bWVudHNbMF0sb24pKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgdG4odGhpcy5nZXRSb290KCksdGhpcy5nZXRSb290KCksdCk7cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cihlKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHRuKXt2YXIgaT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cihpLHYuUE9TSVRJVkVfSU5GSU5JVFkpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIG4mJlQoYXJndW1lbnRzWzFdLG9uKSl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHM9bmV3IHRuKHRoaXMuZ2V0Um9vdCgpLHIuZ2V0Um9vdCgpLG8pO3JldHVybiB0aGlzLm5lYXJlc3ROZWlnaGJvdXIocyl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB0biYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIGE9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzFdLGw9bnVsbCxjPW5ldyBXZTtmb3IoYy5hZGQoYSk7IWMuaXNFbXB0eSgpJiZ1PjA7KXt2YXIgcD1jLnBvbGwoKSxoPXAuZ2V0RGlzdGFuY2UoKTtpZihoPj11KWJyZWFrO3AuaXNMZWF2ZXMoKT8odT1oLGw9cCk6cC5leHBhbmRUb1F1ZXVlKGMsdSl9cmV0dXJuW2wuZ2V0Qm91bmRhYmxlKDApLmdldEl0ZW0oKSxsLmdldEJvdW5kYWJsZSgxKS5nZXRJdGVtKCldfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZj1hcmd1bWVudHNbMF0sZz1hcmd1bWVudHNbMV0sZD1hcmd1bWVudHNbMl0seT1uZXcgSGUoZixnKSxfPW5ldyB0bih0aGlzLmdldFJvb3QoKSx5LGQpO3JldHVybiB0aGlzLm5lYXJlc3ROZWlnaGJvdXIoXylbMF19fSxuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltKZSxlXX0sbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gbn0sbi5jZW50cmVYPWZ1bmN0aW9uKHQpe3JldHVybiBuLmF2Zyh0LmdldE1pblgoKSx0LmdldE1heFgoKSl9LG4uYXZnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQrZSkvMn0sbi5jZW50cmVZPWZ1bmN0aW9uKHQpe3JldHVybiBuLmF2Zyh0LmdldE1pblkoKSx0LmdldE1heFkoKSl9LGkuU1RSdHJlZU5vZGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGFufSxpLnNlcmlhbFZlcnNpb25VSUQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB4Mzk5MjBmN2Q1ZjI2MWUwfSxpLnhDb21wYXJhdG9yLmdldD1mdW5jdGlvbigpe3JldHVybntpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltOXX0sY29tcGFyZTpmdW5jdGlvbihlLGkpe3JldHVybiB0LmNvbXBhcmVEb3VibGVzKG4uY2VudHJlWChlLmdldEJvdW5kcygpKSxuLmNlbnRyZVgoaS5nZXRCb3VuZHMoKSkpfX19LGkueUNvbXBhcmF0b3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJue2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW05dfSxjb21wYXJlOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHQuY29tcGFyZURvdWJsZXMobi5jZW50cmVZKGUuZ2V0Qm91bmRzKCkpLG4uY2VudHJlWShpLmdldEJvdW5kcygpKSl9fX0saS5pbnRlcnNlY3RzT3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJue2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3QuSW50ZXJzZWN0c09wXX0saW50ZXJzZWN0czpmdW5jdGlvbih0LGUpe3JldHVybiB0LmludGVyc2VjdHMoZSl9fX0saS5ERUZBVUxUX05PREVfQ0FQQUNJVFkuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDEwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuLGkpLG59KGVuKSxhbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9YXJndW1lbnRzWzBdO3QuY2FsbCh0aGlzLGUpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5jb21wdXRlQm91bmRzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW51bGwsZT10aGlzLmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtudWxsPT09dD90PW5ldyBqKG4uZ2V0Qm91bmRzKCkpOnQuZXhwYW5kVG9JbmNsdWRlKG4uZ2V0Qm91bmRzKCkpfXJldHVybiB0fSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxlfShRZSksdW49ZnVuY3Rpb24oKXt9O3VuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSx1bi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdW59LHVuLnJlbGF0aXZlU2lnbj1mdW5jdGlvbih0LGUpe3JldHVybiB0PGU/LTE6dD5lPzE6MH0sdW4uY29tcGFyZT1mdW5jdGlvbih0LGUsbil7aWYoZS5lcXVhbHMyRChuKSlyZXR1cm4gMDt2YXIgaT11bi5yZWxhdGl2ZVNpZ24oZS54LG4ueCkscj11bi5yZWxhdGl2ZVNpZ24oZS55LG4ueSk7c3dpdGNoKHQpe2Nhc2UgMDpyZXR1cm4gdW4uY29tcGFyZVZhbHVlKGkscik7Y2FzZSAxOnJldHVybiB1bi5jb21wYXJlVmFsdWUocixpKTtjYXNlIDI6cmV0dXJuIHVuLmNvbXBhcmVWYWx1ZShyLC1pKTtjYXNlIDM6cmV0dXJuIHVuLmNvbXBhcmVWYWx1ZSgtaSxyKTtjYXNlIDQ6cmV0dXJuIHVuLmNvbXBhcmVWYWx1ZSgtaSwtcik7Y2FzZSA1OnJldHVybiB1bi5jb21wYXJlVmFsdWUoLXIsLWkpO2Nhc2UgNjpyZXR1cm4gdW4uY29tcGFyZVZhbHVlKC1yLGkpO2Nhc2UgNzpyZXR1cm4gdW4uY29tcGFyZVZhbHVlKGksLXIpfXJldHVybiBldC5zaG91bGROZXZlclJlYWNoSGVyZShcImludmFsaWQgb2N0YW50IHZhbHVlXCIpLDB9LHVuLmNvbXBhcmVWYWx1ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0PDA/LTE6dD4wPzE6ZTwwPy0xOmU+MD8xOjB9O3ZhciBsbj1mdW5jdGlvbigpe3RoaXMuX3NlZ1N0cmluZz1udWxsLHRoaXMuY29vcmQ9bnVsbCx0aGlzLnNlZ21lbnRJbmRleD1udWxsLHRoaXMuX3NlZ21lbnRPY3RhbnQ9bnVsbCx0aGlzLl9pc0ludGVyaW9yPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3RoaXMuX3NlZ1N0cmluZz10LHRoaXMuY29vcmQ9bmV3IEMoZSksdGhpcy5zZWdtZW50SW5kZXg9bix0aGlzLl9zZWdtZW50T2N0YW50PWksdGhpcy5faXNJbnRlcmlvcj0hZS5lcXVhbHMyRCh0LmdldENvb3JkaW5hdGUobikpfTtsbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkfSxsbi5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dC5wcmludCh0aGlzLmNvb3JkKSx0LnByaW50KFwiIHNlZyAjID0gXCIrdGhpcy5zZWdtZW50SW5kZXgpfSxsbi5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuc2VnbWVudEluZGV4PGUuc2VnbWVudEluZGV4Py0xOnRoaXMuc2VnbWVudEluZGV4PmUuc2VnbWVudEluZGV4PzE6dGhpcy5jb29yZC5lcXVhbHMyRChlLmNvb3JkKT8wOnVuLmNvbXBhcmUodGhpcy5fc2VnbWVudE9jdGFudCx0aGlzLmNvb3JkLGUuY29vcmQpfSxsbi5wcm90b3R5cGUuaXNFbmRQb2ludD1mdW5jdGlvbih0KXtyZXR1cm4gMD09PXRoaXMuc2VnbWVudEluZGV4JiYhdGhpcy5faXNJbnRlcmlvcnx8dGhpcy5zZWdtZW50SW5kZXg9PT10fSxsbi5wcm90b3R5cGUuaXNJbnRlcmlvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0ludGVyaW9yfSxsbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bRV19LGxuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBsbn07dmFyIGNuPWZ1bmN0aW9uKCl7dGhpcy5fbm9kZU1hcD1uZXcgcCx0aGlzLl9lZGdlPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2VkZ2U9dH07Y24ucHJvdG90eXBlLmdldFNwbGl0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgU3Q7dGhpcy5hZGRFbmRwb2ludHMoKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpLG49ZS5uZXh0KCk7ZS5oYXNOZXh0KCk7KXt2YXIgaT1lLm5leHQoKTt0aGlzLmFkZEVkZ2VDb29yZGluYXRlcyhuLGksdCksbj1pfXJldHVybiB0LnRvQ29vcmRpbmF0ZUFycmF5KCl9LGNuLnByb3RvdHlwZS5hZGRDb2xsYXBzZWROb2Rlcz1mdW5jdGlvbigpe3ZhciB0PW5ldyBOdDt0aGlzLmZpbmRDb2xsYXBzZXNGcm9tSW5zZXJ0ZWROb2Rlcyh0KSx0aGlzLmZpbmRDb2xsYXBzZXNGcm9tRXhpc3RpbmdWZXJ0aWNlcyh0KTtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCkuaW50VmFsdWUoKTt0aGlzLmFkZCh0aGlzLl9lZGdlLmdldENvb3JkaW5hdGUobiksbil9fSxjbi5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiSW50ZXJzZWN0aW9uczpcIik7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe2UubmV4dCgpLnByaW50KHQpfX0sY24ucHJvdG90eXBlLmZpbmRDb2xsYXBzZXNGcm9tRXhpc3RpbmdWZXJ0aWNlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuX2VkZ2Uuc2l6ZSgpLTI7ZSsrKXt2YXIgbj10aGlzLl9lZGdlLmdldENvb3JkaW5hdGUoZSksaT10aGlzLl9lZGdlLmdldENvb3JkaW5hdGUoZSsyKTtuLmVxdWFsczJEKGkpJiZ0LmFkZChuZXcgTShlKzEpKX19LGNuLnByb3RvdHlwZS5hZGRFZGdlQ29vcmRpbmF0ZXM9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2VkZ2UuZ2V0Q29vcmRpbmF0ZShlLnNlZ21lbnRJbmRleCkscj1lLmlzSW50ZXJpb3IoKXx8IWUuY29vcmQuZXF1YWxzMkQoaSk7bi5hZGQobmV3IEModC5jb29yZCksITEpO2Zvcih2YXIgbz10LnNlZ21lbnRJbmRleCsxO288PWUuc2VnbWVudEluZGV4O28rKyluLmFkZCh0aGlzLl9lZGdlLmdldENvb3JkaW5hdGUobykpO3ImJm4uYWRkKG5ldyBDKGUuY29vcmQpKX0sY24ucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKX0sY24ucHJvdG90eXBlLmFkZFNwbGl0RWRnZXM9ZnVuY3Rpb24odCl7dGhpcy5hZGRFbmRwb2ludHMoKSx0aGlzLmFkZENvbGxhcHNlZE5vZGVzKCk7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKSxuPWUubmV4dCgpO2UuaGFzTmV4dCgpOyl7dmFyIGk9ZS5uZXh0KCkscj10aGlzLmNyZWF0ZVNwbGl0RWRnZShuLGkpO3QuYWRkKHIpLG49aX19LGNuLnByb3RvdHlwZS5maW5kQ29sbGFwc2VJbmRleD1mdW5jdGlvbih0LGUsbil7aWYoIXQuY29vcmQuZXF1YWxzMkQoZS5jb29yZCkpcmV0dXJuITE7dmFyIGk9ZS5zZWdtZW50SW5kZXgtdC5zZWdtZW50SW5kZXg7cmV0dXJuIGUuaXNJbnRlcmlvcigpfHxpLS0sMT09PWkmJihuWzBdPXQuc2VnbWVudEluZGV4KzEsITApfSxjbi5wcm90b3R5cGUuZmluZENvbGxhcHNlc0Zyb21JbnNlcnRlZE5vZGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkoMSkuZmlsbChudWxsKSxuPXRoaXMuaXRlcmF0b3IoKSxpPW4ubmV4dCgpO24uaGFzTmV4dCgpOyl7dmFyIHI9bi5uZXh0KCk7dGhpcy5maW5kQ29sbGFwc2VJbmRleChpLHIsZSkmJnQuYWRkKG5ldyBNKGVbMF0pKSxpPXJ9fSxjbi5wcm90b3R5cGUuZ2V0RWRnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZGdlfSxjbi5wcm90b3R5cGUuYWRkRW5kcG9pbnRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZWRnZS5zaXplKCktMTt0aGlzLmFkZCh0aGlzLl9lZGdlLmdldENvb3JkaW5hdGUoMCksMCksdGhpcy5hZGQodGhpcy5fZWRnZS5nZXRDb29yZGluYXRlKHQpLHQpfSxjbi5wcm90b3R5cGUuY3JlYXRlU3BsaXRFZGdlPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5zZWdtZW50SW5kZXgtdC5zZWdtZW50SW5kZXgrMixpPXRoaXMuX2VkZ2UuZ2V0Q29vcmRpbmF0ZShlLnNlZ21lbnRJbmRleCkscj1lLmlzSW50ZXJpb3IoKXx8IWUuY29vcmQuZXF1YWxzMkQoaSk7cnx8bi0tO3ZhciBvPW5ldyBBcnJheShuKS5maWxsKG51bGwpLHM9MDtvW3MrK109bmV3IEModC5jb29yZCk7Zm9yKHZhciBhPXQuc2VnbWVudEluZGV4KzE7YTw9ZS5zZWdtZW50SW5kZXg7YSsrKW9bcysrXT10aGlzLl9lZGdlLmdldENvb3JkaW5hdGUoYSk7cmV0dXJuIHImJihvW3NdPW5ldyBDKGUuY29vcmQpKSxuZXcgZ24obyx0aGlzLl9lZGdlLmdldERhdGEoKSl9LGNuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgbG4odGhpcy5fZWRnZSx0LGUsdGhpcy5fZWRnZS5nZXRTZWdtZW50T2N0YW50KGUpKSxpPXRoaXMuX25vZGVNYXAuZ2V0KG4pO3JldHVybiBudWxsIT09aT8oZXQuaXNUcnVlKGkuY29vcmQuZXF1YWxzMkQodCksXCJGb3VuZCBlcXVhbCBub2RlcyB3aXRoIGRpZmZlcmVudCBjb29yZGluYXRlc1wiKSxpKToodGhpcy5fbm9kZU1hcC5wdXQobixuKSxuKX0sY24ucHJvdG90eXBlLmNoZWNrU3BsaXRFZGdlc0NvcnJlY3RuZXNzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2VkZ2UuZ2V0Q29vcmRpbmF0ZXMoKSxuPXQuZ2V0KDApLmdldENvb3JkaW5hdGUoMCk7aWYoIW4uZXF1YWxzMkQoZVswXSkpdGhyb3cgbmV3ICQoXCJiYWQgc3BsaXQgZWRnZSBzdGFydCBwb2ludCBhdCBcIituKTt2YXIgaT10LmdldCh0LnNpemUoKS0xKS5nZXRDb29yZGluYXRlcygpLHI9aVtpLmxlbmd0aC0xXTtpZighci5lcXVhbHMyRChlW2UubGVuZ3RoLTFdKSl0aHJvdyBuZXcgJChcImJhZCBzcGxpdCBlZGdlIGVuZCBwb2ludCBhdCBcIityKX0sY24ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGNuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBjbn07dmFyIHBuPWZ1bmN0aW9uKCl7fTtwbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0scG4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHBufSxwbi5vY3RhbnQ9ZnVuY3Rpb24oKXtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYoMD09PXQmJjA9PT1lKXRocm93IG5ldyBtKFwiQ2Fubm90IGNvbXB1dGUgdGhlIG9jdGFudCBmb3IgcG9pbnQgKCBcIit0K1wiLCBcIitlK1wiIClcIik7dmFyIG49TWF0aC5hYnModCksaT1NYXRoLmFicyhlKTtyZXR1cm4gdD49MD9lPj0wP24+PWk/MDoxOm4+PWk/Nzo2OmU+PTA/bj49aT8zOjI6bj49aT80OjV9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEMpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxzPW8ueC1yLngsYT1vLnktci55O2lmKDA9PT1zJiYwPT09YSl0aHJvdyBuZXcgbShcIkNhbm5vdCBjb21wdXRlIHRoZSBvY3RhbnQgZm9yIHR3byBpZGVudGljYWwgcG9pbnRzIFwiK3IpO3JldHVybiBwbi5vY3RhbnQocyxhKX19O3ZhciBobj1mdW5jdGlvbigpe307aG4ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7fSxobi5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe30saG4ucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24odCl7fSxobi5wcm90b3R5cGUuaXNDbG9zZWQ9ZnVuY3Rpb24oKXt9LGhuLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKHQpe30saG4ucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXt9LGhuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxobi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gaG59O3ZhciBmbj1mdW5jdGlvbigpe307Zm4ucHJvdG90eXBlLmFkZEludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe30sZm4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW2huXX0sZm4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGZufTt2YXIgZ249ZnVuY3Rpb24oKXt0aGlzLl9ub2RlTGlzdD1uZXcgY24odGhpcyksdGhpcy5fcHRzPW51bGwsdGhpcy5fZGF0YT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLl9wdHM9dCx0aGlzLl9kYXRhPWV9O2duLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdHN9LGduLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3B0cy5sZW5ndGh9LGduLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wdHNbdF19LGduLnByb3RvdHlwZS5pc0Nsb3NlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdHNbMF0uZXF1YWxzKHRoaXMuX3B0c1t0aGlzLl9wdHMubGVuZ3RoLTFdKX0sZ24ucHJvdG90eXBlLmdldFNlZ21lbnRPY3RhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLl9wdHMubGVuZ3RoLTE/LTE6dGhpcy5zYWZlT2N0YW50KHRoaXMuZ2V0Q29vcmRpbmF0ZSh0KSx0aGlzLmdldENvb3JkaW5hdGUodCsxKSl9LGduLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKHQpe3RoaXMuX2RhdGE9dH0sZ24ucHJvdG90eXBlLnNhZmVPY3RhbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5lcXVhbHMyRChlKT8wOnBuLm9jdGFudCh0LGUpfSxnbi5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfSxnbi5wcm90b3R5cGUuYWRkSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmFkZEludGVyc2VjdGlvbk5vZGUodCxlKX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbM10sbz1uZXcgQyhuLmdldEludGVyc2VjdGlvbihyKSk7dGhpcy5hZGRJbnRlcnNlY3Rpb24obyxpKX19LGduLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBaLnRvTGluZVN0cmluZyhuZXcgdWUodGhpcy5fcHRzKSl9LGduLnByb3RvdHlwZS5nZXROb2RlTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlTGlzdH0sZ24ucHJvdG90eXBlLmFkZEludGVyc2VjdGlvbk5vZGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLGk9bisxO2lmKGk8dGhpcy5fcHRzLmxlbmd0aCl7dmFyIHI9dGhpcy5fcHRzW2ldO3QuZXF1YWxzMkQocikmJihuPWkpfXJldHVybiB0aGlzLl9ub2RlTGlzdC5hZGQodCxuKX0sZ24ucHJvdG90eXBlLmFkZEludGVyc2VjdGlvbnM9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT0wO2k8dC5nZXRJbnRlcnNlY3Rpb25OdW0oKTtpKyspdGhpcy5hZGRJbnRlcnNlY3Rpb24odCxlLG4saSl9LGduLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltmbl19LGduLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBnbn0sZ24uZ2V0Tm9kZWRTdWJzdHJpbmdzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBOdDtyZXR1cm4gZ24uZ2V0Tm9kZWRTdWJzdHJpbmdzKHQsZSksZX1pZigyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9bi5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7ci5uZXh0KCkuZ2V0Tm9kZUxpc3QoKS5hZGRTcGxpdEVkZ2VzKGkpfX07dmFyIGRuPWZ1bmN0aW9uKCl7aWYodGhpcy5wMD1udWxsLHRoaXMucDE9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aCl0aGlzLnAwPW5ldyBDLHRoaXMucDE9bmV3IEM7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucDA9bmV3IEModC5wMCksdGhpcy5wMT1uZXcgQyh0LnAxKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMucDA9YXJndW1lbnRzWzBdLHRoaXMucDE9YXJndW1lbnRzWzFdO2Vsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXSxyPWFyZ3VtZW50c1szXTt0aGlzLnAwPW5ldyBDKGUsbiksdGhpcy5wMT1uZXcgQyhpLHIpfX0seW49e3NlcmlhbFZlcnNpb25VSUQ6e2NvbmZpZ3VyYWJsZTohMH19O2RuLnByb3RvdHlwZS5taW5YPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWluKHRoaXMucDAueCx0aGlzLnAxLngpfSxkbi5wcm90b3R5cGUub3JpZW50YXRpb25JbmRleD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZG4pe3ZhciB0PWFyZ3VtZW50c1swXSxlPWF0Lm9yaWVudGF0aW9uSW5kZXgodGhpcy5wMCx0aGlzLnAxLHQucDApLG49YXQub3JpZW50YXRpb25JbmRleCh0aGlzLnAwLHRoaXMucDEsdC5wMSk7cmV0dXJuIGU+PTAmJm4+PTA/TWF0aC5tYXgoZSxuKTplPD0wJiZuPD0wP01hdGgubWF4KGUsbik6MH1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMpe3ZhciBpPWFyZ3VtZW50c1swXTtyZXR1cm4gYXQub3JpZW50YXRpb25JbmRleCh0aGlzLnAwLHRoaXMucDEsaSl9fSxkbi5wcm90b3R5cGUudG9HZW9tZXRyeT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVMaW5lU3RyaW5nKFt0aGlzLnAwLHRoaXMucDFdKX0sZG4ucHJvdG90eXBlLmlzVmVydGljYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMC54PT09dGhpcy5wMS54fSxkbi5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGRuKSlyZXR1cm4hMTt2YXIgZT10O3JldHVybiB0aGlzLnAwLmVxdWFscyhlLnAwKSYmdGhpcy5wMS5lcXVhbHMoZS5wMSl9LGRuLnByb3RvdHlwZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHJ0O3JldHVybiBlLmNvbXB1dGVJbnRlcnNlY3Rpb24odGhpcy5wMCx0aGlzLnAxLHQucDAsdC5wMSksZS5oYXNJbnRlcnNlY3Rpb24oKT9lLmdldEludGVyc2VjdGlvbigwKTpudWxsfSxkbi5wcm90b3R5cGUucHJvamVjdD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHQuZXF1YWxzKHRoaXMucDApfHx0LmVxdWFscyh0aGlzLnAxKSlyZXR1cm4gbmV3IEModCk7dmFyIGU9dGhpcy5wcm9qZWN0aW9uRmFjdG9yKHQpLG49bmV3IEM7cmV0dXJuIG4ueD10aGlzLnAwLngrZSoodGhpcy5wMS54LXRoaXMucDAueCksbi55PXRoaXMucDAueStlKih0aGlzLnAxLnktdGhpcy5wMC55KSxufWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgZG4pe3ZhciBpPWFyZ3VtZW50c1swXSxyPXRoaXMucHJvamVjdGlvbkZhY3RvcihpLnAwKSxvPXRoaXMucHJvamVjdGlvbkZhY3RvcihpLnAxKTtpZihyPj0xJiZvPj0xKXJldHVybiBudWxsO2lmKHI8PTAmJm88PTApcmV0dXJuIG51bGw7dmFyIHM9dGhpcy5wcm9qZWN0KGkucDApO3I8MCYmKHM9dGhpcy5wMCkscj4xJiYocz10aGlzLnAxKTt2YXIgYT10aGlzLnByb2plY3QoaS5wMSk7cmV0dXJuIG88MCYmKGE9dGhpcy5wMCksbz4xJiYoYT10aGlzLnAxKSxuZXcgZG4ocyxhKX19LGRuLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXt0aGlzLnAxLmNvbXBhcmVUbyh0aGlzLnAwKTwwJiZ0aGlzLnJldmVyc2UoKX0sZG4ucHJvdG90eXBlLmFuZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYXRhbjIodGhpcy5wMS55LXRoaXMucDAueSx0aGlzLnAxLngtdGhpcy5wMC54KX0sZG4ucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10P3RoaXMucDA6dGhpcy5wMX0sZG4ucHJvdG90eXBlLmRpc3RhbmNlUGVycGVuZGljdWxhcj1mdW5jdGlvbih0KXtyZXR1cm4gYXQuZGlzdGFuY2VQb2ludExpbmVQZXJwZW5kaWN1bGFyKHQsdGhpcy5wMCx0aGlzLnAxKX0sZG4ucHJvdG90eXBlLm1pblk9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4odGhpcy5wMC55LHRoaXMucDEueSl9LGRuLnByb3RvdHlwZS5taWRQb2ludD1mdW5jdGlvbigpe3JldHVybiBkbi5taWRQb2ludCh0aGlzLnAwLHRoaXMucDEpfSxkbi5wcm90b3R5cGUucHJvamVjdGlvbkZhY3Rvcj1mdW5jdGlvbih0KXtpZih0LmVxdWFscyh0aGlzLnAwKSlyZXR1cm4gMDtpZih0LmVxdWFscyh0aGlzLnAxKSlyZXR1cm4gMTt2YXIgZT10aGlzLnAxLngtdGhpcy5wMC54LG49dGhpcy5wMS55LXRoaXMucDAueSxpPWUqZStuKm47aWYoaTw9MClyZXR1cm4gdi5OYU47cmV0dXJuKCh0LngtdGhpcy5wMC54KSplKyh0LnktdGhpcy5wMC55KSpuKS9pfSxkbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmludGVyc2VjdGlvbih0KTtpZihudWxsIT09ZSlyZXR1cm5bZSxlXTt2YXIgbj1uZXcgQXJyYXkoMikuZmlsbChudWxsKSxpPXYuTUFYX1ZBTFVFLHI9bnVsbCxvPXRoaXMuY2xvc2VzdFBvaW50KHQucDApO2k9by5kaXN0YW5jZSh0LnAwKSxuWzBdPW8sblsxXT10LnAwO3ZhciBzPXRoaXMuY2xvc2VzdFBvaW50KHQucDEpOyhyPXMuZGlzdGFuY2UodC5wMSkpPGkmJihpPXIsblswXT1zLG5bMV09dC5wMSk7dmFyIGE9dC5jbG9zZXN0UG9pbnQodGhpcy5wMCk7KHI9YS5kaXN0YW5jZSh0aGlzLnAwKSk8aSYmKGk9cixuWzBdPXRoaXMucDAsblsxXT1hKTt2YXIgdT10LmNsb3Nlc3RQb2ludCh0aGlzLnAxKTtyZXR1cm4ocj11LmRpc3RhbmNlKHRoaXMucDEpKTxpJiYoaT1yLG5bMF09dGhpcy5wMSxuWzFdPXUpLG59LGRuLnByb3RvdHlwZS5jbG9zZXN0UG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wcm9qZWN0aW9uRmFjdG9yKHQpO2lmKGU+MCYmZTwxKXJldHVybiB0aGlzLnByb2plY3QodCk7cmV0dXJuIHRoaXMucDAuZGlzdGFuY2UodCk8dGhpcy5wMS5kaXN0YW5jZSh0KT90aGlzLnAwOnRoaXMucDF9LGRuLnByb3RvdHlwZS5tYXhYPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KHRoaXMucDAueCx0aGlzLnAxLngpfSxkbi5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDAuZGlzdGFuY2UodGhpcy5wMSl9LGRuLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7dmFyIGU9dCxuPXRoaXMucDAuY29tcGFyZVRvKGUucDApO3JldHVybiAwIT09bj9uOnRoaXMucDEuY29tcGFyZVRvKGUucDEpfSxkbi5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucDA7dGhpcy5wMD10aGlzLnAxLHRoaXMucDE9dH0sZG4ucHJvdG90eXBlLmVxdWFsc1RvcG89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucDAuZXF1YWxzKHQucDApJiYodGhpcy5wMS5lcXVhbHModC5wMSl8fHRoaXMucDAuZXF1YWxzKHQucDEpKSYmdGhpcy5wMS5lcXVhbHModC5wMCl9LGRuLnByb3RvdHlwZS5saW5lSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gay5pbnRlcnNlY3Rpb24odGhpcy5wMCx0aGlzLnAxLHQucDAsdC5wMSl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgWCkpdGhyb3cgdH1yZXR1cm4gbnVsbH0sZG4ucHJvdG90eXBlLm1heFk9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgodGhpcy5wMC55LHRoaXMucDEueSl9LGRuLnByb3RvdHlwZS5wb2ludEFsb25nT2Zmc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5wMC54K3QqKHRoaXMucDEueC10aGlzLnAwLngpLGk9dGhpcy5wMC55K3QqKHRoaXMucDEueS10aGlzLnAwLnkpLHI9dGhpcy5wMS54LXRoaXMucDAueCxvPXRoaXMucDEueS10aGlzLnAwLnkscz1NYXRoLnNxcnQocipyK28qbyksYT0wLHU9MDtpZigwIT09ZSl7aWYoczw9MCl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29tcHV0ZSBvZmZzZXQgZnJvbSB6ZXJvLWxlbmd0aCBsaW5lIHNlZ21lbnRcIik7YT1lKnIvcyx1PWUqby9zfXJldHVybiBuZXcgQyhuLXUsaSthKX0sZG4ucHJvdG90eXBlLnNldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNldENvb3JkaW5hdGVzKHQucDAsdC5wMSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMucDAueD1lLngsdGhpcy5wMC55PWUueSx0aGlzLnAxLng9bi54LHRoaXMucDEueT1uLnl9fSxkbi5wcm90b3R5cGUuc2VnbWVudEZyYWN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHJvamVjdGlvbkZhY3Rvcih0KTtyZXR1cm4gZTwwP2U9MDooZT4xfHx2LmlzTmFOKGUpKSYmKGU9MSksZX0sZG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJMSU5FU1RSSU5HKCBcIit0aGlzLnAwLngrXCIgXCIrdGhpcy5wMC55K1wiLCBcIit0aGlzLnAxLngrXCIgXCIrdGhpcy5wMS55K1wiKVwifSxkbi5wcm90b3R5cGUuaXNIb3Jpem9udGFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDAueT09PXRoaXMucDEueX0sZG4ucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBkbil7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBhdC5kaXN0YW5jZUxpbmVMaW5lKHRoaXMucDAsdGhpcy5wMSx0LnAwLHQucDEpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiBhdC5kaXN0YW5jZVBvaW50TGluZShlLHRoaXMucDAsdGhpcy5wMSl9fSxkbi5wcm90b3R5cGUucG9pbnRBbG9uZz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQztyZXR1cm4gZS54PXRoaXMucDAueCt0Kih0aGlzLnAxLngtdGhpcy5wMC54KSxlLnk9dGhpcy5wMC55K3QqKHRoaXMucDEueS10aGlzLnAwLnkpLGV9LGRuLnByb3RvdHlwZS5oYXNoQ29kZT1mdW5jdGlvbigpe3ZhciB0PXYuZG91YmxlVG9Mb25nQml0cyh0aGlzLnAwLngpO3RePTMxKnYuZG91YmxlVG9Mb25nQml0cyh0aGlzLnAwLnkpO3ZhciBlPU1hdGgudHJ1bmModCleTWF0aC50cnVuYyh0Pj4zMiksbj12LmRvdWJsZVRvTG9uZ0JpdHModGhpcy5wMS54KTtuXj0zMSp2LmRvdWJsZVRvTG9uZ0JpdHModGhpcy5wMS55KTtyZXR1cm4gZV4oTWF0aC50cnVuYyhuKV5NYXRoLnRydW5jKG4+PjMyKSl9LGRuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltFLGVdfSxkbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZG59LGRuLm1pZFBvaW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBDKCh0LngrZS54KS8yLCh0LnkrZS55KS8yKX0seW4uc2VyaWFsVmVyc2lvblVJRC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMHgyZDIxNzIxMzVmNDExYzAwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhkbix5bik7dmFyIF9uPWZ1bmN0aW9uKCl7dGhpcy50ZW1wRW52MT1uZXcgaix0aGlzLnRlbXBFbnYyPW5ldyBqLHRoaXMuX292ZXJsYXBTZWcxPW5ldyBkbix0aGlzLl9vdmVybGFwU2VnMj1uZXcgZG59O19uLnByb3RvdHlwZS5vdmVybGFwPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpO2Vsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPWFyZ3VtZW50c1szXTt0LmdldExpbmVTZWdtZW50KGUsdGhpcy5fb3ZlcmxhcFNlZzEpLG4uZ2V0TGluZVNlZ21lbnQoaSx0aGlzLl9vdmVybGFwU2VnMiksdGhpcy5vdmVybGFwKHRoaXMuX292ZXJsYXBTZWcxLHRoaXMuX292ZXJsYXBTZWcyKX19LF9uLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxfbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gX259O3ZhciBtbj1mdW5jdGlvbigpe3RoaXMuX3B0cz1udWxsLHRoaXMuX3N0YXJ0PW51bGwsdGhpcy5fZW5kPW51bGwsdGhpcy5fZW52PW51bGwsdGhpcy5fY29udGV4dD1udWxsLHRoaXMuX2lkPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3RoaXMuX3B0cz10LHRoaXMuX3N0YXJ0PWUsdGhpcy5fZW5kPW4sdGhpcy5fY29udGV4dD1pfTttbi5wcm90b3R5cGUuZ2V0TGluZVNlZ21lbnQ9ZnVuY3Rpb24odCxlKXtlLnAwPXRoaXMuX3B0c1t0XSxlLnAxPXRoaXMuX3B0c1t0KzFdfSxtbi5wcm90b3R5cGUuY29tcHV0ZVNlbGVjdD1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLl9wdHNbZV0sbz10aGlzLl9wdHNbbl07aWYoaS50ZW1wRW52MS5pbml0KHIsbyksbi1lPT0xKXJldHVybiBpLnNlbGVjdCh0aGlzLGUpLG51bGw7aWYoIXQuaW50ZXJzZWN0cyhpLnRlbXBFbnYxKSlyZXR1cm4gbnVsbDt2YXIgcz1NYXRoLnRydW5jKChlK24pLzIpO2U8cyYmdGhpcy5jb21wdXRlU2VsZWN0KHQsZSxzLGkpLHM8biYmdGhpcy5jb21wdXRlU2VsZWN0KHQscyxuLGkpfSxtbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuX2VuZC10aGlzLl9zdGFydCsxKS5maWxsKG51bGwpLGU9MCxuPXRoaXMuX3N0YXJ0O248PXRoaXMuX2VuZDtuKyspdFtlKytdPXRoaXMuX3B0c1tuXTtyZXR1cm4gdH0sbW4ucHJvdG90eXBlLmNvbXB1dGVPdmVybGFwcz1mdW5jdGlvbih0LGUpe3RoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwodGhpcy5fc3RhcnQsdGhpcy5fZW5kLHQsdC5fc3RhcnQsdC5fZW5kLGUpfSxtbi5wcm90b3R5cGUuc2V0SWQ9ZnVuY3Rpb24odCl7dGhpcy5faWQ9dH0sbW4ucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbih0LGUpe3RoaXMuY29tcHV0ZVNlbGVjdCh0LHRoaXMuX3N0YXJ0LHRoaXMuX2VuZCxlKX0sbW4ucHJvdG90eXBlLmdldEVudmVsb3BlPWZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuX2Vudil7dmFyIHQ9dGhpcy5fcHRzW3RoaXMuX3N0YXJ0XSxlPXRoaXMuX3B0c1t0aGlzLl9lbmRdO3RoaXMuX2Vudj1uZXcgaih0LGUpfXJldHVybiB0aGlzLl9lbnZ9LG1uLnByb3RvdHlwZS5nZXRFbmRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmR9LG1uLnByb3RvdHlwZS5nZXRTdGFydEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0fSxtbi5wcm90b3R5cGUuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0fSxtbi5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LG1uLnByb3RvdHlwZS5jb21wdXRlT3ZlcmxhcHNJbnRlcm5hbD1mdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIHM9dGhpcy5fcHRzW3RdLGE9dGhpcy5fcHRzW2VdLHU9bi5fcHRzW2ldLGw9bi5fcHRzW3JdO2lmKGUtdD09MSYmci1pPT0xKXJldHVybiBvLm92ZXJsYXAodGhpcyx0LG4saSksbnVsbDtpZihvLnRlbXBFbnYxLmluaXQocyxhKSxvLnRlbXBFbnYyLmluaXQodSxsKSwhby50ZW1wRW52MS5pbnRlcnNlY3RzKG8udGVtcEVudjIpKXJldHVybiBudWxsO3ZhciBjPU1hdGgudHJ1bmMoKHQrZSkvMikscD1NYXRoLnRydW5jKChpK3IpLzIpO3Q8YyYmKGk8cCYmdGhpcy5jb21wdXRlT3ZlcmxhcHNJbnRlcm5hbCh0LGMsbixpLHAsbykscDxyJiZ0aGlzLmNvbXB1dGVPdmVybGFwc0ludGVybmFsKHQsYyxuLHAscixvKSksYzxlJiYoaTxwJiZ0aGlzLmNvbXB1dGVPdmVybGFwc0ludGVybmFsKGMsZSxuLGkscCxvKSxwPHImJnRoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwoYyxlLG4scCxyLG8pKX0sbW4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LG1uLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBtbn07dmFyIHZuPWZ1bmN0aW9uKCl7fTt2bi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sdm4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHZufSx2bi5nZXRDaGFpblN0YXJ0SW5kaWNlcz1mdW5jdGlvbih0KXt2YXIgZT0wLG49bmV3IE50O24uYWRkKG5ldyBNKGUpKTtkb3t2YXIgaT12bi5maW5kQ2hhaW5FbmQodCxlKTtuLmFkZChuZXcgTShpKSksZT1pfXdoaWxlKGU8dC5sZW5ndGgtMSk7cmV0dXJuIHZuLnRvSW50QXJyYXkobil9LHZuLmZpbmRDaGFpbkVuZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lO248dC5sZW5ndGgtMSYmdFtuXS5lcXVhbHMyRCh0W24rMV0pOyluKys7aWYobj49dC5sZW5ndGgtMSlyZXR1cm4gdC5sZW5ndGgtMTtmb3IodmFyIGk9QmUucXVhZHJhbnQodFtuXSx0W24rMV0pLHI9ZSsxO3I8dC5sZW5ndGg7KXtpZighdFtyLTFdLmVxdWFsczJEKHRbcl0pKXtpZihCZS5xdWFkcmFudCh0W3ItMV0sdFtyXSkhPT1pKWJyZWFrfXIrK31yZXR1cm4gci0xfSx2bi5nZXRDaGFpbnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB2bi5nZXRDaGFpbnModCxudWxsKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPW5ldyBOdCxyPXZuLmdldENoYWluU3RhcnRJbmRpY2VzKGUpLG89MDtvPHIubGVuZ3RoLTE7bysrKXt2YXIgcz1uZXcgbW4oZSxyW29dLHJbbysxXSxuKTtpLmFkZChzKX1yZXR1cm4gaX19LHZuLnRvSW50QXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXT10LmdldChuKS5pbnRWYWx1ZSgpO3JldHVybiBlfTt2YXIgSW49ZnVuY3Rpb24oKXt9O0luLnByb3RvdHlwZS5jb21wdXRlTm9kZXM9ZnVuY3Rpb24odCl7fSxJbi5wcm90b3R5cGUuZ2V0Tm9kZWRTdWJzdHJpbmdzPWZ1bmN0aW9uKCl7fSxJbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sSW4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIElufTt2YXIgRW49ZnVuY3Rpb24oKXtpZih0aGlzLl9zZWdJbnQ9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0U2VnbWVudEludGVyc2VjdG9yKHQpfX07RW4ucHJvdG90eXBlLnNldFNlZ21lbnRJbnRlcnNlY3Rvcj1mdW5jdGlvbih0KXt0aGlzLl9zZWdJbnQ9dH0sRW4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0luXX0sRW4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEVufTt2YXIgeG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtlP3QuY2FsbCh0aGlzLGUpOnQuY2FsbCh0aGlzKSx0aGlzLl9tb25vQ2hhaW5zPW5ldyBOdCx0aGlzLl9pbmRleD1uZXcgc24sdGhpcy5faWRDb3VudGVyPTAsdGhpcy5fbm9kZWRTZWdTdHJpbmdzPW51bGwsdGhpcy5fbk92ZXJsYXBzPTB9dCYmKGUuX19wcm90b19fPXQpLChlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9ZTt2YXIgbj17U2VnbWVudE92ZXJsYXBBY3Rpb246e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS5nZXRNb25vdG9uZUNoYWlucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb25vQ2hhaW5zfSxlLnByb3RvdHlwZS5nZXROb2RlZFN1YnN0cmluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gZ24uZ2V0Tm9kZWRTdWJzdHJpbmdzKHRoaXMuX25vZGVkU2VnU3RyaW5ncyl9LGUucHJvdG90eXBlLmdldEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGV4fSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXZuLmdldENoYWlucyh0LmdldENvb3JkaW5hdGVzKCksdCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO24uc2V0SWQodGhpcy5faWRDb3VudGVyKyspLHRoaXMuX2luZGV4Lmluc2VydChuLmdldEVudmVsb3BlKCksbiksdGhpcy5fbW9ub0NoYWlucy5hZGQobil9fSxlLnByb3RvdHlwZS5jb21wdXRlTm9kZXM9ZnVuY3Rpb24odCl7dGhpcy5fbm9kZWRTZWdTdHJpbmdzPXQ7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspdGhpcy5hZGQoZS5uZXh0KCkpO3RoaXMuaW50ZXJzZWN0Q2hhaW5zKCl9LGUucHJvdG90eXBlLmludGVyc2VjdENoYWlucz1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgTm4odGhpcy5fc2VnSW50KSxlPXRoaXMuX21vbm9DaGFpbnMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspZm9yKHZhciBuPWUubmV4dCgpLGk9dGhpcy5faW5kZXgucXVlcnkobi5nZXRFbnZlbG9wZSgpKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7aWYoci5nZXRJZCgpPm4uZ2V0SWQoKSYmKG4uY29tcHV0ZU92ZXJsYXBzKHIsdCksdGhpcy5fbk92ZXJsYXBzKyspLHRoaXMuX3NlZ0ludC5pc0RvbmUoKSlyZXR1cm4gbnVsbH19LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LG4uU2VnbWVudE92ZXJsYXBBY3Rpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE5ufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9KEVuKSxObj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5jYWxsKHRoaXMpLHRoaXMuX3NpPW51bGw7dmFyIGU9YXJndW1lbnRzWzBdO3RoaXMuX3NpPWV9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm92ZXJsYXA9ZnVuY3Rpb24oKXtpZig0IT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdC5wcm90b3R5cGUub3ZlcmxhcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdLHI9YXJndW1lbnRzWzNdLG89ZS5nZXRDb250ZXh0KCkscz1pLmdldENvbnRleHQoKTt0aGlzLl9zaS5wcm9jZXNzSW50ZXJzZWN0aW9ucyhvLG4scyxyKX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX0oX24pLENuPWZ1bmN0aW9uIHQoKXtpZih0aGlzLl9xdWFkcmFudFNlZ21lbnRzPXQuREVGQVVMVF9RVUFEUkFOVF9TRUdNRU5UUyx0aGlzLl9lbmRDYXBTdHlsZT10LkNBUF9ST1VORCx0aGlzLl9qb2luU3R5bGU9dC5KT0lOX1JPVU5ELHRoaXMuX21pdHJlTGltaXQ9dC5ERUZBVUxUX01JVFJFX0xJTUlULHRoaXMuX2lzU2luZ2xlU2lkZWQ9ITEsdGhpcy5fc2ltcGxpZnlGYWN0b3I9dC5ERUZBVUxUX1NJTVBMSUZZX0ZBQ1RPUiwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdO3RoaXMuc2V0UXVhZHJhbnRTZWdtZW50cyhlKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dGhpcy5zZXRRdWFkcmFudFNlZ21lbnRzKG4pLHRoaXMuc2V0RW5kQ2FwU3R5bGUoaSl9ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzWzNdO3RoaXMuc2V0UXVhZHJhbnRTZWdtZW50cyhyKSx0aGlzLnNldEVuZENhcFN0eWxlKG8pLHRoaXMuc2V0Sm9pblN0eWxlKHMpLHRoaXMuc2V0TWl0cmVMaW1pdChhKX19LFNuPXtDQVBfUk9VTkQ6e2NvbmZpZ3VyYWJsZTohMH0sQ0FQX0ZMQVQ6e2NvbmZpZ3VyYWJsZTohMH0sQ0FQX1NRVUFSRTp7Y29uZmlndXJhYmxlOiEwfSxKT0lOX1JPVU5EOntjb25maWd1cmFibGU6ITB9LEpPSU5fTUlUUkU6e2NvbmZpZ3VyYWJsZTohMH0sSk9JTl9CRVZFTDp7Y29uZmlndXJhYmxlOiEwfSxERUZBVUxUX1FVQURSQU5UX1NFR01FTlRTOntjb25maWd1cmFibGU6ITB9LERFRkFVTFRfTUlUUkVfTElNSVQ6e2NvbmZpZ3VyYWJsZTohMH0sREVGQVVMVF9TSU1QTElGWV9GQUNUT1I6e2NvbmZpZ3VyYWJsZTohMH19O0NuLnByb3RvdHlwZS5nZXRFbmRDYXBTdHlsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmRDYXBTdHlsZX0sQ24ucHJvdG90eXBlLmlzU2luZ2xlU2lkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTaW5nbGVTaWRlZH0sQ24ucHJvdG90eXBlLnNldFF1YWRyYW50U2VnbWVudHM9ZnVuY3Rpb24odCl7dGhpcy5fcXVhZHJhbnRTZWdtZW50cz10LDA9PT10aGlzLl9xdWFkcmFudFNlZ21lbnRzJiYodGhpcy5fam9pblN0eWxlPUNuLkpPSU5fQkVWRUwpLHRoaXMuX3F1YWRyYW50U2VnbWVudHM8MCYmKHRoaXMuX2pvaW5TdHlsZT1Dbi5KT0lOX01JVFJFLHRoaXMuX21pdHJlTGltaXQ9TWF0aC5hYnModGhpcy5fcXVhZHJhbnRTZWdtZW50cykpLHQ8PTAmJih0aGlzLl9xdWFkcmFudFNlZ21lbnRzPTEpLHRoaXMuX2pvaW5TdHlsZSE9PUNuLkpPSU5fUk9VTkQmJih0aGlzLl9xdWFkcmFudFNlZ21lbnRzPUNuLkRFRkFVTFRfUVVBRFJBTlRfU0VHTUVOVFMpfSxDbi5wcm90b3R5cGUuZ2V0Sm9pblN0eWxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2pvaW5TdHlsZX0sQ24ucHJvdG90eXBlLnNldEpvaW5TdHlsZT1mdW5jdGlvbih0KXt0aGlzLl9qb2luU3R5bGU9dH0sQ24ucHJvdG90eXBlLnNldFNpbXBsaWZ5RmFjdG9yPWZ1bmN0aW9uKHQpe3RoaXMuX3NpbXBsaWZ5RmFjdG9yPXQ8MD8wOnR9LENuLnByb3RvdHlwZS5nZXRTaW1wbGlmeUZhY3Rvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaW1wbGlmeUZhY3Rvcn0sQ24ucHJvdG90eXBlLmdldFF1YWRyYW50U2VnbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcXVhZHJhbnRTZWdtZW50c30sQ24ucHJvdG90eXBlLnNldEVuZENhcFN0eWxlPWZ1bmN0aW9uKHQpe3RoaXMuX2VuZENhcFN0eWxlPXR9LENuLnByb3RvdHlwZS5nZXRNaXRyZUxpbWl0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pdHJlTGltaXR9LENuLnByb3RvdHlwZS5zZXRNaXRyZUxpbWl0PWZ1bmN0aW9uKHQpe3RoaXMuX21pdHJlTGltaXQ9dH0sQ24ucHJvdG90eXBlLnNldFNpbmdsZVNpZGVkPWZ1bmN0aW9uKHQpe3RoaXMuX2lzU2luZ2xlU2lkZWQ9dH0sQ24ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LENuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBDbn0sQ24uYnVmZmVyRGlzdGFuY2VFcnJvcj1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLlBJLzIvdDtyZXR1cm4gMS1NYXRoLmNvcyhlLzIpfSxTbi5DQVBfUk9VTkQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDF9LFNuLkNBUF9GTEFULmdldD1mdW5jdGlvbigpe3JldHVybiAyfSxTbi5DQVBfU1FVQVJFLmdldD1mdW5jdGlvbigpe3JldHVybiAzfSxTbi5KT0lOX1JPVU5ELmdldD1mdW5jdGlvbigpe3JldHVybiAxfSxTbi5KT0lOX01JVFJFLmdldD1mdW5jdGlvbigpe3JldHVybiAyfSxTbi5KT0lOX0JFVkVMLmdldD1mdW5jdGlvbigpe3JldHVybiAzfSxTbi5ERUZBVUxUX1FVQURSQU5UX1NFR01FTlRTLmdldD1mdW5jdGlvbigpe3JldHVybiA4fSxTbi5ERUZBVUxUX01JVFJFX0xJTUlULmdldD1mdW5jdGlvbigpe3JldHVybiA1fSxTbi5ERUZBVUxUX1NJTVBMSUZZX0ZBQ1RPUi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4uMDF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKENuLFNuKTt2YXIgTG49ZnVuY3Rpb24odCl7dGhpcy5fZGlzdGFuY2VUb2w9bnVsbCx0aGlzLl9pc0RlbGV0ZWQ9bnVsbCx0aGlzLl9hbmdsZU9yaWVudGF0aW9uPWF0LkNPVU5URVJDTE9DS1dJU0UsdGhpcy5faW5wdXRMaW5lPXR8fG51bGx9LGJuPXtJTklUOntjb25maWd1cmFibGU6ITB9LERFTEVURTp7Y29uZmlndXJhYmxlOiEwfSxLRUVQOntjb25maWd1cmFibGU6ITB9LE5VTV9QVFNfVE9fQ0hFQ0s6e2NvbmZpZ3VyYWJsZTohMH19O0xuLnByb3RvdHlwZS5pc0RlbGV0YWJsZT1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLl9pbnB1dExpbmVbdF0sbz10aGlzLl9pbnB1dExpbmVbZV0scz10aGlzLl9pbnB1dExpbmVbbl07cmV0dXJuISF0aGlzLmlzQ29uY2F2ZShyLG8scykmJighIXRoaXMuaXNTaGFsbG93KHIsbyxzLGkpJiZ0aGlzLmlzU2hhbGxvd1NhbXBsZWQocixvLHQsbixpKSl9LExuLnByb3RvdHlwZS5kZWxldGVTaGFsbG93Q29uY2F2aXRpZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MSxlPXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgodCksbj10aGlzLmZpbmROZXh0Tm9uRGVsZXRlZEluZGV4KGUpLGk9ITE7bjx0aGlzLl9pbnB1dExpbmUubGVuZ3RoOyl7dmFyIHI9ITE7dGhpcy5pc0RlbGV0YWJsZSh0LGUsbix0aGlzLl9kaXN0YW5jZVRvbCkmJih0aGlzLl9pc0RlbGV0ZWRbZV09TG4uREVMRVRFLHI9ITAsaT0hMCksdD1yP246ZSxlPXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgodCksbj10aGlzLmZpbmROZXh0Tm9uRGVsZXRlZEluZGV4KGUpfXJldHVybiBpfSxMbi5wcm90b3R5cGUuaXNTaGFsbG93Q29uY2F2aXR5PWZ1bmN0aW9uKHQsZSxuLGkpe2lmKCEoYXQuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKT09PXRoaXMuX2FuZ2xlT3JpZW50YXRpb24pKXJldHVybiExO3JldHVybiBhdC5kaXN0YW5jZVBvaW50TGluZShlLHQsbik8aX0sTG4ucHJvdG90eXBlLmlzU2hhbGxvd1NhbXBsZWQ9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz1NYXRoLnRydW5jKChpLW4pL0xuLk5VTV9QVFNfVE9fQ0hFQ0spO288PTAmJihvPTEpO2Zvcih2YXIgcz1uO3M8aTtzKz1vKWlmKCF0aGlzLmlzU2hhbGxvdyh0LGUsdGhpcy5faW5wdXRMaW5lW3NdLHIpKXJldHVybiExO3JldHVybiEwfSxMbi5wcm90b3R5cGUuaXNDb25jYXZlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1hdC5jb21wdXRlT3JpZW50YXRpb24odCxlLG4pPT09dGhpcy5fYW5nbGVPcmllbnRhdGlvbjtyZXR1cm4gaX0sTG4ucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3RhbmNlVG9sPU1hdGguYWJzKHQpLHQ8MCYmKHRoaXMuX2FuZ2xlT3JpZW50YXRpb249YXQuQ0xPQ0tXSVNFKSx0aGlzLl9pc0RlbGV0ZWQ9bmV3IEFycmF5KHRoaXMuX2lucHV0TGluZS5sZW5ndGgpLmZpbGwobnVsbCk7dmFyIGU9ITE7ZG97ZT10aGlzLmRlbGV0ZVNoYWxsb3dDb25jYXZpdGllcygpfXdoaWxlKGUpO3JldHVybiB0aGlzLmNvbGxhcHNlTGluZSgpfSxMbi5wcm90b3R5cGUuZmluZE5leHROb25EZWxldGVkSW5kZXg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQrMTtlPHRoaXMuX2lucHV0TGluZS5sZW5ndGgmJnRoaXMuX2lzRGVsZXRlZFtlXT09PUxuLkRFTEVURTspZSsrO3JldHVybiBlfSxMbi5wcm90b3R5cGUuaXNTaGFsbG93PWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiBhdC5kaXN0YW5jZVBvaW50TGluZShlLHQsbik8aX0sTG4ucHJvdG90eXBlLmNvbGxhcHNlTGluZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgU3QsZT0wO2U8dGhpcy5faW5wdXRMaW5lLmxlbmd0aDtlKyspdGhpcy5faXNEZWxldGVkW2VdIT09TG4uREVMRVRFJiZ0LmFkZCh0aGlzLl9pbnB1dExpbmVbZV0pO3JldHVybiB0LnRvQ29vcmRpbmF0ZUFycmF5KCl9LExuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxMbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gTG59LExuLnNpbXBsaWZ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBMbih0KS5zaW1wbGlmeShlKX0sYm4uSU5JVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sYm4uREVMRVRFLmdldD1mdW5jdGlvbigpe3JldHVybiAxfSxibi5LRUVQLmdldD1mdW5jdGlvbigpe3JldHVybiAxfSxibi5OVU1fUFRTX1RPX0NIRUNLLmdldD1mdW5jdGlvbigpe3JldHVybiAxMH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTG4sYm4pO3ZhciB3bj1mdW5jdGlvbigpe3RoaXMuX3B0TGlzdD1udWxsLHRoaXMuX3ByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5fbWluaW1pbVZlcnRleERpc3RhbmNlPTAsdGhpcy5fcHRMaXN0PW5ldyBOdH0sT249e0NPT1JESU5BVEVfQVJSQVlfVFlQRTp7Y29uZmlndXJhYmxlOiEwfX07d24ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3B0TGlzdC50b0FycmF5KHduLkNPT1JESU5BVEVfQVJSQVlfVFlQRSl9LHduLnByb3RvdHlwZS5zZXRQcmVjaXNpb25Nb2RlbD1mdW5jdGlvbih0KXt0aGlzLl9wcmVjaXNpb25Nb2RlbD10fSx3bi5wcm90b3R5cGUuYWRkUHQ9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEModCk7aWYodGhpcy5fcHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UoZSksdGhpcy5pc1JlZHVuZGFudChlKSlyZXR1cm4gbnVsbDt0aGlzLl9wdExpc3QuYWRkKGUpfSx3bi5wcm90b3R5cGUucmV2ZXJlPWZ1bmN0aW9uKCl7fSx3bi5wcm90b3R5cGUuYWRkUHRzPWZ1bmN0aW9uKHQsZSl7aWYoZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFkZFB0KHRbbl0pO2Vsc2UgZm9yKHZhciBpPXQubGVuZ3RoLTE7aT49MDtpLS0pdGhpcy5hZGRQdCh0W2ldKX0sd24ucHJvdG90eXBlLmlzUmVkdW5kYW50PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3B0TGlzdC5zaXplKCk8MSlyZXR1cm4hMTt2YXIgZT10aGlzLl9wdExpc3QuZ2V0KHRoaXMuX3B0TGlzdC5zaXplKCktMSk7cmV0dXJuIHQuZGlzdGFuY2UoZSk8dGhpcy5fbWluaW1pbVZlcnRleERpc3RhbmNlfSx3bi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IF9lKS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMuZ2V0Q29vcmRpbmF0ZXMoKSkudG9TdHJpbmcoKX0sd24ucHJvdG90eXBlLmNsb3NlUmluZz1mdW5jdGlvbigpe2lmKHRoaXMuX3B0TGlzdC5zaXplKCk8MSlyZXR1cm4gbnVsbDt2YXIgdD1uZXcgQyh0aGlzLl9wdExpc3QuZ2V0KDApKSxlPXRoaXMuX3B0TGlzdC5nZXQodGhpcy5fcHRMaXN0LnNpemUoKS0xKTtpZih0LmVxdWFscyhlKSlyZXR1cm4gbnVsbDt0aGlzLl9wdExpc3QuYWRkKHQpfSx3bi5wcm90b3R5cGUuc2V0TWluaW11bVZlcnRleERpc3RhbmNlPWZ1bmN0aW9uKHQpe3RoaXMuX21pbmltaW1WZXJ0ZXhEaXN0YW5jZT10fSx3bi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sd24ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHdufSxPbi5DT09SRElOQVRFX0FSUkFZX1RZUEUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBcnJheSgwKS5maWxsKG51bGwpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3bixPbik7dmFyIFRuPWZ1bmN0aW9uKCl7fSxSbj17UElfVElNRVNfMjp7Y29uZmlndXJhYmxlOiEwfSxQSV9PVkVSXzI6e2NvbmZpZ3VyYWJsZTohMH0sUElfT1ZFUl80Ontjb25maWd1cmFibGU6ITB9LENPVU5URVJDTE9DS1dJU0U6e2NvbmZpZ3VyYWJsZTohMH0sQ0xPQ0tXSVNFOntjb25maWd1cmFibGU6ITB9LE5PTkU6e2NvbmZpZ3VyYWJsZTohMH19O1RuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxUbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gVG59LFRuLnRvRGVncmVlcz1mdW5jdGlvbih0KXtyZXR1cm4gMTgwKnQvTWF0aC5QSX0sVG4ubm9ybWFsaXplPWZ1bmN0aW9uKHQpe2Zvcig7dD5NYXRoLlBJOyl0LT1Ubi5QSV9USU1FU18yO2Zvcig7dDw9LU1hdGguUEk7KXQrPVRuLlBJX1RJTUVTXzI7cmV0dXJuIHR9LFRuLmFuZ2xlPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gTWF0aC5hdGFuMih0LnksdC54KX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9bi54LWUueCxyPW4ueS1lLnk7cmV0dXJuIE1hdGguYXRhbjIocixpKX19LFRuLmlzQWN1dGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQueC1lLngscj10LnktZS55O3JldHVybiBpKihuLngtZS54KStyKihuLnktZS55KT4wfSxUbi5pc09idHVzZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC54LWUueCxyPXQueS1lLnk7cmV0dXJuIGkqKG4ueC1lLngpK3IqKG4ueS1lLnkpPDB9LFRuLmludGVyaW9yQW5nbGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPVRuLmFuZ2xlKGUsdCkscj1Ubi5hbmdsZShlLG4pO3JldHVybiBNYXRoLmFicyhyLWkpfSxUbi5ub3JtYWxpemVQb3NpdGl2ZT1mdW5jdGlvbih0KXtpZih0PDApe2Zvcig7dDwwOyl0Kz1Ubi5QSV9USU1FU18yO3Q+PVRuLlBJX1RJTUVTXzImJih0PTApfWVsc2V7Zm9yKDt0Pj1Ubi5QSV9USU1FU18yOyl0LT1Ubi5QSV9USU1FU18yO3Q8MCYmKHQ9MCl9cmV0dXJuIHR9LFRuLmFuZ2xlQmV0d2Vlbj1mdW5jdGlvbih0LGUsbil7dmFyIGk9VG4uYW5nbGUoZSx0KSxyPVRuLmFuZ2xlKGUsbik7cmV0dXJuIFRuLmRpZmYoaSxyKX0sVG4uZGlmZj1mdW5jdGlvbih0LGUpe3ZhciBuPW51bGw7cmV0dXJuKG49dDxlP2UtdDp0LWUpPk1hdGguUEkmJihuPTIqTWF0aC5QSS1uKSxufSxUbi50b1JhZGlhbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHQqTWF0aC5QSS8xODB9LFRuLmdldFR1cm49ZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLnNpbihlLXQpO3JldHVybiBuPjA/VG4uQ09VTlRFUkNMT0NLV0lTRTpuPDA/VG4uQ0xPQ0tXSVNFOlRuLk5PTkV9LFRuLmFuZ2xlQmV0d2Vlbk9yaWVudGVkPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1Ubi5hbmdsZShlLHQpLHI9VG4uYW5nbGUoZSxuKS1pO3JldHVybiByPD0tTWF0aC5QST9yK1RuLlBJX1RJTUVTXzI6cj5NYXRoLlBJP3ItVG4uUElfVElNRVNfMjpyfSxSbi5QSV9USU1FU18yLmdldD1mdW5jdGlvbigpe3JldHVybiAyKk1hdGguUEl9LFJuLlBJX09WRVJfMi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5QSS8yfSxSbi5QSV9PVkVSXzQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguUEkvNH0sUm4uQ09VTlRFUkNMT0NLV0lTRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gYXQuQ09VTlRFUkNMT0NLV0lTRX0sUm4uQ0xPQ0tXSVNFLmdldD1mdW5jdGlvbigpe3JldHVybiBhdC5DTE9DS1dJU0V9LFJuLk5PTkUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGF0LkNPTExJTkVBUn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVG4sUm4pO3ZhciBQbj1mdW5jdGlvbiB0KCl7dGhpcy5fbWF4Q3VydmVTZWdtZW50RXJyb3I9MCx0aGlzLl9maWxsZXRBbmdsZVF1YW50dW09bnVsbCx0aGlzLl9jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yPTEsdGhpcy5fc2VnTGlzdD1udWxsLHRoaXMuX2Rpc3RhbmNlPTAsdGhpcy5fcHJlY2lzaW9uTW9kZWw9bnVsbCx0aGlzLl9idWZQYXJhbXM9bnVsbCx0aGlzLl9saT1udWxsLHRoaXMuX3MwPW51bGwsdGhpcy5fczE9bnVsbCx0aGlzLl9zMj1udWxsLHRoaXMuX3NlZzA9bmV3IGRuLHRoaXMuX3NlZzE9bmV3IGRuLHRoaXMuX29mZnNldDA9bmV3IGRuLHRoaXMuX29mZnNldDE9bmV3IGRuLHRoaXMuX3NpZGU9MCx0aGlzLl9oYXNOYXJyb3dDb25jYXZlQW5nbGU9ITE7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdO3RoaXMuX3ByZWNpc2lvbk1vZGVsPWUsdGhpcy5fYnVmUGFyYW1zPW4sdGhpcy5fbGk9bmV3IHJ0LHRoaXMuX2ZpbGxldEFuZ2xlUXVhbnR1bT1NYXRoLlBJLzIvbi5nZXRRdWFkcmFudFNlZ21lbnRzKCksbi5nZXRRdWFkcmFudFNlZ21lbnRzKCk+PTgmJm4uZ2V0Sm9pblN0eWxlKCk9PT1Dbi5KT0lOX1JPVU5EJiYodGhpcy5fY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcj10Lk1BWF9DTE9TSU5HX1NFR19MRU5fRkFDVE9SKSx0aGlzLmluaXQoaSl9LERuPXtPRkZTRVRfU0VHTUVOVF9TRVBBUkFUSU9OX0ZBQ1RPUjp7Y29uZmlndXJhYmxlOiEwfSxJTlNJREVfVFVSTl9WRVJURVhfU05BUF9ESVNUQU5DRV9GQUNUT1I6e2NvbmZpZ3VyYWJsZTohMH0sQ1VSVkVfVkVSVEVYX1NOQVBfRElTVEFOQ0VfRkFDVE9SOntjb25maWd1cmFibGU6ITB9LE1BWF9DTE9TSU5HX1NFR19MRU5fRkFDVE9SOntjb25maWd1cmFibGU6ITB9fTtQbi5wcm90b3R5cGUuYWRkTmV4dFNlZ21lbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9zMD10aGlzLl9zMSx0aGlzLl9zMT10aGlzLl9zMix0aGlzLl9zMj10LHRoaXMuX3NlZzAuc2V0Q29vcmRpbmF0ZXModGhpcy5fczAsdGhpcy5fczEpLHRoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQodGhpcy5fc2VnMCx0aGlzLl9zaWRlLHRoaXMuX2Rpc3RhbmNlLHRoaXMuX29mZnNldDApLHRoaXMuX3NlZzEuc2V0Q29vcmRpbmF0ZXModGhpcy5fczEsdGhpcy5fczIpLHRoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQodGhpcy5fc2VnMSx0aGlzLl9zaWRlLHRoaXMuX2Rpc3RhbmNlLHRoaXMuX29mZnNldDEpLHRoaXMuX3MxLmVxdWFscyh0aGlzLl9zMikpcmV0dXJuIG51bGw7dmFyIG49YXQuY29tcHV0ZU9yaWVudGF0aW9uKHRoaXMuX3MwLHRoaXMuX3MxLHRoaXMuX3MyKSxpPW49PT1hdC5DTE9DS1dJU0UmJnRoaXMuX3NpZGU9PT1TZS5MRUZUfHxuPT09YXQuQ09VTlRFUkNMT0NLV0lTRSYmdGhpcy5fc2lkZT09PVNlLlJJR0hUOzA9PT1uP3RoaXMuYWRkQ29sbGluZWFyKGUpOmk/dGhpcy5hZGRPdXRzaWRlVHVybihuLGUpOnRoaXMuYWRkSW5zaWRlVHVybihuLGUpfSxQbi5wcm90b3R5cGUuYWRkTGluZUVuZENhcD1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBkbih0LGUpLGk9bmV3IGRuO3RoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQobixTZS5MRUZULHRoaXMuX2Rpc3RhbmNlLGkpO3ZhciByPW5ldyBkbjt0aGlzLmNvbXB1dGVPZmZzZXRTZWdtZW50KG4sU2UuUklHSFQsdGhpcy5fZGlzdGFuY2Uscik7dmFyIG89ZS54LXQueCxzPWUueS10LnksYT1NYXRoLmF0YW4yKHMsbyk7c3dpdGNoKHRoaXMuX2J1ZlBhcmFtcy5nZXRFbmRDYXBTdHlsZSgpKXtjYXNlIENuLkNBUF9ST1VORDp0aGlzLl9zZWdMaXN0LmFkZFB0KGkucDEpLHRoaXMuYWRkRmlsbGV0QXJjKGUsYStNYXRoLlBJLzIsYS1NYXRoLlBJLzIsYXQuQ0xPQ0tXSVNFLHRoaXMuX2Rpc3RhbmNlKSx0aGlzLl9zZWdMaXN0LmFkZFB0KHIucDEpO2JyZWFrO2Nhc2UgQ24uQ0FQX0ZMQVQ6dGhpcy5fc2VnTGlzdC5hZGRQdChpLnAxKSx0aGlzLl9zZWdMaXN0LmFkZFB0KHIucDEpO2JyZWFrO2Nhc2UgQ24uQ0FQX1NRVUFSRTp2YXIgdT1uZXcgQzt1Lng9TWF0aC5hYnModGhpcy5fZGlzdGFuY2UpKk1hdGguY29zKGEpLHUueT1NYXRoLmFicyh0aGlzLl9kaXN0YW5jZSkqTWF0aC5zaW4oYSk7dmFyIGw9bmV3IEMoaS5wMS54K3UueCxpLnAxLnkrdS55KSxjPW5ldyBDKHIucDEueCt1Lngsci5wMS55K3UueSk7dGhpcy5fc2VnTGlzdC5hZGRQdChsKSx0aGlzLl9zZWdMaXN0LmFkZFB0KGMpfX0sUG4ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlZ0xpc3QuZ2V0Q29vcmRpbmF0ZXMoKX0sUG4ucHJvdG90eXBlLmFkZE1pdHJlSm9pbj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj0hMCxvPW51bGw7dHJ5e289ay5pbnRlcnNlY3Rpb24oZS5wMCxlLnAxLG4ucDAsbi5wMSk7KGk8PTA/MTpvLmRpc3RhbmNlKHQpL01hdGguYWJzKGkpKT50aGlzLl9idWZQYXJhbXMuZ2V0TWl0cmVMaW1pdCgpJiYocj0hMSl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgWCkpdGhyb3cgdDtvPW5ldyBDKDAsMCkscj0hMX1yP3RoaXMuX3NlZ0xpc3QuYWRkUHQobyk6dGhpcy5hZGRMaW1pdGVkTWl0cmVKb2luKGUsbixpLHRoaXMuX2J1ZlBhcmFtcy5nZXRNaXRyZUxpbWl0KCkpfSxQbi5wcm90b3R5cGUuYWRkRmlsbGV0Q29ybmVyPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89ZS54LXQueCxzPWUueS10LnksYT1NYXRoLmF0YW4yKHMsbyksdT1uLngtdC54LGw9bi55LXQueSxjPU1hdGguYXRhbjIobCx1KTtpPT09YXQuQ0xPQ0tXSVNFP2E8PWMmJihhKz0yKk1hdGguUEkpOmE+PWMmJihhLT0yKk1hdGguUEkpLHRoaXMuX3NlZ0xpc3QuYWRkUHQoZSksdGhpcy5hZGRGaWxsZXRBcmModCxhLGMsaSxyKSx0aGlzLl9zZWdMaXN0LmFkZFB0KG4pfSxQbi5wcm90b3R5cGUuYWRkT3V0c2lkZVR1cm49ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9vZmZzZXQwLnAxLmRpc3RhbmNlKHRoaXMuX29mZnNldDEucDApPHRoaXMuX2Rpc3RhbmNlKlBuLk9GRlNFVF9TRUdNRU5UX1NFUEFSQVRJT05fRkFDVE9SKXJldHVybiB0aGlzLl9zZWdMaXN0LmFkZFB0KHRoaXMuX29mZnNldDAucDEpLG51bGw7dGhpcy5fYnVmUGFyYW1zLmdldEpvaW5TdHlsZSgpPT09Q24uSk9JTl9NSVRSRT90aGlzLmFkZE1pdHJlSm9pbih0aGlzLl9zMSx0aGlzLl9vZmZzZXQwLHRoaXMuX29mZnNldDEsdGhpcy5fZGlzdGFuY2UpOnRoaXMuX2J1ZlBhcmFtcy5nZXRKb2luU3R5bGUoKT09PUNuLkpPSU5fQkVWRUw/dGhpcy5hZGRCZXZlbEpvaW4odGhpcy5fb2Zmc2V0MCx0aGlzLl9vZmZzZXQxKTooZSYmdGhpcy5fc2VnTGlzdC5hZGRQdCh0aGlzLl9vZmZzZXQwLnAxKSx0aGlzLmFkZEZpbGxldENvcm5lcih0aGlzLl9zMSx0aGlzLl9vZmZzZXQwLnAxLHRoaXMuX29mZnNldDEucDAsdCx0aGlzLl9kaXN0YW5jZSksdGhpcy5fc2VnTGlzdC5hZGRQdCh0aGlzLl9vZmZzZXQxLnAwKSl9LFBuLnByb3RvdHlwZS5jcmVhdGVTcXVhcmU9ZnVuY3Rpb24odCl7dGhpcy5fc2VnTGlzdC5hZGRQdChuZXcgQyh0LngrdGhpcy5fZGlzdGFuY2UsdC55K3RoaXMuX2Rpc3RhbmNlKSksdGhpcy5fc2VnTGlzdC5hZGRQdChuZXcgQyh0LngrdGhpcy5fZGlzdGFuY2UsdC55LXRoaXMuX2Rpc3RhbmNlKSksdGhpcy5fc2VnTGlzdC5hZGRQdChuZXcgQyh0LngtdGhpcy5fZGlzdGFuY2UsdC55LXRoaXMuX2Rpc3RhbmNlKSksdGhpcy5fc2VnTGlzdC5hZGRQdChuZXcgQyh0LngtdGhpcy5fZGlzdGFuY2UsdC55K3RoaXMuX2Rpc3RhbmNlKSksdGhpcy5fc2VnTGlzdC5jbG9zZVJpbmcoKX0sUG4ucHJvdG90eXBlLmFkZFNlZ21lbnRzPWZ1bmN0aW9uKHQsZSl7dGhpcy5fc2VnTGlzdC5hZGRQdHModCxlKX0sUG4ucHJvdG90eXBlLmFkZEZpcnN0U2VnbWVudD1mdW5jdGlvbigpe3RoaXMuX3NlZ0xpc3QuYWRkUHQodGhpcy5fb2Zmc2V0MS5wMCl9LFBuLnByb3RvdHlwZS5hZGRMYXN0U2VnbWVudD1mdW5jdGlvbigpe3RoaXMuX3NlZ0xpc3QuYWRkUHQodGhpcy5fb2Zmc2V0MS5wMSl9LFBuLnByb3RvdHlwZS5pbml0U2lkZVNlZ21lbnRzPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLl9zMT10LHRoaXMuX3MyPWUsdGhpcy5fc2lkZT1uLHRoaXMuX3NlZzEuc2V0Q29vcmRpbmF0ZXModCxlKSx0aGlzLmNvbXB1dGVPZmZzZXRTZWdtZW50KHRoaXMuX3NlZzEsbix0aGlzLl9kaXN0YW5jZSx0aGlzLl9vZmZzZXQxKX0sUG4ucHJvdG90eXBlLmFkZExpbWl0ZWRNaXRyZUpvaW49ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dGhpcy5fc2VnMC5wMSxvPVRuLmFuZ2xlKHIsdGhpcy5fc2VnMC5wMCkscz1Ubi5hbmdsZUJldHdlZW5PcmllbnRlZCh0aGlzLl9zZWcwLnAwLHIsdGhpcy5fc2VnMS5wMSkvMixhPVRuLm5vcm1hbGl6ZShvK3MpLHU9VG4ubm9ybWFsaXplKGErTWF0aC5QSSksbD1pKm4sYz1uLWwqTWF0aC5hYnMoTWF0aC5zaW4ocykpLHA9ci54K2wqTWF0aC5jb3ModSksaD1yLnkrbCpNYXRoLnNpbih1KSxmPW5ldyBDKHAsaCksZz1uZXcgZG4ocixmKSxkPWcucG9pbnRBbG9uZ09mZnNldCgxLGMpLHk9Zy5wb2ludEFsb25nT2Zmc2V0KDEsLWMpO3RoaXMuX3NpZGU9PT1TZS5MRUZUPyh0aGlzLl9zZWdMaXN0LmFkZFB0KGQpLHRoaXMuX3NlZ0xpc3QuYWRkUHQoeSkpOih0aGlzLl9zZWdMaXN0LmFkZFB0KHkpLHRoaXMuX3NlZ0xpc3QuYWRkUHQoZCkpfSxQbi5wcm90b3R5cGUuY29tcHV0ZU9mZnNldFNlZ21lbnQ9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9ZT09PVNlLkxFRlQ/MTotMSxvPXQucDEueC10LnAwLngscz10LnAxLnktdC5wMC55LGE9TWF0aC5zcXJ0KG8qbytzKnMpLHU9cipuKm8vYSxsPXIqbipzL2E7aS5wMC54PXQucDAueC1sLGkucDAueT10LnAwLnkrdSxpLnAxLng9dC5wMS54LWwsaS5wMS55PXQucDEueSt1fSxQbi5wcm90b3R5cGUuYWRkRmlsbGV0QXJjPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89aT09PWF0LkNMT0NLV0lTRT8tMToxLHM9TWF0aC5hYnMoZS1uKSxhPU1hdGgudHJ1bmMocy90aGlzLl9maWxsZXRBbmdsZVF1YW50dW0rLjUpO2lmKGE8MSlyZXR1cm4gbnVsbDtmb3IodmFyIHU9cy9hLGw9MCxjPW5ldyBDO2w8czspe3ZhciBwPWUrbypsO2MueD10LngrcipNYXRoLmNvcyhwKSxjLnk9dC55K3IqTWF0aC5zaW4ocCksdGhpcy5fc2VnTGlzdC5hZGRQdChjKSxsKz11fX0sUG4ucHJvdG90eXBlLmFkZEluc2lkZVR1cm49ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9saS5jb21wdXRlSW50ZXJzZWN0aW9uKHRoaXMuX29mZnNldDAucDAsdGhpcy5fb2Zmc2V0MC5wMSx0aGlzLl9vZmZzZXQxLnAwLHRoaXMuX29mZnNldDEucDEpLHRoaXMuX2xpLmhhc0ludGVyc2VjdGlvbigpKXRoaXMuX3NlZ0xpc3QuYWRkUHQodGhpcy5fbGkuZ2V0SW50ZXJzZWN0aW9uKDApKTtlbHNlIGlmKHRoaXMuX2hhc05hcnJvd0NvbmNhdmVBbmdsZT0hMCx0aGlzLl9vZmZzZXQwLnAxLmRpc3RhbmNlKHRoaXMuX29mZnNldDEucDApPHRoaXMuX2Rpc3RhbmNlKlBuLklOU0lERV9UVVJOX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUil0aGlzLl9zZWdMaXN0LmFkZFB0KHRoaXMuX29mZnNldDAucDEpO2Vsc2V7aWYodGhpcy5fc2VnTGlzdC5hZGRQdCh0aGlzLl9vZmZzZXQwLnAxKSx0aGlzLl9jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yPjApe3ZhciBuPW5ldyBDKCh0aGlzLl9jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKnRoaXMuX29mZnNldDAucDEueCt0aGlzLl9zMS54KS8odGhpcy5fY2xvc2luZ1NlZ0xlbmd0aEZhY3RvcisxKSwodGhpcy5fY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcip0aGlzLl9vZmZzZXQwLnAxLnkrdGhpcy5fczEueSkvKHRoaXMuX2Nsb3NpbmdTZWdMZW5ndGhGYWN0b3IrMSkpO3RoaXMuX3NlZ0xpc3QuYWRkUHQobik7dmFyIGk9bmV3IEMoKHRoaXMuX2Nsb3NpbmdTZWdMZW5ndGhGYWN0b3IqdGhpcy5fb2Zmc2V0MS5wMC54K3RoaXMuX3MxLngpLyh0aGlzLl9jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKzEpLCh0aGlzLl9jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKnRoaXMuX29mZnNldDEucDAueSt0aGlzLl9zMS55KS8odGhpcy5fY2xvc2luZ1NlZ0xlbmd0aEZhY3RvcisxKSk7dGhpcy5fc2VnTGlzdC5hZGRQdChpKX1lbHNlIHRoaXMuX3NlZ0xpc3QuYWRkUHQodGhpcy5fczEpO3RoaXMuX3NlZ0xpc3QuYWRkUHQodGhpcy5fb2Zmc2V0MS5wMCl9fSxQbi5wcm90b3R5cGUuY3JlYXRlQ2lyY2xlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBDKHQueCt0aGlzLl9kaXN0YW5jZSx0LnkpO3RoaXMuX3NlZ0xpc3QuYWRkUHQoZSksdGhpcy5hZGRGaWxsZXRBcmModCwwLDIqTWF0aC5QSSwtMSx0aGlzLl9kaXN0YW5jZSksdGhpcy5fc2VnTGlzdC5jbG9zZVJpbmcoKX0sUG4ucHJvdG90eXBlLmFkZEJldmVsSm9pbj1mdW5jdGlvbih0LGUpe3RoaXMuX3NlZ0xpc3QuYWRkUHQodC5wMSksdGhpcy5fc2VnTGlzdC5hZGRQdChlLnAwKX0sUG4ucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24odCl7dGhpcy5fZGlzdGFuY2U9dCx0aGlzLl9tYXhDdXJ2ZVNlZ21lbnRFcnJvcj10KigxLU1hdGguY29zKHRoaXMuX2ZpbGxldEFuZ2xlUXVhbnR1bS8yKSksdGhpcy5fc2VnTGlzdD1uZXcgd24sdGhpcy5fc2VnTGlzdC5zZXRQcmVjaXNpb25Nb2RlbCh0aGlzLl9wcmVjaXNpb25Nb2RlbCksdGhpcy5fc2VnTGlzdC5zZXRNaW5pbXVtVmVydGV4RGlzdGFuY2UodCpQbi5DVVJWRV9WRVJURVhfU05BUF9ESVNUQU5DRV9GQUNUT1IpfSxQbi5wcm90b3R5cGUuYWRkQ29sbGluZWFyPWZ1bmN0aW9uKHQpe3RoaXMuX2xpLmNvbXB1dGVJbnRlcnNlY3Rpb24odGhpcy5fczAsdGhpcy5fczEsdGhpcy5fczEsdGhpcy5fczIpO3RoaXMuX2xpLmdldEludGVyc2VjdGlvbk51bSgpPj0yJiYodGhpcy5fYnVmUGFyYW1zLmdldEpvaW5TdHlsZSgpPT09Q24uSk9JTl9CRVZFTHx8dGhpcy5fYnVmUGFyYW1zLmdldEpvaW5TdHlsZSgpPT09Q24uSk9JTl9NSVRSRT8odCYmdGhpcy5fc2VnTGlzdC5hZGRQdCh0aGlzLl9vZmZzZXQwLnAxKSx0aGlzLl9zZWdMaXN0LmFkZFB0KHRoaXMuX29mZnNldDEucDApKTp0aGlzLmFkZEZpbGxldENvcm5lcih0aGlzLl9zMSx0aGlzLl9vZmZzZXQwLnAxLHRoaXMuX29mZnNldDEucDAsYXQuQ0xPQ0tXSVNFLHRoaXMuX2Rpc3RhbmNlKSl9LFBuLnByb3RvdHlwZS5jbG9zZVJpbmc9ZnVuY3Rpb24oKXt0aGlzLl9zZWdMaXN0LmNsb3NlUmluZygpfSxQbi5wcm90b3R5cGUuaGFzTmFycm93Q29uY2F2ZUFuZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc05hcnJvd0NvbmNhdmVBbmdsZX0sUG4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFBuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBQbn0sRG4uT0ZGU0VUX1NFR01FTlRfU0VQQVJBVElPTl9GQUNUT1IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuLjAwMX0sRG4uSU5TSURFX1RVUk5fVkVSVEVYX1NOQVBfRElTVEFOQ0VfRkFDVE9SLmdldD1mdW5jdGlvbigpe3JldHVybi4wMDF9LERuLkNVUlZFX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMWUtNn0sRG4uTUFYX0NMT1NJTkdfU0VHX0xFTl9GQUNUT1IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDgwfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQbixEbik7dmFyIE1uPWZ1bmN0aW9uKCl7dGhpcy5fZGlzdGFuY2U9MCx0aGlzLl9wcmVjaXNpb25Nb2RlbD1udWxsLHRoaXMuX2J1ZlBhcmFtcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLl9wcmVjaXNpb25Nb2RlbD10LHRoaXMuX2J1ZlBhcmFtcz1lfTtNbi5wcm90b3R5cGUuZ2V0T2Zmc2V0Q3VydmU9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9kaXN0YW5jZT1lLDA9PT1lKXJldHVybiBudWxsO3ZhciBuPWU8MCxpPU1hdGguYWJzKGUpLHI9dGhpcy5nZXRTZWdHZW4oaSk7dC5sZW5ndGg8PTE/dGhpcy5jb21wdXRlUG9pbnRDdXJ2ZSh0WzBdLHIpOnRoaXMuY29tcHV0ZU9mZnNldEN1cnZlKHQsbixyKTt2YXIgbz1yLmdldENvb3JkaW5hdGVzKCk7cmV0dXJuIG4mJkx0LnJldmVyc2Uobyksb30sTW4ucHJvdG90eXBlLmNvbXB1dGVTaW5nbGVTaWRlZEJ1ZmZlckN1cnZlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnNpbXBsaWZ5VG9sZXJhbmNlKHRoaXMuX2Rpc3RhbmNlKTtpZihlKXtuLmFkZFNlZ21lbnRzKHQsITApO3ZhciByPUxuLnNpbXBsaWZ5KHQsLWkpLG89ci5sZW5ndGgtMTtuLmluaXRTaWRlU2VnbWVudHMocltvXSxyW28tMV0sU2UuTEVGVCksbi5hZGRGaXJzdFNlZ21lbnQoKTtmb3IodmFyIHM9by0yO3M+PTA7cy0tKW4uYWRkTmV4dFNlZ21lbnQocltzXSwhMCl9ZWxzZXtuLmFkZFNlZ21lbnRzKHQsITEpO3ZhciBhPUxuLnNpbXBsaWZ5KHQsaSksdT1hLmxlbmd0aC0xO24uaW5pdFNpZGVTZWdtZW50cyhhWzBdLGFbMV0sU2UuTEVGVCksbi5hZGRGaXJzdFNlZ21lbnQoKTtmb3IodmFyIGw9MjtsPD11O2wrKyluLmFkZE5leHRTZWdtZW50KGFbbF0sITApfW4uYWRkTGFzdFNlZ21lbnQoKSxuLmNsb3NlUmluZygpfSxNbi5wcm90b3R5cGUuY29tcHV0ZVJpbmdCdWZmZXJDdXJ2ZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5zaW1wbGlmeVRvbGVyYW5jZSh0aGlzLl9kaXN0YW5jZSk7ZT09PVNlLlJJR0hUJiYoaT0taSk7dmFyIHI9TG4uc2ltcGxpZnkodCxpKSxvPXIubGVuZ3RoLTE7bi5pbml0U2lkZVNlZ21lbnRzKHJbby0xXSxyWzBdLGUpO2Zvcih2YXIgcz0xO3M8PW87cysrKXt2YXIgYT0xIT09cztuLmFkZE5leHRTZWdtZW50KHJbc10sYSl9bi5jbG9zZVJpbmcoKX0sTW4ucHJvdG90eXBlLmNvbXB1dGVMaW5lQnVmZmVyQ3VydmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnNpbXBsaWZ5VG9sZXJhbmNlKHRoaXMuX2Rpc3RhbmNlKSxpPUxuLnNpbXBsaWZ5KHQsbikscj1pLmxlbmd0aC0xO2UuaW5pdFNpZGVTZWdtZW50cyhpWzBdLGlbMV0sU2UuTEVGVCk7Zm9yKHZhciBvPTI7bzw9cjtvKyspZS5hZGROZXh0U2VnbWVudChpW29dLCEwKTtlLmFkZExhc3RTZWdtZW50KCksZS5hZGRMaW5lRW5kQ2FwKGlbci0xXSxpW3JdKTt2YXIgcz1Mbi5zaW1wbGlmeSh0LC1uKSxhPXMubGVuZ3RoLTE7ZS5pbml0U2lkZVNlZ21lbnRzKHNbYV0sc1thLTFdLFNlLkxFRlQpO2Zvcih2YXIgdT1hLTI7dT49MDt1LS0pZS5hZGROZXh0U2VnbWVudChzW3VdLCEwKTtlLmFkZExhc3RTZWdtZW50KCksZS5hZGRMaW5lRW5kQ2FwKHNbMV0sc1swXSksZS5jbG9zZVJpbmcoKX0sTW4ucHJvdG90eXBlLmNvbXB1dGVQb2ludEN1cnZlPWZ1bmN0aW9uKHQsZSl7c3dpdGNoKHRoaXMuX2J1ZlBhcmFtcy5nZXRFbmRDYXBTdHlsZSgpKXtjYXNlIENuLkNBUF9ST1VORDplLmNyZWF0ZUNpcmNsZSh0KTticmVhaztjYXNlIENuLkNBUF9TUVVBUkU6ZS5jcmVhdGVTcXVhcmUodCl9fSxNbi5wcm90b3R5cGUuZ2V0TGluZUN1cnZlPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fZGlzdGFuY2U9ZSxlPDAmJiF0aGlzLl9idWZQYXJhbXMuaXNTaW5nbGVTaWRlZCgpKXJldHVybiBudWxsO2lmKDA9PT1lKXJldHVybiBudWxsO3ZhciBuPU1hdGguYWJzKGUpLGk9dGhpcy5nZXRTZWdHZW4obik7aWYodC5sZW5ndGg8PTEpdGhpcy5jb21wdXRlUG9pbnRDdXJ2ZSh0WzBdLGkpO2Vsc2UgaWYodGhpcy5fYnVmUGFyYW1zLmlzU2luZ2xlU2lkZWQoKSl7dmFyIHI9ZTwwO3RoaXMuY29tcHV0ZVNpbmdsZVNpZGVkQnVmZmVyQ3VydmUodCxyLGkpfWVsc2UgdGhpcy5jb21wdXRlTGluZUJ1ZmZlckN1cnZlKHQsaSk7cmV0dXJuIGkuZ2V0Q29vcmRpbmF0ZXMoKX0sTW4ucHJvdG90eXBlLmdldEJ1ZmZlclBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmUGFyYW1zfSxNbi5wcm90b3R5cGUuc2ltcGxpZnlUb2xlcmFuY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQqdGhpcy5fYnVmUGFyYW1zLmdldFNpbXBsaWZ5RmFjdG9yKCl9LE1uLnByb3RvdHlwZS5nZXRSaW5nQ3VydmU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuX2Rpc3RhbmNlPW4sdC5sZW5ndGg8PTIpcmV0dXJuIHRoaXMuZ2V0TGluZUN1cnZlKHQsbik7aWYoMD09PW4pcmV0dXJuIE1uLmNvcHlDb29yZGluYXRlcyh0KTt2YXIgaT10aGlzLmdldFNlZ0dlbihuKTtyZXR1cm4gdGhpcy5jb21wdXRlUmluZ0J1ZmZlckN1cnZlKHQsZSxpKSxpLmdldENvb3JkaW5hdGVzKCl9LE1uLnByb3RvdHlwZS5jb21wdXRlT2Zmc2V0Q3VydmU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5fZGlzdGFuY2UpO2lmKGUpe3ZhciByPUxuLnNpbXBsaWZ5KHQsLWkpLG89ci5sZW5ndGgtMTtuLmluaXRTaWRlU2VnbWVudHMocltvXSxyW28tMV0sU2UuTEVGVCksbi5hZGRGaXJzdFNlZ21lbnQoKTtmb3IodmFyIHM9by0yO3M+PTA7cy0tKW4uYWRkTmV4dFNlZ21lbnQocltzXSwhMCl9ZWxzZXt2YXIgYT1Mbi5zaW1wbGlmeSh0LGkpLHU9YS5sZW5ndGgtMTtuLmluaXRTaWRlU2VnbWVudHMoYVswXSxhWzFdLFNlLkxFRlQpLG4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHZhciBsPTI7bDw9dTtsKyspbi5hZGROZXh0U2VnbWVudChhW2xdLCEwKX1uLmFkZExhc3RTZWdtZW50KCl9LE1uLnByb3RvdHlwZS5nZXRTZWdHZW49ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQbih0aGlzLl9wcmVjaXNpb25Nb2RlbCx0aGlzLl9idWZQYXJhbXMsdCl9LE1uLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxNbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gTW59LE1uLmNvcHlDb29yZGluYXRlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQubGVuZ3RoKS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyllW25dPW5ldyBDKHRbbl0pO3JldHVybiBlfTt2YXIgQW49ZnVuY3Rpb24oKXt0aGlzLl9zdWJncmFwaHM9bnVsbCx0aGlzLl9zZWc9bmV3IGRuLHRoaXMuX2NnYT1uZXcgYXQ7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX3N1YmdyYXBocz10fSxGbj17RGVwdGhTZWdtZW50Ontjb25maWd1cmFibGU6ITB9fTtBbi5wcm90b3R5cGUuZmluZFN0YWJiZWRTZWdtZW50cz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IE50LG49dGhpcy5fc3ViZ3JhcGhzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0RW52ZWxvcGUoKTt0Lnk8ci5nZXRNaW5ZKCl8fHQueT5yLmdldE1heFkoKXx8dGhpcy5maW5kU3RhYmJlZFNlZ21lbnRzKHQsaS5nZXREaXJlY3RlZEVkZ2VzKCksZSl9cmV0dXJuIGV9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpaWYoVChhcmd1bWVudHNbMl0seHQpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgemUpZm9yKHZhciBvPWFyZ3VtZW50c1swXSxzPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXSx1PXMuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCksbD0wO2w8dS5sZW5ndGgtMTtsKyspe3RoaXMuX3NlZy5wMD11W2xdLHRoaXMuX3NlZy5wMT11W2wrMV0sdGhpcy5fc2VnLnAwLnk+dGhpcy5fc2VnLnAxLnkmJnRoaXMuX3NlZy5yZXZlcnNlKCk7aWYoIShNYXRoLm1heCh0aGlzLl9zZWcucDAueCx0aGlzLl9zZWcucDEueCk8by54KSYmISh0aGlzLl9zZWcuaXNIb3Jpem9udGFsKCl8fG8ueTx0aGlzLl9zZWcucDAueXx8by55PnRoaXMuX3NlZy5wMS55fHxhdC5jb21wdXRlT3JpZW50YXRpb24odGhpcy5fc2VnLnAwLHRoaXMuX3NlZy5wMSxvKT09PWF0LlJJR0hUKSl7dmFyIGM9cy5nZXREZXB0aChTZS5MRUZUKTt0aGlzLl9zZWcucDAuZXF1YWxzKHVbbF0pfHwoYz1zLmdldERlcHRoKFNlLlJJR0hUKSk7dmFyIHA9bmV3IEduKHRoaXMuX3NlZyxjKTthLmFkZChwKX19ZWxzZSBpZihUKGFyZ3VtZW50c1syXSx4dCkmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyYmVChhcmd1bWVudHNbMV0seHQpKWZvcih2YXIgaD1hcmd1bWVudHNbMF0sZj1hcmd1bWVudHNbMV0sZz1hcmd1bWVudHNbMl0sZD1mLml0ZXJhdG9yKCk7ZC5oYXNOZXh0KCk7KXt2YXIgeT1kLm5leHQoKTt5LmlzRm9yd2FyZCgpJiZ0aGlzLmZpbmRTdGFiYmVkU2VnbWVudHMoaCx5LGcpfX0sQW4ucHJvdG90eXBlLmdldERlcHRoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZmluZFN0YWJiZWRTZWdtZW50cyh0KTtpZigwPT09ZS5zaXplKCkpcmV0dXJuIDA7cmV0dXJuICRlLm1pbihlKS5fbGVmdERlcHRofSxBbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sQW4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEFufSxGbi5EZXB0aFNlZ21lbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIEdufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhBbixGbik7dmFyIEduPWZ1bmN0aW9uKCl7dGhpcy5fdXB3YXJkU2VnPW51bGwsdGhpcy5fbGVmdERlcHRoPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuX3Vwd2FyZFNlZz1uZXcgZG4odCksdGhpcy5fbGVmdERlcHRoPWV9O0duLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7dmFyIGU9dDtpZih0aGlzLl91cHdhcmRTZWcubWluWCgpPj1lLl91cHdhcmRTZWcubWF4WCgpKXJldHVybiAxO2lmKHRoaXMuX3Vwd2FyZFNlZy5tYXhYKCk8PWUuX3Vwd2FyZFNlZy5taW5YKCkpcmV0dXJuLTE7dmFyIG49dGhpcy5fdXB3YXJkU2VnLm9yaWVudGF0aW9uSW5kZXgoZS5fdXB3YXJkU2VnKTtyZXR1cm4gMCE9PW4/bjowIT0obj0tMSplLl91cHdhcmRTZWcub3JpZW50YXRpb25JbmRleCh0aGlzLl91cHdhcmRTZWcpKT9uOnRoaXMuX3Vwd2FyZFNlZy5jb21wYXJlVG8oZS5fdXB3YXJkU2VnKX0sR24ucHJvdG90eXBlLmNvbXBhcmVYPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wMC5jb21wYXJlVG8oZS5wMCk7cmV0dXJuIDAhPT1uP246dC5wMS5jb21wYXJlVG8oZS5wMSl9LEduLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl91cHdhcmRTZWcudG9TdHJpbmcoKX0sR24ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0VdfSxHbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gR259O3ZhciBxbj1mdW5jdGlvbih0LGUsbil7dGhpcy5wMD10fHxudWxsLHRoaXMucDE9ZXx8bnVsbCx0aGlzLnAyPW58fG51bGx9O3FuLnByb3RvdHlwZS5hcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIHFuLmFyZWEodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpfSxxbi5wcm90b3R5cGUuc2lnbmVkQXJlYT1mdW5jdGlvbigpe3JldHVybiBxbi5zaWduZWRBcmVhKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0scW4ucHJvdG90eXBlLmludGVycG9sYXRlWj1mdW5jdGlvbih0KXtpZihudWxsPT09dCl0aHJvdyBuZXcgbShcIlN1cHBsaWVkIHBvaW50IGlzIG51bGwuXCIpO3JldHVybiBxbi5pbnRlcnBvbGF0ZVoodCx0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LHFuLnByb3RvdHlwZS5sb25nZXN0U2lkZUxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBxbi5sb25nZXN0U2lkZUxlbmd0aCh0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LHFuLnByb3RvdHlwZS5pc0FjdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHFuLmlzQWN1dGUodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpfSxxbi5wcm90b3R5cGUuY2lyY3VtY2VudHJlPWZ1bmN0aW9uKCl7cmV0dXJuIHFuLmNpcmN1bWNlbnRyZSh0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LHFuLnByb3RvdHlwZS5hcmVhM0Q9ZnVuY3Rpb24oKXtyZXR1cm4gcW4uYXJlYTNEKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0scW4ucHJvdG90eXBlLmNlbnRyb2lkPWZ1bmN0aW9uKCl7cmV0dXJuIHFuLmNlbnRyb2lkKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0scW4ucHJvdG90eXBlLmluQ2VudHJlPWZ1bmN0aW9uKCl7cmV0dXJuIHFuLmluQ2VudHJlKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0scW4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LHFuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBxbn0scW4uYXJlYT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIE1hdGguYWJzKCgobi54LXQueCkqKGUueS10LnkpLShlLngtdC54KSoobi55LXQueSkpLzIpfSxxbi5zaWduZWRBcmVhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oKG4ueC10LngpKihlLnktdC55KS0oZS54LXQueCkqKG4ueS10LnkpKS8yfSxxbi5kZXQ9ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHQqaS1lKm59LHFuLmludGVycG9sYXRlWj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1lLngsbz1lLnkscz1uLngtcixhPWkueC1yLHU9bi55LW8sbD1pLnktbyxjPXMqbC1hKnUscD10LngtcixoPXQueS1vLGY9KGwqcC1hKmgpL2MsZz0oLXUqcCtzKmgpL2M7cmV0dXJuIGUueitmKihuLnotZS56KStnKihpLnotZS56KX0scW4ubG9uZ2VzdFNpZGVMZW5ndGg9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuZGlzdGFuY2UoZSkscj1lLmRpc3RhbmNlKG4pLG89bi5kaXN0YW5jZSh0KSxzPWk7cmV0dXJuIHI+cyYmKHM9ciksbz5zJiYocz1vKSxzfSxxbi5pc0FjdXRlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hIVRuLmlzQWN1dGUodCxlLG4pJiYoISFUbi5pc0FjdXRlKGUsbix0KSYmISFUbi5pc0FjdXRlKG4sdCxlKSl9LHFuLmNpcmN1bWNlbnRyZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9bi54LHI9bi55LG89dC54LWkscz10LnktcixhPWUueC1pLHU9ZS55LXIsbD0yKnFuLmRldChvLHMsYSx1KSxjPXFuLmRldChzLG8qbytzKnMsdSxhKmErdSp1KSxwPXFuLmRldChvLG8qbytzKnMsYSxhKmErdSp1KTtyZXR1cm4gbmV3IEMoaS1jL2wscitwL2wpfSxxbi5wZXJwZW5kaWN1bGFyQmlzZWN0b3I9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLngtdC54LGk9ZS55LXQueSxyPW5ldyBrKHQueCtuLzIsdC55K2kvMiwxKSxvPW5ldyBrKHQueC1pK24vMix0LnkrbitpLzIsMSk7cmV0dXJuIG5ldyBrKHIsbyl9LHFuLmFuZ2xlQmlzZWN0b3I9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUuZGlzdGFuY2UodCkscj1pLyhpK2UuZGlzdGFuY2UobikpLG89bi54LXQueCxzPW4ueS10Lnk7cmV0dXJuIG5ldyBDKHQueCtyKm8sdC55K3Iqcyl9LHFuLmFyZWEzRD1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS54LXQueCxyPWUueS10Lnksbz1lLnotdC56LHM9bi54LXQueCxhPW4ueS10LnksdT1uLnotdC56LGw9cip1LW8qYSxjPW8qcy1pKnUscD1pKmEtcipzLGg9bCpsK2MqYytwKnAsZj1NYXRoLnNxcnQoaCkvMjtyZXR1cm4gZn0scW4uY2VudHJvaWQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPSh0LngrZS54K24ueCkvMyxyPSh0LnkrZS55K24ueSkvMztyZXR1cm4gbmV3IEMoaSxyKX0scW4uaW5DZW50cmU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUuZGlzdGFuY2Uobikscj10LmRpc3RhbmNlKG4pLG89dC5kaXN0YW5jZShlKSxzPWkrcitvLGE9KGkqdC54K3IqZS54K28qbi54KS9zLHU9KGkqdC55K3IqZS55K28qbi55KS9zO3JldHVybiBuZXcgQyhhLHUpfTt2YXIgQm49ZnVuY3Rpb24oKXt0aGlzLl9pbnB1dEdlb209bnVsbCx0aGlzLl9kaXN0YW5jZT1udWxsLHRoaXMuX2N1cnZlQnVpbGRlcj1udWxsLHRoaXMuX2N1cnZlTGlzdD1uZXcgTnQ7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuX2lucHV0R2VvbT10LHRoaXMuX2Rpc3RhbmNlPWUsdGhpcy5fY3VydmVCdWlsZGVyPW59O0JuLnByb3RvdHlwZS5hZGRQb2ludD1mdW5jdGlvbih0KXtpZih0aGlzLl9kaXN0YW5jZTw9MClyZXR1cm4gbnVsbDt2YXIgZT10LmdldENvb3JkaW5hdGVzKCksbj10aGlzLl9jdXJ2ZUJ1aWxkZXIuZ2V0TGluZUN1cnZlKGUsdGhpcy5fZGlzdGFuY2UpO3RoaXMuYWRkQ3VydmUobix3LkVYVEVSSU9SLHcuSU5URVJJT1IpfSxCbi5wcm90b3R5cGUuYWRkUG9seWdvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kaXN0YW5jZSxuPVNlLkxFRlQ7dGhpcy5fZGlzdGFuY2U8MCYmKGU9LXRoaXMuX2Rpc3RhbmNlLG49U2UuUklHSFQpO3ZhciBpPXQuZ2V0RXh0ZXJpb3JSaW5nKCkscj1MdC5yZW1vdmVSZXBlYXRlZFBvaW50cyhpLmdldENvb3JkaW5hdGVzKCkpO2lmKHRoaXMuX2Rpc3RhbmNlPDAmJnRoaXMuaXNFcm9kZWRDb21wbGV0ZWx5KGksdGhpcy5fZGlzdGFuY2UpKXJldHVybiBudWxsO2lmKHRoaXMuX2Rpc3RhbmNlPD0wJiZyLmxlbmd0aDwzKXJldHVybiBudWxsO3RoaXMuYWRkUG9seWdvblJpbmcocixlLG4sdy5FWFRFUklPUix3LklOVEVSSU9SKTtmb3IodmFyIG89MDtvPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7bysrKXt2YXIgcz10LmdldEludGVyaW9yUmluZ04obyksYT1MdC5yZW1vdmVSZXBlYXRlZFBvaW50cyhzLmdldENvb3JkaW5hdGVzKCkpO3RoaXMuX2Rpc3RhbmNlPjAmJnRoaXMuaXNFcm9kZWRDb21wbGV0ZWx5KHMsLXRoaXMuX2Rpc3RhbmNlKXx8dGhpcy5hZGRQb2x5Z29uUmluZyhhLGUsU2Uub3Bwb3NpdGUobiksdy5JTlRFUklPUix3LkVYVEVSSU9SKX19LEJuLnByb3RvdHlwZS5pc1RyaWFuZ2xlRXJvZGVkQ29tcGxldGVseT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBxbih0WzBdLHRbMV0sdFsyXSksaT1uLmluQ2VudHJlKCk7cmV0dXJuIGF0LmRpc3RhbmNlUG9pbnRMaW5lKGksbi5wMCxuLnAxKTxNYXRoLmFicyhlKX0sQm4ucHJvdG90eXBlLmFkZExpbmVTdHJpbmc9ZnVuY3Rpb24odCl7aWYodGhpcy5fZGlzdGFuY2U8PTAmJiF0aGlzLl9jdXJ2ZUJ1aWxkZXIuZ2V0QnVmZmVyUGFyYW1ldGVycygpLmlzU2luZ2xlU2lkZWQoKSlyZXR1cm4gbnVsbDt2YXIgZT1MdC5yZW1vdmVSZXBlYXRlZFBvaW50cyh0LmdldENvb3JkaW5hdGVzKCkpLG49dGhpcy5fY3VydmVCdWlsZGVyLmdldExpbmVDdXJ2ZShlLHRoaXMuX2Rpc3RhbmNlKTt0aGlzLmFkZEN1cnZlKG4sdy5FWFRFUklPUix3LklOVEVSSU9SKX0sQm4ucHJvdG90eXBlLmFkZEN1cnZlPWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsPT09dHx8dC5sZW5ndGg8MilyZXR1cm4gbnVsbDt2YXIgaT1uZXcgZ24odCxuZXcgUGUoMCx3LkJPVU5EQVJZLGUsbikpO3RoaXMuX2N1cnZlTGlzdC5hZGQoaSl9LEJuLnByb3RvdHlwZS5nZXRDdXJ2ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGQodGhpcy5faW5wdXRHZW9tKSx0aGlzLl9jdXJ2ZUxpc3R9LEJuLnByb3RvdHlwZS5hZGRQb2x5Z29uUmluZz1mdW5jdGlvbih0LGUsbixpLHIpe2lmKDA9PT1lJiZ0Lmxlbmd0aDxlZS5NSU5JTVVNX1ZBTElEX1NJWkUpcmV0dXJuIG51bGw7dmFyIG89aSxzPXI7dC5sZW5ndGg+PWVlLk1JTklNVU1fVkFMSURfU0laRSYmYXQuaXNDQ1codCkmJihvPXIscz1pLG49U2Uub3Bwb3NpdGUobikpO3ZhciBhPXRoaXMuX2N1cnZlQnVpbGRlci5nZXRSaW5nQ3VydmUodCxuLGUpO3RoaXMuYWRkQ3VydmUoYSxvLHMpfSxCbi5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe2lmKHQuaXNFbXB0eSgpKXJldHVybiBudWxsO3QgaW5zdGFuY2VvZiAkdD90aGlzLmFkZFBvbHlnb24odCk6dCBpbnN0YW5jZW9mIEt0P3RoaXMuYWRkTGluZVN0cmluZyh0KTp0IGluc3RhbmNlb2YgUXQ/dGhpcy5hZGRQb2ludCh0KTp0IGluc3RhbmNlb2YgdGU/dGhpcy5hZGRDb2xsZWN0aW9uKHQpOnQgaW5zdGFuY2VvZiBYdD90aGlzLmFkZENvbGxlY3Rpb24odCk6dCBpbnN0YW5jZW9mIG5lP3RoaXMuYWRkQ29sbGVjdGlvbih0KTp0IGluc3RhbmNlb2YgenQmJnRoaXMuYWRkQ29sbGVjdGlvbih0KX0sQm4ucHJvdG90eXBlLmlzRXJvZGVkQ29tcGxldGVseT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0Q29vcmRpbmF0ZXMoKTtpZihuLmxlbmd0aDw0KXJldHVybiBlPDA7aWYoND09PW4ubGVuZ3RoKXJldHVybiB0aGlzLmlzVHJpYW5nbGVFcm9kZWRDb21wbGV0ZWx5KG4sZSk7dmFyIGk9dC5nZXRFbnZlbG9wZUludGVybmFsKCkscj1NYXRoLm1pbihpLmdldEhlaWdodCgpLGkuZ2V0V2lkdGgoKSk7cmV0dXJuIGU8MCYmMipNYXRoLmFicyhlKT5yfSxCbi5wcm90b3R5cGUuYWRkQ29sbGVjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7dGhpcy5hZGQobil9fSxCbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sQm4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEJufTt2YXIgVm49ZnVuY3Rpb24oKXt9O1ZuLnByb3RvdHlwZS5sb2NhdGU9ZnVuY3Rpb24odCl7fSxWbi5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sVm4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFZufTt2YXIgVW49ZnVuY3Rpb24oKXt0aGlzLl9wYXJlbnQ9bnVsbCx0aGlzLl9hdFN0YXJ0PW51bGwsdGhpcy5fbWF4PW51bGwsdGhpcy5faW5kZXg9bnVsbCx0aGlzLl9zdWJjb2xsZWN0aW9uSXRlcmF0b3I9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fcGFyZW50PXQsdGhpcy5fYXRTdGFydD0hMCx0aGlzLl9pbmRleD0wLHRoaXMuX21heD10LmdldE51bUdlb21ldHJpZXMoKX07VW4ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9hdFN0YXJ0KXJldHVybiB0aGlzLl9hdFN0YXJ0PSExLFVuLmlzQXRvbWljKHRoaXMuX3BhcmVudCkmJnRoaXMuX2luZGV4KyssdGhpcy5fcGFyZW50O2lmKG51bGwhPT10aGlzLl9zdWJjb2xsZWN0aW9uSXRlcmF0b3Ipe2lmKHRoaXMuX3N1YmNvbGxlY3Rpb25JdGVyYXRvci5oYXNOZXh0KCkpcmV0dXJuIHRoaXMuX3N1YmNvbGxlY3Rpb25JdGVyYXRvci5uZXh0KCk7dGhpcy5fc3ViY29sbGVjdGlvbkl0ZXJhdG9yPW51bGx9aWYodGhpcy5faW5kZXg+PXRoaXMuX21heCl0aHJvdyBuZXcgaTt2YXIgdD10aGlzLl9wYXJlbnQuZ2V0R2VvbWV0cnlOKHRoaXMuX2luZGV4KyspO3JldHVybiB0IGluc3RhbmNlb2YgenQ/KHRoaXMuX3N1YmNvbGxlY3Rpb25JdGVyYXRvcj1uZXcgVW4odCksdGhpcy5fc3ViY29sbGVjdGlvbkl0ZXJhdG9yLm5leHQoKSk6dH0sVW4ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcih0aGlzLmdldENsYXNzKCkuZ2V0TmFtZSgpKX0sVW4ucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9hdFN0YXJ0KXJldHVybiEwO2lmKG51bGwhPT10aGlzLl9zdWJjb2xsZWN0aW9uSXRlcmF0b3Ipe2lmKHRoaXMuX3N1YmNvbGxlY3Rpb25JdGVyYXRvci5oYXNOZXh0KCkpcmV0dXJuITA7dGhpcy5fc3ViY29sbGVjdGlvbkl0ZXJhdG9yPW51bGx9cmV0dXJuISh0aGlzLl9pbmRleD49dGhpcy5fbWF4KX0sVW4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0V0XX0sVW4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFVufSxVbi5pc0F0b21pYz1mdW5jdGlvbih0KXtyZXR1cm4hKHQgaW5zdGFuY2VvZiB6dCl9O3ZhciB6bj1mdW5jdGlvbigpe3RoaXMuX2dlb209bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fZ2VvbT10fTt6bi5wcm90b3R5cGUubG9jYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB6bi5sb2NhdGUodCx0aGlzLl9nZW9tKX0sem4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1ZuXX0sem4ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHpufSx6bi5pc1BvaW50SW5SaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISFlLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHQpJiZhdC5pc1BvaW50SW5SaW5nKHQsZS5nZXRDb29yZGluYXRlcygpKX0sem4uY29udGFpbnNQb2ludEluUG9seWdvbj1mdW5jdGlvbih0LGUpe2lmKGUuaXNFbXB0eSgpKXJldHVybiExO3ZhciBuPWUuZ2V0RXh0ZXJpb3JSaW5nKCk7aWYoIXpuLmlzUG9pbnRJblJpbmcodCxuKSlyZXR1cm4hMTtmb3IodmFyIGk9MDtpPGUuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7aSsrKXt2YXIgcj1lLmdldEludGVyaW9yUmluZ04oaSk7aWYoem4uaXNQb2ludEluUmluZyh0LHIpKXJldHVybiExfXJldHVybiEwfSx6bi5jb250YWluc1BvaW50PWZ1bmN0aW9uKHQsZSl7aWYoZSBpbnN0YW5jZW9mICR0KXJldHVybiB6bi5jb250YWluc1BvaW50SW5Qb2x5Z29uKHQsZSk7aWYoZSBpbnN0YW5jZW9mIHp0KWZvcih2YXIgbj1uZXcgVW4oZSk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpIT09ZSYmem4uY29udGFpbnNQb2ludCh0LGkpKXJldHVybiEwfXJldHVybiExfSx6bi5sb2NhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5pc0VtcHR5KCk/dy5FWFRFUklPUjp6bi5jb250YWluc1BvaW50KHQsZSk/dy5JTlRFUklPUjp3LkVYVEVSSU9SfTt2YXIgWG49ZnVuY3Rpb24oKXt0aGlzLl9lZGdlTWFwPW5ldyBwLHRoaXMuX2VkZ2VMaXN0PW51bGwsdGhpcy5fcHRJbkFyZWFMb2NhdGlvbj1bdy5OT05FLHcuTk9ORV19O1huLnByb3RvdHlwZS5nZXROZXh0Q1c9ZnVuY3Rpb24odCl7dGhpcy5nZXRFZGdlcygpO3ZhciBlPXRoaXMuX2VkZ2VMaXN0LmluZGV4T2YodCksbj1lLTE7cmV0dXJuIDA9PT1lJiYobj10aGlzLl9lZGdlTGlzdC5zaXplKCktMSksdGhpcy5fZWRnZUxpc3QuZ2V0KG4pfSxYbi5wcm90b3R5cGUucHJvcGFnYXRlU2lkZUxhYmVscz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dy5OT05FLG49dGhpcy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCkuZ2V0TGFiZWwoKTtpLmlzQXJlYSh0KSYmaS5nZXRMb2NhdGlvbih0LFNlLkxFRlQpIT09dy5OT05FJiYoZT1pLmdldExvY2F0aW9uKHQsU2UuTEVGVCkpfWlmKGU9PT13Lk5PTkUpcmV0dXJuIG51bGw7Zm9yKHZhciByPWUsbz10aGlzLml0ZXJhdG9yKCk7by5oYXNOZXh0KCk7KXt2YXIgcz1vLm5leHQoKSxhPXMuZ2V0TGFiZWwoKTtpZihhLmdldExvY2F0aW9uKHQsU2UuT04pPT09dy5OT05FJiZhLnNldExvY2F0aW9uKHQsU2UuT04sciksYS5pc0FyZWEodCkpe3ZhciB1PWEuZ2V0TG9jYXRpb24odCxTZS5MRUZUKSxsPWEuZ2V0TG9jYXRpb24odCxTZS5SSUdIVCk7aWYobCE9PXcuTk9ORSl7aWYobCE9PXIpdGhyb3cgbmV3IHdlKFwic2lkZSBsb2NhdGlvbiBjb25mbGljdFwiLHMuZ2V0Q29vcmRpbmF0ZSgpKTt1PT09dy5OT05FJiZldC5zaG91bGROZXZlclJlYWNoSGVyZShcImZvdW5kIHNpbmdsZSBudWxsIHNpZGUgKGF0IFwiK3MuZ2V0Q29vcmRpbmF0ZSgpK1wiKVwiKSxyPXV9ZWxzZSBldC5pc1RydWUoYS5nZXRMb2NhdGlvbih0LFNlLkxFRlQpPT09dy5OT05FLFwiZm91bmQgc2luZ2xlIG51bGwgc2lkZVwiKSxhLnNldExvY2F0aW9uKHQsU2UuUklHSFQsciksYS5zZXRMb2NhdGlvbih0LFNlLkxFRlQscil9fX0sWG4ucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLml0ZXJhdG9yKCk7aWYoIXQuaGFzTmV4dCgpKXJldHVybiBudWxsO3JldHVybiB0Lm5leHQoKS5nZXRDb29yZGluYXRlKCl9LFhuLnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0KXtZLm91dC5wcmludGxuKFwiRWRnZUVuZFN0YXI6ICAgXCIrdGhpcy5nZXRDb29yZGluYXRlKCkpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5wcmludCh0KX19LFhuLnByb3RvdHlwZS5pc0FyZWFMYWJlbHNDb25zaXN0ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXB1dGVFZGdlRW5kTGFiZWxzKHQuZ2V0Qm91bmRhcnlOb2RlUnVsZSgpKSx0aGlzLmNoZWNrQXJlYUxhYmVsc0NvbnNpc3RlbnQoMCl9LFhuLnByb3RvdHlwZS5jaGVja0FyZWFMYWJlbHNDb25zaXN0ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RWRnZXMoKTtpZihlLnNpemUoKTw9MClyZXR1cm4hMDt2YXIgbj1lLnNpemUoKS0xLGk9ZS5nZXQobikuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0LFNlLkxFRlQpO2V0LmlzVHJ1ZShpIT09dy5OT05FLFwiRm91bmQgdW5sYWJlbGxlZCBhcmVhIGVkZ2VcIik7Zm9yKHZhciByPWksbz10aGlzLml0ZXJhdG9yKCk7by5oYXNOZXh0KCk7KXt2YXIgcz1vLm5leHQoKS5nZXRMYWJlbCgpO2V0LmlzVHJ1ZShzLmlzQXJlYSh0KSxcIkZvdW5kIG5vbi1hcmVhIGVkZ2VcIik7dmFyIGE9cy5nZXRMb2NhdGlvbih0LFNlLkxFRlQpLHU9cy5nZXRMb2NhdGlvbih0LFNlLlJJR0hUKTtpZihhPT09dSlyZXR1cm4hMTtpZih1IT09cilyZXR1cm4hMTtyPWF9cmV0dXJuITB9LFhuLnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24odCl7dGhpcy5pdGVyYXRvcigpO2Zvcih2YXIgZT0wO2U8dGhpcy5fZWRnZUxpc3Quc2l6ZSgpO2UrKyl7aWYodGhpcy5fZWRnZUxpc3QuZ2V0KGUpPT09dClyZXR1cm4gZX1yZXR1cm4tMX0sWG4ucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RWRnZXMoKS5pdGVyYXRvcigpfSxYbi5wcm90b3R5cGUuZ2V0RWRnZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2VkZ2VMaXN0JiYodGhpcy5fZWRnZUxpc3Q9bmV3IE50KHRoaXMuX2VkZ2VNYXAudmFsdWVzKCkpKSx0aGlzLl9lZGdlTGlzdH0sWG4ucHJvdG90eXBlLmdldExvY2F0aW9uPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5fcHRJbkFyZWFMb2NhdGlvblt0XT09PXcuTk9ORSYmKHRoaXMuX3B0SW5BcmVhTG9jYXRpb25bdF09em4ubG9jYXRlKGUsblt0XS5nZXRHZW9tZXRyeSgpKSksdGhpcy5fcHRJbkFyZWFMb2NhdGlvblt0XX0sWG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEQ7dC5hcHBlbmQoXCJFZGdlRW5kU3RhcjogICBcIit0aGlzLmdldENvb3JkaW5hdGUoKSksdC5hcHBlbmQoXCJcXG5cIik7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3QuYXBwZW5kKG4pLHQuYXBwZW5kKFwiXFxuXCIpfXJldHVybiB0LnRvU3RyaW5nKCl9LFhuLnByb3RvdHlwZS5jb21wdXRlRWRnZUVuZExhYmVscz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkuY29tcHV0ZUxhYmVsKHQpfX0sWG4ucHJvdG90eXBlLmNvbXB1dGVMYWJlbGxpbmc9ZnVuY3Rpb24odCl7dGhpcy5jb21wdXRlRWRnZUVuZExhYmVscyh0WzBdLmdldEJvdW5kYXJ5Tm9kZVJ1bGUoKSksdGhpcy5wcm9wYWdhdGVTaWRlTGFiZWxzKDApLHRoaXMucHJvcGFnYXRlU2lkZUxhYmVscygxKTtmb3IodmFyIGU9WyExLCExXSxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspZm9yKHZhciBpPW4ubmV4dCgpLmdldExhYmVsKCkscj0wO3I8MjtyKyspaS5pc0xpbmUocikmJmkuZ2V0TG9jYXRpb24ocik9PT13LkJPVU5EQVJZJiYoZVtyXT0hMCk7Zm9yKHZhciBvPXRoaXMuaXRlcmF0b3IoKTtvLmhhc05leHQoKTspZm9yKHZhciBzPW8ubmV4dCgpLGE9cy5nZXRMYWJlbCgpLHU9MDt1PDI7dSsrKWlmKGEuaXNBbnlOdWxsKHUpKXt2YXIgbD13Lk5PTkU7aWYoZVt1XSlsPXcuRVhURVJJT1I7ZWxzZXt2YXIgYz1zLmdldENvb3JkaW5hdGUoKTtsPXRoaXMuZ2V0TG9jYXRpb24odSxjLHQpfWEuc2V0QWxsTG9jYXRpb25zSWZOdWxsKHUsbCl9fSxYbi5wcm90b3R5cGUuZ2V0RGVncmVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VkZ2VNYXAuc2l6ZSgpfSxYbi5wcm90b3R5cGUuaW5zZXJ0RWRnZUVuZD1mdW5jdGlvbih0LGUpe3RoaXMuX2VkZ2VNYXAucHV0KHQsZSksdGhpcy5fZWRnZUxpc3Q9bnVsbH0sWG4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFhuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBYbn07dmFyIFluPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmNhbGwodGhpcyksdGhpcy5fcmVzdWx0QXJlYUVkZ2VMaXN0PW51bGwsdGhpcy5fbGFiZWw9bnVsbCx0aGlzLl9TQ0FOTklOR19GT1JfSU5DT01JTkc9MSx0aGlzLl9MSU5LSU5HX1RPX09VVEdPSU5HPTJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKCl7dGhpcy5nZXRSZXN1bHRBcmVhRWRnZXMoKTtmb3IodmFyIHQ9bnVsbCxlPW51bGwsbj10aGlzLl9TQ0FOTklOR19GT1JfSU5DT01JTkcsaT0wO2k8dGhpcy5fcmVzdWx0QXJlYUVkZ2VMaXN0LnNpemUoKTtpKyspe3ZhciByPXRoaXMuX3Jlc3VsdEFyZWFFZGdlTGlzdC5nZXQoaSksbz1yLmdldFN5bSgpO2lmKHIuZ2V0TGFiZWwoKS5pc0FyZWEoKSlzd2l0Y2gobnVsbD09PXQmJnIuaXNJblJlc3VsdCgpJiYodD1yKSxuKXtjYXNlIHRoaXMuX1NDQU5OSU5HX0ZPUl9JTkNPTUlORzppZighby5pc0luUmVzdWx0KCkpY29udGludWU7ZT1vLG49dGhpcy5fTElOS0lOR19UT19PVVRHT0lORzticmVhaztjYXNlIHRoaXMuX0xJTktJTkdfVE9fT1VUR09JTkc6aWYoIXIuaXNJblJlc3VsdCgpKWNvbnRpbnVlO2Uuc2V0TmV4dChyKSxuPXRoaXMuX1NDQU5OSU5HX0ZPUl9JTkNPTUlOR319aWYobj09PXRoaXMuX0xJTktJTkdfVE9fT1VUR09JTkcpe2lmKG51bGw9PT10KXRocm93IG5ldyB3ZShcIm5vIG91dGdvaW5nIGRpckVkZ2UgZm91bmRcIix0aGlzLmdldENvb3JkaW5hdGUoKSk7ZXQuaXNUcnVlKHQuaXNJblJlc3VsdCgpLFwidW5hYmxlIHRvIGxpbmsgbGFzdCBpbmNvbWluZyBkaXJFZGdlXCIpLGUuc2V0TmV4dCh0KX19LGUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0KXt2YXIgZT10O3RoaXMuaW5zZXJ0RWRnZUVuZChlLGUpfSxlLnByb3RvdHlwZS5nZXRSaWdodG1vc3RFZGdlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRFZGdlcygpLGU9dC5zaXplKCk7aWYoZTwxKXJldHVybiBudWxsO3ZhciBuPXQuZ2V0KDApO2lmKDE9PT1lKXJldHVybiBuO3ZhciBpPXQuZ2V0KGUtMSkscj1uLmdldFF1YWRyYW50KCksbz1pLmdldFF1YWRyYW50KCk7cmV0dXJuIEJlLmlzTm9ydGhlcm4ocikmJkJlLmlzTm9ydGhlcm4obyk/bjpCZS5pc05vcnRoZXJuKHIpfHxCZS5pc05vcnRoZXJuKG8pPzAhPT1uLmdldER5KCk/bjowIT09aS5nZXREeSgpP2k6KGV0LnNob3VsZE5ldmVyUmVhY2hIZXJlKFwiZm91bmQgdHdvIGhvcml6b250YWwgZWRnZXMgaW5jaWRlbnQgb24gbm9kZVwiKSxudWxsKTppfSxlLnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0KXtZLm91dC5wcmludGxuKFwiRGlyZWN0ZWRFZGdlU3RhcjogXCIrdGhpcy5nZXRDb29yZGluYXRlKCkpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0LnByaW50KFwib3V0IFwiKSxuLnByaW50KHQpLHQucHJpbnRsbigpLHQucHJpbnQoXCJpbiBcIiksbi5nZXRTeW0oKS5wcmludCh0KSx0LnByaW50bG4oKX19LGUucHJvdG90eXBlLmdldFJlc3VsdEFyZWFFZGdlcz1mdW5jdGlvbigpe2lmKG51bGwhPT10aGlzLl9yZXN1bHRBcmVhRWRnZUxpc3QpcmV0dXJuIHRoaXMuX3Jlc3VsdEFyZWFFZGdlTGlzdDt0aGlzLl9yZXN1bHRBcmVhRWRnZUxpc3Q9bmV3IE50O2Zvcih2YXIgdD10aGlzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTsoZS5pc0luUmVzdWx0KCl8fGUuZ2V0U3ltKCkuaXNJblJlc3VsdCgpKSYmdGhpcy5fcmVzdWx0QXJlYUVkZ2VMaXN0LmFkZChlKX1yZXR1cm4gdGhpcy5fcmVzdWx0QXJlYUVkZ2VMaXN0fSxlLnByb3RvdHlwZS51cGRhdGVMYWJlbGxpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLmdldExhYmVsKCk7bi5zZXRBbGxMb2NhdGlvbnNJZk51bGwoMCx0LmdldExvY2F0aW9uKDApKSxuLnNldEFsbExvY2F0aW9uc0lmTnVsbCgxLHQuZ2V0TG9jYXRpb24oMSkpfX0sZS5wcm90b3R5cGUubGlua0FsbERpcmVjdGVkRWRnZXM9ZnVuY3Rpb24oKXt0aGlzLmdldEVkZ2VzKCk7Zm9yKHZhciB0PW51bGwsZT1udWxsLG49dGhpcy5fZWRnZUxpc3Quc2l6ZSgpLTE7bj49MDtuLS0pe3ZhciBpPXRoaXMuX2VkZ2VMaXN0LmdldChuKSxyPWkuZ2V0U3ltKCk7bnVsbD09PWUmJihlPXIpLG51bGwhPT10JiZyLnNldE5leHQodCksdD1pfWUuc2V0TmV4dCh0KX0sZS5wcm90b3R5cGUuY29tcHV0ZURlcHRocz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLmZpbmRJbmRleCh0KSxuPXQuZ2V0RGVwdGgoU2UuTEVGVCksaT10LmdldERlcHRoKFNlLlJJR0hUKSxyPXRoaXMuY29tcHV0ZURlcHRocyhlKzEsdGhpcy5fZWRnZUxpc3Quc2l6ZSgpLG4pO2lmKHRoaXMuY29tcHV0ZURlcHRocygwLGUscikhPT1pKXRocm93IG5ldyB3ZShcImRlcHRoIG1pc21hdGNoIGF0IFwiK3QuZ2V0Q29vcmRpbmF0ZSgpKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIG89YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdLHU9bzt1PHM7dSsrKXt2YXIgbD10aGlzLl9lZGdlTGlzdC5nZXQodSk7bC5zZXRFZGdlRGVwdGhzKFNlLlJJR0hULGEpLGE9bC5nZXREZXB0aChTZS5MRUZUKX1yZXR1cm4gYX19LGUucHJvdG90eXBlLm1lcmdlU3ltTGFiZWxzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpO2UuZ2V0TGFiZWwoKS5tZXJnZShlLmdldFN5bSgpLmdldExhYmVsKCkpfX0sZS5wcm90b3R5cGUubGlua01pbmltYWxEaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49bnVsbCxpPXRoaXMuX1NDQU5OSU5HX0ZPUl9JTkNPTUlORyxyPXRoaXMuX3Jlc3VsdEFyZWFFZGdlTGlzdC5zaXplKCktMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5fcmVzdWx0QXJlYUVkZ2VMaXN0LmdldChyKSxzPW8uZ2V0U3ltKCk7c3dpdGNoKG51bGw9PT1lJiZvLmdldEVkZ2VSaW5nKCk9PT10JiYoZT1vKSxpKXtjYXNlIHRoaXMuX1NDQU5OSU5HX0ZPUl9JTkNPTUlORzppZihzLmdldEVkZ2VSaW5nKCkhPT10KWNvbnRpbnVlO249cyxpPXRoaXMuX0xJTktJTkdfVE9fT1VUR09JTkc7YnJlYWs7Y2FzZSB0aGlzLl9MSU5LSU5HX1RPX09VVEdPSU5HOmlmKG8uZ2V0RWRnZVJpbmcoKSE9PXQpY29udGludWU7bi5zZXROZXh0TWluKG8pLGk9dGhpcy5fU0NBTk5JTkdfRk9SX0lOQ09NSU5HfX1pPT09dGhpcy5fTElOS0lOR19UT19PVVRHT0lORyYmKGV0LmlzVHJ1ZShudWxsIT09ZSxcImZvdW5kIG51bGwgZm9yIGZpcnN0IG91dGdvaW5nIGRpckVkZ2VcIiksZXQuaXNUcnVlKGUuZ2V0RWRnZVJpbmcoKT09PXQsXCJ1bmFibGUgdG8gbGluayBsYXN0IGluY29taW5nIGRpckVkZ2VcIiksbi5zZXROZXh0TWluKGUpKX0sZS5wcm90b3R5cGUuZ2V0T3V0Z29pbmdEZWdyZWU9ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PTAsZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtlLm5leHQoKS5pc0luUmVzdWx0KCkmJnQrK31yZXR1cm4gdH1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBuPWFyZ3VtZW50c1swXSxpPTAscj10aGlzLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXtyLm5leHQoKS5nZXRFZGdlUmluZygpPT09biYmaSsrfXJldHVybiBpfX0sZS5wcm90b3R5cGUuZ2V0TGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFiZWx9LGUucHJvdG90eXBlLmZpbmRDb3ZlcmVkTGluZUVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXcuTk9ORSxlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bi5nZXRTeW0oKTtpZighbi5pc0xpbmVFZGdlKCkpe2lmKG4uaXNJblJlc3VsdCgpKXt0PXcuSU5URVJJT1I7YnJlYWt9aWYoaS5pc0luUmVzdWx0KCkpe3Q9dy5FWFRFUklPUjticmVha319fWlmKHQ9PT13Lk5PTkUpcmV0dXJuIG51bGw7Zm9yKHZhciByPXQsbz10aGlzLml0ZXJhdG9yKCk7by5oYXNOZXh0KCk7KXt2YXIgcz1vLm5leHQoKSxhPXMuZ2V0U3ltKCk7cy5pc0xpbmVFZGdlKCk/cy5nZXRFZGdlKCkuc2V0Q292ZXJlZChyPT09dy5JTlRFUklPUik6KHMuaXNJblJlc3VsdCgpJiYocj13LkVYVEVSSU9SKSxhLmlzSW5SZXN1bHQoKSYmKHI9dy5JTlRFUklPUikpfX0sZS5wcm90b3R5cGUuY29tcHV0ZUxhYmVsbGluZz1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5jb21wdXRlTGFiZWxsaW5nLmNhbGwodGhpcyxlKSx0aGlzLl9sYWJlbD1uZXcgUGUody5OT05FKTtmb3IodmFyIG49dGhpcy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOylmb3IodmFyIGk9bi5uZXh0KCkuZ2V0RWRnZSgpLmdldExhYmVsKCkscj0wO3I8MjtyKyspe3ZhciBvPWkuZ2V0TG9jYXRpb24ocik7byE9PXcuSU5URVJJT1ImJm8hPT13LkJPVU5EQVJZfHx0aGlzLl9sYWJlbC5zZXRMb2NhdGlvbihyLHcuSU5URVJJT1IpfX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX0oWG4pLGtuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEdlKHQsbmV3IFluKX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX0oWGUpLGpuPWZ1bmN0aW9uIHQoKXt0aGlzLl9wdHM9bnVsbCx0aGlzLl9vcmllbnRhdGlvbj1udWxsO3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLl9wdHM9ZSx0aGlzLl9vcmllbnRhdGlvbj10Lm9yaWVudGF0aW9uKGUpfTtqbi5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIGpuLmNvbXBhcmVPcmllbnRlZCh0aGlzLl9wdHMsdGhpcy5fb3JpZW50YXRpb24sZS5fcHRzLGUuX29yaWVudGF0aW9uKX0sam4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0VdfSxqbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gam59LGpuLm9yaWVudGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiAxPT09THQuaW5jcmVhc2luZ0RpcmVjdGlvbih0KX0sam4uY29tcGFyZU9yaWVudGVkPWZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj1lPzE6LTEsbz1pPzE6LTEscz1lP3QubGVuZ3RoOi0xLGE9aT9uLmxlbmd0aDotMSx1PWU/MDp0Lmxlbmd0aC0xLGw9aT8wOm4ubGVuZ3RoLTE7Oyl7dmFyIGM9dFt1XS5jb21wYXJlVG8obltsXSk7aWYoMCE9PWMpcmV0dXJuIGM7dmFyIHA9KHUrPXIpPT09cyxoPShsKz1vKT09PWE7aWYocCYmIWgpcmV0dXJuLTE7aWYoIXAmJmgpcmV0dXJuIDE7aWYocCYmaClyZXR1cm4gMH19O3ZhciBIbj1mdW5jdGlvbigpe3RoaXMuX2VkZ2VzPW5ldyBOdCx0aGlzLl9vY2FNYXA9bmV3IHB9O0huLnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0KXt0LnByaW50KFwiTVVMVElMSU5FU1RSSU5HICggXCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5fZWRnZXMuc2l6ZSgpO2UrKyl7dmFyIG49dGhpcy5fZWRnZXMuZ2V0KGUpO2U+MCYmdC5wcmludChcIixcIiksdC5wcmludChcIihcIik7Zm9yKHZhciBpPW4uZ2V0Q29vcmRpbmF0ZXMoKSxyPTA7cjxpLmxlbmd0aDtyKyspcj4wJiZ0LnByaW50KFwiLFwiKSx0LnByaW50KGlbcl0ueCtcIiBcIitpW3JdLnkpO3QucHJpbnRsbihcIilcIil9dC5wcmludChcIikgIFwiKX0sSG4ucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSl9LEhuLnByb3RvdHlwZS5maW5kRWRnZUluZGV4PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fZWRnZXMuc2l6ZSgpO2UrKylpZih0aGlzLl9lZGdlcy5nZXQoZSkuZXF1YWxzKHQpKXJldHVybiBlO3JldHVybi0xfSxIbi5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWRnZXMuaXRlcmF0b3IoKX0sSG4ucHJvdG90eXBlLmdldEVkZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VkZ2VzfSxIbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9lZGdlcy5nZXQodCl9LEhuLnByb3RvdHlwZS5maW5kRXF1YWxFZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBqbih0LmdldENvb3JkaW5hdGVzKCkpO3JldHVybiB0aGlzLl9vY2FNYXAuZ2V0KGUpfSxIbi5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3RoaXMuX2VkZ2VzLmFkZCh0KTt2YXIgZT1uZXcgam4odC5nZXRDb29yZGluYXRlcygpKTt0aGlzLl9vY2FNYXAucHV0KGUsdCl9LEhuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxIbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gSG59O3ZhciBXbj1mdW5jdGlvbigpe307V24ucHJvdG90eXBlLnByb2Nlc3NJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQsZSxuLGkpe30sV24ucHJvdG90eXBlLmlzRG9uZT1mdW5jdGlvbigpe30sV24ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFduLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBXbn07dmFyIEtuPWZ1bmN0aW9uKCl7dGhpcy5faGFzSW50ZXJzZWN0aW9uPSExLHRoaXMuX2hhc1Byb3Blcj0hMSx0aGlzLl9oYXNQcm9wZXJJbnRlcmlvcj0hMSx0aGlzLl9oYXNJbnRlcmlvcj0hMSx0aGlzLl9wcm9wZXJJbnRlcnNlY3Rpb25Qb2ludD1udWxsLHRoaXMuX2xpPW51bGwsdGhpcy5faXNTZWxmSW50ZXJzZWN0aW9uPW51bGwsdGhpcy5udW1JbnRlcnNlY3Rpb25zPTAsdGhpcy5udW1JbnRlcmlvckludGVyc2VjdGlvbnM9MCx0aGlzLm51bVByb3BlckludGVyc2VjdGlvbnM9MCx0aGlzLm51bVRlc3RzPTA7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2xpPXR9O0tuLnByb3RvdHlwZS5pc1RyaXZpYWxJbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlLG4saSl7aWYodD09PW4mJjE9PT10aGlzLl9saS5nZXRJbnRlcnNlY3Rpb25OdW0oKSl7aWYoS24uaXNBZGphY2VudFNlZ21lbnRzKGUsaSkpcmV0dXJuITA7aWYodC5pc0Nsb3NlZCgpKXt2YXIgcj10LnNpemUoKS0xO2lmKDA9PT1lJiZpPT09cnx8MD09PWkmJmU9PT1yKXJldHVybiEwfX1yZXR1cm4hMX0sS24ucHJvdG90eXBlLmdldFByb3BlckludGVyc2VjdGlvblBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlckludGVyc2VjdGlvblBvaW50fSxLbi5wcm90b3R5cGUuaGFzUHJvcGVySW50ZXJpb3JJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzUHJvcGVySW50ZXJpb3J9LEtuLnByb3RvdHlwZS5nZXRMaW5lSW50ZXJzZWN0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGl9LEtuLnByb3RvdHlwZS5oYXNQcm9wZXJJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzUHJvcGVyfSxLbi5wcm90b3R5cGUucHJvY2Vzc0ludGVyc2VjdGlvbnM9ZnVuY3Rpb24odCxlLG4saSl7aWYodD09PW4mJmU9PT1pKXJldHVybiBudWxsO3RoaXMubnVtVGVzdHMrKzt2YXIgcj10LmdldENvb3JkaW5hdGVzKClbZV0sbz10LmdldENvb3JkaW5hdGVzKClbZSsxXSxzPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpXSxhPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpKzFdO3RoaXMuX2xpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocixvLHMsYSksdGhpcy5fbGkuaGFzSW50ZXJzZWN0aW9uKCkmJih0aGlzLm51bUludGVyc2VjdGlvbnMrKyx0aGlzLl9saS5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKCkmJih0aGlzLm51bUludGVyaW9ySW50ZXJzZWN0aW9ucysrLHRoaXMuX2hhc0ludGVyaW9yPSEwKSx0aGlzLmlzVHJpdmlhbEludGVyc2VjdGlvbih0LGUsbixpKXx8KHRoaXMuX2hhc0ludGVyc2VjdGlvbj0hMCx0LmFkZEludGVyc2VjdGlvbnModGhpcy5fbGksZSwwKSxuLmFkZEludGVyc2VjdGlvbnModGhpcy5fbGksaSwxKSx0aGlzLl9saS5pc1Byb3BlcigpJiYodGhpcy5udW1Qcm9wZXJJbnRlcnNlY3Rpb25zKyssdGhpcy5faGFzUHJvcGVyPSEwLHRoaXMuX2hhc1Byb3BlckludGVyaW9yPSEwKSkpfSxLbi5wcm90b3R5cGUuaGFzSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc0ludGVyc2VjdGlvbn0sS24ucHJvdG90eXBlLmlzRG9uZT1mdW5jdGlvbigpe3JldHVybiExfSxLbi5wcm90b3R5cGUuaGFzSW50ZXJpb3JJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzSW50ZXJpb3J9LEtuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltXbl19LEtuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBLbn0sS24uaXNBZGphY2VudFNlZ21lbnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDE9PT1NYXRoLmFicyh0LWUpfTt2YXIgSm49ZnVuY3Rpb24oKXt0aGlzLmNvb3JkPW51bGwsdGhpcy5zZWdtZW50SW5kZXg9bnVsbCx0aGlzLmRpc3Q9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5jb29yZD1uZXcgQyh0KSx0aGlzLnNlZ21lbnRJbmRleD1lLHRoaXMuZGlzdD1ufTtKbi5wcm90b3R5cGUuZ2V0U2VnbWVudEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnbWVudEluZGV4fSxKbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkfSxKbi5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dC5wcmludCh0aGlzLmNvb3JkKSx0LnByaW50KFwiIHNlZyAjID0gXCIrdGhpcy5zZWdtZW50SW5kZXgpLHQucHJpbnRsbihcIiBkaXN0ID0gXCIrdGhpcy5kaXN0KX0sSm4ucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiB0aGlzLmNvbXBhcmUoZS5zZWdtZW50SW5kZXgsZS5kaXN0KX0sSm4ucHJvdG90eXBlLmlzRW5kUG9pbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10aGlzLnNlZ21lbnRJbmRleCYmMD09PXRoaXMuZGlzdHx8dGhpcy5zZWdtZW50SW5kZXg9PT10fSxKbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZCtcIiBzZWcgIyA9IFwiK3RoaXMuc2VnbWVudEluZGV4K1wiIGRpc3QgPSBcIit0aGlzLmRpc3R9LEpuLnByb3RvdHlwZS5nZXREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3R9LEpuLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2VnbWVudEluZGV4PHQ/LTE6dGhpcy5zZWdtZW50SW5kZXg+dD8xOnRoaXMuZGlzdDxlPy0xOnRoaXMuZGlzdD5lPzE6MH0sSm4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0VdfSxKbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gSm59O3ZhciBRbj1mdW5jdGlvbigpe3RoaXMuX25vZGVNYXA9bmV3IHAsdGhpcy5lZGdlPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZWRnZT10fTtRbi5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiSW50ZXJzZWN0aW9uczpcIik7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe2UubmV4dCgpLnByaW50KHQpfX0sUW4ucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKX0sUW4ucHJvdG90eXBlLmFkZFNwbGl0RWRnZXM9ZnVuY3Rpb24odCl7dGhpcy5hZGRFbmRwb2ludHMoKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpLG49ZS5uZXh0KCk7ZS5oYXNOZXh0KCk7KXt2YXIgaT1lLm5leHQoKSxyPXRoaXMuY3JlYXRlU3BsaXRFZGdlKG4saSk7dC5hZGQociksbj1pfX0sUW4ucHJvdG90eXBlLmFkZEVuZHBvaW50cz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZWRnZS5wdHMubGVuZ3RoLTE7dGhpcy5hZGQodGhpcy5lZGdlLnB0c1swXSwwLDApLHRoaXMuYWRkKHRoaXMuZWRnZS5wdHNbdF0sdCwwKX0sUW4ucHJvdG90eXBlLmNyZWF0ZVNwbGl0RWRnZT1mdW5jdGlvbih0LGUpe3ZhciBuPWUuc2VnbWVudEluZGV4LXQuc2VnbWVudEluZGV4KzIsaT10aGlzLmVkZ2UucHRzW2Uuc2VnbWVudEluZGV4XSxyPWUuZGlzdD4wfHwhZS5jb29yZC5lcXVhbHMyRChpKTtyfHxuLS07dmFyIG89bmV3IEFycmF5KG4pLmZpbGwobnVsbCkscz0wO29bcysrXT1uZXcgQyh0LmNvb3JkKTtmb3IodmFyIGE9dC5zZWdtZW50SW5kZXgrMTthPD1lLnNlZ21lbnRJbmRleDthKyspb1tzKytdPXRoaXMuZWRnZS5wdHNbYV07cmV0dXJuIHImJihvW3NdPWUuY29vcmQpLG5ldyBuaShvLG5ldyBQZSh0aGlzLmVkZ2UuX2xhYmVsKSl9LFFuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBKbih0LGUsbikscj10aGlzLl9ub2RlTWFwLmdldChpKTtyZXR1cm4gbnVsbCE9PXI/cjoodGhpcy5fbm9kZU1hcC5wdXQoaSxpKSxpKX0sUW4ucHJvdG90eXBlLmlzSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXtpZihlLm5leHQoKS5jb29yZC5lcXVhbHModCkpcmV0dXJuITB9cmV0dXJuITF9LFFuLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxRbi5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gUW59O3ZhciBabj1mdW5jdGlvbigpe307Wm4ucHJvdG90eXBlLmdldENoYWluU3RhcnRJbmRpY2VzPWZ1bmN0aW9uKHQpe3ZhciBlPTAsbj1uZXcgTnQ7bi5hZGQobmV3IE0oZSkpO2Rve3ZhciBpPXRoaXMuZmluZENoYWluRW5kKHQsZSk7bi5hZGQobmV3IE0oaSkpLGU9aX13aGlsZShlPHQubGVuZ3RoLTEpO3JldHVybiBabi50b0ludEFycmF5KG4pfSxabi5wcm90b3R5cGUuZmluZENoYWluRW5kPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPUJlLnF1YWRyYW50KHRbZV0sdFtlKzFdKSxpPWUrMTtpPHQubGVuZ3RoOyl7aWYoQmUucXVhZHJhbnQodFtpLTFdLHRbaV0pIT09bilicmVhaztpKyt9cmV0dXJuIGktMX0sWm4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFpuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBabn0sWm4udG9JbnRBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyllW25dPXQuZ2V0KG4pLmludFZhbHVlKCk7cmV0dXJuIGV9O3ZhciAkbj1mdW5jdGlvbigpe3RoaXMuZT1udWxsLHRoaXMucHRzPW51bGwsdGhpcy5zdGFydEluZGV4PW51bGwsdGhpcy5lbnYxPW5ldyBqLHRoaXMuZW52Mj1uZXcgajt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5lPXQsdGhpcy5wdHM9dC5nZXRDb29yZGluYXRlcygpO3ZhciBlPW5ldyBabjt0aGlzLnN0YXJ0SW5kZXg9ZS5nZXRDaGFpblN0YXJ0SW5kaWNlcyh0aGlzLnB0cyl9OyRuLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c30sJG4ucHJvdG90eXBlLmdldE1heFg9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W3RdXS54LG49dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W3QrMV1dLng7cmV0dXJuIGU+bj9lOm59LCRuLnByb3RvdHlwZS5nZXRNaW5YPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFt0XV0ueCxuPXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFt0KzFdXS54O3JldHVybiBlPG4/ZTpufSwkbi5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbj1mdW5jdGlvbigpe2lmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM107dGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKHRoaXMuc3RhcnRJbmRleFt0XSx0aGlzLnN0YXJ0SW5kZXhbdCsxXSxlLGUuc3RhcnRJbmRleFtuXSxlLnN0YXJ0SW5kZXhbbisxXSxpKX1lbHNlIGlmKDY9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sYT1hcmd1bWVudHNbM10sdT1hcmd1bWVudHNbNF0sbD1hcmd1bWVudHNbNV0sYz10aGlzLnB0c1tyXSxwPXRoaXMucHRzW29dLGg9cy5wdHNbYV0sZj1zLnB0c1t1XTtpZihvLXI9PTEmJnUtYT09MSlyZXR1cm4gbC5hZGRJbnRlcnNlY3Rpb25zKHRoaXMuZSxyLHMuZSxhKSxudWxsO2lmKHRoaXMuZW52MS5pbml0KGMscCksdGhpcy5lbnYyLmluaXQoaCxmKSwhdGhpcy5lbnYxLmludGVyc2VjdHModGhpcy5lbnYyKSlyZXR1cm4gbnVsbDt2YXIgZz1NYXRoLnRydW5jKChyK28pLzIpLGQ9TWF0aC50cnVuYygoYSt1KS8yKTtyPGcmJihhPGQmJnRoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbihyLGcscyxhLGQsbCksZDx1JiZ0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4ocixnLHMsZCx1LGwpKSxnPG8mJihhPGQmJnRoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbihnLG8scyxhLGQsbCksZDx1JiZ0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4oZyxvLHMsZCx1LGwpKX19LCRuLnByb3RvdHlwZS5nZXRTdGFydEluZGV4ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydEluZGV4fSwkbi5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdHM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMuc3RhcnRJbmRleC5sZW5ndGgtMTtuKyspZm9yKHZhciBpPTA7aTx0LnN0YXJ0SW5kZXgubGVuZ3RoLTE7aSsrKXRoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbihuLHQsaSxlKX0sJG4ucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LCRuLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiAkbn07dmFyIHRpPWZ1bmN0aW9uIHQoKXt0aGlzLl9kZXB0aD1BcnJheSgyKS5maWxsKCkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5KDMpfSk7Zm9yKHZhciBlPTA7ZTwyO2UrKylmb3IodmFyIG49MDtuPDM7bisrKXRoaXMuX2RlcHRoW2VdW25dPXQuTlVMTF9WQUxVRX0sZWk9e05VTExfVkFMVUU6e2NvbmZpZ3VyYWJsZTohMH19O3RpLnByb3RvdHlwZS5nZXREZXB0aD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9kZXB0aFt0XVtlXX0sdGkucHJvdG90eXBlLnNldERlcHRoPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLl9kZXB0aFt0XVtlXT1ufSx0aS5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD0wO3Q8Mjt0KyspZm9yKHZhciBlPTA7ZTwzO2UrKylpZih0aGlzLl9kZXB0aFt0XVtlXSE9PXRpLk5VTExfVkFMVUUpcmV0dXJuITE7cmV0dXJuITB9aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5fZGVwdGhbbl1bMV09PT10aS5OVUxMX1ZBTFVFfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuX2RlcHRoW2ldW3JdPT09dGkuTlVMTF9WQUxVRX19LHRpLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PDI7dCsrKWlmKCF0aGlzLmlzTnVsbCh0KSl7dmFyIGU9dGhpcy5fZGVwdGhbdF1bMV07dGhpcy5fZGVwdGhbdF1bMl08ZSYmKGU9dGhpcy5fZGVwdGhbdF1bMl0pLGU8MCYmKGU9MCk7Zm9yKHZhciBuPTE7bjwzO24rKyl7dmFyIGk9MDt0aGlzLl9kZXB0aFt0XVtuXT5lJiYoaT0xKSx0aGlzLl9kZXB0aFt0XVtuXT1pfX19LHRpLnByb3RvdHlwZS5nZXREZWx0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGVwdGhbdF1bU2UuUklHSFRdLXRoaXMuX2RlcHRoW3RdW1NlLkxFRlRdfSx0aS5wcm90b3R5cGUuZ2V0TG9jYXRpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fZGVwdGhbdF1bZV08PTA/dy5FWFRFUklPUjp3LklOVEVSSU9SfSx0aS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkE6IFwiK3RoaXMuX2RlcHRoWzBdWzFdK1wiLFwiK3RoaXMuX2RlcHRoWzBdWzJdK1wiIEI6IFwiK3RoaXMuX2RlcHRoWzFdWzFdK1wiLFwiK3RoaXMuX2RlcHRoWzFdWzJdfSx0aS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPTA7ZTwyO2UrKylmb3IodmFyIG49MTtuPDM7bisrKXt2YXIgaT10LmdldExvY2F0aW9uKGUsbik7aSE9PXcuRVhURVJJT1ImJmkhPT13LklOVEVSSU9SfHwodGhpcy5pc051bGwoZSxuKT90aGlzLl9kZXB0aFtlXVtuXT10aS5kZXB0aEF0TG9jYXRpb24oaSk6dGhpcy5fZGVwdGhbZV1bbl0rPXRpLmRlcHRoQXRMb2NhdGlvbihpKSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdO2FyZ3VtZW50c1syXT09PXcuSU5URVJJT1ImJnRoaXMuX2RlcHRoW3JdW29dKyt9fSx0aS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sdGkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRpfSx0aS5kZXB0aEF0TG9jYXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT13LkVYVEVSSU9SPzA6dD09PXcuSU5URVJJT1I/MTp0aS5OVUxMX1ZBTFVFfSxlaS5OVUxMX1ZBTFVFLmdldD1mdW5jdGlvbigpe3JldHVybi0xfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aSxlaSk7dmFyIG5pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtpZih0LmNhbGwodGhpcyksdGhpcy5wdHM9bnVsbCx0aGlzLl9lbnY9bnVsbCx0aGlzLmVpTGlzdD1uZXcgUW4odGhpcyksdGhpcy5fbmFtZT1udWxsLHRoaXMuX21jZT1udWxsLHRoaXMuX2lzSXNvbGF0ZWQ9ITAsdGhpcy5fZGVwdGg9bmV3IHRpLHRoaXMuX2RlcHRoRGVsdGE9MCwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdO2UuY2FsbCh0aGlzLG4sbnVsbCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdO3RoaXMucHRzPWksdGhpcy5fbGFiZWw9cn19cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmdldERlcHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlcHRofSxlLnByb3RvdHlwZS5nZXRDb2xsYXBzZWRFZGdlPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEFycmF5KDIpLmZpbGwobnVsbCk7dFswXT10aGlzLnB0c1swXSx0WzFdPXRoaXMucHRzWzFdO3JldHVybiBuZXcgZSh0LFBlLnRvTGluZUxhYmVsKHRoaXMuX2xhYmVsKSl9LGUucHJvdG90eXBlLmlzSXNvbGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJc29sYXRlZH0sZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHN9LGUucHJvdG90eXBlLnNldElzb2xhdGVkPWZ1bmN0aW9uKHQpe3RoaXMuX2lzSXNvbGF0ZWQ9dH0sZS5wcm90b3R5cGUuc2V0TmFtZT1mdW5jdGlvbih0KXt0aGlzLl9uYW1lPXR9LGUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBlKSlyZXR1cm4hMTt2YXIgbj10O2lmKHRoaXMucHRzLmxlbmd0aCE9PW4ucHRzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGk9ITAscj0hMCxvPXRoaXMucHRzLmxlbmd0aCxzPTA7czx0aGlzLnB0cy5sZW5ndGg7cysrKWlmKHRoaXMucHRzW3NdLmVxdWFsczJEKG4ucHRzW3NdKXx8KGk9ITEpLHRoaXMucHRzW3NdLmVxdWFsczJEKG4ucHRzWy0tb10pfHwocj0hMSksIWkmJiFyKXJldHVybiExO3JldHVybiEwfSxlLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMucHRzLmxlbmd0aD4wP3RoaXMucHRzWzBdOm51bGw7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5wdHNbdF19fSxlLnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0KXt0LnByaW50KFwiZWRnZSBcIit0aGlzLl9uYW1lK1wiOiBcIiksdC5wcmludChcIkxJTkVTVFJJTkcgKFwiKTtmb3IodmFyIGU9MDtlPHRoaXMucHRzLmxlbmd0aDtlKyspZT4wJiZ0LnByaW50KFwiLFwiKSx0LnByaW50KHRoaXMucHRzW2VdLngrXCIgXCIrdGhpcy5wdHNbZV0ueSk7dC5wcmludChcIikgIFwiK3RoaXMuX2xhYmVsK1wiIFwiK3RoaXMuX2RlcHRoRGVsdGEpfSxlLnByb3RvdHlwZS5jb21wdXRlSU09ZnVuY3Rpb24odCl7ZS51cGRhdGVJTSh0aGlzLl9sYWJlbCx0KX0sZS5wcm90b3R5cGUuaXNDb2xsYXBzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2xhYmVsLmlzQXJlYSgpJiYoMz09PXRoaXMucHRzLmxlbmd0aCYmISF0aGlzLnB0c1swXS5lcXVhbHModGhpcy5wdHNbMl0pKX0sZS5wcm90b3R5cGUuaXNDbG9zZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHNbMF0uZXF1YWxzKHRoaXMucHRzW3RoaXMucHRzLmxlbmd0aC0xXSl9LGUucHJvdG90eXBlLmdldE1heGltdW1TZWdtZW50SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RoLTF9LGUucHJvdG90eXBlLmdldERlcHRoRGVsdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVwdGhEZWx0YX0sZS5wcm90b3R5cGUuZ2V0TnVtUG9pbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRzLmxlbmd0aH0sZS5wcm90b3R5cGUucHJpbnRSZXZlcnNlPWZ1bmN0aW9uKHQpe3QucHJpbnQoXCJlZGdlIFwiK3RoaXMuX25hbWUrXCI6IFwiKTtmb3IodmFyIGU9dGhpcy5wdHMubGVuZ3RoLTE7ZT49MDtlLS0pdC5wcmludCh0aGlzLnB0c1tlXStcIiBcIik7dC5wcmludGxuKFwiXCIpfSxlLnByb3RvdHlwZS5nZXRNb25vdG9uZUNoYWluRWRnZT1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fbWNlJiYodGhpcy5fbWNlPW5ldyAkbih0aGlzKSksdGhpcy5fbWNlfSxlLnByb3RvdHlwZS5nZXRFbnZlbG9wZT1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9lbnYpe3RoaXMuX2Vudj1uZXcgajtmb3IodmFyIHQ9MDt0PHRoaXMucHRzLmxlbmd0aDt0KyspdGhpcy5fZW52LmV4cGFuZFRvSW5jbHVkZSh0aGlzLnB0c1t0XSl9cmV0dXJuIHRoaXMuX2Vudn0sZS5wcm90b3R5cGUuYWRkSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW5ldyBDKHQuZ2V0SW50ZXJzZWN0aW9uKGkpKSxvPWUscz10LmdldEVkZ2VEaXN0YW5jZShuLGkpLGE9bysxO2lmKGE8dGhpcy5wdHMubGVuZ3RoKXt2YXIgdT10aGlzLnB0c1thXTtyLmVxdWFsczJEKHUpJiYobz1hLHM9MCl9dGhpcy5laUxpc3QuYWRkKHIsbyxzKX0sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRDt0LmFwcGVuZChcImVkZ2UgXCIrdGhpcy5fbmFtZStcIjogXCIpLHQuYXBwZW5kKFwiTElORVNUUklORyAoXCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5wdHMubGVuZ3RoO2UrKyllPjAmJnQuYXBwZW5kKFwiLFwiKSx0LmFwcGVuZCh0aGlzLnB0c1tlXS54K1wiIFwiK3RoaXMucHRzW2VdLnkpO3JldHVybiB0LmFwcGVuZChcIikgIFwiK3RoaXMuX2xhYmVsK1wiIFwiK3RoaXMuX2RlcHRoRGVsdGEpLHQudG9TdHJpbmcoKX0sZS5wcm90b3R5cGUuaXNQb2ludHdpc2VFcXVhbD1mdW5jdGlvbih0KXtpZih0aGlzLnB0cy5sZW5ndGghPT10LnB0cy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLnB0cy5sZW5ndGg7ZSsrKWlmKCF0aGlzLnB0c1tlXS5lcXVhbHMyRCh0LnB0c1tlXSkpcmV0dXJuITE7cmV0dXJuITB9LGUucHJvdG90eXBlLnNldERlcHRoRGVsdGE9ZnVuY3Rpb24odCl7dGhpcy5fZGVwdGhEZWx0YT10fSxlLnByb3RvdHlwZS5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVpTGlzdH0sZS5wcm90b3R5cGUuYWRkSW50ZXJzZWN0aW9ucz1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPTA7aTx0LmdldEludGVyc2VjdGlvbk51bSgpO2krKyl0aGlzLmFkZEludGVyc2VjdGlvbih0LGUsbixpKX0sZS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZS51cGRhdGVJTT1mdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0LnByb3RvdHlwZS51cGRhdGVJTS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO24uc2V0QXRMZWFzdElmVmFsaWQoZS5nZXRMb2NhdGlvbigwLFNlLk9OKSxlLmdldExvY2F0aW9uKDEsU2UuT04pLDEpLGUuaXNBcmVhKCkmJihuLnNldEF0TGVhc3RJZlZhbGlkKGUuZ2V0TG9jYXRpb24oMCxTZS5MRUZUKSxlLmdldExvY2F0aW9uKDEsU2UuTEVGVCksMiksbi5zZXRBdExlYXN0SWZWYWxpZChlLmdldExvY2F0aW9uKDAsU2UuUklHSFQpLGUuZ2V0TG9jYXRpb24oMSxTZS5SSUdIVCksMikpfSxlfShGZSksaWk9ZnVuY3Rpb24odCl7dGhpcy5fd29ya2luZ1ByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5fd29ya2luZ05vZGVyPW51bGwsdGhpcy5fZ2VvbUZhY3Q9bnVsbCx0aGlzLl9ncmFwaD1udWxsLHRoaXMuX2VkZ2VMaXN0PW5ldyBIbix0aGlzLl9idWZQYXJhbXM9dHx8bnVsbH07aWkucHJvdG90eXBlLnNldFdvcmtpbmdQcmVjaXNpb25Nb2RlbD1mdW5jdGlvbih0KXt0aGlzLl93b3JraW5nUHJlY2lzaW9uTW9kZWw9dH0saWkucHJvdG90eXBlLmluc2VydFVuaXF1ZUVkZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZWRnZUxpc3QuZmluZEVxdWFsRWRnZSh0KTtpZihudWxsIT09ZSl7dmFyIG49ZS5nZXRMYWJlbCgpLGk9dC5nZXRMYWJlbCgpO2UuaXNQb2ludHdpc2VFcXVhbCh0KXx8KGk9bmV3IFBlKHQuZ2V0TGFiZWwoKSkpLmZsaXAoKSxuLm1lcmdlKGkpO3ZhciByPWlpLmRlcHRoRGVsdGEoaSksbz1lLmdldERlcHRoRGVsdGEoKStyO2Uuc2V0RGVwdGhEZWx0YShvKX1lbHNlIHRoaXMuX2VkZ2VMaXN0LmFkZCh0KSx0LnNldERlcHRoRGVsdGEoaWkuZGVwdGhEZWx0YSh0LmdldExhYmVsKCkpKX0saWkucHJvdG90eXBlLmJ1aWxkU3ViZ3JhcGhzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBOdCxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpLG89ci5nZXRSaWdodG1vc3RDb29yZGluYXRlKCkscz1uZXcgQW4obikuZ2V0RGVwdGgobyk7ci5jb21wdXRlRGVwdGgocyksci5maW5kUmVzdWx0RWRnZXMoKSxuLmFkZChyKSxlLmFkZChyLmdldERpcmVjdGVkRWRnZXMoKSxyLmdldE5vZGVzKCkpfX0saWkucHJvdG90eXBlLmNyZWF0ZVN1YmdyYXBocz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IE50LG49dC5nZXROb2RlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZighaS5pc1Zpc2l0ZWQoKSl7dmFyIHI9bmV3IFRlO3IuY3JlYXRlKGkpLGUuYWRkKHIpfX1yZXR1cm4gJGUuc29ydChlLCRlLnJldmVyc2VPcmRlcigpKSxlfSxpaS5wcm90b3R5cGUuY3JlYXRlRW1wdHlSZXN1bHRHZW9tZXRyeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZW9tRmFjdC5jcmVhdGVQb2x5Z29uKCl9LGlpLnByb3RvdHlwZS5nZXROb2Rlcj1mdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy5fd29ya2luZ05vZGVyKXJldHVybiB0aGlzLl93b3JraW5nTm9kZXI7dmFyIGU9bmV3IHhuLG49bmV3IHJ0O3JldHVybiBuLnNldFByZWNpc2lvbk1vZGVsKHQpLGUuc2V0U2VnbWVudEludGVyc2VjdG9yKG5ldyBLbihuKSksZX0saWkucHJvdG90eXBlLmJ1ZmZlcj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3dvcmtpbmdQcmVjaXNpb25Nb2RlbDtudWxsPT09biYmKG49dC5nZXRQcmVjaXNpb25Nb2RlbCgpKSx0aGlzLl9nZW9tRmFjdD10LmdldEZhY3RvcnkoKTt2YXIgaT1uZXcgTW4obix0aGlzLl9idWZQYXJhbXMpLHI9bmV3IEJuKHQsZSxpKS5nZXRDdXJ2ZXMoKTtpZihyLnNpemUoKTw9MClyZXR1cm4gdGhpcy5jcmVhdGVFbXB0eVJlc3VsdEdlb21ldHJ5KCk7dGhpcy5jb21wdXRlTm9kZWRFZGdlcyhyLG4pLHRoaXMuX2dyYXBoPW5ldyBZZShuZXcga24pLHRoaXMuX2dyYXBoLmFkZEVkZ2VzKHRoaXMuX2VkZ2VMaXN0LmdldEVkZ2VzKCkpO3ZhciBvPXRoaXMuY3JlYXRlU3ViZ3JhcGhzKHRoaXMuX2dyYXBoKSxzPW5ldyBrZSh0aGlzLl9nZW9tRmFjdCk7dGhpcy5idWlsZFN1YmdyYXBocyhvLHMpO3ZhciBhPXMuZ2V0UG9seWdvbnMoKTtpZihhLnNpemUoKTw9MClyZXR1cm4gdGhpcy5jcmVhdGVFbXB0eVJlc3VsdEdlb21ldHJ5KCk7cmV0dXJuIHRoaXMuX2dlb21GYWN0LmJ1aWxkR2VvbWV0cnkoYSl9LGlpLnByb3RvdHlwZS5jb21wdXRlTm9kZWRFZGdlcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0Tm9kZXIoZSk7bi5jb21wdXRlTm9kZXModCk7Zm9yKHZhciBpPW4uZ2V0Tm9kZWRTdWJzdHJpbmdzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpLG89ci5nZXRDb29yZGluYXRlcygpO2lmKDIhPT1vLmxlbmd0aHx8IW9bMF0uZXF1YWxzMkQob1sxXSkpe3ZhciBzPXIuZ2V0RGF0YSgpLGE9bmV3IG5pKHIuZ2V0Q29vcmRpbmF0ZXMoKSxuZXcgUGUocykpO3RoaXMuaW5zZXJ0VW5pcXVlRWRnZShhKX19fSxpaS5wcm90b3R5cGUuc2V0Tm9kZXI9ZnVuY3Rpb24odCl7dGhpcy5fd29ya2luZ05vZGVyPXR9LGlpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxpaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gaWl9LGlpLmRlcHRoRGVsdGE9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRMb2NhdGlvbigwLFNlLkxFRlQpLG49dC5nZXRMb2NhdGlvbigwLFNlLlJJR0hUKTtyZXR1cm4gZT09PXcuSU5URVJJT1ImJm49PT13LkVYVEVSSU9SPzE6ZT09PXcuRVhURVJJT1ImJm49PT13LklOVEVSSU9SPy0xOjB9LGlpLmNvbnZlcnRTZWdTdHJpbmdzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgX2Usbj1uZXcgTnQ7dC5oYXNOZXh0KCk7KXt2YXIgaT10Lm5leHQoKSxyPWUuY3JlYXRlTGluZVN0cmluZyhpLmdldENvb3JkaW5hdGVzKCkpO24uYWRkKHIpfXJldHVybiBlLmJ1aWxkR2VvbWV0cnkobil9O3ZhciByaT1mdW5jdGlvbigpe2lmKHRoaXMuX25vZGVyPW51bGwsdGhpcy5fc2NhbGVGYWN0b3I9bnVsbCx0aGlzLl9vZmZzZXRYPW51bGwsdGhpcy5fb2Zmc2V0WT1udWxsLHRoaXMuX2lzU2NhbGVkPSExLDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5fbm9kZXI9dCx0aGlzLl9zY2FsZUZhY3Rvcj1lLHRoaXMuX29mZnNldFg9MCx0aGlzLl9vZmZzZXRZPTAsdGhpcy5faXNTY2FsZWQ9IXRoaXMuaXNJbnRlZ2VyUHJlY2lzaW9uKCl9ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLG89YXJndW1lbnRzWzNdO3RoaXMuX25vZGVyPW4sdGhpcy5fc2NhbGVGYWN0b3I9aSx0aGlzLl9vZmZzZXRYPXIsdGhpcy5fb2Zmc2V0WT1vLHRoaXMuX2lzU2NhbGVkPSF0aGlzLmlzSW50ZWdlclByZWNpc2lvbigpfX07cmkucHJvdG90eXBlLnJlc2NhbGU9ZnVuY3Rpb24oKXtpZihUKGFyZ3VtZW50c1swXSxJdCkpZm9yKHZhciB0PWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5yZXNjYWxlKGUuZ2V0Q29vcmRpbmF0ZXMoKSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIG49YXJndW1lbnRzWzBdLGk9MDtpPG4ubGVuZ3RoO2krKyluW2ldLng9bltpXS54L3RoaXMuX3NjYWxlRmFjdG9yK3RoaXMuX29mZnNldFgsbltpXS55PW5baV0ueS90aGlzLl9zY2FsZUZhY3Rvcit0aGlzLl9vZmZzZXRZOzI9PT1uLmxlbmd0aCYmblswXS5lcXVhbHMyRChuWzFdKSYmWS5vdXQucHJpbnRsbihuKX19LHJpLnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbigpe2lmKFQoYXJndW1lbnRzWzBdLEl0KSl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBOdCxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuYWRkKG5ldyBnbih0aGlzLnNjYWxlKGkuZ2V0Q29vcmRpbmF0ZXMoKSksaS5nZXREYXRhKCkpKX1yZXR1cm4gZX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIHI9YXJndW1lbnRzWzBdLG89bmV3IEFycmF5KHIubGVuZ3RoKS5maWxsKG51bGwpLHM9MDtzPHIubGVuZ3RoO3MrKylvW3NdPW5ldyBDKE1hdGgucm91bmQoKHJbc10ueC10aGlzLl9vZmZzZXRYKSp0aGlzLl9zY2FsZUZhY3RvciksTWF0aC5yb3VuZCgocltzXS55LXRoaXMuX29mZnNldFkpKnRoaXMuX3NjYWxlRmFjdG9yKSxyW3NdLnopO3JldHVybiBMdC5yZW1vdmVSZXBlYXRlZFBvaW50cyhvKX19LHJpLnByb3RvdHlwZS5pc0ludGVnZXJQcmVjaXNpb249ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuX3NjYWxlRmFjdG9yfSxyaS5wcm90b3R5cGUuZ2V0Tm9kZWRTdWJzdHJpbmdzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbm9kZXIuZ2V0Tm9kZWRTdWJzdHJpbmdzKCk7cmV0dXJuIHRoaXMuX2lzU2NhbGVkJiZ0aGlzLnJlc2NhbGUodCksdH0scmkucHJvdG90eXBlLmNvbXB1dGVOb2Rlcz1mdW5jdGlvbih0KXt2YXIgZT10O3RoaXMuX2lzU2NhbGVkJiYoZT10aGlzLnNjYWxlKHQpKSx0aGlzLl9ub2Rlci5jb21wdXRlTm9kZXMoZSl9LHJpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltJbl19LHJpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiByaX07dmFyIG9pPWZ1bmN0aW9uKCl7dGhpcy5fbGk9bmV3IHJ0LHRoaXMuX3NlZ1N0cmluZ3M9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fc2VnU3RyaW5ncz10fSxzaT17ZmFjdDp7Y29uZmlndXJhYmxlOiEwfX07b2kucHJvdG90eXBlLmNoZWNrRW5kUHRWZXJ0ZXhJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciB0PXRoaXMuX3NlZ1N0cmluZ3MuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpLmdldENvb3JkaW5hdGVzKCk7dGhpcy5jaGVja0VuZFB0VmVydGV4SW50ZXJzZWN0aW9ucyhlWzBdLHRoaXMuX3NlZ1N0cmluZ3MpLHRoaXMuY2hlY2tFbmRQdFZlcnRleEludGVyc2VjdGlvbnMoZVtlLmxlbmd0aC0xXSx0aGlzLl9zZWdTdHJpbmdzKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0uaXRlcmF0b3IoKTtpLmhhc05leHQoKTspZm9yKHZhciByPWkubmV4dCgpLmdldENvb3JkaW5hdGVzKCksbz0xO288ci5sZW5ndGgtMTtvKyspaWYocltvXS5lcXVhbHMobikpdGhyb3cgbmV3ICQoXCJmb3VuZCBlbmRwdC9pbnRlcmlvciBwdCBpbnRlcnNlY3Rpb24gYXQgaW5kZXggXCIrbytcIiA6cHQgXCIrbil9LG9pLnByb3RvdHlwZS5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgdD10aGlzLl9zZWdTdHJpbmdzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KWZvcih2YXIgZT10Lm5leHQoKSxuPXRoaXMuX3NlZ1N0cmluZ3MuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO3RoaXMuY2hlY2tJbnRlcmlvckludGVyc2VjdGlvbnMoZSxpKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0scz1yLmdldENvb3JkaW5hdGVzKCksYT1vLmdldENvb3JkaW5hdGVzKCksdT0wO3U8cy5sZW5ndGgtMTt1KyspZm9yKHZhciBsPTA7bDxhLmxlbmd0aC0xO2wrKyl0aGlzLmNoZWNrSW50ZXJpb3JJbnRlcnNlY3Rpb25zKHIsdSxvLGwpO2Vsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBjPWFyZ3VtZW50c1swXSxwPWFyZ3VtZW50c1sxXSxoPWFyZ3VtZW50c1syXSxmPWFyZ3VtZW50c1szXTtpZihjPT09aCYmcD09PWYpcmV0dXJuIG51bGw7dmFyIGc9Yy5nZXRDb29yZGluYXRlcygpW3BdLGQ9Yy5nZXRDb29yZGluYXRlcygpW3ArMV0seT1oLmdldENvb3JkaW5hdGVzKClbZl0sXz1oLmdldENvb3JkaW5hdGVzKClbZisxXTtpZih0aGlzLl9saS5jb21wdXRlSW50ZXJzZWN0aW9uKGcsZCx5LF8pLHRoaXMuX2xpLmhhc0ludGVyc2VjdGlvbigpJiYodGhpcy5fbGkuaXNQcm9wZXIoKXx8dGhpcy5oYXNJbnRlcmlvckludGVyc2VjdGlvbih0aGlzLl9saSxnLGQpfHx0aGlzLmhhc0ludGVyaW9ySW50ZXJzZWN0aW9uKHRoaXMuX2xpLHksXykpKXRocm93IG5ldyAkKFwiZm91bmQgbm9uLW5vZGVkIGludGVyc2VjdGlvbiBhdCBcIitnK1wiLVwiK2QrXCIgYW5kIFwiK3krXCItXCIrXyl9fSxvaS5wcm90b3R5cGUuY2hlY2tWYWxpZD1mdW5jdGlvbigpe3RoaXMuY2hlY2tFbmRQdFZlcnRleEludGVyc2VjdGlvbnMoKSx0aGlzLmNoZWNrSW50ZXJpb3JJbnRlcnNlY3Rpb25zKCksdGhpcy5jaGVja0NvbGxhcHNlcygpfSxvaS5wcm90b3R5cGUuY2hlY2tDb2xsYXBzZXM9ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHQ9dGhpcy5fc2VnU3RyaW5ncy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5jaGVja0NvbGxhcHNlcyhlKX1lbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgbj1hcmd1bWVudHNbMF0uZ2V0Q29vcmRpbmF0ZXMoKSxpPTA7aTxuLmxlbmd0aC0yO2krKyl0aGlzLmNoZWNrQ29sbGFwc2UobltpXSxuW2krMV0sbltpKzJdKX0sb2kucHJvdG90eXBlLmhhc0ludGVyaW9ySW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuZ2V0SW50ZXJzZWN0aW9uTnVtKCk7aSsrKXt2YXIgcj10LmdldEludGVyc2VjdGlvbihpKTtpZighci5lcXVhbHMoZSkmJiFyLmVxdWFscyhuKSlyZXR1cm4hMH1yZXR1cm4hMX0sb2kucHJvdG90eXBlLmNoZWNrQ29sbGFwc2U9ZnVuY3Rpb24odCxlLG4pe2lmKHQuZXF1YWxzKG4pKXRocm93IG5ldyAkKFwiZm91bmQgbm9uLW5vZGVkIGNvbGxhcHNlIGF0IFwiK29pLmZhY3QuY3JlYXRlTGluZVN0cmluZyhbdCxlLG5dKSl9LG9pLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxvaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gb2l9LHNpLmZhY3QuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBfZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2ksc2kpO3ZhciBhaT1mdW5jdGlvbigpe3RoaXMuX2xpPW51bGwsdGhpcy5fcHQ9bnVsbCx0aGlzLl9vcmlnaW5hbFB0PW51bGwsdGhpcy5fcHRTY2FsZWQ9bnVsbCx0aGlzLl9wMFNjYWxlZD1udWxsLHRoaXMuX3AxU2NhbGVkPW51bGwsdGhpcy5fc2NhbGVGYWN0b3I9bnVsbCx0aGlzLl9taW54PW51bGwsdGhpcy5fbWF4eD1udWxsLHRoaXMuX21pbnk9bnVsbCx0aGlzLl9tYXh5PW51bGwsdGhpcy5fY29ybmVyPW5ldyBBcnJheSg0KS5maWxsKG51bGwpLHRoaXMuX3NhZmVFbnY9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07aWYodGhpcy5fb3JpZ2luYWxQdD10LHRoaXMuX3B0PXQsdGhpcy5fc2NhbGVGYWN0b3I9ZSx0aGlzLl9saT1uLGU8PTApdGhyb3cgbmV3IG0oXCJTY2FsZSBmYWN0b3IgbXVzdCBiZSBub24temVyb1wiKTsxIT09ZSYmKHRoaXMuX3B0PW5ldyBDKHRoaXMuc2NhbGUodC54KSx0aGlzLnNjYWxlKHQueSkpLHRoaXMuX3AwU2NhbGVkPW5ldyBDLHRoaXMuX3AxU2NhbGVkPW5ldyBDKSx0aGlzLmluaXRDb3JuZXJzKHRoaXMuX3B0KX0sdWk9e1NBRkVfRU5WX0VYUEFOU0lPTl9GQUNUT1I6e2NvbmZpZ3VyYWJsZTohMH19O2FpLnByb3RvdHlwZS5pbnRlcnNlY3RzU2NhbGVkPWZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5taW4odC54LGUueCksaT1NYXRoLm1heCh0LngsZS54KSxyPU1hdGgubWluKHQueSxlLnkpLG89TWF0aC5tYXgodC55LGUueSkscz10aGlzLl9tYXh4PG58fHRoaXMuX21pbng+aXx8dGhpcy5fbWF4eTxyfHx0aGlzLl9taW55Pm87aWYocylyZXR1cm4hMTt2YXIgYT10aGlzLmludGVyc2VjdHNUb2xlcmFuY2VTcXVhcmUodCxlKTtyZXR1cm4gZXQuaXNUcnVlKCEocyYmYSksXCJGb3VuZCBiYWQgZW52ZWxvcGUgdGVzdFwiKSxhfSxhaS5wcm90b3R5cGUuaW5pdENvcm5lcnM9ZnVuY3Rpb24odCl7dGhpcy5fbWlueD10LngtLjUsdGhpcy5fbWF4eD10LngrLjUsdGhpcy5fbWlueT10LnktLjUsdGhpcy5fbWF4eT10LnkrLjUsdGhpcy5fY29ybmVyWzBdPW5ldyBDKHRoaXMuX21heHgsdGhpcy5fbWF4eSksdGhpcy5fY29ybmVyWzFdPW5ldyBDKHRoaXMuX21pbngsdGhpcy5fbWF4eSksdGhpcy5fY29ybmVyWzJdPW5ldyBDKHRoaXMuX21pbngsdGhpcy5fbWlueSksdGhpcy5fY29ybmVyWzNdPW5ldyBDKHRoaXMuX21heHgsdGhpcy5fbWlueSl9LGFpLnByb3RvdHlwZS5pbnRlcnNlY3RzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDE9PT10aGlzLl9zY2FsZUZhY3Rvcj90aGlzLmludGVyc2VjdHNTY2FsZWQodCxlKToodGhpcy5jb3B5U2NhbGVkKHQsdGhpcy5fcDBTY2FsZWQpLHRoaXMuY29weVNjYWxlZChlLHRoaXMuX3AxU2NhbGVkKSx0aGlzLmludGVyc2VjdHNTY2FsZWQodGhpcy5fcDBTY2FsZWQsdGhpcy5fcDFTY2FsZWQpKX0sYWkucHJvdG90eXBlLnNjYWxlPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQqdGhpcy5fc2NhbGVGYWN0b3IpfSxhaS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmlnaW5hbFB0fSxhaS5wcm90b3R5cGUuY29weVNjYWxlZD1mdW5jdGlvbih0LGUpe2UueD10aGlzLnNjYWxlKHQueCksZS55PXRoaXMuc2NhbGUodC55KX0sYWkucHJvdG90eXBlLmdldFNhZmVFbnZlbG9wZT1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9zYWZlRW52KXt2YXIgdD1haS5TQUZFX0VOVl9FWFBBTlNJT05fRkFDVE9SL3RoaXMuX3NjYWxlRmFjdG9yO3RoaXMuX3NhZmVFbnY9bmV3IGoodGhpcy5fb3JpZ2luYWxQdC54LXQsdGhpcy5fb3JpZ2luYWxQdC54K3QsdGhpcy5fb3JpZ2luYWxQdC55LXQsdGhpcy5fb3JpZ2luYWxQdC55K3QpfXJldHVybiB0aGlzLl9zYWZlRW52fSxhaS5wcm90b3R5cGUuaW50ZXJzZWN0c1BpeGVsQ2xvc3VyZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLl9jb3JuZXJbMF0sdGhpcy5fY29ybmVyWzFdKSwhIXRoaXMuX2xpLmhhc0ludGVyc2VjdGlvbigpfHwodGhpcy5fbGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5fY29ybmVyWzFdLHRoaXMuX2Nvcm5lclsyXSksISF0aGlzLl9saS5oYXNJbnRlcnNlY3Rpb24oKXx8KHRoaXMuX2xpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuX2Nvcm5lclsyXSx0aGlzLl9jb3JuZXJbM10pLCEhdGhpcy5fbGkuaGFzSW50ZXJzZWN0aW9uKCl8fCh0aGlzLl9saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLl9jb3JuZXJbM10sdGhpcy5fY29ybmVyWzBdKSwhIXRoaXMuX2xpLmhhc0ludGVyc2VjdGlvbigpKSkpfSxhaS5wcm90b3R5cGUuaW50ZXJzZWN0c1RvbGVyYW5jZVNxdWFyZT1mdW5jdGlvbih0LGUpe3ZhciBuPSExLGk9ITE7cmV0dXJuIHRoaXMuX2xpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuX2Nvcm5lclswXSx0aGlzLl9jb3JuZXJbMV0pLCEhdGhpcy5fbGkuaXNQcm9wZXIoKXx8KHRoaXMuX2xpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuX2Nvcm5lclsxXSx0aGlzLl9jb3JuZXJbMl0pLCEhdGhpcy5fbGkuaXNQcm9wZXIoKXx8KHRoaXMuX2xpLmhhc0ludGVyc2VjdGlvbigpJiYobj0hMCksdGhpcy5fbGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5fY29ybmVyWzJdLHRoaXMuX2Nvcm5lclszXSksISF0aGlzLl9saS5pc1Byb3BlcigpfHwodGhpcy5fbGkuaGFzSW50ZXJzZWN0aW9uKCkmJihpPSEwKSx0aGlzLl9saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLl9jb3JuZXJbM10sdGhpcy5fY29ybmVyWzBdKSwhIXRoaXMuX2xpLmlzUHJvcGVyKCl8fCghKCFufHwhaSl8fCghIXQuZXF1YWxzKHRoaXMuX3B0KXx8ISFlLmVxdWFscyh0aGlzLl9wdCkpKSkpKX0sYWkucHJvdG90eXBlLmFkZFNuYXBwZWROb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRDb29yZGluYXRlKGUpLGk9dC5nZXRDb29yZGluYXRlKGUrMSk7cmV0dXJuISF0aGlzLmludGVyc2VjdHMobixpKSYmKHQuYWRkSW50ZXJzZWN0aW9uKHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLGUpLCEwKX0sYWkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGFpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBhaX0sdWkuU0FGRV9FTlZfRVhQQU5TSU9OX0ZBQ1RPUi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4uNzV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGFpLHVpKTt2YXIgbGk9ZnVuY3Rpb24oKXt0aGlzLnRlbXBFbnYxPW5ldyBqLHRoaXMuc2VsZWN0ZWRTZWdtZW50PW5ldyBkbn07bGkucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKTtlbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dC5nZXRMaW5lU2VnbWVudChlLHRoaXMuc2VsZWN0ZWRTZWdtZW50KSx0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkU2VnbWVudCl9fSxsaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sbGkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGxpfTt2YXIgY2k9ZnVuY3Rpb24oKXt0aGlzLl9pbmRleD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9pbmRleD10fSxwaT17SG90UGl4ZWxTbmFwQWN0aW9uOntjb25maWd1cmFibGU6ITB9fTtjaS5wcm90b3R5cGUuc25hcD1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuc25hcCh0LG51bGwsLTEpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMl0scj1lLmdldFNhZmVFbnZlbG9wZSgpLG89bmV3IGhpKGUsbixpKTtyZXR1cm4gdGhpcy5faW5kZXgucXVlcnkocix7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bS2VdfSx2aXNpdEl0ZW06ZnVuY3Rpb24odCl7dC5zZWxlY3QocixvKX19KSxvLmlzTm9kZUFkZGVkKCl9fSxjaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sY2kucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGNpfSxwaS5Ib3RQaXhlbFNuYXBBY3Rpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGhpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjaSxwaSk7dmFyIGhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmNhbGwodGhpcyksdGhpcy5faG90UGl4ZWw9bnVsbCx0aGlzLl9wYXJlbnRFZGdlPW51bGwsdGhpcy5faG90UGl4ZWxWZXJ0ZXhJbmRleD1udWxsLHRoaXMuX2lzTm9kZUFkZGVkPSExO3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXTt0aGlzLl9ob3RQaXhlbD1lLHRoaXMuX3BhcmVudEVkZ2U9bix0aGlzLl9ob3RQaXhlbFZlcnRleEluZGV4PWl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmlzTm9kZUFkZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzTm9kZUFkZGVkfSxlLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdC5wcm90b3R5cGUuc2VsZWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1lLmdldENvbnRleHQoKTtpZihudWxsIT09dGhpcy5fcGFyZW50RWRnZSYmaT09PXRoaXMuX3BhcmVudEVkZ2UmJm49PT10aGlzLl9ob3RQaXhlbFZlcnRleEluZGV4KXJldHVybiBudWxsO3RoaXMuX2lzTm9kZUFkZGVkPXRoaXMuX2hvdFBpeGVsLmFkZFNuYXBwZWROb2RlKGksbil9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9KGxpKSxmaT1mdW5jdGlvbigpe3RoaXMuX2xpPW51bGwsdGhpcy5faW50ZXJpb3JJbnRlcnNlY3Rpb25zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2xpPXQsdGhpcy5faW50ZXJpb3JJbnRlcnNlY3Rpb25zPW5ldyBOdH07ZmkucHJvdG90eXBlLnByb2Nlc3NJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1uJiZlPT09aSlyZXR1cm4gbnVsbDt2YXIgcj10LmdldENvb3JkaW5hdGVzKClbZV0sbz10LmdldENvb3JkaW5hdGVzKClbZSsxXSxzPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpXSxhPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpKzFdO2lmKHRoaXMuX2xpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocixvLHMsYSksdGhpcy5fbGkuaGFzSW50ZXJzZWN0aW9uKCkmJnRoaXMuX2xpLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oKSl7Zm9yKHZhciB1PTA7dTx0aGlzLl9saS5nZXRJbnRlcnNlY3Rpb25OdW0oKTt1KyspdGhpcy5faW50ZXJpb3JJbnRlcnNlY3Rpb25zLmFkZCh0aGlzLl9saS5nZXRJbnRlcnNlY3Rpb24odSkpO3QuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLl9saSxlLDApLG4uYWRkSW50ZXJzZWN0aW9ucyh0aGlzLl9saSxpLDEpfX0sZmkucHJvdG90eXBlLmlzRG9uZT1mdW5jdGlvbigpe3JldHVybiExfSxmaS5wcm90b3R5cGUuZ2V0SW50ZXJpb3JJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludGVyaW9ySW50ZXJzZWN0aW9uc30sZmkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1duXX0sZmkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGZpfTt2YXIgZ2k9ZnVuY3Rpb24oKXt0aGlzLl9wbT1udWxsLHRoaXMuX2xpPW51bGwsdGhpcy5fc2NhbGVGYWN0b3I9bnVsbCx0aGlzLl9ub2Rlcj1udWxsLHRoaXMuX3BvaW50U25hcHBlcj1udWxsLHRoaXMuX25vZGVkU2VnU3RyaW5ncz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9wbT10LHRoaXMuX2xpPW5ldyBydCx0aGlzLl9saS5zZXRQcmVjaXNpb25Nb2RlbCh0KSx0aGlzLl9zY2FsZUZhY3Rvcj10LmdldFNjYWxlKCl9O2dpLnByb3RvdHlwZS5jaGVja0NvcnJlY3RuZXNzPWZ1bmN0aW9uKHQpe3ZhciBlPWduLmdldE5vZGVkU3Vic3RyaW5ncyh0KSxuPW5ldyBvaShlKTt0cnl7bi5jaGVja1ZhbGlkKCl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgeikpdGhyb3cgdDt0LnByaW50U3RhY2tUcmFjZSgpfX0sZ2kucHJvdG90eXBlLmdldE5vZGVkU3Vic3RyaW5ncz1mdW5jdGlvbigpe3JldHVybiBnbi5nZXROb2RlZFN1YnN0cmluZ3ModGhpcy5fbm9kZWRTZWdTdHJpbmdzKX0sZ2kucHJvdG90eXBlLnNuYXBSb3VuZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZmluZEludGVyaW9ySW50ZXJzZWN0aW9ucyh0LGUpO3RoaXMuY29tcHV0ZUludGVyc2VjdGlvblNuYXBzKG4pLHRoaXMuY29tcHV0ZVZlcnRleFNuYXBzKHQpfSxnaS5wcm90b3R5cGUuZmluZEludGVyaW9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBmaShlKTtyZXR1cm4gdGhpcy5fbm9kZXIuc2V0U2VnbWVudEludGVyc2VjdG9yKG4pLHRoaXMuX25vZGVyLmNvbXB1dGVOb2Rlcyh0KSxuLmdldEludGVyaW9ySW50ZXJzZWN0aW9ucygpfSxnaS5wcm90b3R5cGUuY29tcHV0ZVZlcnRleFNuYXBzPWZ1bmN0aW9uKCl7aWYoVChhcmd1bWVudHNbMF0sSXQpKWZvcih2YXIgdD1hcmd1bWVudHNbMF0uaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpO3RoaXMuY29tcHV0ZVZlcnRleFNuYXBzKGUpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBnbilmb3IodmFyIG49YXJndW1lbnRzWzBdLGk9bi5nZXRDb29yZGluYXRlcygpLHI9MDtyPGkubGVuZ3RoO3IrKyl7dmFyIG89bmV3IGFpKGlbcl0sdGhpcy5fc2NhbGVGYWN0b3IsdGhpcy5fbGkpO3RoaXMuX3BvaW50U25hcHBlci5zbmFwKG8sbixyKSYmbi5hZGRJbnRlcnNlY3Rpb24oaVtyXSxyKX19LGdpLnByb3RvdHlwZS5jb21wdXRlTm9kZXM9ZnVuY3Rpb24odCl7dGhpcy5fbm9kZWRTZWdTdHJpbmdzPXQsdGhpcy5fbm9kZXI9bmV3IHhuLHRoaXMuX3BvaW50U25hcHBlcj1uZXcgY2kodGhpcy5fbm9kZXIuZ2V0SW5kZXgoKSksdGhpcy5zbmFwUm91bmQodCx0aGlzLl9saSl9LGdpLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uU25hcHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bmV3IGFpKG4sdGhpcy5fc2NhbGVGYWN0b3IsdGhpcy5fbGkpO3RoaXMuX3BvaW50U25hcHBlci5zbmFwKGkpfX0sZ2kucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0luXX0sZ2kucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGdpfTt2YXIgZGk9ZnVuY3Rpb24oKXtpZih0aGlzLl9hcmdHZW9tPW51bGwsdGhpcy5fZGlzdGFuY2U9bnVsbCx0aGlzLl9idWZQYXJhbXM9bmV3IENuLHRoaXMuX3Jlc3VsdEdlb21ldHJ5PW51bGwsdGhpcy5fc2F2ZUV4Y2VwdGlvbj1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fYXJnR2VvbT10fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTt0aGlzLl9hcmdHZW9tPWUsdGhpcy5fYnVmUGFyYW1zPW59fSx5aT17Q0FQX1JPVU5EOntjb25maWd1cmFibGU6ITB9LENBUF9CVVRUOntjb25maWd1cmFibGU6ITB9LENBUF9GTEFUOntjb25maWd1cmFibGU6ITB9LENBUF9TUVVBUkU6e2NvbmZpZ3VyYWJsZTohMH0sTUFYX1BSRUNJU0lPTl9ESUdJVFM6e2NvbmZpZ3VyYWJsZTohMH19O2RpLnByb3RvdHlwZS5idWZmZXJGaXhlZFByZWNpc2lvbj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgcmkobmV3IGdpKG5ldyBmZSgxKSksdC5nZXRTY2FsZSgpKSxuPW5ldyBpaSh0aGlzLl9idWZQYXJhbXMpO24uc2V0V29ya2luZ1ByZWNpc2lvbk1vZGVsKHQpLG4uc2V0Tm9kZXIoZSksdGhpcy5fcmVzdWx0R2VvbWV0cnk9bi5idWZmZXIodGhpcy5fYXJnR2VvbSx0aGlzLl9kaXN0YW5jZSl9LGRpLnByb3RvdHlwZS5idWZmZXJSZWR1Y2VkUHJlY2lzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBlPWRpLk1BWF9QUkVDSVNJT05fRElHSVRTO2U+PTA7ZS0tKXt0cnl7dC5idWZmZXJSZWR1Y2VkUHJlY2lzaW9uKGUpfWNhdGNoKGUpe2lmKCEoZSBpbnN0YW5jZW9mIHdlKSl0aHJvdyBlO3QuX3NhdmVFeGNlcHRpb249ZX1pZihudWxsIT09dC5fcmVzdWx0R2VvbWV0cnkpcmV0dXJuIG51bGx9dGhyb3cgdGhpcy5fc2F2ZUV4Y2VwdGlvbn1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9ZGkucHJlY2lzaW9uU2NhbGVGYWN0b3IodGhpcy5fYXJnR2VvbSx0aGlzLl9kaXN0YW5jZSxuKSxyPW5ldyBmZShpKTt0aGlzLmJ1ZmZlckZpeGVkUHJlY2lzaW9uKHIpfX0sZGkucHJvdG90eXBlLmNvbXB1dGVHZW9tZXRyeT1mdW5jdGlvbigpe2lmKHRoaXMuYnVmZmVyT3JpZ2luYWxQcmVjaXNpb24oKSxudWxsIT09dGhpcy5fcmVzdWx0R2VvbWV0cnkpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5fYXJnR2VvbS5nZXRGYWN0b3J5KCkuZ2V0UHJlY2lzaW9uTW9kZWwoKTt0LmdldFR5cGUoKT09PWZlLkZJWEVEP3RoaXMuYnVmZmVyRml4ZWRQcmVjaXNpb24odCk6dGhpcy5idWZmZXJSZWR1Y2VkUHJlY2lzaW9uKCl9LGRpLnByb3RvdHlwZS5zZXRRdWFkcmFudFNlZ21lbnRzPWZ1bmN0aW9uKHQpe3RoaXMuX2J1ZlBhcmFtcy5zZXRRdWFkcmFudFNlZ21lbnRzKHQpfSxkaS5wcm90b3R5cGUuYnVmZmVyT3JpZ2luYWxQcmVjaXNpb249ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bmV3IGlpKHRoaXMuX2J1ZlBhcmFtcyk7dGhpcy5fcmVzdWx0R2VvbWV0cnk9dC5idWZmZXIodGhpcy5fYXJnR2VvbSx0aGlzLl9kaXN0YW5jZSl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgJCkpdGhyb3cgdDt0aGlzLl9zYXZlRXhjZXB0aW9uPXR9fSxkaS5wcm90b3R5cGUuZ2V0UmVzdWx0R2VvbWV0cnk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Rpc3RhbmNlPXQsdGhpcy5jb21wdXRlR2VvbWV0cnkoKSx0aGlzLl9yZXN1bHRHZW9tZXRyeX0sZGkucHJvdG90eXBlLnNldEVuZENhcFN0eWxlPWZ1bmN0aW9uKHQpe3RoaXMuX2J1ZlBhcmFtcy5zZXRFbmRDYXBTdHlsZSh0KX0sZGkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGRpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBkaX0sZGkuYnVmZmVyT3A9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiBuZXcgZGkodCkuZ2V0UmVzdWx0R2VvbWV0cnkoZSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzJdKSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBjdCYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLG89bmV3IGRpKG4pO28uc2V0UXVhZHJhbnRTZWdtZW50cyhyKTtyZXR1cm4gby5nZXRSZXN1bHRHZW9tZXRyeShpKX1pZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIENuJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGN0JiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgcz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV0sdT1hcmd1bWVudHNbMl07cmV0dXJuIG5ldyBkaShzLHUpLmdldFJlc3VsdEdlb21ldHJ5KGEpfX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbD1hcmd1bWVudHNbMF0sYz1hcmd1bWVudHNbMV0scD1hcmd1bWVudHNbMl0saD1hcmd1bWVudHNbM10sZj1uZXcgZGkobCk7Zi5zZXRRdWFkcmFudFNlZ21lbnRzKHApLGYuc2V0RW5kQ2FwU3R5bGUoaCk7cmV0dXJuIGYuZ2V0UmVzdWx0R2VvbWV0cnkoYyl9fSxkaS5wcmVjaXNpb25TY2FsZUZhY3Rvcj1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRFbnZlbG9wZUludGVybmFsKCkscj1SLm1heChNYXRoLmFicyhpLmdldE1heFgoKSksTWF0aC5hYnMoaS5nZXRNYXhZKCkpLE1hdGguYWJzKGkuZ2V0TWluWCgpKSxNYXRoLmFicyhpLmdldE1pblkoKSkpKzIqKGU+MD9lOjApLG89bi1NYXRoLnRydW5jKE1hdGgubG9nKHIpL01hdGgubG9nKDEwKSsxKTtyZXR1cm4gTWF0aC5wb3coMTAsbyl9LHlpLkNBUF9ST1VORC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gQ24uQ0FQX1JPVU5EfSx5aS5DQVBfQlVUVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gQ24uQ0FQX0ZMQVR9LHlpLkNBUF9GTEFULmdldD1mdW5jdGlvbigpe3JldHVybiBDbi5DQVBfRkxBVH0seWkuQ0FQX1NRVUFSRS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gQ24uQ0FQX1NRVUFSRX0seWkuTUFYX1BSRUNJU0lPTl9ESUdJVFMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDEyfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhkaSx5aSk7dmFyIF9pPWZ1bmN0aW9uKCl7dGhpcy5fcHQ9W25ldyBDLG5ldyBDXSx0aGlzLl9kaXN0YW5jZT12Lk5hTix0aGlzLl9pc051bGw9ITB9O19pLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdH0sX2kucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3B0W3RdfSxfaS5wcm90b3R5cGUuc2V0TWluaW11bT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zZXRNaW5pbXVtKHQuX3B0WzBdLHQuX3B0WzFdKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07aWYodGhpcy5faXNOdWxsKXJldHVybiB0aGlzLmluaXRpYWxpemUoZSxuKSxudWxsO3ZhciBpPWUuZGlzdGFuY2Uobik7aTx0aGlzLl9kaXN0YW5jZSYmdGhpcy5pbml0aWFsaXplKGUsbixpKX19LF9pLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5faXNOdWxsPSEwO2Vsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLl9wdFswXS5zZXRDb29yZGluYXRlKHQpLHRoaXMuX3B0WzFdLnNldENvb3JkaW5hdGUoZSksdGhpcy5fZGlzdGFuY2U9dC5kaXN0YW5jZShlKSx0aGlzLl9pc051bGw9ITF9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3RoaXMuX3B0WzBdLnNldENvb3JkaW5hdGUobiksdGhpcy5fcHRbMV0uc2V0Q29vcmRpbmF0ZShpKSx0aGlzLl9kaXN0YW5jZT1yLHRoaXMuX2lzTnVsbD0hMX19LF9pLnByb3RvdHlwZS5nZXREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXN0YW5jZX0sX2kucHJvdG90eXBlLnNldE1heGltdW09ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0TWF4aW11bSh0Ll9wdFswXSx0Ll9wdFsxXSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO2lmKHRoaXMuX2lzTnVsbClyZXR1cm4gdGhpcy5pbml0aWFsaXplKGUsbiksbnVsbDt2YXIgaT1lLmRpc3RhbmNlKG4pO2k+dGhpcy5fZGlzdGFuY2UmJnRoaXMuaW5pdGlhbGl6ZShlLG4saSl9fSxfaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sX2kucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIF9pfTt2YXIgbWk9ZnVuY3Rpb24oKXt9O21pLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxtaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gbWl9LG1pLmNvbXB1dGVEaXN0YW5jZT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgX2kmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgS3QmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgQylmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9dC5nZXRDb29yZGluYXRlcygpLHI9bmV3IGRuLG89MDtvPGkubGVuZ3RoLTE7bysrKXtyLnNldENvb3JkaW5hdGVzKGlbb10saVtvKzFdKTt2YXIgcz1yLmNsb3Nlc3RQb2ludChlKTtuLnNldE1pbmltdW0ocyxlKX1lbHNlIGlmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgX2kmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgJHQmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgQyl7dmFyIGE9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzFdLGw9YXJndW1lbnRzWzJdO21pLmNvbXB1dGVEaXN0YW5jZShhLmdldEV4dGVyaW9yUmluZygpLHUsbCk7Zm9yKHZhciBjPTA7YzxhLmdldE51bUludGVyaW9yUmluZygpO2MrKyltaS5jb21wdXRlRGlzdGFuY2UoYS5nZXRJbnRlcmlvclJpbmdOKGMpLHUsbCl9ZWxzZSBpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIF9pJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGN0JiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEMpe3ZhciBwPWFyZ3VtZW50c1swXSxoPWFyZ3VtZW50c1sxXSxmPWFyZ3VtZW50c1syXTtpZihwIGluc3RhbmNlb2YgS3QpbWkuY29tcHV0ZURpc3RhbmNlKHAsaCxmKTtlbHNlIGlmKHAgaW5zdGFuY2VvZiAkdCltaS5jb21wdXRlRGlzdGFuY2UocCxoLGYpO2Vsc2UgaWYocCBpbnN0YW5jZW9mIHp0KWZvcih2YXIgZz1wLGQ9MDtkPGcuZ2V0TnVtR2VvbWV0cmllcygpO2QrKyl7dmFyIHk9Zy5nZXRHZW9tZXRyeU4oZCk7bWkuY29tcHV0ZURpc3RhbmNlKHksaCxmKX1lbHNlIGYuc2V0TWluaW11bShwLmdldENvb3JkaW5hdGUoKSxoKX1lbHNlIGlmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgX2kmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgZG4mJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgQyl7dmFyIF89YXJndW1lbnRzWzBdLG09YXJndW1lbnRzWzFdLHY9YXJndW1lbnRzWzJdLEk9Xy5jbG9zZXN0UG9pbnQobSk7di5zZXRNaW5pbXVtKEksbSl9fTt2YXIgdmk9ZnVuY3Rpb24odCl7dGhpcy5fbWF4UHREaXN0PW5ldyBfaSx0aGlzLl9pbnB1dEdlb209dHx8bnVsbH0sSWk9e01heFBvaW50RGlzdGFuY2VGaWx0ZXI6e2NvbmZpZ3VyYWJsZTohMH0sTWF4TWlkcG9pbnREaXN0YW5jZUZpbHRlcjp7Y29uZmlndXJhYmxlOiEwfX07dmkucHJvdG90eXBlLmNvbXB1dGVNYXhNaWRwb2ludERpc3RhbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB4aSh0aGlzLl9pbnB1dEdlb20pO3QuYXBwbHkoZSksdGhpcy5fbWF4UHREaXN0LnNldE1heGltdW0oZS5nZXRNYXhQb2ludERpc3RhbmNlKCkpfSx2aS5wcm90b3R5cGUuY29tcHV0ZU1heFZlcnRleERpc3RhbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBFaSh0aGlzLl9pbnB1dEdlb20pO3QuYXBwbHkoZSksdGhpcy5fbWF4UHREaXN0LnNldE1heGltdW0oZS5nZXRNYXhQb2ludERpc3RhbmNlKCkpfSx2aS5wcm90b3R5cGUuZmluZERpc3RhbmNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXB1dGVNYXhWZXJ0ZXhEaXN0YW5jZSh0KSx0aGlzLmNvbXB1dGVNYXhNaWRwb2ludERpc3RhbmNlKHQpLHRoaXMuX21heFB0RGlzdC5nZXREaXN0YW5jZSgpfSx2aS5wcm90b3R5cGUuZ2V0RGlzdGFuY2VQb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4UHREaXN0fSx2aS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sdmkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHZpfSxJaS5NYXhQb2ludERpc3RhbmNlRmlsdGVyLmdldD1mdW5jdGlvbigpe3JldHVybiBFaX0sSWkuTWF4TWlkcG9pbnREaXN0YW5jZUZpbHRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4geGl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHZpLElpKTt2YXIgRWk9ZnVuY3Rpb24odCl7dGhpcy5fbWF4UHREaXN0PW5ldyBfaSx0aGlzLl9taW5QdERpc3Q9bmV3IF9pLHRoaXMuX2dlb209dHx8bnVsbH07RWkucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbih0KXt0aGlzLl9taW5QdERpc3QuaW5pdGlhbGl6ZSgpLG1pLmNvbXB1dGVEaXN0YW5jZSh0aGlzLl9nZW9tLHQsdGhpcy5fbWluUHREaXN0KSx0aGlzLl9tYXhQdERpc3Quc2V0TWF4aW11bSh0aGlzLl9taW5QdERpc3QpfSxFaS5wcm90b3R5cGUuZ2V0TWF4UG9pbnREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhQdERpc3R9LEVpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltmdF19LEVpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBFaX07dmFyIHhpPWZ1bmN0aW9uKHQpe3RoaXMuX21heFB0RGlzdD1uZXcgX2ksdGhpcy5fbWluUHREaXN0PW5ldyBfaSx0aGlzLl9nZW9tPXR8fG51bGx9O3hpLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCxlKXtpZigwPT09ZSlyZXR1cm4gbnVsbDt2YXIgbj10LmdldENvb3JkaW5hdGUoZS0xKSxpPXQuZ2V0Q29vcmRpbmF0ZShlKSxyPW5ldyBDKChuLngraS54KS8yLChuLnkraS55KS8yKTt0aGlzLl9taW5QdERpc3QuaW5pdGlhbGl6ZSgpLG1pLmNvbXB1dGVEaXN0YW5jZSh0aGlzLl9nZW9tLHIsdGhpcy5fbWluUHREaXN0KSx0aGlzLl9tYXhQdERpc3Quc2V0TWF4aW11bSh0aGlzLl9taW5QdERpc3QpfSx4aS5wcm90b3R5cGUuaXNEb25lPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHhpLnByb3RvdHlwZS5pc0dlb21ldHJ5Q2hhbmdlZD1mdW5jdGlvbigpe3JldHVybiExfSx4aS5wcm90b3R5cGUuZ2V0TWF4UG9pbnREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhQdERpc3R9LHhpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltVdF19LHhpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB4aX07dmFyIE5pPWZ1bmN0aW9uKHQpe3RoaXMuX2NvbXBzPXR8fG51bGx9O05pLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mICR0JiZ0aGlzLl9jb21wcy5hZGQodCl9LE5pLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltWdF19LE5pLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBOaX0sTmkuZ2V0UG9seWdvbnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBOaS5nZXRQb2x5Z29ucyh0LG5ldyBOdCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtyZXR1cm4gZSBpbnN0YW5jZW9mICR0P24uYWRkKGUpOmUgaW5zdGFuY2VvZiB6dCYmZS5hcHBseShuZXcgTmkobikpLG59fTt2YXIgQ2k9ZnVuY3Rpb24oKXtpZih0aGlzLl9saW5lcz1udWxsLHRoaXMuX2lzRm9yY2VkVG9MaW5lU3RyaW5nPSExLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fbGluZXM9dH1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5fbGluZXM9ZSx0aGlzLl9pc0ZvcmNlZFRvTGluZVN0cmluZz1ufX07Q2kucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbih0KXtpZih0aGlzLl9pc0ZvcmNlZFRvTGluZVN0cmluZyYmdCBpbnN0YW5jZW9mIGVlKXt2YXIgZT10LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpO3JldHVybiB0aGlzLl9saW5lcy5hZGQoZSksbnVsbH10IGluc3RhbmNlb2YgS3QmJnRoaXMuX2xpbmVzLmFkZCh0KX0sQ2kucHJvdG90eXBlLnNldEZvcmNlVG9MaW5lU3RyaW5nPWZ1bmN0aW9uKHQpe3RoaXMuX2lzRm9yY2VkVG9MaW5lU3RyaW5nPXR9LENpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltsdF19LENpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBDaX0sQ2kuZ2V0R2VvbWV0cnk9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0LmdldEZhY3RvcnkoKS5idWlsZEdlb21ldHJ5KENpLmdldExpbmVzKHQpKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3JldHVybiBlLmdldEZhY3RvcnkoKS5idWlsZEdlb21ldHJ5KENpLmdldExpbmVzKGUsbikpfX0sQ2kuZ2V0TGluZXM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBDaS5nZXRMaW5lcyh0LCExKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoVChhcmd1bWVudHNbMF0sSXQpJiZUKGFyZ3VtZW50c1sxXSxJdCkpe2Zvcih2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1lLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtDaS5nZXRMaW5lcyhyLG4pfXJldHVybiBufWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgY3QmJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgbz1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV0sYT1uZXcgTnQ7cmV0dXJuIG8uYXBwbHkobmV3IENpKGEscykpLGF9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBjdCYmVChhcmd1bWVudHNbMV0sSXQpKXt2YXIgdT1hcmd1bWVudHNbMF0sbD1hcmd1bWVudHNbMV07cmV0dXJuIHUgaW5zdGFuY2VvZiBLdD9sLmFkZCh1KTp1LmFwcGx5KG5ldyBDaShsKSksbH19ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJlQoYXJndW1lbnRzWzBdLEl0KSYmVChhcmd1bWVudHNbMV0sSXQpKXtmb3IodmFyIGM9YXJndW1lbnRzWzBdLHA9YXJndW1lbnRzWzFdLGg9YXJndW1lbnRzWzJdLGY9Yy5pdGVyYXRvcigpO2YuaGFzTmV4dCgpOyl7dmFyIGc9Zi5uZXh0KCk7Q2kuZ2V0TGluZXMoZyxwLGgpfXJldHVybiBwfWlmKFwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGN0JiZUKGFyZ3VtZW50c1sxXSxJdCkpe3ZhciBkPWFyZ3VtZW50c1swXSx5PWFyZ3VtZW50c1sxXSxfPWFyZ3VtZW50c1syXTtyZXR1cm4gZC5hcHBseShuZXcgQ2koeSxfKSkseX19fTt2YXIgU2k9ZnVuY3Rpb24oKXtpZih0aGlzLl9ib3VuZGFyeVJ1bGU9Z3QuT0dDX1NGU19CT1VOREFSWV9SVUxFLHRoaXMuX2lzSW49bnVsbCx0aGlzLl9udW1Cb3VuZGFyaWVzPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtpZihudWxsPT09dCl0aHJvdyBuZXcgbShcIlJ1bGUgbXVzdCBiZSBub24tbnVsbFwiKTt0aGlzLl9ib3VuZGFyeVJ1bGU9dH19O1NpLnByb3RvdHlwZS5sb2NhdGVJbnRlcm5hbD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQyYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiAkdCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKGUuaXNFbXB0eSgpKXJldHVybiB3LkVYVEVSSU9SO3ZhciBuPWUuZ2V0RXh0ZXJpb3JSaW5nKCksaT10aGlzLmxvY2F0ZUluUG9seWdvblJpbmcodCxuKTtpZihpPT09dy5FWFRFUklPUilyZXR1cm4gdy5FWFRFUklPUjtpZihpPT09dy5CT1VOREFSWSlyZXR1cm4gdy5CT1VOREFSWTtmb3IodmFyIHI9MDtyPGUuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7cisrKXt2YXIgbz1lLmdldEludGVyaW9yUmluZ04ocikscz10aGlzLmxvY2F0ZUluUG9seWdvblJpbmcodCxvKTtpZihzPT09dy5JTlRFUklPUilyZXR1cm4gdy5FWFRFUklPUjtpZihzPT09dy5CT1VOREFSWSlyZXR1cm4gdy5CT1VOREFSWX1yZXR1cm4gdy5JTlRFUklPUn1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgS3Qpe3ZhciBhPWFyZ3VtZW50c1swXSx1PWFyZ3VtZW50c1sxXTtpZighdS5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhhKSlyZXR1cm4gdy5FWFRFUklPUjt2YXIgbD11LmdldENvb3JkaW5hdGVzKCk7cmV0dXJuIHUuaXNDbG9zZWQoKXx8IWEuZXF1YWxzKGxbMF0pJiYhYS5lcXVhbHMobFtsLmxlbmd0aC0xXSk/YXQuaXNPbkxpbmUoYSxsKT93LklOVEVSSU9SOncuRVhURVJJT1I6dy5CT1VOREFSWX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEMmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgUXQpe3ZhciBjPWFyZ3VtZW50c1swXTtyZXR1cm4gYXJndW1lbnRzWzFdLmdldENvb3JkaW5hdGUoKS5lcXVhbHMyRChjKT93LklOVEVSSU9SOncuRVhURVJJT1J9fSxTaS5wcm90b3R5cGUubG9jYXRlSW5Qb2x5Z29uUmluZz1mdW5jdGlvbih0LGUpe3JldHVybiBlLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHQpP2F0LmxvY2F0ZVBvaW50SW5SaW5nKHQsZS5nZXRDb29yZGluYXRlcygpKTp3LkVYVEVSSU9SfSxTaS5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvY2F0ZSh0LGUpIT09dy5FWFRFUklPUn0sU2kucHJvdG90eXBlLnVwZGF0ZUxvY2F0aW9uSW5mbz1mdW5jdGlvbih0KXt0PT09dy5JTlRFUklPUiYmKHRoaXMuX2lzSW49ITApLHQ9PT13LkJPVU5EQVJZJiZ0aGlzLl9udW1Cb3VuZGFyaWVzKyt9LFNpLnByb3RvdHlwZS5jb21wdXRlTG9jYXRpb249ZnVuY3Rpb24odCxlKXtpZihlIGluc3RhbmNlb2YgUXQmJnRoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxlKSksZSBpbnN0YW5jZW9mIEt0KXRoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxlKSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgJHQpdGhpcy51cGRhdGVMb2NhdGlvbkluZm8odGhpcy5sb2NhdGVJbnRlcm5hbCh0LGUpKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBYdClmb3IodmFyIG49ZSxpPTA7aTxuLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPW4uZ2V0R2VvbWV0cnlOKGkpO3RoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxyKSl9ZWxzZSBpZihlIGluc3RhbmNlb2YgbmUpZm9yKHZhciBvPWUscz0wO3M8by5nZXROdW1HZW9tZXRyaWVzKCk7cysrKXt2YXIgYT1vLmdldEdlb21ldHJ5TihzKTt0aGlzLnVwZGF0ZUxvY2F0aW9uSW5mbyh0aGlzLmxvY2F0ZUludGVybmFsKHQsYSkpfWVsc2UgaWYoZSBpbnN0YW5jZW9mIHp0KWZvcih2YXIgdT1uZXcgVW4oZSk7dS5oYXNOZXh0KCk7KXt2YXIgbD11Lm5leHQoKTtsIT09ZSYmdGhpcy5jb21wdXRlTG9jYXRpb24odCxsKX19LFNpLnByb3RvdHlwZS5sb2NhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5pc0VtcHR5KCk/dy5FWFRFUklPUjplIGluc3RhbmNlb2YgS3Q/dGhpcy5sb2NhdGVJbnRlcm5hbCh0LGUpOmUgaW5zdGFuY2VvZiAkdD90aGlzLmxvY2F0ZUludGVybmFsKHQsZSk6KHRoaXMuX2lzSW49ITEsdGhpcy5fbnVtQm91bmRhcmllcz0wLHRoaXMuY29tcHV0ZUxvY2F0aW9uKHQsZSksdGhpcy5fYm91bmRhcnlSdWxlLmlzSW5Cb3VuZGFyeSh0aGlzLl9udW1Cb3VuZGFyaWVzKT93LkJPVU5EQVJZOnRoaXMuX251bUJvdW5kYXJpZXM+MHx8dGhpcy5faXNJbj93LklOVEVSSU9SOncuRVhURVJJT1IpfSxTaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sU2kucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFNpfTt2YXIgTGk9ZnVuY3Rpb24gdCgpe2lmKHRoaXMuX2NvbXBvbmVudD1udWxsLHRoaXMuX3NlZ0luZGV4PW51bGwsdGhpcy5fcHQ9bnVsbCwyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3QuY2FsbCh0aGlzLGUsdC5JTlNJREVfQVJFQSxuKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl07dGhpcy5fY29tcG9uZW50PWksdGhpcy5fc2VnSW5kZXg9cix0aGlzLl9wdD1vfX0sYmk9e0lOU0lERV9BUkVBOntjb25maWd1cmFibGU6ITB9fTtMaS5wcm90b3R5cGUuaXNJbnNpZGVBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlZ0luZGV4PT09TGkuSU5TSURFX0FSRUF9LExpLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3B0fSxMaS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlDb21wb25lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50fSxMaS5wcm90b3R5cGUuZ2V0U2VnbWVudEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlZ0luZGV4fSxMaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sTGkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIExpfSxiaS5JTlNJREVfQVJFQS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tMX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTGksYmkpO3ZhciB3aT1mdW5jdGlvbih0KXt0aGlzLl9wdHM9dHx8bnVsbH07d2kucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgUXQmJnRoaXMuX3B0cy5hZGQodCl9LHdpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltWdF19LHdpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB3aX0sd2kuZ2V0UG9pbnRzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdCBpbnN0YW5jZW9mIFF0PyRlLnNpbmdsZXRvbkxpc3QodCk6d2kuZ2V0UG9pbnRzKHQsbmV3IE50KX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3JldHVybiBlIGluc3RhbmNlb2YgUXQ/bi5hZGQoZSk6ZSBpbnN0YW5jZW9mIHp0JiZlLmFwcGx5KG5ldyB3aShuKSksbn19O3ZhciBPaT1mdW5jdGlvbigpe3RoaXMuX2xvY2F0aW9ucz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9sb2NhdGlvbnM9dH07T2kucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbih0KXsodCBpbnN0YW5jZW9mIFF0fHx0IGluc3RhbmNlb2YgS3R8fHQgaW5zdGFuY2VvZiAkdCkmJnRoaXMuX2xvY2F0aW9ucy5hZGQobmV3IExpKHQsMCx0LmdldENvb3JkaW5hdGUoKSkpfSxPaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bVnRdfSxPaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gT2l9LE9pLmdldExvY2F0aW9ucz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgTnQ7cmV0dXJuIHQuYXBwbHkobmV3IE9pKGUpKSxlfTt2YXIgVGk9ZnVuY3Rpb24oKXtpZih0aGlzLl9nZW9tPW51bGwsdGhpcy5fdGVybWluYXRlRGlzdGFuY2U9MCx0aGlzLl9wdExvY2F0b3I9bmV3IFNpLHRoaXMuX21pbkRpc3RhbmNlTG9jYXRpb249bnVsbCx0aGlzLl9taW5EaXN0YW5jZT12Lk1BWF9WQUxVRSwyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuX2dlb209W3QsZV0sdGhpcy5fdGVybWluYXRlRGlzdGFuY2U9MH1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl07dGhpcy5fZ2VvbT1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0aGlzLl9nZW9tWzBdPW4sdGhpcy5fZ2VvbVsxXT1pLHRoaXMuX3Rlcm1pbmF0ZURpc3RhbmNlPXJ9fTtUaS5wcm90b3R5cGUuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2U9ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9bmV3IEFycmF5KDIpLmZpbGwobnVsbCk7aWYodGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZSgwLHQpLHRoaXMuX21pbkRpc3RhbmNlPD10aGlzLl90ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gbnVsbDt0aGlzLmNvbXB1dGVDb250YWlubWVudERpc3RhbmNlKDEsdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9MS1lLHI9TmkuZ2V0UG9seWdvbnModGhpcy5fZ2VvbVtlXSk7aWYoci5zaXplKCk+MCl7dmFyIG89T2kuZ2V0TG9jYXRpb25zKHRoaXMuX2dlb21baV0pO2lmKHRoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UobyxyLG4pLHRoaXMuX21pbkRpc3RhbmNlPD10aGlzLl90ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gdGhpcy5fbWluRGlzdGFuY2VMb2NhdGlvbltpXT1uWzBdLHRoaXMuX21pbkRpc3RhbmNlTG9jYXRpb25bZV09blsxXSxudWxsfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgQXJyYXkmJlQoYXJndW1lbnRzWzBdLHh0KSYmVChhcmd1bWVudHNbMV0seHQpKXtmb3IodmFyIHM9YXJndW1lbnRzWzBdLGE9YXJndW1lbnRzWzFdLHU9YXJndW1lbnRzWzJdLGw9MDtsPHMuc2l6ZSgpO2wrKylmb3IodmFyIGM9cy5nZXQobCkscD0wO3A8YS5zaXplKCk7cCsrKWlmKHRoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoYyxhLmdldChwKSx1KSx0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9ZWxzZSBpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIEFycmF5JiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIExpJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mICR0KXt2YXIgaD1hcmd1bWVudHNbMF0sZj1hcmd1bWVudHNbMV0sZz1hcmd1bWVudHNbMl0sZD1oLmdldENvb3JkaW5hdGUoKTtpZih3LkVYVEVSSU9SIT09dGhpcy5fcHRMb2NhdG9yLmxvY2F0ZShkLGYpKXJldHVybiB0aGlzLl9taW5EaXN0YW5jZT0wLGdbMF09aCxnWzFdPW5ldyBMaShmLGQpLG51bGx9fSxUaS5wcm90b3R5cGUuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXNQb2ludHM9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT0wO2k8dC5zaXplKCk7aSsrKWZvcih2YXIgcj10LmdldChpKSxvPTA7bzxlLnNpemUoKTtvKyspe3ZhciBzPWUuZ2V0KG8pO2lmKHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlKHIscyxuKSx0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fSxUaS5wcm90b3R5cGUuY29tcHV0ZUZhY2V0RGlzdGFuY2U9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQXJyYXkoMikuZmlsbChudWxsKSxlPUNpLmdldExpbmVzKHRoaXMuX2dlb21bMF0pLG49Q2kuZ2V0TGluZXModGhpcy5fZ2VvbVsxXSksaT13aS5nZXRQb2ludHModGhpcy5fZ2VvbVswXSkscj13aS5nZXRQb2ludHModGhpcy5fZ2VvbVsxXSk7cmV0dXJuIHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXMoZSxuLHQpLHRoaXMudXBkYXRlTWluRGlzdGFuY2UodCwhMSksdGhpcy5fbWluRGlzdGFuY2U8PXRoaXMuX3Rlcm1pbmF0ZURpc3RhbmNlP251bGw6KHRbMF09bnVsbCx0WzFdPW51bGwsdGhpcy5jb21wdXRlTWluRGlzdGFuY2VMaW5lc1BvaW50cyhlLHIsdCksdGhpcy51cGRhdGVNaW5EaXN0YW5jZSh0LCExKSx0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2U/bnVsbDoodFswXT1udWxsLHRbMV09bnVsbCx0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZUxpbmVzUG9pbnRzKG4saSx0KSx0aGlzLnVwZGF0ZU1pbkRpc3RhbmNlKHQsITApLHRoaXMuX21pbkRpc3RhbmNlPD10aGlzLl90ZXJtaW5hdGVEaXN0YW5jZT9udWxsOih0WzBdPW51bGwsdFsxXT1udWxsLHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlUG9pbnRzKGkscix0KSx2b2lkIHRoaXMudXBkYXRlTWluRGlzdGFuY2UodCwhMSkpKSl9LFRpLnByb3RvdHlwZS5uZWFyZXN0TG9jYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlKCksdGhpcy5fbWluRGlzdGFuY2VMb2NhdGlvbn0sVGkucHJvdG90eXBlLnVwZGF0ZU1pbkRpc3RhbmNlPWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PXRbMF0pcmV0dXJuIG51bGw7ZT8odGhpcy5fbWluRGlzdGFuY2VMb2NhdGlvblswXT10WzFdLHRoaXMuX21pbkRpc3RhbmNlTG9jYXRpb25bMV09dFswXSk6KHRoaXMuX21pbkRpc3RhbmNlTG9jYXRpb25bMF09dFswXSx0aGlzLl9taW5EaXN0YW5jZUxvY2F0aW9uWzFdPXRbMV0pfSxUaS5wcm90b3R5cGUubmVhcmVzdFBvaW50cz1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZU1pbkRpc3RhbmNlKCk7cmV0dXJuW3RoaXMuX21pbkRpc3RhbmNlTG9jYXRpb25bMF0uZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuX21pbkRpc3RhbmNlTG9jYXRpb25bMV0uZ2V0Q29vcmRpbmF0ZSgpXX0sVGkucHJvdG90eXBlLmNvbXB1dGVNaW5EaXN0YW5jZT1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihudWxsIT09dGhpcy5fbWluRGlzdGFuY2VMb2NhdGlvbilyZXR1cm4gbnVsbDtpZih0aGlzLl9taW5EaXN0YW5jZUxvY2F0aW9uPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHRoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoKSx0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGw7dGhpcy5jb21wdXRlRmFjZXREaXN0YW5jZSgpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBLdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBRdCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO2lmKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKT50aGlzLl9taW5EaXN0YW5jZSlyZXR1cm4gbnVsbDtmb3IodmFyIGk9dC5nZXRDb29yZGluYXRlcygpLHI9ZS5nZXRDb29yZGluYXRlKCksbz0wO288aS5sZW5ndGgtMTtvKyspe3ZhciBzPWF0LmRpc3RhbmNlUG9pbnRMaW5lKHIsaVtvXSxpW28rMV0pO2lmKHM8dGhpcy5fbWluRGlzdGFuY2Upe3RoaXMuX21pbkRpc3RhbmNlPXM7dmFyIGE9bmV3IGRuKGlbb10saVtvKzFdKS5jbG9zZXN0UG9pbnQocik7blswXT1uZXcgTGkodCxvLGEpLG5bMV09bmV3IExpKGUsMCxyKX1pZih0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fWVsc2UgaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBLdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBLdCl7dmFyIHU9YXJndW1lbnRzWzBdLGw9YXJndW1lbnRzWzFdLGM9YXJndW1lbnRzWzJdO2lmKHUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKGwuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKT50aGlzLl9taW5EaXN0YW5jZSlyZXR1cm4gbnVsbDtmb3IodmFyIHA9dS5nZXRDb29yZGluYXRlcygpLGg9bC5nZXRDb29yZGluYXRlcygpLGY9MDtmPHAubGVuZ3RoLTE7ZisrKWZvcih2YXIgZz0wO2c8aC5sZW5ndGgtMTtnKyspe3ZhciBkPWF0LmRpc3RhbmNlTGluZUxpbmUocFtmXSxwW2YrMV0saFtnXSxoW2crMV0pO2lmKGQ8dGhpcy5fbWluRGlzdGFuY2Upe3RoaXMuX21pbkRpc3RhbmNlPWQ7dmFyIHk9bmV3IGRuKHBbZl0scFtmKzFdKSxfPW5ldyBkbihoW2ddLGhbZysxXSksbT15LmNsb3Nlc3RQb2ludHMoXyk7Y1swXT1uZXcgTGkodSxmLG1bMF0pLGNbMV09bmV3IExpKGwsZyxtWzFdKX1pZih0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fX0sVGkucHJvdG90eXBlLmNvbXB1dGVNaW5EaXN0YW5jZVBvaW50cz1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPTA7aTx0LnNpemUoKTtpKyspZm9yKHZhciByPXQuZ2V0KGkpLG89MDtvPGUuc2l6ZSgpO28rKyl7dmFyIHM9ZS5nZXQobyksYT1yLmdldENvb3JkaW5hdGUoKS5kaXN0YW5jZShzLmdldENvb3JkaW5hdGUoKSk7aWYoYTx0aGlzLl9taW5EaXN0YW5jZSYmKHRoaXMuX21pbkRpc3RhbmNlPWEsblswXT1uZXcgTGkociwwLHIuZ2V0Q29vcmRpbmF0ZSgpKSxuWzFdPW5ldyBMaShzLDAscy5nZXRDb29yZGluYXRlKCkpKSx0aGlzLl9taW5EaXN0YW5jZTw9dGhpcy5fdGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fSxUaS5wcm90b3R5cGUuZGlzdGFuY2U9ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5fZ2VvbVswXXx8bnVsbD09PXRoaXMuX2dlb21bMV0pdGhyb3cgbmV3IG0oXCJudWxsIGdlb21ldHJpZXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIHRoaXMuX2dlb21bMF0uaXNFbXB0eSgpfHx0aGlzLl9nZW9tWzFdLmlzRW1wdHkoKT8wOih0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZSgpLHRoaXMuX21pbkRpc3RhbmNlKX0sVGkucHJvdG90eXBlLmNvbXB1dGVNaW5EaXN0YW5jZUxpbmVzPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuc2l6ZSgpO2krKylmb3IodmFyIHI9dC5nZXQoaSksbz0wO288ZS5zaXplKCk7bysrKXt2YXIgcz1lLmdldChvKTtpZih0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZShyLHMsbiksdGhpcy5fbWluRGlzdGFuY2U8PXRoaXMuX3Rlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsfX0sVGkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFRpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBUaX0sVGkuZGlzdGFuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFRpKHQsZSkuZGlzdGFuY2UoKX0sVGkuaXNXaXRoaW5EaXN0YW5jZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyBUaSh0LGUsbikuZGlzdGFuY2UoKTw9bn0sVGkubmVhcmVzdFBvaW50cz1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgVGkodCxlKS5uZWFyZXN0UG9pbnRzKCl9O3ZhciBSaT1mdW5jdGlvbigpe3RoaXMuX3B0PVtuZXcgQyxuZXcgQ10sdGhpcy5fZGlzdGFuY2U9di5OYU4sdGhpcy5faXNOdWxsPSEwfTtSaS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHR9LFJpLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wdFt0XX0sUmkucHJvdG90eXBlLnNldE1pbmltdW09ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0TWluaW11bSh0Ll9wdFswXSx0Ll9wdFsxXSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO2lmKHRoaXMuX2lzTnVsbClyZXR1cm4gdGhpcy5pbml0aWFsaXplKGUsbiksbnVsbDt2YXIgaT1lLmRpc3RhbmNlKG4pO2k8dGhpcy5fZGlzdGFuY2UmJnRoaXMuaW5pdGlhbGl6ZShlLG4saSl9fSxSaS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMuX2lzTnVsbD0hMDtlbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5fcHRbMF0uc2V0Q29vcmRpbmF0ZSh0KSx0aGlzLl9wdFsxXS5zZXRDb29yZGluYXRlKGUpLHRoaXMuX2Rpc3RhbmNlPXQuZGlzdGFuY2UoZSksdGhpcy5faXNOdWxsPSExfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTt0aGlzLl9wdFswXS5zZXRDb29yZGluYXRlKG4pLHRoaXMuX3B0WzFdLnNldENvb3JkaW5hdGUoaSksdGhpcy5fZGlzdGFuY2U9cix0aGlzLl9pc051bGw9ITF9fSxSaS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gWi50b0xpbmVTdHJpbmcodGhpcy5fcHRbMF0sdGhpcy5fcHRbMV0pfSxSaS5wcm90b3R5cGUuZ2V0RGlzdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdGFuY2V9LFJpLnByb3RvdHlwZS5zZXRNYXhpbXVtPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNldE1heGltdW0odC5fcHRbMF0sdC5fcHRbMV0pfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtpZih0aGlzLl9pc051bGwpcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZShlLG4pLG51bGw7dmFyIGk9ZS5kaXN0YW5jZShuKTtpPnRoaXMuX2Rpc3RhbmNlJiZ0aGlzLmluaXRpYWxpemUoZSxuLGkpfX0sUmkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LFJpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBSaX07dmFyIFBpPWZ1bmN0aW9uKCl7fTtQaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sUGkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFBpfSxQaS5jb21wdXRlRGlzdGFuY2U9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIFJpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEt0JiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEMpZm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPW5ldyBkbixyPXQuZ2V0Q29vcmRpbmF0ZXMoKSxvPTA7bzxyLmxlbmd0aC0xO28rKyl7aS5zZXRDb29yZGluYXRlcyhyW29dLHJbbysxXSk7dmFyIHM9aS5jbG9zZXN0UG9pbnQoZSk7bi5zZXRNaW5pbXVtKHMsZSl9ZWxzZSBpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIFJpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mICR0JiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEMpe3ZhciBhPWFyZ3VtZW50c1swXSx1PWFyZ3VtZW50c1sxXSxsPWFyZ3VtZW50c1syXTtQaS5jb21wdXRlRGlzdGFuY2UoYS5nZXRFeHRlcmlvclJpbmcoKSx1LGwpO2Zvcih2YXIgYz0wO2M8YS5nZXROdW1JbnRlcmlvclJpbmcoKTtjKyspUGkuY29tcHV0ZURpc3RhbmNlKGEuZ2V0SW50ZXJpb3JSaW5nTihjKSx1LGwpfWVsc2UgaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBSaSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBDKXt2YXIgcD1hcmd1bWVudHNbMF0saD1hcmd1bWVudHNbMV0sZj1hcmd1bWVudHNbMl07aWYocCBpbnN0YW5jZW9mIEt0KVBpLmNvbXB1dGVEaXN0YW5jZShwLGgsZik7ZWxzZSBpZihwIGluc3RhbmNlb2YgJHQpUGkuY29tcHV0ZURpc3RhbmNlKHAsaCxmKTtlbHNlIGlmKHAgaW5zdGFuY2VvZiB6dClmb3IodmFyIGc9cCxkPTA7ZDxnLmdldE51bUdlb21ldHJpZXMoKTtkKyspe3ZhciB5PWcuZ2V0R2VvbWV0cnlOKGQpO1BpLmNvbXB1dGVEaXN0YW5jZSh5LGgsZil9ZWxzZSBmLnNldE1pbmltdW0ocC5nZXRDb29yZGluYXRlKCksaCl9ZWxzZSBpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIFJpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGRuJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEMpe3ZhciBfPWFyZ3VtZW50c1swXSxtPWFyZ3VtZW50c1sxXSx2PWFyZ3VtZW50c1syXSxJPV8uY2xvc2VzdFBvaW50KG0pO3Yuc2V0TWluaW11bShJLG0pfX07dmFyIERpPWZ1bmN0aW9uKCl7dGhpcy5fZzA9bnVsbCx0aGlzLl9nMT1udWxsLHRoaXMuX3B0RGlzdD1uZXcgUmksdGhpcy5fZGVuc2lmeUZyYWM9MDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5fZzA9dCx0aGlzLl9nMT1lfSxNaT17TWF4UG9pbnREaXN0YW5jZUZpbHRlcjp7Y29uZmlndXJhYmxlOiEwfSxNYXhEZW5zaWZpZWRCeUZyYWN0aW9uRGlzdGFuY2VGaWx0ZXI6e2NvbmZpZ3VyYWJsZTohMH19O0RpLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdERpc3QuZ2V0Q29vcmRpbmF0ZXMoKX0sRGkucHJvdG90eXBlLnNldERlbnNpZnlGcmFjdGlvbj1mdW5jdGlvbih0KXtpZih0PjF8fHQ8PTApdGhyb3cgbmV3IG0oXCJGcmFjdGlvbiBpcyBub3QgaW4gcmFuZ2UgKDAuMCAtIDEuMF1cIik7dGhpcy5fZGVuc2lmeUZyYWM9dH0sRGkucHJvdG90eXBlLmNvbXB1dGU9ZnVuY3Rpb24odCxlKXt0aGlzLmNvbXB1dGVPcmllbnRlZERpc3RhbmNlKHQsZSx0aGlzLl9wdERpc3QpLHRoaXMuY29tcHV0ZU9yaWVudGVkRGlzdGFuY2UoZSx0LHRoaXMuX3B0RGlzdCl9LERpLnByb3RvdHlwZS5kaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXB1dGUodGhpcy5fZzAsdGhpcy5fZzEpLHRoaXMuX3B0RGlzdC5nZXREaXN0YW5jZSgpfSxEaS5wcm90b3R5cGUuY29tcHV0ZU9yaWVudGVkRGlzdGFuY2U9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBBaShlKTtpZih0LmFwcGx5KGkpLG4uc2V0TWF4aW11bShpLmdldE1heFBvaW50RGlzdGFuY2UoKSksdGhpcy5fZGVuc2lmeUZyYWM+MCl7dmFyIHI9bmV3IEZpKGUsdGhpcy5fZGVuc2lmeUZyYWMpO3QuYXBwbHkociksbi5zZXRNYXhpbXVtKHIuZ2V0TWF4UG9pbnREaXN0YW5jZSgpKX19LERpLnByb3RvdHlwZS5vcmllbnRlZERpc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZU9yaWVudGVkRGlzdGFuY2UodGhpcy5fZzAsdGhpcy5fZzEsdGhpcy5fcHREaXN0KSx0aGlzLl9wdERpc3QuZ2V0RGlzdGFuY2UoKX0sRGkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LERpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBEaX0sRGkuZGlzdGFuY2U9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiBuZXcgRGkodCxlKS5kaXN0YW5jZSgpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl0sbz1uZXcgRGkobixpKTtyZXR1cm4gby5zZXREZW5zaWZ5RnJhY3Rpb24ociksby5kaXN0YW5jZSgpfX0sTWkuTWF4UG9pbnREaXN0YW5jZUZpbHRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gQWl9LE1pLk1heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gRml9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKERpLE1pKTt2YXIgQWk9ZnVuY3Rpb24oKXt0aGlzLl9tYXhQdERpc3Q9bmV3IFJpLHRoaXMuX21pblB0RGlzdD1uZXcgUmksdGhpcy5fZXVjbGlkZWFuRGlzdD1uZXcgUGksdGhpcy5fZ2VvbT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9nZW9tPXR9O0FpLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7dGhpcy5fbWluUHREaXN0LmluaXRpYWxpemUoKSxQaS5jb21wdXRlRGlzdGFuY2UodGhpcy5fZ2VvbSx0LHRoaXMuX21pblB0RGlzdCksdGhpcy5fbWF4UHREaXN0LnNldE1heGltdW0odGhpcy5fbWluUHREaXN0KX0sQWkucHJvdG90eXBlLmdldE1heFBvaW50RGlzdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4UHREaXN0fSxBaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bZnRdfSxBaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gQWl9O3ZhciBGaT1mdW5jdGlvbigpe3RoaXMuX21heFB0RGlzdD1uZXcgUmksdGhpcy5fbWluUHREaXN0PW5ldyBSaSx0aGlzLl9nZW9tPW51bGwsdGhpcy5fbnVtU3ViU2Vncz0wO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLl9nZW9tPXQsdGhpcy5fbnVtU3ViU2Vncz1NYXRoLnRydW5jKE1hdGgucm91bmQoMS9lKSl9O0ZpLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCxlKXtpZigwPT09ZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49dC5nZXRDb29yZGluYXRlKGUtMSksaT10LmdldENvb3JkaW5hdGUoZSkscj0oaS54LW4ueCkvdGhpcy5fbnVtU3ViU2VncyxvPShpLnktbi55KS90aGlzLl9udW1TdWJTZWdzLHM9MDtzPHRoaXMuX251bVN1YlNlZ3M7cysrKXt2YXIgYT1uLngrcypyLHU9bi55K3MqbyxsPW5ldyBDKGEsdSk7dGhpcy5fbWluUHREaXN0LmluaXRpYWxpemUoKSxQaS5jb21wdXRlRGlzdGFuY2UodGhpcy5fZ2VvbSxsLHRoaXMuX21pblB0RGlzdCksdGhpcy5fbWF4UHREaXN0LnNldE1heGltdW0odGhpcy5fbWluUHREaXN0KX19LEZpLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sRmkucHJvdG90eXBlLmlzR2VvbWV0cnlDaGFuZ2VkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LEZpLnByb3RvdHlwZS5nZXRNYXhQb2ludERpc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heFB0RGlzdH0sRmkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1V0XX0sRmkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEZpfTt2YXIgR2k9ZnVuY3Rpb24odCxlLG4pe3RoaXMuX21pblZhbGlkRGlzdGFuY2U9bnVsbCx0aGlzLl9tYXhWYWxpZERpc3RhbmNlPW51bGwsdGhpcy5fbWluRGlzdGFuY2VGb3VuZD1udWxsLHRoaXMuX21heERpc3RhbmNlRm91bmQ9bnVsbCx0aGlzLl9pc1ZhbGlkPSEwLHRoaXMuX2Vyck1zZz1udWxsLHRoaXMuX2Vycm9yTG9jYXRpb249bnVsbCx0aGlzLl9lcnJvckluZGljYXRvcj1udWxsLHRoaXMuX2lucHV0PXR8fG51bGwsdGhpcy5fYnVmRGlzdGFuY2U9ZXx8bnVsbCx0aGlzLl9yZXN1bHQ9bnx8bnVsbH0scWk9e1ZFUkJPU0U6e2NvbmZpZ3VyYWJsZTohMH0sTUFYX0RJU1RBTkNFX0RJRkZfRlJBQzp7Y29uZmlndXJhYmxlOiEwfX07R2kucHJvdG90eXBlLmNoZWNrTWF4aW11bURpc3RhbmNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uZXcgRGkoZSx0KTtpZihpLnNldERlbnNpZnlGcmFjdGlvbiguMjUpLHRoaXMuX21heERpc3RhbmNlRm91bmQ9aS5vcmllbnRlZERpc3RhbmNlKCksdGhpcy5fbWF4RGlzdGFuY2VGb3VuZD5uKXt0aGlzLl9pc1ZhbGlkPSExO3ZhciByPWkuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLl9lcnJvckxvY2F0aW9uPXJbMV0sdGhpcy5fZXJyb3JJbmRpY2F0b3I9dC5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhyKSx0aGlzLl9lcnJNc2c9XCJEaXN0YW5jZSBiZXR3ZWVuIGJ1ZmZlciBjdXJ2ZSBhbmQgaW5wdXQgaXMgdG9vIGxhcmdlIChcIit0aGlzLl9tYXhEaXN0YW5jZUZvdW5kK1wiIGF0IFwiK1oudG9MaW5lU3RyaW5nKHJbMF0sclsxXSkrXCIpXCJ9fSxHaS5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbigpe3ZhciB0PU1hdGguYWJzKHRoaXMuX2J1ZkRpc3RhbmNlKSxlPUdpLk1BWF9ESVNUQU5DRV9ESUZGX0ZSQUMqdDtyZXR1cm4gdGhpcy5fbWluVmFsaWREaXN0YW5jZT10LWUsdGhpcy5fbWF4VmFsaWREaXN0YW5jZT10K2UsISghdGhpcy5faW5wdXQuaXNFbXB0eSgpJiYhdGhpcy5fcmVzdWx0LmlzRW1wdHkoKSl8fCh0aGlzLl9idWZEaXN0YW5jZT4wP3RoaXMuY2hlY2tQb3NpdGl2ZVZhbGlkKCk6dGhpcy5jaGVja05lZ2F0aXZlVmFsaWQoKSxHaS5WRVJCT1NFJiZZLm91dC5wcmludGxuKFwiTWluIERpc3Q9IFwiK3RoaXMuX21pbkRpc3RhbmNlRm91bmQrXCIgIGVycj0gXCIrKDEtdGhpcy5fbWluRGlzdGFuY2VGb3VuZC90aGlzLl9idWZEaXN0YW5jZSkrXCIgIE1heCBEaXN0PSBcIit0aGlzLl9tYXhEaXN0YW5jZUZvdW5kK1wiICBlcnI9IFwiKyh0aGlzLl9tYXhEaXN0YW5jZUZvdW5kL3RoaXMuX2J1ZkRpc3RhbmNlLTEpKSx0aGlzLl9pc1ZhbGlkKX0sR2kucHJvdG90eXBlLmNoZWNrTmVnYXRpdmVWYWxpZD1mdW5jdGlvbigpe2lmKCEodGhpcy5faW5wdXQgaW5zdGFuY2VvZiAkdHx8dGhpcy5faW5wdXQgaW5zdGFuY2VvZiBuZXx8dGhpcy5faW5wdXQgaW5zdGFuY2VvZiB6dCkpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5nZXRQb2x5Z29uTGluZXModGhpcy5faW5wdXQpO2lmKHRoaXMuY2hlY2tNaW5pbXVtRGlzdGFuY2UodCx0aGlzLl9yZXN1bHQsdGhpcy5fbWluVmFsaWREaXN0YW5jZSksIXRoaXMuX2lzVmFsaWQpcmV0dXJuIG51bGw7dGhpcy5jaGVja01heGltdW1EaXN0YW5jZSh0LHRoaXMuX3Jlc3VsdCx0aGlzLl9tYXhWYWxpZERpc3RhbmNlKX0sR2kucHJvdG90eXBlLmdldEVycm9ySW5kaWNhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9ySW5kaWNhdG9yfSxHaS5wcm90b3R5cGUuY2hlY2tNaW5pbXVtRGlzdGFuY2U9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBUaSh0LGUsbik7aWYodGhpcy5fbWluRGlzdGFuY2VGb3VuZD1pLmRpc3RhbmNlKCksdGhpcy5fbWluRGlzdGFuY2VGb3VuZDxuKXt0aGlzLl9pc1ZhbGlkPSExO3ZhciByPWkubmVhcmVzdFBvaW50cygpO3RoaXMuX2Vycm9yTG9jYXRpb249aS5uZWFyZXN0UG9pbnRzKClbMV0sdGhpcy5fZXJyb3JJbmRpY2F0b3I9dC5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhyKSx0aGlzLl9lcnJNc2c9XCJEaXN0YW5jZSBiZXR3ZWVuIGJ1ZmZlciBjdXJ2ZSBhbmQgaW5wdXQgaXMgdG9vIHNtYWxsIChcIit0aGlzLl9taW5EaXN0YW5jZUZvdW5kK1wiIGF0IFwiK1oudG9MaW5lU3RyaW5nKHJbMF0sclsxXSkrXCIgKVwifX0sR2kucHJvdG90eXBlLmNoZWNrUG9zaXRpdmVWYWxpZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Jlc3VsdC5nZXRCb3VuZGFyeSgpO2lmKHRoaXMuY2hlY2tNaW5pbXVtRGlzdGFuY2UodGhpcy5faW5wdXQsdCx0aGlzLl9taW5WYWxpZERpc3RhbmNlKSwhdGhpcy5faXNWYWxpZClyZXR1cm4gbnVsbDt0aGlzLmNoZWNrTWF4aW11bURpc3RhbmNlKHRoaXMuX2lucHV0LHQsdGhpcy5fbWF4VmFsaWREaXN0YW5jZSl9LEdpLnByb3RvdHlwZS5nZXRFcnJvckxvY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9yTG9jYXRpb259LEdpLnByb3RvdHlwZS5nZXRQb2x5Z29uTGluZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBOdCxuPW5ldyBDaShlKSxpPU5pLmdldFBvbHlnb25zKHQpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXtpLm5leHQoKS5hcHBseShuKX1yZXR1cm4gdC5nZXRGYWN0b3J5KCkuYnVpbGRHZW9tZXRyeShlKX0sR2kucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJNc2d9LEdpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxHaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gR2l9LHFpLlZFUkJPU0UuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LHFpLk1BWF9ESVNUQU5DRV9ESUZGX0ZSQUMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuLjAxMn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR2kscWkpO3ZhciBCaT1mdW5jdGlvbih0LGUsbil7dGhpcy5faXNWYWxpZD0hMCx0aGlzLl9lcnJvck1zZz1udWxsLHRoaXMuX2Vycm9yTG9jYXRpb249bnVsbCx0aGlzLl9lcnJvckluZGljYXRvcj1udWxsLHRoaXMuX2lucHV0PXR8fG51bGwsdGhpcy5fZGlzdGFuY2U9ZXx8bnVsbCx0aGlzLl9yZXN1bHQ9bnx8bnVsbH0sVmk9e1ZFUkJPU0U6e2NvbmZpZ3VyYWJsZTohMH0sTUFYX0VOVl9ESUZGX0ZSQUM6e2NvbmZpZ3VyYWJsZTohMH19O0JpLnByb3RvdHlwZS5pc1ZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tQb2x5Z29uYWwoKSx0aGlzLl9pc1ZhbGlkPyh0aGlzLmNoZWNrRXhwZWN0ZWRFbXB0eSgpLHRoaXMuX2lzVmFsaWQ/KHRoaXMuY2hlY2tFbnZlbG9wZSgpLHRoaXMuX2lzVmFsaWQ/KHRoaXMuY2hlY2tBcmVhKCksdGhpcy5faXNWYWxpZD8odGhpcy5jaGVja0Rpc3RhbmNlKCksdGhpcy5faXNWYWxpZCk6dGhpcy5faXNWYWxpZCk6dGhpcy5faXNWYWxpZCk6dGhpcy5faXNWYWxpZCk6dGhpcy5faXNWYWxpZH0sQmkucHJvdG90eXBlLmNoZWNrRW52ZWxvcGU9ZnVuY3Rpb24oKXtpZih0aGlzLl9kaXN0YW5jZTwwKXJldHVybiBudWxsO3ZhciB0PXRoaXMuX2Rpc3RhbmNlKkJpLk1BWF9FTlZfRElGRl9GUkFDOzA9PT10JiYodD0uMDAxKTt2YXIgZT1uZXcgaih0aGlzLl9pbnB1dC5nZXRFbnZlbG9wZUludGVybmFsKCkpO2UuZXhwYW5kQnkodGhpcy5fZGlzdGFuY2UpO3ZhciBuPW5ldyBqKHRoaXMuX3Jlc3VsdC5nZXRFbnZlbG9wZUludGVybmFsKCkpO24uZXhwYW5kQnkodCksbi5jb250YWlucyhlKXx8KHRoaXMuX2lzVmFsaWQ9ITEsdGhpcy5fZXJyb3JNc2c9XCJCdWZmZXIgZW52ZWxvcGUgaXMgaW5jb3JyZWN0XCIsdGhpcy5fZXJyb3JJbmRpY2F0b3I9dGhpcy5faW5wdXQuZ2V0RmFjdG9yeSgpLnRvR2VvbWV0cnkobikpLHRoaXMucmVwb3J0KFwiRW52ZWxvcGVcIil9LEJpLnByb3RvdHlwZS5jaGVja0Rpc3RhbmNlPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEdpKHRoaXMuX2lucHV0LHRoaXMuX2Rpc3RhbmNlLHRoaXMuX3Jlc3VsdCk7dC5pc1ZhbGlkKCl8fCh0aGlzLl9pc1ZhbGlkPSExLHRoaXMuX2Vycm9yTXNnPXQuZ2V0RXJyb3JNZXNzYWdlKCksdGhpcy5fZXJyb3JMb2NhdGlvbj10LmdldEVycm9yTG9jYXRpb24oKSx0aGlzLl9lcnJvckluZGljYXRvcj10LmdldEVycm9ySW5kaWNhdG9yKCkpLHRoaXMucmVwb3J0KFwiRGlzdGFuY2VcIil9LEJpLnByb3RvdHlwZS5jaGVja0FyZWE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9pbnB1dC5nZXRBcmVhKCksZT10aGlzLl9yZXN1bHQuZ2V0QXJlYSgpO3RoaXMuX2Rpc3RhbmNlPjAmJnQ+ZSYmKHRoaXMuX2lzVmFsaWQ9ITEsdGhpcy5fZXJyb3JNc2c9XCJBcmVhIG9mIHBvc2l0aXZlIGJ1ZmZlciBpcyBzbWFsbGVyIHRoYW4gaW5wdXRcIix0aGlzLl9lcnJvckluZGljYXRvcj10aGlzLl9yZXN1bHQpLHRoaXMuX2Rpc3RhbmNlPDAmJnQ8ZSYmKHRoaXMuX2lzVmFsaWQ9ITEsdGhpcy5fZXJyb3JNc2c9XCJBcmVhIG9mIG5lZ2F0aXZlIGJ1ZmZlciBpcyBsYXJnZXIgdGhhbiBpbnB1dFwiLHRoaXMuX2Vycm9ySW5kaWNhdG9yPXRoaXMuX3Jlc3VsdCksdGhpcy5yZXBvcnQoXCJBcmVhXCIpfSxCaS5wcm90b3R5cGUuY2hlY2tQb2x5Z29uYWw9ZnVuY3Rpb24oKXt0aGlzLl9yZXN1bHQgaW5zdGFuY2VvZiAkdHx8dGhpcy5fcmVzdWx0IGluc3RhbmNlb2YgbmV8fCh0aGlzLl9pc1ZhbGlkPSExKSx0aGlzLl9lcnJvck1zZz1cIlJlc3VsdCBpcyBub3QgcG9seWdvbmFsXCIsdGhpcy5fZXJyb3JJbmRpY2F0b3I9dGhpcy5fcmVzdWx0LHRoaXMucmVwb3J0KFwiUG9seWdvbmFsXCIpfSxCaS5wcm90b3R5cGUuZ2V0RXJyb3JJbmRpY2F0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JJbmRpY2F0b3J9LEJpLnByb3RvdHlwZS5nZXRFcnJvckxvY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9yTG9jYXRpb259LEJpLnByb3RvdHlwZS5jaGVja0V4cGVjdGVkRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5wdXQuZ2V0RGltZW5zaW9uKCk+PTI/bnVsbDp0aGlzLl9kaXN0YW5jZT4wP251bGw6KHRoaXMuX3Jlc3VsdC5pc0VtcHR5KCl8fCh0aGlzLl9pc1ZhbGlkPSExLHRoaXMuX2Vycm9yTXNnPVwiUmVzdWx0IGlzIG5vbi1lbXB0eVwiLHRoaXMuX2Vycm9ySW5kaWNhdG9yPXRoaXMuX3Jlc3VsdCksdm9pZCB0aGlzLnJlcG9ydChcIkV4cGVjdGVkRW1wdHlcIikpfSxCaS5wcm90b3R5cGUucmVwb3J0PWZ1bmN0aW9uKHQpe2lmKCFCaS5WRVJCT1NFKXJldHVybiBudWxsO1kub3V0LnByaW50bG4oXCJDaGVjayBcIit0K1wiOiBcIisodGhpcy5faXNWYWxpZD9cInBhc3NlZFwiOlwiRkFJTEVEXCIpKX0sQmkucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvck1zZ30sQmkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LEJpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBCaX0sQmkuaXNWYWxpZE1zZz1mdW5jdGlvbih0LGUsbil7dmFyIGk9bmV3IEJpKHQsZSxuKTtyZXR1cm4gaS5pc1ZhbGlkKCk/bnVsbDppLmdldEVycm9yTWVzc2FnZSgpfSxCaS5pc1ZhbGlkPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hIW5ldyBCaSh0LGUsbikuaXNWYWxpZCgpfSxWaS5WRVJCT1NFLmdldD1mdW5jdGlvbigpe3JldHVybiExfSxWaS5NQVhfRU5WX0RJRkZfRlJBQy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4uMDEyfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhCaSxWaSk7dmFyIFVpPWZ1bmN0aW9uKCl7dGhpcy5fcHRzPW51bGwsdGhpcy5fZGF0YT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLl9wdHM9dCx0aGlzLl9kYXRhPWV9O1VpLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdHN9LFVpLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3B0cy5sZW5ndGh9LFVpLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wdHNbdF19LFVpLnByb3RvdHlwZS5pc0Nsb3NlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdHNbMF0uZXF1YWxzKHRoaXMuX3B0c1t0aGlzLl9wdHMubGVuZ3RoLTFdKX0sVWkucHJvdG90eXBlLmdldFNlZ21lbnRPY3RhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLl9wdHMubGVuZ3RoLTE/LTE6cG4ub2N0YW50KHRoaXMuZ2V0Q29vcmRpbmF0ZSh0KSx0aGlzLmdldENvb3JkaW5hdGUodCsxKSl9LFVpLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKHQpe3RoaXMuX2RhdGE9dH0sVWkucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX0sVWkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIFoudG9MaW5lU3RyaW5nKG5ldyB1ZSh0aGlzLl9wdHMpKX0sVWkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW2huXX0sVWkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFVpfTt2YXIgemk9ZnVuY3Rpb24oKXt0aGlzLl9maW5kQWxsSW50ZXJzZWN0aW9ucz0hMSx0aGlzLl9pc0NoZWNrRW5kU2VnbWVudHNPbmx5PSExLHRoaXMuX2xpPW51bGwsdGhpcy5faW50ZXJpb3JJbnRlcnNlY3Rpb249bnVsbCx0aGlzLl9pbnRTZWdtZW50cz1udWxsLHRoaXMuX2ludGVyc2VjdGlvbnM9bmV3IE50LHRoaXMuX2ludGVyc2VjdGlvbkNvdW50PTAsdGhpcy5fa2VlcEludGVyc2VjdGlvbnM9ITA7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2xpPXQsdGhpcy5faW50ZXJpb3JJbnRlcnNlY3Rpb249bnVsbH07emkucHJvdG90eXBlLmdldEludGVyaW9ySW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludGVyaW9ySW50ZXJzZWN0aW9ufSx6aS5wcm90b3R5cGUuc2V0Q2hlY2tFbmRTZWdtZW50c09ubHk9ZnVuY3Rpb24odCl7dGhpcy5faXNDaGVja0VuZFNlZ21lbnRzT25seT10fSx6aS5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0aW9uU2VnbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW50U2VnbWVudHN9LHppLnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcnNlY3Rpb25Db3VudH0semkucHJvdG90eXBlLmdldEludGVyc2VjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW50ZXJzZWN0aW9uc30semkucHJvdG90eXBlLnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX2ZpbmRBbGxJbnRlcnNlY3Rpb25zPXR9LHppLnByb3RvdHlwZS5zZXRLZWVwSW50ZXJzZWN0aW9ucz1mdW5jdGlvbih0KXt0aGlzLl9rZWVwSW50ZXJzZWN0aW9ucz10fSx6aS5wcm90b3R5cGUucHJvY2Vzc0ludGVyc2VjdGlvbnM9ZnVuY3Rpb24odCxlLG4saSl7aWYoIXRoaXMuX2ZpbmRBbGxJbnRlcnNlY3Rpb25zJiZ0aGlzLmhhc0ludGVyc2VjdGlvbigpKXJldHVybiBudWxsO2lmKHQ9PT1uJiZlPT09aSlyZXR1cm4gbnVsbDtpZih0aGlzLl9pc0NoZWNrRW5kU2VnbWVudHNPbmx5KXtpZighKHRoaXMuaXNFbmRTZWdtZW50KHQsZSl8fHRoaXMuaXNFbmRTZWdtZW50KG4saSkpKXJldHVybiBudWxsfXZhciByPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlXSxvPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlKzFdLHM9bi5nZXRDb29yZGluYXRlcygpW2ldLGE9bi5nZXRDb29yZGluYXRlcygpW2krMV07dGhpcy5fbGkuY29tcHV0ZUludGVyc2VjdGlvbihyLG8scyxhKSx0aGlzLl9saS5oYXNJbnRlcnNlY3Rpb24oKSYmdGhpcy5fbGkuaXNJbnRlcmlvckludGVyc2VjdGlvbigpJiYodGhpcy5faW50U2VnbWVudHM9bmV3IEFycmF5KDQpLmZpbGwobnVsbCksdGhpcy5faW50U2VnbWVudHNbMF09cix0aGlzLl9pbnRTZWdtZW50c1sxXT1vLHRoaXMuX2ludFNlZ21lbnRzWzJdPXMsdGhpcy5faW50U2VnbWVudHNbM109YSx0aGlzLl9pbnRlcmlvckludGVyc2VjdGlvbj10aGlzLl9saS5nZXRJbnRlcnNlY3Rpb24oMCksdGhpcy5fa2VlcEludGVyc2VjdGlvbnMmJnRoaXMuX2ludGVyc2VjdGlvbnMuYWRkKHRoaXMuX2ludGVyaW9ySW50ZXJzZWN0aW9uKSx0aGlzLl9pbnRlcnNlY3Rpb25Db3VudCsrKX0semkucHJvdG90eXBlLmlzRW5kU2VnbWVudD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT09ZXx8ZT49dC5zaXplKCktMn0semkucHJvdG90eXBlLmhhc0ludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5faW50ZXJpb3JJbnRlcnNlY3Rpb259LHppLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fZmluZEFsbEludGVyc2VjdGlvbnMmJm51bGwhPT10aGlzLl9pbnRlcmlvckludGVyc2VjdGlvbn0semkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1duXX0semkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHppfSx6aS5jcmVhdGVBbGxJbnRlcnNlY3Rpb25zRmluZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB6aSh0KTtyZXR1cm4gZS5zZXRGaW5kQWxsSW50ZXJzZWN0aW9ucyghMCksZX0semkuY3JlYXRlQW55SW50ZXJzZWN0aW9uRmluZGVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgemkodCl9LHppLmNyZWF0ZUludGVyc2VjdGlvbkNvdW50ZXI9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHppKHQpO3JldHVybiBlLnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zKCEwKSxlLnNldEtlZXBJbnRlcnNlY3Rpb25zKCExKSxlfTt2YXIgWGk9ZnVuY3Rpb24oKXt0aGlzLl9saT1uZXcgcnQsdGhpcy5fc2VnU3RyaW5ncz1udWxsLHRoaXMuX2ZpbmRBbGxJbnRlcnNlY3Rpb25zPSExLHRoaXMuX3NlZ0ludD1udWxsLHRoaXMuX2lzVmFsaWQ9ITA7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX3NlZ1N0cmluZ3M9dH07WGkucHJvdG90eXBlLmV4ZWN1dGU9ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5fc2VnSW50KXJldHVybiBudWxsO3RoaXMuY2hlY2tJbnRlcmlvckludGVyc2VjdGlvbnMoKX0sWGkucHJvdG90eXBlLmdldEludGVyc2VjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VnSW50LmdldEludGVyc2VjdGlvbnMoKX0sWGkucHJvdG90eXBlLmlzVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leGVjdXRlKCksdGhpcy5faXNWYWxpZH0sWGkucHJvdG90eXBlLnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX2ZpbmRBbGxJbnRlcnNlY3Rpb25zPXR9LFhpLnByb3RvdHlwZS5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe3RoaXMuX2lzVmFsaWQ9ITAsdGhpcy5fc2VnSW50PW5ldyB6aSh0aGlzLl9saSksdGhpcy5fc2VnSW50LnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zKHRoaXMuX2ZpbmRBbGxJbnRlcnNlY3Rpb25zKTt2YXIgdD1uZXcgeG47aWYodC5zZXRTZWdtZW50SW50ZXJzZWN0b3IodGhpcy5fc2VnSW50KSx0LmNvbXB1dGVOb2Rlcyh0aGlzLl9zZWdTdHJpbmdzKSx0aGlzLl9zZWdJbnQuaGFzSW50ZXJzZWN0aW9uKCkpcmV0dXJuIHRoaXMuX2lzVmFsaWQ9ITEsbnVsbH0sWGkucHJvdG90eXBlLmNoZWNrVmFsaWQ9ZnVuY3Rpb24oKXtpZih0aGlzLmV4ZWN1dGUoKSwhdGhpcy5faXNWYWxpZCl0aHJvdyBuZXcgd2UodGhpcy5nZXRFcnJvck1lc3NhZ2UoKSx0aGlzLl9zZWdJbnQuZ2V0SW50ZXJpb3JJbnRlcnNlY3Rpb24oKSl9LFhpLnByb3RvdHlwZS5nZXRFcnJvck1lc3NhZ2U9ZnVuY3Rpb24oKXtpZih0aGlzLl9pc1ZhbGlkKXJldHVyblwibm8gaW50ZXJzZWN0aW9ucyBmb3VuZFwiO3ZhciB0PXRoaXMuX3NlZ0ludC5nZXRJbnRlcnNlY3Rpb25TZWdtZW50cygpO3JldHVyblwiZm91bmQgbm9uLW5vZGVkIGludGVyc2VjdGlvbiBiZXR3ZWVuIFwiK1oudG9MaW5lU3RyaW5nKHRbMF0sdFsxXSkrXCIgYW5kIFwiK1oudG9MaW5lU3RyaW5nKHRbMl0sdFszXSl9LFhpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxYaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gWGl9LFhpLmNvbXB1dGVJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBYaSh0KTtyZXR1cm4gZS5zZXRGaW5kQWxsSW50ZXJzZWN0aW9ucyghMCksZS5pc1ZhbGlkKCksZS5nZXRJbnRlcnNlY3Rpb25zKCl9O3ZhciBZaT1mdW5jdGlvbiB0KCl7dGhpcy5fbnY9bnVsbDt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5fbnY9bmV3IFhpKHQudG9TZWdtZW50U3RyaW5ncyhlKSl9O1lpLnByb3RvdHlwZS5jaGVja1ZhbGlkPWZ1bmN0aW9uKCl7dGhpcy5fbnYuY2hlY2tWYWxpZCgpfSxZaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sWWkucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFlpfSxZaS50b1NlZ21lbnRTdHJpbmdzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgTnQsbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtlLmFkZChuZXcgVWkoaS5nZXRDb29yZGluYXRlcygpLGkpKX1yZXR1cm4gZX0sWWkuY2hlY2tWYWxpZD1mdW5jdGlvbih0KXtuZXcgWWkodCkuY2hlY2tWYWxpZCgpfTt2YXIga2k9ZnVuY3Rpb24odCl7dGhpcy5fbWFwT3A9dH07a2kucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IE50LG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dGhpcy5fbWFwT3AubWFwKHQuZ2V0R2VvbWV0cnlOKG4pKTtpLmlzRW1wdHkoKXx8ZS5hZGQoaSl9cmV0dXJuIHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihfZS50b0dlb21ldHJ5QXJyYXkoZSkpfSxraS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sa2kucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGtpfSxraS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGtpKGUpLm1hcCh0KX07dmFyIGppPWZ1bmN0aW9uKCl7dGhpcy5fb3A9bnVsbCx0aGlzLl9nZW9tZXRyeUZhY3Rvcnk9bnVsbCx0aGlzLl9wdExvY2F0b3I9bnVsbCx0aGlzLl9saW5lRWRnZXNMaXN0PW5ldyBOdCx0aGlzLl9yZXN1bHRMaW5lTGlzdD1uZXcgTnQ7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuX29wPXQsdGhpcy5fZ2VvbWV0cnlGYWN0b3J5PWUsdGhpcy5fcHRMb2NhdG9yPW59O2ppLnByb3RvdHlwZS5jb2xsZWN0TGluZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX29wLmdldEdyYXBoKCkuZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5jb2xsZWN0TGluZUVkZ2Uobix0LHRoaXMuX2xpbmVFZGdlc0xpc3QpLHRoaXMuY29sbGVjdEJvdW5kYXJ5VG91Y2hFZGdlKG4sdCx0aGlzLl9saW5lRWRnZXNMaXN0KX19LGppLnByb3RvdHlwZS5sYWJlbElzb2xhdGVkTGluZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3B0TG9jYXRvci5sb2NhdGUodC5nZXRDb29yZGluYXRlKCksdGhpcy5fb3AuZ2V0QXJnR2VvbWV0cnkoZSkpO3QuZ2V0TGFiZWwoKS5zZXRMb2NhdGlvbihlLG4pfSxqaS5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmluZENvdmVyZWRMaW5lRWRnZXMoKSx0aGlzLmNvbGxlY3RMaW5lcyh0KSx0aGlzLmJ1aWxkTGluZXModCksdGhpcy5fcmVzdWx0TGluZUxpc3R9LGppLnByb3RvdHlwZS5jb2xsZWN0TGluZUVkZ2U9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuZ2V0TGFiZWwoKSxyPXQuZ2V0RWRnZSgpO3QuaXNMaW5lRWRnZSgpJiYodC5pc1Zpc2l0ZWQoKXx8IUxyLmlzUmVzdWx0T2ZPcChpLGUpfHxyLmlzQ292ZXJlZCgpfHwobi5hZGQociksdC5zZXRWaXNpdGVkRWRnZSghMCkpKX0samkucHJvdG90eXBlLmZpbmRDb3ZlcmVkTGluZUVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX29wLmdldEdyYXBoKCkuZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dC5uZXh0KCkuZ2V0RWRnZXMoKS5maW5kQ292ZXJlZExpbmVFZGdlcygpfWZvcih2YXIgZT10aGlzLl9vcC5nZXRHcmFwaCgpLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bi5nZXRFZGdlKCk7aWYobi5pc0xpbmVFZGdlKCkmJiFpLmlzQ292ZXJlZFNldCgpKXt2YXIgcj10aGlzLl9vcC5pc0NvdmVyZWRCeUEobi5nZXRDb29yZGluYXRlKCkpO2kuc2V0Q292ZXJlZChyKX19fSxqaS5wcm90b3R5cGUubGFiZWxJc29sYXRlZExpbmVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKTtuLmlzSXNvbGF0ZWQoKSYmKGkuaXNOdWxsKDApP3RoaXMubGFiZWxJc29sYXRlZExpbmUobiwwKTp0aGlzLmxhYmVsSXNvbGF0ZWRMaW5lKG4sMSkpfX0samkucHJvdG90eXBlLmJ1aWxkTGluZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2xpbmVFZGdlc0xpc3QuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9dGhpcy5fZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcobi5nZXRDb29yZGluYXRlcygpKTt0aGlzLl9yZXN1bHRMaW5lTGlzdC5hZGQoaSksbi5zZXRJblJlc3VsdCghMCl9fSxqaS5wcm90b3R5cGUuY29sbGVjdEJvdW5kYXJ5VG91Y2hFZGdlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldExhYmVsKCk7cmV0dXJuIHQuaXNMaW5lRWRnZSgpP251bGw6dC5pc1Zpc2l0ZWQoKT9udWxsOnQuaXNJbnRlcmlvckFyZWFFZGdlKCk/bnVsbDp0LmdldEVkZ2UoKS5pc0luUmVzdWx0KCk/bnVsbDooZXQuaXNUcnVlKCEodC5pc0luUmVzdWx0KCl8fHQuZ2V0U3ltKCkuaXNJblJlc3VsdCgpKXx8IXQuZ2V0RWRnZSgpLmlzSW5SZXN1bHQoKSksdm9pZChMci5pc1Jlc3VsdE9mT3AoaSxlKSYmZT09PUxyLklOVEVSU0VDVElPTiYmKG4uYWRkKHQuZ2V0RWRnZSgpKSx0LnNldFZpc2l0ZWRFZGdlKCEwKSkpKX0samkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGppLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBqaX07dmFyIEhpPWZ1bmN0aW9uKCl7dGhpcy5fb3A9bnVsbCx0aGlzLl9nZW9tZXRyeUZhY3Rvcnk9bnVsbCx0aGlzLl9yZXN1bHRQb2ludExpc3Q9bmV3IE50O3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLl9vcD10LHRoaXMuX2dlb21ldHJ5RmFjdG9yeT1lfTtIaS5wcm90b3R5cGUuZmlsdGVyQ292ZXJlZE5vZGVUb1BvaW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Q29vcmRpbmF0ZSgpO2lmKCF0aGlzLl9vcC5pc0NvdmVyZWRCeUxBKGUpKXt2YXIgbj10aGlzLl9nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9pbnQoZSk7dGhpcy5fcmVzdWx0UG9pbnRMaXN0LmFkZChuKX19LEhpLnByb3RvdHlwZS5leHRyYWN0Tm9uQ292ZXJlZFJlc3VsdE5vZGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9vcC5nZXRHcmFwaCgpLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO2lmKCFuLmlzSW5SZXN1bHQoKSYmKCFuLmlzSW5jaWRlbnRFZGdlSW5SZXN1bHQoKSYmKDA9PT1uLmdldEVkZ2VzKCkuZ2V0RGVncmVlKCl8fHQ9PT1Mci5JTlRFUlNFQ1RJT04pKSl7dmFyIGk9bi5nZXRMYWJlbCgpO0xyLmlzUmVzdWx0T2ZPcChpLHQpJiZ0aGlzLmZpbHRlckNvdmVyZWROb2RlVG9Qb2ludChuKX19fSxIaS5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXh0cmFjdE5vbkNvdmVyZWRSZXN1bHROb2Rlcyh0KSx0aGlzLl9yZXN1bHRQb2ludExpc3R9LEhpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxIaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gSGl9O3ZhciBXaT1mdW5jdGlvbigpe3RoaXMuX2lucHV0R2VvbT1udWxsLHRoaXMuX2ZhY3Rvcnk9bnVsbCx0aGlzLl9wcnVuZUVtcHR5R2VvbWV0cnk9ITAsdGhpcy5fcHJlc2VydmVHZW9tZXRyeUNvbGxlY3Rpb25UeXBlPSEwLHRoaXMuX3ByZXNlcnZlQ29sbGVjdGlvbnM9ITEsdGhpcy5fcHJlc2VydmVUeXBlPSExfTtXaS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fZmFjdG9yeS5jcmVhdGVQb2ludCh0aGlzLnRyYW5zZm9ybUNvb3JkaW5hdGVzKHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksdCkpfSxXaS5wcm90b3R5cGUudHJhbnNmb3JtUG9seWdvbj1mdW5jdGlvbih0LGUpe3ZhciBuPSEwLGk9dGhpcy50cmFuc2Zvcm1MaW5lYXJSaW5nKHQuZ2V0RXh0ZXJpb3JSaW5nKCksdCk7bnVsbCE9PWkmJmkgaW5zdGFuY2VvZiBlZSYmIWkuaXNFbXB0eSgpfHwobj0hMSk7Zm9yKHZhciByPW5ldyBOdCxvPTA7bzx0LmdldE51bUludGVyaW9yUmluZygpO28rKyl7dmFyIHM9dGhpcy50cmFuc2Zvcm1MaW5lYXJSaW5nKHQuZ2V0SW50ZXJpb3JSaW5nTihvKSx0KTtudWxsPT09c3x8cy5pc0VtcHR5KCl8fChzIGluc3RhbmNlb2YgZWV8fChuPSExKSxyLmFkZChzKSl9aWYobilyZXR1cm4gdGhpcy5fZmFjdG9yeS5jcmVhdGVQb2x5Z29uKGksci50b0FycmF5KFtdKSk7dmFyIGE9bmV3IE50O3JldHVybiBudWxsIT09aSYmYS5hZGQoaSksYS5hZGRBbGwociksdGhpcy5fZmFjdG9yeS5idWlsZEdlb21ldHJ5KGEpfSxXaS5wcm90b3R5cGUuY3JlYXRlQ29vcmRpbmF0ZVNlcXVlbmNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9mYWN0b3J5LmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCl9LFdpLnByb3RvdHlwZS5nZXRJbnB1dEdlb21ldHJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0R2VvbX0sV2kucHJvdG90eXBlLnRyYW5zZm9ybU11bHRpTGluZVN0cmluZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgTnQsaT0wO2k8dC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj10aGlzLnRyYW5zZm9ybUxpbmVTdHJpbmcodC5nZXRHZW9tZXRyeU4oaSksdCk7bnVsbCE9PXImJihyLmlzRW1wdHkoKXx8bi5hZGQocikpfXJldHVybiB0aGlzLl9mYWN0b3J5LmJ1aWxkR2VvbWV0cnkobil9LFdpLnByb3RvdHlwZS50cmFuc2Zvcm1Db29yZGluYXRlcz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvcHkodCl9LFdpLnByb3RvdHlwZS50cmFuc2Zvcm1MaW5lU3RyaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2ZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyh0aGlzLnRyYW5zZm9ybUNvb3JkaW5hdGVzKHQuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksdCkpfSxXaS5wcm90b3R5cGUudHJhbnNmb3JtTXVsdGlQb2ludD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgTnQsaT0wO2k8dC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj10aGlzLnRyYW5zZm9ybVBvaW50KHQuZ2V0R2VvbWV0cnlOKGkpLHQpO251bGwhPT1yJiYoci5pc0VtcHR5KCl8fG4uYWRkKHIpKX1yZXR1cm4gdGhpcy5fZmFjdG9yeS5idWlsZEdlb21ldHJ5KG4pfSxXaS5wcm90b3R5cGUudHJhbnNmb3JtTXVsdGlQb2x5Z29uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBOdCxpPTA7aTx0LmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPXRoaXMudHJhbnNmb3JtUG9seWdvbih0LmdldEdlb21ldHJ5TihpKSx0KTtudWxsIT09ciYmKHIuaXNFbXB0eSgpfHxuLmFkZChyKSl9cmV0dXJuIHRoaXMuX2ZhY3RvcnkuYnVpbGRHZW9tZXRyeShuKX0sV2kucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29weSgpfSxXaS5wcm90b3R5cGUudHJhbnNmb3JtR2VvbWV0cnlDb2xsZWN0aW9uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBOdCxpPTA7aTx0LmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPXRoaXMudHJhbnNmb3JtKHQuZ2V0R2VvbWV0cnlOKGkpKTtudWxsIT09ciYmKHRoaXMuX3BydW5lRW1wdHlHZW9tZXRyeSYmci5pc0VtcHR5KCl8fG4uYWRkKHIpKX1yZXR1cm4gdGhpcy5fcHJlc2VydmVHZW9tZXRyeUNvbGxlY3Rpb25UeXBlP3RoaXMuX2ZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKF9lLnRvR2VvbWV0cnlBcnJheShuKSk6dGhpcy5fZmFjdG9yeS5idWlsZEdlb21ldHJ5KG4pfSxXaS5wcm90b3R5cGUudHJhbnNmb3JtPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lucHV0R2VvbT10LHRoaXMuX2ZhY3Rvcnk9dC5nZXRGYWN0b3J5KCksdCBpbnN0YW5jZW9mIFF0KXJldHVybiB0aGlzLnRyYW5zZm9ybVBvaW50KHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIHRlKXJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpUG9pbnQodCxudWxsKTtpZih0IGluc3RhbmNlb2YgZWUpcmV0dXJuIHRoaXMudHJhbnNmb3JtTGluZWFyUmluZyh0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBLdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1MaW5lU3RyaW5nKHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIFh0KXJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpTGluZVN0cmluZyh0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiAkdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1Qb2x5Z29uKHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIG5lKXJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpUG9seWdvbih0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiB6dClyZXR1cm4gdGhpcy50cmFuc2Zvcm1HZW9tZXRyeUNvbGxlY3Rpb24odCxudWxsKTt0aHJvdyBuZXcgbShcIlVua25vd24gR2VvbWV0cnkgc3VidHlwZTogXCIrdC5nZXRDbGFzcygpLmdldE5hbWUoKSl9LFdpLnByb3RvdHlwZS50cmFuc2Zvcm1MaW5lYXJSaW5nPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy50cmFuc2Zvcm1Db29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpO2lmKG51bGw9PT1uKXJldHVybiB0aGlzLl9mYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcobnVsbCk7dmFyIGk9bi5zaXplKCk7cmV0dXJuIGk+MCYmaTw0JiYhdGhpcy5fcHJlc2VydmVUeXBlP3RoaXMuX2ZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhuKTp0aGlzLl9mYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcobil9LFdpLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxXaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gV2l9O3ZhciBLaT1mdW5jdGlvbiB0KCl7aWYodGhpcy5fc25hcFRvbGVyYW5jZT0wLHRoaXMuX3NyY1B0cz1udWxsLHRoaXMuX3NlZz1uZXcgZG4sdGhpcy5fYWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXM9ITEsdGhpcy5faXNDbG9zZWQ9ITEsYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBLdCYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3QuY2FsbCh0aGlzLGUuZ2V0Q29vcmRpbmF0ZXMoKSxuKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkmJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTt0aGlzLl9zcmNQdHM9aSx0aGlzLl9pc0Nsb3NlZD10LmlzQ2xvc2VkKGkpLHRoaXMuX3NuYXBUb2xlcmFuY2U9cn19O0tpLnByb3RvdHlwZS5zbmFwVmVydGljZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5faXNDbG9zZWQ/dC5zaXplKCktMTp0LnNpemUoKSxpPTA7aTxuO2krKyl7dmFyIHI9dC5nZXQoaSksbz10aGlzLmZpbmRTbmFwRm9yVmVydGV4KHIsZSk7bnVsbCE9PW8mJih0LnNldChpLG5ldyBDKG8pKSwwPT09aSYmdGhpcy5faXNDbG9zZWQmJnQuc2V0KHQuc2l6ZSgpLTEsbmV3IEMobykpKX19LEtpLnByb3RvdHlwZS5maW5kU25hcEZvclZlcnRleD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXtpZih0LmVxdWFsczJEKGVbbl0pKXJldHVybiBudWxsO2lmKHQuZGlzdGFuY2UoZVtuXSk8dGhpcy5fc25hcFRvbGVyYW5jZSlyZXR1cm4gZVtuXX1yZXR1cm4gbnVsbH0sS2kucHJvdG90eXBlLnNuYXBUbz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgU3QodGhpcy5fc3JjUHRzKTt0aGlzLnNuYXBWZXJ0aWNlcyhlLHQpLHRoaXMuc25hcFNlZ21lbnRzKGUsdCk7cmV0dXJuIGUudG9Db29yZGluYXRlQXJyYXkoKX0sS2kucHJvdG90eXBlLnNuYXBTZWdtZW50cz1mdW5jdGlvbih0LGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgbj1lLmxlbmd0aDtlWzBdLmVxdWFsczJEKGVbZS5sZW5ndGgtMV0pJiYobj1lLmxlbmd0aC0xKTtmb3IodmFyIGk9MDtpPG47aSsrKXt2YXIgcj1lW2ldLG89dGhpcy5maW5kU2VnbWVudEluZGV4VG9TbmFwKHIsdCk7bz49MCYmdC5hZGQobysxLG5ldyBDKHIpLCExKX19LEtpLnByb3RvdHlwZS5maW5kU2VnbWVudEluZGV4VG9TbmFwPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXYuTUFYX1ZBTFVFLGk9LTEscj0wO3I8ZS5zaXplKCktMTtyKyspe2lmKHRoaXMuX3NlZy5wMD1lLmdldChyKSx0aGlzLl9zZWcucDE9ZS5nZXQocisxKSx0aGlzLl9zZWcucDAuZXF1YWxzMkQodCl8fHRoaXMuX3NlZy5wMS5lcXVhbHMyRCh0KSl7aWYodGhpcy5fYWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXMpY29udGludWU7cmV0dXJuLTF9dmFyIG89dGhpcy5fc2VnLmRpc3RhbmNlKHQpO288dGhpcy5fc25hcFRvbGVyYW5jZSYmbzxuJiYobj1vLGk9cil9cmV0dXJuIGl9LEtpLnByb3RvdHlwZS5zZXRBbGxvd1NuYXBwaW5nVG9Tb3VyY2VWZXJ0aWNlcz1mdW5jdGlvbih0KXt0aGlzLl9hbGxvd1NuYXBwaW5nVG9Tb3VyY2VWZXJ0aWNlcz10fSxLaS5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sS2kucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEtpfSxLaS5pc0Nsb3NlZD1mdW5jdGlvbih0KXtyZXR1cm4hKHQubGVuZ3RoPD0xKSYmdFswXS5lcXVhbHMyRCh0W3QubGVuZ3RoLTFdKX07dmFyIEppPWZ1bmN0aW9uKHQpe3RoaXMuX3NyY0dlb209dHx8bnVsbH0sUWk9e1NOQVBfUFJFQ0lTSU9OX0ZBQ1RPUjp7Y29uZmlndXJhYmxlOiEwfX07SmkucHJvdG90eXBlLnNuYXBUbz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZXh0cmFjdFRhcmdldENvb3JkaW5hdGVzKHQpO3JldHVybiBuZXcgWmkoZSxuKS50cmFuc2Zvcm0odGhpcy5fc3JjR2VvbSl9LEppLnByb3RvdHlwZS5zbmFwVG9TZWxmPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5leHRyYWN0VGFyZ2V0Q29vcmRpbmF0ZXModGhpcy5fc3JjR2VvbSksaT1uZXcgWmkodCxuLCEwKS50cmFuc2Zvcm0odGhpcy5fc3JjR2VvbSkscj1pO3JldHVybiBlJiZUKHIsWnQpJiYocj1pLmJ1ZmZlcigwKSkscn0sSmkucHJvdG90eXBlLmNvbXB1dGVTbmFwVG9sZXJhbmNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXB1dGVNaW5pbXVtU2VnbWVudExlbmd0aCh0KS8xMH0sSmkucHJvdG90eXBlLmV4dHJhY3RUYXJnZXRDb29yZGluYXRlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IGYsbj10LmdldENvb3JkaW5hdGVzKCksaT0wO2k8bi5sZW5ndGg7aSsrKWUuYWRkKG5baV0pO3JldHVybiBlLnRvQXJyYXkobmV3IEFycmF5KDApLmZpbGwobnVsbCkpfSxKaS5wcm90b3R5cGUuY29tcHV0ZU1pbmltdW1TZWdtZW50TGVuZ3RoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT12Lk1BWF9WQUxVRSxuPTA7bjx0Lmxlbmd0aC0xO24rKyl7dmFyIGk9dFtuXS5kaXN0YW5jZSh0W24rMV0pO2k8ZSYmKGU9aSl9cmV0dXJuIGV9LEppLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxKaS5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gSml9LEppLnNuYXA9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHI9bmV3IEppKHQpO2lbMF09ci5zbmFwVG8oZSxuKTt2YXIgbz1uZXcgSmkoZSk7cmV0dXJuIGlbMV09by5zbmFwVG8oaVswXSxuKSxpfSxKaS5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2U9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9SmkuY29tcHV0ZVNpemVCYXNlZFNuYXBUb2xlcmFuY2UodCksbj10LmdldFByZWNpc2lvbk1vZGVsKCk7aWYobi5nZXRUeXBlKCk9PT1mZS5GSVhFRCl7dmFyIGk9MS9uLmdldFNjYWxlKCkqMi8xLjQxNTtpPmUmJihlPWkpfXJldHVybiBlfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV07cmV0dXJuIE1hdGgubWluKEppLmNvbXB1dGVPdmVybGF5U25hcFRvbGVyYW5jZShyKSxKaS5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2UobykpfX0sSmkuY29tcHV0ZVNpemVCYXNlZFNuYXBUb2xlcmFuY2U9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRFbnZlbG9wZUludGVybmFsKCk7cmV0dXJuIE1hdGgubWluKGUuZ2V0SGVpZ2h0KCksZS5nZXRXaWR0aCgpKSpKaS5TTkFQX1BSRUNJU0lPTl9GQUNUT1J9LEppLnNuYXBUb1NlbGY9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgSmkodCkuc25hcFRvU2VsZihlLG4pfSxRaS5TTkFQX1BSRUNJU0lPTl9GQUNUT1IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDFlLTl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEppLFFpKTt2YXIgWmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSl7dC5jYWxsKHRoaXMpLHRoaXMuX3NuYXBUb2xlcmFuY2U9ZXx8bnVsbCx0aGlzLl9zbmFwUHRzPW58fG51bGwsdGhpcy5faXNTZWxmU25hcD12b2lkIDAhPT1pJiZpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5zbmFwTGluZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBLaSh0LHRoaXMuX3NuYXBUb2xlcmFuY2UpO3JldHVybiBuLnNldEFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzKHRoaXMuX2lzU2VsZlNuYXApLG4uc25hcFRvKGUpfSxlLnByb3RvdHlwZS50cmFuc2Zvcm1Db29yZGluYXRlcz1mdW5jdGlvbih0LGUpe3ZhciBuPXQudG9Db29yZGluYXRlQXJyYXkoKSxpPXRoaXMuc25hcExpbmUobix0aGlzLl9zbmFwUHRzKTtyZXR1cm4gdGhpcy5fZmFjdG9yeS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKGkpfSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxlfShXaSksJGk9ZnVuY3Rpb24oKXt0aGlzLl9pc0ZpcnN0PSEwLHRoaXMuX2NvbW1vbk1hbnRpc3NhQml0c0NvdW50PTUzLHRoaXMuX2NvbW1vbkJpdHM9MCx0aGlzLl9jb21tb25TaWduRXhwPW51bGx9OyRpLnByb3RvdHlwZS5nZXRDb21tb249ZnVuY3Rpb24oKXtyZXR1cm4gdi5sb25nQml0c1RvRG91YmxlKHRoaXMuX2NvbW1vbkJpdHMpfSwkaS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXYuZG91YmxlVG9Mb25nQml0cyh0KTtpZih0aGlzLl9pc0ZpcnN0KXJldHVybiB0aGlzLl9jb21tb25CaXRzPWUsdGhpcy5fY29tbW9uU2lnbkV4cD0kaS5zaWduRXhwQml0cyh0aGlzLl9jb21tb25CaXRzKSx0aGlzLl9pc0ZpcnN0PSExLG51bGw7aWYoJGkuc2lnbkV4cEJpdHMoZSkhPT10aGlzLl9jb21tb25TaWduRXhwKXJldHVybiB0aGlzLl9jb21tb25CaXRzPTAsbnVsbDt0aGlzLl9jb21tb25NYW50aXNzYUJpdHNDb3VudD0kaS5udW1Db21tb25Nb3N0U2lnTWFudGlzc2FCaXRzKHRoaXMuX2NvbW1vbkJpdHMsZSksdGhpcy5fY29tbW9uQml0cz0kaS56ZXJvTG93ZXJCaXRzKHRoaXMuX2NvbW1vbkJpdHMsNjQtKDEyK3RoaXMuX2NvbW1vbk1hbnRpc3NhQml0c0NvdW50KSl9LCRpLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT12LmxvbmdCaXRzVG9Eb3VibGUodCksbj1cIjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIit2LnRvQmluYXJ5U3RyaW5nKHQpLGk9bi5zdWJzdHJpbmcobi5sZW5ndGgtNjQpO3JldHVybiBpLnN1YnN0cmluZygwLDEpK1wiICBcIitpLnN1YnN0cmluZygxLDEyKStcIihleHApIFwiK2kuc3Vic3RyaW5nKDEyKStcIiBbIFwiK2UrXCIgXVwifX0sJGkucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LCRpLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiAkaX0sJGkuZ2V0Qml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDAhPSh0JjE8PGUpPzE6MH0sJGkuc2lnbkV4cEJpdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PjUyfSwkaS56ZXJvTG93ZXJCaXRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmfigoMTw8ZSktMSl9LCRpLm51bUNvbW1vbk1vc3RTaWdNYW50aXNzYUJpdHM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxpPTUyO2k+PTA7aS0tKXtpZigkaS5nZXRCaXQodCxpKSE9PSRpLmdldEJpdChlLGkpKXJldHVybiBuO24rK31yZXR1cm4gNTJ9O3ZhciB0cj1mdW5jdGlvbigpe3RoaXMuX2NvbW1vbkNvb3JkPW51bGwsdGhpcy5fY2NGaWx0ZXI9bmV3IG5yfSxlcj17Q29tbW9uQ29vcmRpbmF0ZUZpbHRlcjp7Y29uZmlndXJhYmxlOiEwfSxUcmFuc2xhdGVyOntjb25maWd1cmFibGU6ITB9fTt0ci5wcm90b3R5cGUuYWRkQ29tbW9uQml0cz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgaXIodGhpcy5fY29tbW9uQ29vcmQpO3QuYXBwbHkoZSksdC5nZW9tZXRyeUNoYW5nZWQoKX0sdHIucHJvdG90eXBlLnJlbW92ZUNvbW1vbkJpdHM9ZnVuY3Rpb24odCl7aWYoMD09PXRoaXMuX2NvbW1vbkNvb3JkLngmJjA9PT10aGlzLl9jb21tb25Db29yZC55KXJldHVybiB0O3ZhciBlPW5ldyBDKHRoaXMuX2NvbW1vbkNvb3JkKTtlLng9LWUueCxlLnk9LWUueTt2YXIgbj1uZXcgaXIoZSk7cmV0dXJuIHQuYXBwbHkobiksdC5nZW9tZXRyeUNoYW5nZWQoKSx0fSx0ci5wcm90b3R5cGUuZ2V0Q29tbW9uQ29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21tb25Db29yZH0sdHIucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0LmFwcGx5KHRoaXMuX2NjRmlsdGVyKSx0aGlzLl9jb21tb25Db29yZD10aGlzLl9jY0ZpbHRlci5nZXRDb21tb25Db29yZGluYXRlKCl9LHRyLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSx0ci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ9LGVyLkNvbW1vbkNvb3JkaW5hdGVGaWx0ZXIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5yfSxlci5UcmFuc2xhdGVyLmdldD1mdW5jdGlvbigpe3JldHVybiBpcn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModHIsZXIpO3ZhciBucj1mdW5jdGlvbigpe3RoaXMuX2NvbW1vbkJpdHNYPW5ldyAkaSx0aGlzLl9jb21tb25CaXRzWT1uZXcgJGl9O25yLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7dGhpcy5fY29tbW9uQml0c1guYWRkKHQueCksdGhpcy5fY29tbW9uQml0c1kuYWRkKHQueSl9LG5yLnByb3RvdHlwZS5nZXRDb21tb25Db29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDKHRoaXMuX2NvbW1vbkJpdHNYLmdldENvbW1vbigpLHRoaXMuX2NvbW1vbkJpdHNZLmdldENvbW1vbigpKX0sbnIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW2Z0XX0sbnIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIG5yfTt2YXIgaXI9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMudHJhbnM9dH07aXIucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0T3JkaW5hdGUoZSwwKSt0aGlzLnRyYW5zLngsaT10LmdldE9yZGluYXRlKGUsMSkrdGhpcy50cmFucy55O3Quc2V0T3JkaW5hdGUoZSwwLG4pLHQuc2V0T3JkaW5hdGUoZSwxLGkpfSxpci5wcm90b3R5cGUuaXNEb25lPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGlyLnByb3RvdHlwZS5pc0dlb21ldHJ5Q2hhbmdlZD1mdW5jdGlvbigpe3JldHVybiEwfSxpci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bVXRdfSxpci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gaXJ9O3ZhciBycj1mdW5jdGlvbih0LGUpe3RoaXMuX2dlb209bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5fc25hcFRvbGVyYW5jZT1udWxsLHRoaXMuX2Nicj1udWxsLHRoaXMuX2dlb21bMF09dCx0aGlzLl9nZW9tWzFdPWUsdGhpcy5jb21wdXRlU25hcFRvbGVyYW5jZSgpfTtyci5wcm90b3R5cGUuc2VsZlNuYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBKaSh0KS5zbmFwVG8odCx0aGlzLl9zbmFwVG9sZXJhbmNlKX0scnIucHJvdG90eXBlLnJlbW92ZUNvbW1vbkJpdHM9ZnVuY3Rpb24odCl7dGhpcy5fY2JyPW5ldyB0cix0aGlzLl9jYnIuYWRkKHRbMF0pLHRoaXMuX2Nici5hZGQodFsxXSk7dmFyIGU9bmV3IEFycmF5KDIpLmZpbGwobnVsbCk7cmV0dXJuIGVbMF09dGhpcy5fY2JyLnJlbW92ZUNvbW1vbkJpdHModFswXS5jb3B5KCkpLGVbMV09dGhpcy5fY2JyLnJlbW92ZUNvbW1vbkJpdHModFsxXS5jb3B5KCkpLGV9LHJyLnByb3RvdHlwZS5wcmVwYXJlUmVzdWx0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jYnIuYWRkQ29tbW9uQml0cyh0KSx0fSxyci5wcm90b3R5cGUuZ2V0UmVzdWx0R2VvbWV0cnk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zbmFwKHRoaXMuX2dlb20pLG49THIub3ZlcmxheU9wKGVbMF0sZVsxXSx0KTtyZXR1cm4gdGhpcy5wcmVwYXJlUmVzdWx0KG4pfSxyci5wcm90b3R5cGUuY2hlY2tWYWxpZD1mdW5jdGlvbih0KXt0LmlzVmFsaWQoKXx8WS5vdXQucHJpbnRsbihcIlNuYXBwZWQgZ2VvbWV0cnkgaXMgaW52YWxpZFwiKX0scnIucHJvdG90eXBlLmNvbXB1dGVTbmFwVG9sZXJhbmNlPWZ1bmN0aW9uKCl7dGhpcy5fc25hcFRvbGVyYW5jZT1KaS5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2UodGhpcy5fZ2VvbVswXSx0aGlzLl9nZW9tWzFdKX0scnIucHJvdG90eXBlLnNuYXA9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW1vdmVDb21tb25CaXRzKHQpO3JldHVybiBKaS5zbmFwKGVbMF0sZVsxXSx0aGlzLl9zbmFwVG9sZXJhbmNlKX0scnIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LHJyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBycn0scnIub3ZlcmxheU9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IHJyKHQsZSkuZ2V0UmVzdWx0R2VvbWV0cnkobil9LHJyLnVuaW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJyLm92ZXJsYXlPcCh0LGUsTHIuVU5JT04pfSxyci5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gcnIub3ZlcmxheU9wKHQsZSxMci5JTlRFUlNFQ1RJT04pfSxyci5zeW1EaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJyLm92ZXJsYXlPcCh0LGUsTHIuU1lNRElGRkVSRU5DRSl9LHJyLmRpZmZlcmVuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcnIub3ZlcmxheU9wKHQsZSxMci5ESUZGRVJFTkNFKX07dmFyIG9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZ2VvbT1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0aGlzLl9nZW9tWzBdPXQsdGhpcy5fZ2VvbVsxXT1lfTtvci5wcm90b3R5cGUuZ2V0UmVzdWx0R2VvbWV0cnk9ZnVuY3Rpb24odCl7dmFyIGU9bnVsbCxuPSExLGk9bnVsbDt0cnl7ZT1Mci5vdmVybGF5T3AodGhpcy5fZ2VvbVswXSx0aGlzLl9nZW9tWzFdLHQpO249ITB9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgJCkpdGhyb3cgdDtpPXR9aWYoIW4pdHJ5e2U9cnIub3ZlcmxheU9wKHRoaXMuX2dlb21bMF0sdGhpcy5fZ2VvbVsxXSx0KX1jYXRjaCh0KXt0aHJvdyB0IGluc3RhbmNlb2YgJD9pOnR9cmV0dXJuIGV9LG9yLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxvci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gb3J9LG9yLm92ZXJsYXlPcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyBvcih0LGUpLmdldFJlc3VsdEdlb21ldHJ5KG4pfSxvci51bmlvbj1mdW5jdGlvbih0LGUpe3JldHVybiBvci5vdmVybGF5T3AodCxlLExyLlVOSU9OKX0sb3IuaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG9yLm92ZXJsYXlPcCh0LGUsTHIuSU5URVJTRUNUSU9OKX0sb3Iuc3ltRGlmZmVyZW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBvci5vdmVybGF5T3AodCxlLExyLlNZTURJRkZFUkVOQ0UpfSxvci5kaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG9yLm92ZXJsYXlPcCh0LGUsTHIuRElGRkVSRU5DRSl9O3ZhciBzcj1mdW5jdGlvbigpe3RoaXMubWNlPW51bGwsdGhpcy5jaGFpbkluZGV4PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMubWNlPXQsdGhpcy5jaGFpbkluZGV4PWV9O3NyLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9ucz1mdW5jdGlvbih0LGUpe3RoaXMubWNlLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4odGhpcy5jaGFpbkluZGV4LHQubWNlLHQuY2hhaW5JbmRleCxlKX0sc3IucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LHNyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBzcn07dmFyIGFyPWZ1bmN0aW9uIHQoKXtpZih0aGlzLl9sYWJlbD1udWxsLHRoaXMuX3hWYWx1ZT1udWxsLHRoaXMuX2V2ZW50VHlwZT1udWxsLHRoaXMuX2luc2VydEV2ZW50PW51bGwsdGhpcy5fZGVsZXRlRXZlbnRJbmRleD1udWxsLHRoaXMuX29iaj1udWxsLDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5fZXZlbnRUeXBlPXQuREVMRVRFLHRoaXMuX3hWYWx1ZT1lLHRoaXMuX2luc2VydEV2ZW50PW59ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdO3RoaXMuX2V2ZW50VHlwZT10LklOU0VSVCx0aGlzLl9sYWJlbD1pLHRoaXMuX3hWYWx1ZT1yLHRoaXMuX29iaj1vfX0sdXI9e0lOU0VSVDp7Y29uZmlndXJhYmxlOiEwfSxERUxFVEU6e2NvbmZpZ3VyYWJsZTohMH19O2FyLnByb3RvdHlwZS5pc0RlbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudFR5cGU9PT1hci5ERUxFVEV9LGFyLnByb3RvdHlwZS5zZXREZWxldGVFdmVudEluZGV4PWZ1bmN0aW9uKHQpe3RoaXMuX2RlbGV0ZUV2ZW50SW5kZXg9dH0sYXIucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmp9LGFyLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gdGhpcy5feFZhbHVlPGUuX3hWYWx1ZT8tMTp0aGlzLl94VmFsdWU+ZS5feFZhbHVlPzE6dGhpcy5fZXZlbnRUeXBlPGUuX2V2ZW50VHlwZT8tMTp0aGlzLl9ldmVudFR5cGU+ZS5fZXZlbnRUeXBlPzE6MH0sYXIucHJvdG90eXBlLmdldEluc2VydEV2ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luc2VydEV2ZW50fSxhci5wcm90b3R5cGUuaXNJbnNlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRUeXBlPT09YXIuSU5TRVJUfSxhci5wcm90b3R5cGUuaXNTYW1lTGFiZWw9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10aGlzLl9sYWJlbCYmdGhpcy5fbGFiZWw9PT10Ll9sYWJlbH0sYXIucHJvdG90eXBlLmdldERlbGV0ZUV2ZW50SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZXRlRXZlbnRJbmRleH0sYXIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW0VdfSxhci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gYXJ9LHVyLklOU0VSVC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMX0sdXIuREVMRVRFLmdldD1mdW5jdGlvbigpe3JldHVybiAyfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhcix1cik7dmFyIGxyPWZ1bmN0aW9uKCl7fTtsci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sbHIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGxyfTt2YXIgY3I9ZnVuY3Rpb24oKXt0aGlzLl9oYXNJbnRlcnNlY3Rpb249ITEsdGhpcy5faGFzUHJvcGVyPSExLHRoaXMuX2hhc1Byb3BlckludGVyaW9yPSExLHRoaXMuX3Byb3BlckludGVyc2VjdGlvblBvaW50PW51bGwsdGhpcy5fbGk9bnVsbCx0aGlzLl9pbmNsdWRlUHJvcGVyPW51bGwsdGhpcy5fcmVjb3JkSXNvbGF0ZWQ9bnVsbCx0aGlzLl9pc1NlbGZJbnRlcnNlY3Rpb249bnVsbCx0aGlzLl9udW1JbnRlcnNlY3Rpb25zPTAsdGhpcy5udW1UZXN0cz0wLHRoaXMuX2JkeU5vZGVzPW51bGwsdGhpcy5faXNEb25lPSExLHRoaXMuX2lzRG9uZVdoZW5Qcm9wZXJJbnQ9ITE7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuX2xpPXQsdGhpcy5faW5jbHVkZVByb3Blcj1lLHRoaXMuX3JlY29yZElzb2xhdGVkPW59O2NyLnByb3RvdHlwZS5pc1RyaXZpYWxJbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlLG4saSl7aWYodD09PW4mJjE9PT10aGlzLl9saS5nZXRJbnRlcnNlY3Rpb25OdW0oKSl7aWYoY3IuaXNBZGphY2VudFNlZ21lbnRzKGUsaSkpcmV0dXJuITA7aWYodC5pc0Nsb3NlZCgpKXt2YXIgcj10LmdldE51bVBvaW50cygpLTE7aWYoMD09PWUmJmk9PT1yfHwwPT09aSYmZT09PXIpcmV0dXJuITB9fXJldHVybiExfSxjci5wcm90b3R5cGUuZ2V0UHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVySW50ZXJzZWN0aW9uUG9pbnR9LGNyLnByb3RvdHlwZS5zZXRJc0RvbmVJZlByb3BlckludD1mdW5jdGlvbih0KXt0aGlzLl9pc0RvbmVXaGVuUHJvcGVySW50PXR9LGNyLnByb3RvdHlwZS5oYXNQcm9wZXJJbnRlcmlvckludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNQcm9wZXJJbnRlcmlvcn0sY3IucHJvdG90eXBlLmlzQm91bmRhcnlQb2ludEludGVybmFsPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpLmdldENvb3JkaW5hdGUoKTtpZih0LmlzSW50ZXJzZWN0aW9uKGkpKXJldHVybiEwfXJldHVybiExfSxjci5wcm90b3R5cGUuaGFzUHJvcGVySW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Byb3Blcn0sY3IucHJvdG90eXBlLmhhc0ludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNJbnRlcnNlY3Rpb259LGNyLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNEb25lfSxjci5wcm90b3R5cGUuaXNCb3VuZGFyeVBvaW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPT1lJiYoISF0aGlzLmlzQm91bmRhcnlQb2ludEludGVybmFsKHQsZVswXSl8fCEhdGhpcy5pc0JvdW5kYXJ5UG9pbnRJbnRlcm5hbCh0LGVbMV0pKX0sY3IucHJvdG90eXBlLnNldEJvdW5kYXJ5Tm9kZXM9ZnVuY3Rpb24odCxlKXt0aGlzLl9iZHlOb2Rlcz1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0aGlzLl9iZHlOb2Rlc1swXT10LHRoaXMuX2JkeU5vZGVzWzFdPWV9LGNyLnByb3RvdHlwZS5hZGRJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1uJiZlPT09aSlyZXR1cm4gbnVsbDt0aGlzLm51bVRlc3RzKys7dmFyIHI9dC5nZXRDb29yZGluYXRlcygpW2VdLG89dC5nZXRDb29yZGluYXRlcygpW2UrMV0scz1uLmdldENvb3JkaW5hdGVzKClbaV0sYT1uLmdldENvb3JkaW5hdGVzKClbaSsxXTt0aGlzLl9saS5jb21wdXRlSW50ZXJzZWN0aW9uKHIsbyxzLGEpLHRoaXMuX2xpLmhhc0ludGVyc2VjdGlvbigpJiYodGhpcy5fcmVjb3JkSXNvbGF0ZWQmJih0LnNldElzb2xhdGVkKCExKSxuLnNldElzb2xhdGVkKCExKSksdGhpcy5fbnVtSW50ZXJzZWN0aW9ucysrLHRoaXMuaXNUcml2aWFsSW50ZXJzZWN0aW9uKHQsZSxuLGkpfHwodGhpcy5faGFzSW50ZXJzZWN0aW9uPSEwLCF0aGlzLl9pbmNsdWRlUHJvcGVyJiZ0aGlzLl9saS5pc1Byb3BlcigpfHwodC5hZGRJbnRlcnNlY3Rpb25zKHRoaXMuX2xpLGUsMCksbi5hZGRJbnRlcnNlY3Rpb25zKHRoaXMuX2xpLGksMSkpLHRoaXMuX2xpLmlzUHJvcGVyKCkmJih0aGlzLl9wcm9wZXJJbnRlcnNlY3Rpb25Qb2ludD10aGlzLl9saS5nZXRJbnRlcnNlY3Rpb24oMCkuY29weSgpLHRoaXMuX2hhc1Byb3Blcj0hMCx0aGlzLl9pc0RvbmVXaGVuUHJvcGVySW50JiYodGhpcy5faXNEb25lPSEwKSx0aGlzLmlzQm91bmRhcnlQb2ludCh0aGlzLl9saSx0aGlzLl9iZHlOb2Rlcyl8fCh0aGlzLl9oYXNQcm9wZXJJbnRlcmlvcj0hMCkpKSl9LGNyLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxjci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gY3J9LGNyLmlzQWRqYWNlbnRTZWdtZW50cz1mdW5jdGlvbih0LGUpe3JldHVybiAxPT09TWF0aC5hYnModC1lKX07dmFyIHByPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmNhbGwodGhpcyksdGhpcy5ldmVudHM9bmV3IE50LHRoaXMubk92ZXJsYXBzPW51bGx9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnByZXBhcmVFdmVudHM9ZnVuY3Rpb24oKXskZS5zb3J0KHRoaXMuZXZlbnRzKTtmb3IodmFyIHQ9MDt0PHRoaXMuZXZlbnRzLnNpemUoKTt0Kyspe3ZhciBlPXRoaXMuZXZlbnRzLmdldCh0KTtlLmlzRGVsZXRlKCkmJmUuZ2V0SW5zZXJ0RXZlbnQoKS5zZXREZWxldGVFdmVudEluZGV4KHQpfX0sZS5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubk92ZXJsYXBzPTAsdGhpcy5wcmVwYXJlRXZlbnRzKCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmV2ZW50cy5zaXplKCk7ZSsrKXt2YXIgbj10aGlzLmV2ZW50cy5nZXQoZSk7aWYobi5pc0luc2VydCgpJiZ0aGlzLnByb2Nlc3NPdmVybGFwcyhlLG4uZ2V0RGVsZXRlRXZlbnRJbmRleCgpLG4sdCksdC5pc0RvbmUoKSlicmVha319ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aClpZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIGNyJiZUKGFyZ3VtZW50c1swXSx4dCkmJlQoYXJndW1lbnRzWzFdLHh0KSl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdO3RoaXMuYWRkRWRnZXMoaSxpKSx0aGlzLmFkZEVkZ2VzKHIsciksdGhpcy5jb21wdXRlSW50ZXJzZWN0aW9ucyhvKX1lbHNlIGlmKFwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzJdJiZUKGFyZ3VtZW50c1swXSx4dCkmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgY3Ipe3ZhciBzPWFyZ3VtZW50c1swXSxhPWFyZ3VtZW50c1sxXTthcmd1bWVudHNbMl0/dGhpcy5hZGRFZGdlcyhzLG51bGwpOnRoaXMuYWRkRWRnZXMocyksdGhpcy5jb21wdXRlSW50ZXJzZWN0aW9ucyhhKX19LGUucHJvdG90eXBlLmFkZEVkZ2U9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5nZXRNb25vdG9uZUNoYWluRWRnZSgpLGk9bi5nZXRTdGFydEluZGV4ZXMoKSxyPTA7cjxpLmxlbmd0aC0xO3IrKyl7dmFyIG89bmV3IHNyKG4scikscz1uZXcgYXIoZSxuLmdldE1pblgociksbyk7dGhpcy5ldmVudHMuYWRkKHMpLHRoaXMuZXZlbnRzLmFkZChuZXcgYXIobi5nZXRNYXhYKHIpLHMpKX19LGUucHJvdG90eXBlLnByb2Nlc3NPdmVybGFwcz1mdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIHI9bi5nZXRPYmplY3QoKSxvPXQ7bzxlO28rKyl7dmFyIHM9dGhpcy5ldmVudHMuZ2V0KG8pO2lmKHMuaXNJbnNlcnQoKSl7dmFyIGE9cy5nZXRPYmplY3QoKTtuLmlzU2FtZUxhYmVsKHMpfHwoci5jb21wdXRlSW50ZXJzZWN0aW9ucyhhLGkpLHRoaXMubk92ZXJsYXBzKyspfX19LGUucHJvdG90eXBlLmFkZEVkZ2VzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciB0PWFyZ3VtZW50c1swXS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5hZGRFZGdlKGUsZSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9bi5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCk7dGhpcy5hZGRFZGdlKG8saSl9fSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxlfShsciksaHI9ZnVuY3Rpb24oKXt0aGlzLl9taW49di5QT1NJVElWRV9JTkZJTklUWSx0aGlzLl9tYXg9di5ORUdBVElWRV9JTkZJTklUWX0sZnI9e05vZGVDb21wYXJhdG9yOntjb25maWd1cmFibGU6ITB9fTtoci5wcm90b3R5cGUuZ2V0TWluPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbn0saHIucHJvdG90eXBlLmludGVyc2VjdHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4hKHRoaXMuX21pbj5lfHx0aGlzLl9tYXg8dCl9LGhyLnByb3RvdHlwZS5nZXRNYXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4fSxoci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gWi50b0xpbmVTdHJpbmcobmV3IEModGhpcy5fbWluLDApLG5ldyBDKHRoaXMuX21heCwwKSl9LGhyLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxoci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gaHJ9LGZyLk5vZGVDb21wYXJhdG9yLmdldD1mdW5jdGlvbigpe3JldHVybiBncn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaHIsZnIpO3ZhciBncj1mdW5jdGlvbigpe307Z3IucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10LGk9ZSxyPShuLl9taW4rbi5fbWF4KS8yLG89KGkuX21pbitpLl9tYXgpLzI7cmV0dXJuIHI8bz8tMTpyPm8/MTowfSxnci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bTl19LGdyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBncn07dmFyIGRyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmNhbGwodGhpcyksdGhpcy5faXRlbT1udWxsO3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXTt0aGlzLl9taW49ZSx0aGlzLl9tYXg9bix0aGlzLl9pdGVtPWl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKHQsZSxuKXtpZighdGhpcy5pbnRlcnNlY3RzKHQsZSkpcmV0dXJuIG51bGw7bi52aXNpdEl0ZW0odGhpcy5faXRlbSl9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9KGhyKSx5cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5jYWxsKHRoaXMpLHRoaXMuX25vZGUxPW51bGwsdGhpcy5fbm9kZTI9bnVsbDt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5fbm9kZTE9ZSx0aGlzLl9ub2RlMj1uLHRoaXMuYnVpbGRFeHRlbnQodGhpcy5fbm9kZTEsdGhpcy5fbm9kZTIpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5idWlsZEV4dGVudD1mdW5jdGlvbih0LGUpe3RoaXMuX21pbj1NYXRoLm1pbih0Ll9taW4sZS5fbWluKSx0aGlzLl9tYXg9TWF0aC5tYXgodC5fbWF4LGUuX21heCl9LGUucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKHQsZSxuKXtpZighdGhpcy5pbnRlcnNlY3RzKHQsZSkpcmV0dXJuIG51bGw7bnVsbCE9PXRoaXMuX25vZGUxJiZ0aGlzLl9ub2RlMS5xdWVyeSh0LGUsbiksbnVsbCE9PXRoaXMuX25vZGUyJiZ0aGlzLl9ub2RlMi5xdWVyeSh0LGUsbil9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9KGhyKSxfcj1mdW5jdGlvbigpe3RoaXMuX2xlYXZlcz1uZXcgTnQsdGhpcy5fcm9vdD1udWxsLHRoaXMuX2xldmVsPTB9O19yLnByb3RvdHlwZS5idWlsZFRyZWU9ZnVuY3Rpb24oKXskZS5zb3J0KHRoaXMuX2xlYXZlcyxuZXcgaHIuTm9kZUNvbXBhcmF0b3IpO2Zvcih2YXIgdD10aGlzLl9sZWF2ZXMsZT1udWxsLG49bmV3IE50Ozspe2lmKHRoaXMuYnVpbGRMZXZlbCh0LG4pLDE9PT1uLnNpemUoKSlyZXR1cm4gbi5nZXQoMCk7ZT10LHQ9bixuPWV9fSxfci5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT09dGhpcy5fcm9vdCl0aHJvdyBuZXcgRXJyb3IoXCJJbmRleCBjYW5ub3QgYmUgYWRkZWQgdG8gb25jZSBpdCBoYXMgYmVlbiBxdWVyaWVkXCIpO3RoaXMuX2xlYXZlcy5hZGQobmV3IGRyKHQsZSxuKSl9LF9yLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbih0LGUsbil7dGhpcy5pbml0KCksdGhpcy5fcm9vdC5xdWVyeSh0LGUsbil9LF9yLnByb3RvdHlwZS5idWlsZFJvb3Q9ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5fcm9vdClyZXR1cm4gbnVsbDt0aGlzLl9yb290PXRoaXMuYnVpbGRUcmVlKCl9LF9yLnByb3RvdHlwZS5wcmludE5vZGU9ZnVuY3Rpb24odCl7WS5vdXQucHJpbnRsbihaLnRvTGluZVN0cmluZyhuZXcgQyh0Ll9taW4sdGhpcy5fbGV2ZWwpLG5ldyBDKHQuX21heCx0aGlzLl9sZXZlbCkpKX0sX3IucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5fcm9vdClyZXR1cm4gbnVsbDt0aGlzLmJ1aWxkUm9vdCgpfSxfci5wcm90b3R5cGUuYnVpbGRMZXZlbD1mdW5jdGlvbih0LGUpe3RoaXMuX2xldmVsKyssZS5jbGVhcigpO2Zvcih2YXIgbj0wO248dC5zaXplKCk7bis9Mil7dmFyIGk9dC5nZXQobik7aWYobnVsbD09PShuKzE8dC5zaXplKCk/dC5nZXQobik6bnVsbCkpZS5hZGQoaSk7ZWxzZXt2YXIgcj1uZXcgeXIodC5nZXQobiksdC5nZXQobisxKSk7ZS5hZGQocil9fX0sX3IucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LF9yLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBfcn07dmFyIG1yPWZ1bmN0aW9uKCl7dGhpcy5faXRlbXM9bmV3IE50fTttci5wcm90b3R5cGUudmlzaXRJdGVtPWZ1bmN0aW9uKHQpe3RoaXMuX2l0ZW1zLmFkZCh0KX0sbXIucHJvdG90eXBlLmdldEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zfSxtci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bS2VdfSxtci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gbXJ9O3ZhciB2cj1mdW5jdGlvbigpe3RoaXMuX2luZGV4PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKCFUKHQsWnQpKXRocm93IG5ldyBtKFwiQXJndW1lbnQgbXVzdCBiZSBQb2x5Z29uYWxcIik7dGhpcy5faW5kZXg9bmV3IHhyKHQpfSxJcj17U2VnbWVudFZpc2l0b3I6e2NvbmZpZ3VyYWJsZTohMH0sSW50ZXJ2YWxJbmRleGVkR2VvbWV0cnk6e2NvbmZpZ3VyYWJsZTohMH19O3ZyLnByb3RvdHlwZS5sb2NhdGU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHN0KHQpLG49bmV3IEVyKGUpO3JldHVybiB0aGlzLl9pbmRleC5xdWVyeSh0LnksdC55LG4pLGUuZ2V0TG9jYXRpb24oKX0sdnIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW1ZuXX0sdnIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHZyfSxJci5TZWdtZW50VmlzaXRvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gRXJ9LElyLkludGVydmFsSW5kZXhlZEdlb21ldHJ5LmdldD1mdW5jdGlvbigpe3JldHVybiB4cn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModnIsSXIpO3ZhciBFcj1mdW5jdGlvbigpe3RoaXMuX2NvdW50ZXI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fY291bnRlcj10fTtFci5wcm90b3R5cGUudmlzaXRJdGVtPWZ1bmN0aW9uKHQpe3ZhciBlPXQ7dGhpcy5fY291bnRlci5jb3VudFNlZ21lbnQoZS5nZXRDb29yZGluYXRlKDApLGUuZ2V0Q29vcmRpbmF0ZSgxKSl9LEVyLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltLZV19LEVyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBFcn07dmFyIHhyPWZ1bmN0aW9uKCl7dGhpcy5faW5kZXg9bmV3IF9yO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmluaXQodCl9O3hyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1DaS5nZXRMaW5lcyh0KS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCkuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLmFkZExpbmUobil9fSx4ci5wcm90b3R5cGUuYWRkTGluZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPHQubGVuZ3RoO2UrKyl7dmFyIG49bmV3IGRuKHRbZS0xXSx0W2VdKSxpPU1hdGgubWluKG4ucDAueSxuLnAxLnkpLHI9TWF0aC5tYXgobi5wMC55LG4ucDEueSk7dGhpcy5faW5kZXguaW5zZXJ0KGkscixuKX19LHhyLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1uZXcgbXI7cmV0dXJuIHRoaXMuX2luZGV4LnF1ZXJ5KHQsZSxuKSxuLmdldEl0ZW1zKCl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXTt0aGlzLl9pbmRleC5xdWVyeShpLHIsbyl9fSx4ci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0seHIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHhyfTt2YXIgTnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2lmKHQuY2FsbCh0aGlzKSx0aGlzLl9wYXJlbnRHZW9tPW51bGwsdGhpcy5fbGluZUVkZ2VNYXA9bmV3IGhlLHRoaXMuX2JvdW5kYXJ5Tm9kZVJ1bGU9bnVsbCx0aGlzLl91c2VCb3VuZGFyeURldGVybWluYXRpb25SdWxlPSEwLHRoaXMuX2FyZ0luZGV4PW51bGwsdGhpcy5fYm91bmRhcnlOb2Rlcz1udWxsLHRoaXMuX2hhc1Rvb0Zld1BvaW50cz0hMSx0aGlzLl9pbnZhbGlkUG9pbnQ9bnVsbCx0aGlzLl9hcmVhUHRMb2NhdG9yPW51bGwsdGhpcy5fcHRMb2NhdG9yPW5ldyBTaSwyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9Z3QuT0dDX1NGU19CT1VOREFSWV9SVUxFO3RoaXMuX2FyZ0luZGV4PWUsdGhpcy5fcGFyZW50R2VvbT1uLHRoaXMuX2JvdW5kYXJ5Tm9kZVJ1bGU9aSxudWxsIT09biYmdGhpcy5hZGQobil9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdO3RoaXMuX2FyZ0luZGV4PXIsdGhpcy5fcGFyZW50R2VvbT1vLHRoaXMuX2JvdW5kYXJ5Tm9kZVJ1bGU9cyxudWxsIT09byYmdGhpcy5hZGQobyl9fXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5pbnNlcnRCb3VuZGFyeVBvaW50PWZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy5fbm9kZXMuYWRkTm9kZShuKS5nZXRMYWJlbCgpLHI9MTt3Lk5PTkU7aS5nZXRMb2NhdGlvbih0LFNlLk9OKT09PXcuQk9VTkRBUlkmJnIrKzt2YXIgbz1lLmRldGVybWluZUJvdW5kYXJ5KHRoaXMuX2JvdW5kYXJ5Tm9kZVJ1bGUscik7aS5zZXRMb2NhdGlvbih0LG8pfSxlLnByb3RvdHlwZS5jb21wdXRlU2VsZk5vZGVzPWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5jb21wdXRlU2VsZk5vZGVzKHQsZSwhMSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXSxvPW5ldyBjcihuLCEwLCExKTtvLnNldElzRG9uZUlmUHJvcGVySW50KHIpO3ZhciBzPXRoaXMuY3JlYXRlRWRnZVNldEludGVyc2VjdG9yKCksYT10aGlzLl9wYXJlbnRHZW9tIGluc3RhbmNlb2YgZWV8fHRoaXMuX3BhcmVudEdlb20gaW5zdGFuY2VvZiAkdHx8dGhpcy5fcGFyZW50R2VvbSBpbnN0YW5jZW9mIG5lLHU9aXx8IWE7cmV0dXJuIHMuY29tcHV0ZUludGVyc2VjdGlvbnModGhpcy5fZWRnZXMsbyx1KSx0aGlzLmFkZFNlbGZJbnRlcnNlY3Rpb25Ob2Rlcyh0aGlzLl9hcmdJbmRleCksb319LGUucHJvdG90eXBlLmNvbXB1dGVTcGxpdEVkZ2VzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9lZGdlcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7ZS5uZXh0KCkuZWlMaXN0LmFkZFNwbGl0RWRnZXModCl9fSxlLnByb3RvdHlwZS5jb21wdXRlRWRnZUludGVyc2VjdGlvbnM9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBjcihlLG4sITApO2kuc2V0Qm91bmRhcnlOb2Rlcyh0aGlzLmdldEJvdW5kYXJ5Tm9kZXMoKSx0LmdldEJvdW5kYXJ5Tm9kZXMoKSk7cmV0dXJuIHRoaXMuY3JlYXRlRWRnZVNldEludGVyc2VjdG9yKCkuY29tcHV0ZUludGVyc2VjdGlvbnModGhpcy5fZWRnZXMsdC5fZWRnZXMsaSksaX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyZW50R2VvbX0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnlOb2RlUnVsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib3VuZGFyeU5vZGVSdWxlfSxlLnByb3RvdHlwZS5oYXNUb29GZXdQb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzVG9vRmV3UG9pbnRzfSxlLnByb3RvdHlwZS5hZGRQb2ludD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgUXQpe3ZhciB0PWFyZ3VtZW50c1swXS5nZXRDb29yZGluYXRlKCk7dGhpcy5pbnNlcnRQb2ludCh0aGlzLl9hcmdJbmRleCx0LHcuSU5URVJJT1IpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBDKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5pbnNlcnRQb2ludCh0aGlzLl9hcmdJbmRleCxlLHcuSU5URVJJT1IpfX0sZS5wcm90b3R5cGUuYWRkUG9seWdvbj1mdW5jdGlvbih0KXt0aGlzLmFkZFBvbHlnb25SaW5nKHQuZ2V0RXh0ZXJpb3JSaW5nKCksdy5FWFRFUklPUix3LklOVEVSSU9SKTtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7ZSsrKXt2YXIgbj10LmdldEludGVyaW9yUmluZ04oZSk7dGhpcy5hZGRQb2x5Z29uUmluZyhuLHcuSU5URVJJT1Isdy5FWFRFUklPUil9fSxlLnByb3RvdHlwZS5hZGRFZGdlPWZ1bmN0aW9uKHQpe3RoaXMuaW5zZXJ0RWRnZSh0KTt2YXIgZT10LmdldENvb3JkaW5hdGVzKCk7dGhpcy5pbnNlcnRQb2ludCh0aGlzLl9hcmdJbmRleCxlWzBdLHcuQk9VTkRBUlkpLHRoaXMuaW5zZXJ0UG9pbnQodGhpcy5fYXJnSW5kZXgsZVtlLmxlbmd0aC0xXSx3LkJPVU5EQVJZKX0sZS5wcm90b3R5cGUuYWRkTGluZVN0cmluZz1mdW5jdGlvbih0KXt2YXIgZT1MdC5yZW1vdmVSZXBlYXRlZFBvaW50cyh0LmdldENvb3JkaW5hdGVzKCkpO2lmKGUubGVuZ3RoPDIpcmV0dXJuIHRoaXMuX2hhc1Rvb0Zld1BvaW50cz0hMCx0aGlzLl9pbnZhbGlkUG9pbnQ9ZVswXSxudWxsO3ZhciBuPW5ldyBuaShlLG5ldyBQZSh0aGlzLl9hcmdJbmRleCx3LklOVEVSSU9SKSk7dGhpcy5fbGluZUVkZ2VNYXAucHV0KHQsbiksdGhpcy5pbnNlcnRFZGdlKG4pLGV0LmlzVHJ1ZShlLmxlbmd0aD49MixcImZvdW5kIExpbmVTdHJpbmcgd2l0aCBzaW5nbGUgcG9pbnRcIiksdGhpcy5pbnNlcnRCb3VuZGFyeVBvaW50KHRoaXMuX2FyZ0luZGV4LGVbMF0pLHRoaXMuaW5zZXJ0Qm91bmRhcnlQb2ludCh0aGlzLl9hcmdJbmRleCxlW2UubGVuZ3RoLTFdKX0sZS5wcm90b3R5cGUuZ2V0SW52YWxpZFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludmFsaWRQb2ludH0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnlQb2ludHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nZXRCb3VuZGFyeU5vZGVzKCksZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCksbj0wLGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7ZVtuKytdPXIuZ2V0Q29vcmRpbmF0ZSgpLmNvcHkoKX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuZ2V0Qm91bmRhcnlOb2Rlcz1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fYm91bmRhcnlOb2RlcyYmKHRoaXMuX2JvdW5kYXJ5Tm9kZXM9dGhpcy5fbm9kZXMuZ2V0Qm91bmRhcnlOb2Rlcyh0aGlzLl9hcmdJbmRleCkpLHRoaXMuX2JvdW5kYXJ5Tm9kZXN9LGUucHJvdG90eXBlLmFkZFNlbGZJbnRlcnNlY3Rpb25Ob2RlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzQm91bmRhcnlOb2RlKHQsZSkpcmV0dXJuIG51bGw7bj09PXcuQk9VTkRBUlkmJnRoaXMuX3VzZUJvdW5kYXJ5RGV0ZXJtaW5hdGlvblJ1bGU/dGhpcy5pbnNlcnRCb3VuZGFyeVBvaW50KHQsZSk6dGhpcy5pbnNlcnRQb2ludCh0LGUsbil9LGUucHJvdG90eXBlLmFkZFBvbHlnb25SaW5nPWZ1bmN0aW9uKHQsZSxuKXtpZih0LmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt2YXIgaT1MdC5yZW1vdmVSZXBlYXRlZFBvaW50cyh0LmdldENvb3JkaW5hdGVzKCkpO2lmKGkubGVuZ3RoPDQpcmV0dXJuIHRoaXMuX2hhc1Rvb0Zld1BvaW50cz0hMCx0aGlzLl9pbnZhbGlkUG9pbnQ9aVswXSxudWxsO3ZhciByPWUsbz1uO2F0LmlzQ0NXKGkpJiYocj1uLG89ZSk7dmFyIHM9bmV3IG5pKGksbmV3IFBlKHRoaXMuX2FyZ0luZGV4LHcuQk9VTkRBUlkscixvKSk7dGhpcy5fbGluZUVkZ2VNYXAucHV0KHQscyksdGhpcy5pbnNlcnRFZGdlKHMpLHRoaXMuaW5zZXJ0UG9pbnQodGhpcy5fYXJnSW5kZXgsaVswXSx3LkJPVU5EQVJZKX0sZS5wcm90b3R5cGUuaW5zZXJ0UG9pbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX25vZGVzLmFkZE5vZGUoZSkscj1pLmdldExhYmVsKCk7bnVsbD09PXI/aS5fbGFiZWw9bmV3IFBlKHQsbik6ci5zZXRMb2NhdGlvbih0LG4pfSxlLnByb3RvdHlwZS5jcmVhdGVFZGdlU2V0SW50ZXJzZWN0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHByfSxlLnByb3RvdHlwZS5hZGRTZWxmSW50ZXJzZWN0aW9uTm9kZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2VkZ2VzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KSxyPW4uZWlMaXN0Lml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgbz1yLm5leHQoKTt0aGlzLmFkZFNlbGZJbnRlcnNlY3Rpb25Ob2RlKHQsby5jb29yZCxpKX19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0LnByb3RvdHlwZS5hZGQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPWFyZ3VtZW50c1swXTtpZihlLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDtpZihlIGluc3RhbmNlb2YgbmUmJih0aGlzLl91c2VCb3VuZGFyeURldGVybWluYXRpb25SdWxlPSExKSxlIGluc3RhbmNlb2YgJHQpdGhpcy5hZGRQb2x5Z29uKGUpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEt0KXRoaXMuYWRkTGluZVN0cmluZyhlKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBRdCl0aGlzLmFkZFBvaW50KGUpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIHRlKXRoaXMuYWRkQ29sbGVjdGlvbihlKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBYdCl0aGlzLmFkZENvbGxlY3Rpb24oZSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgbmUpdGhpcy5hZGRDb2xsZWN0aW9uKGUpO2Vsc2V7aWYoIShlIGluc3RhbmNlb2YgenQpKXRocm93IG5ldyBFcnJvcihlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTt0aGlzLmFkZENvbGxlY3Rpb24oZSl9fSxlLnByb3RvdHlwZS5hZGRDb2xsZWN0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5nZXROdW1HZW9tZXRyaWVzKCk7ZSsrKXt2YXIgbj10LmdldEdlb21ldHJ5TihlKTt0aGlzLmFkZChuKX19LGUucHJvdG90eXBlLmxvY2F0ZT1mdW5jdGlvbih0KXtyZXR1cm4gVCh0aGlzLl9wYXJlbnRHZW9tLFp0KSYmdGhpcy5fcGFyZW50R2VvbS5nZXROdW1HZW9tZXRyaWVzKCk+NTA/KG51bGw9PT10aGlzLl9hcmVhUHRMb2NhdG9yJiYodGhpcy5fYXJlYVB0TG9jYXRvcj1uZXcgdnIodGhpcy5fcGFyZW50R2VvbSkpLHRoaXMuX2FyZWFQdExvY2F0b3IubG9jYXRlKHQpKTp0aGlzLl9wdExvY2F0b3IubG9jYXRlKHQsdGhpcy5fcGFyZW50R2VvbSl9LGUucHJvdG90eXBlLmZpbmRFZGdlPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5fbGluZUVkZ2VNYXAuZ2V0KGUpfXJldHVybiB0LnByb3RvdHlwZS5maW5kRWRnZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LGUucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGUuZGV0ZXJtaW5lQm91bmRhcnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0luQm91bmRhcnkoZSk/dy5CT1VOREFSWTp3LklOVEVSSU9SfSxlfShZZSksQ3I9ZnVuY3Rpb24oKXtpZih0aGlzLl9saT1uZXcgcnQsdGhpcy5fcmVzdWx0UHJlY2lzaW9uTW9kZWw9bnVsbCx0aGlzLl9hcmc9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0Q29tcHV0YXRpb25QcmVjaXNpb24odC5nZXRQcmVjaXNpb25Nb2RlbCgpKSx0aGlzLl9hcmc9bmV3IEFycmF5KDEpLmZpbGwobnVsbCksdGhpcy5fYXJnWzBdPW5ldyBOcigwLHQpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWd0Lk9HQ19TRlNfQk9VTkRBUllfUlVMRTtlLmdldFByZWNpc2lvbk1vZGVsKCkuY29tcGFyZVRvKG4uZ2V0UHJlY2lzaW9uTW9kZWwoKSk+PTA/dGhpcy5zZXRDb21wdXRhdGlvblByZWNpc2lvbihlLmdldFByZWNpc2lvbk1vZGVsKCkpOnRoaXMuc2V0Q29tcHV0YXRpb25QcmVjaXNpb24obi5nZXRQcmVjaXNpb25Nb2RlbCgpKSx0aGlzLl9hcmc9bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5fYXJnWzBdPW5ldyBOcigwLGUsaSksdGhpcy5fYXJnWzFdPW5ldyBOcigxLG4saSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdO3IuZ2V0UHJlY2lzaW9uTW9kZWwoKS5jb21wYXJlVG8oby5nZXRQcmVjaXNpb25Nb2RlbCgpKT49MD90aGlzLnNldENvbXB1dGF0aW9uUHJlY2lzaW9uKHIuZ2V0UHJlY2lzaW9uTW9kZWwoKSk6dGhpcy5zZXRDb21wdXRhdGlvblByZWNpc2lvbihvLmdldFByZWNpc2lvbk1vZGVsKCkpLHRoaXMuX2FyZz1uZXcgQXJyYXkoMikuZmlsbChudWxsKSx0aGlzLl9hcmdbMF09bmV3IE5yKDAscixzKSx0aGlzLl9hcmdbMV09bmV3IE5yKDEsbyxzKX19O0NyLnByb3RvdHlwZS5nZXRBcmdHZW9tZXRyeT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXJnW3RdLmdldEdlb21ldHJ5KCl9LENyLnByb3RvdHlwZS5zZXRDb21wdXRhdGlvblByZWNpc2lvbj1mdW5jdGlvbih0KXt0aGlzLl9yZXN1bHRQcmVjaXNpb25Nb2RlbD10LHRoaXMuX2xpLnNldFByZWNpc2lvbk1vZGVsKHRoaXMuX3Jlc3VsdFByZWNpc2lvbk1vZGVsKX0sQ3IucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LENyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBDcn07dmFyIFNyPWZ1bmN0aW9uKCl7fTtTci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sU3IucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFNyfSxTci5tYXA9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGN0JiZUKGFyZ3VtZW50c1sxXSxTci5NYXBPcCkpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1uZXcgTnQsaT0wO2k8dC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj1lLm1hcCh0LmdldEdlb21ldHJ5TihpKSk7bnVsbCE9PXImJm4uYWRkKHIpfXJldHVybiB0LmdldEZhY3RvcnkoKS5idWlsZEdlb21ldHJ5KG4pfWlmKFQoYXJndW1lbnRzWzBdLEl0KSYmVChhcmd1bWVudHNbMV0sU3IuTWFwT3ApKXtmb3IodmFyIG89YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLGE9bmV3IE50LHU9by5pdGVyYXRvcigpO3UuaGFzTmV4dCgpOyl7dmFyIGw9dS5uZXh0KCksYz1zLm1hcChsKTtudWxsIT09YyYmYS5hZGQoYyl9cmV0dXJuIGF9fSxTci5NYXBPcD1mdW5jdGlvbigpe307dmFyIExyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dC5jYWxsKHRoaXMsZSxuKSx0aGlzLl9wdExvY2F0b3I9bmV3IFNpLHRoaXMuX2dlb21GYWN0PW51bGwsdGhpcy5fcmVzdWx0R2VvbT1udWxsLHRoaXMuX2dyYXBoPW51bGwsdGhpcy5fZWRnZUxpc3Q9bmV3IEhuLHRoaXMuX3Jlc3VsdFBvbHlMaXN0PW5ldyBOdCx0aGlzLl9yZXN1bHRMaW5lTGlzdD1uZXcgTnQsdGhpcy5fcmVzdWx0UG9pbnRMaXN0PW5ldyBOdCx0aGlzLl9ncmFwaD1uZXcgWWUobmV3IGtuKSx0aGlzLl9nZW9tRmFjdD1lLmdldEZhY3RvcnkoKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuaW5zZXJ0VW5pcXVlRWRnZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9lZGdlTGlzdC5maW5kRXF1YWxFZGdlKHQpO2lmKG51bGwhPT1lKXt2YXIgbj1lLmdldExhYmVsKCksaT10LmdldExhYmVsKCk7ZS5pc1BvaW50d2lzZUVxdWFsKHQpfHwoaT1uZXcgUGUodC5nZXRMYWJlbCgpKSkuZmxpcCgpO3ZhciByPWUuZ2V0RGVwdGgoKTtyLmlzTnVsbCgpJiZyLmFkZChuKSxyLmFkZChpKSxuLm1lcmdlKGkpfWVsc2UgdGhpcy5fZWRnZUxpc3QuYWRkKHQpfSxlLnByb3RvdHlwZS5nZXRHcmFwaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncmFwaH0sZS5wcm90b3R5cGUuY2FuY2VsRHVwbGljYXRlUmVzdWx0RWRnZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fZ3JhcGguZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCksbj1lLmdldFN5bSgpO2UuaXNJblJlc3VsdCgpJiZuLmlzSW5SZXN1bHQoKSYmKGUuc2V0SW5SZXN1bHQoITEpLG4uc2V0SW5SZXN1bHQoITEpKX19LGUucHJvdG90eXBlLmlzQ292ZXJlZEJ5TEE9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmlzQ292ZXJlZCh0LHRoaXMuX3Jlc3VsdExpbmVMaXN0KXx8ISF0aGlzLmlzQ292ZXJlZCh0LHRoaXMuX3Jlc3VsdFBvbHlMaXN0KX0sZS5wcm90b3R5cGUuY29tcHV0ZUdlb21ldHJ5PWZ1bmN0aW9uKHQsbixpLHIpe3ZhciBvPW5ldyBOdDtyZXR1cm4gby5hZGRBbGwodCksby5hZGRBbGwobiksby5hZGRBbGwoaSksby5pc0VtcHR5KCk/ZS5jcmVhdGVFbXB0eVJlc3VsdChyLHRoaXMuX2FyZ1swXS5nZXRHZW9tZXRyeSgpLHRoaXMuX2FyZ1sxXS5nZXRHZW9tZXRyeSgpLHRoaXMuX2dlb21GYWN0KTp0aGlzLl9nZW9tRmFjdC5idWlsZEdlb21ldHJ5KG8pfSxlLnByb3RvdHlwZS5tZXJnZVN5bUxhYmVscz1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9ncmFwaC5nZXROb2RlcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt0Lm5leHQoKS5nZXRFZGdlcygpLm1lcmdlU3ltTGFiZWxzKCl9fSxlLnByb3RvdHlwZS5pc0NvdmVyZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aWYodGhpcy5fcHRMb2NhdG9yLmxvY2F0ZSh0LGkpIT09dy5FWFRFUklPUilyZXR1cm4hMH1yZXR1cm4hMX0sZS5wcm90b3R5cGUucmVwbGFjZUNvbGxhcHNlZEVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBOdCxlPXRoaXMuX2VkZ2VMaXN0Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtuLmlzQ29sbGFwc2VkKCkmJihlLnJlbW92ZSgpLHQuYWRkKG4uZ2V0Q29sbGFwc2VkRWRnZSgpKSl9dGhpcy5fZWRnZUxpc3QuYWRkQWxsKHQpfSxlLnByb3RvdHlwZS51cGRhdGVOb2RlTGFiZWxsaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2dyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpLG49ZS5nZXRFZGdlcygpLmdldExhYmVsKCk7ZS5nZXRMYWJlbCgpLm1lcmdlKG4pfX0sZS5wcm90b3R5cGUuZ2V0UmVzdWx0R2VvbWV0cnk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29tcHV0ZU92ZXJsYXkodCksdGhpcy5fcmVzdWx0R2VvbX0sZS5wcm90b3R5cGUuaW5zZXJ0VW5pcXVlRWRnZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuaW5zZXJ0VW5pcXVlRWRnZShuKX19LGUucHJvdG90eXBlLmNvbXB1dGVPdmVybGF5PWZ1bmN0aW9uKHQpe3RoaXMuY29weVBvaW50cygwKSx0aGlzLmNvcHlQb2ludHMoMSksdGhpcy5fYXJnWzBdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5fbGksITEpLHRoaXMuX2FyZ1sxXS5jb21wdXRlU2VsZk5vZGVzKHRoaXMuX2xpLCExKSx0aGlzLl9hcmdbMF0uY29tcHV0ZUVkZ2VJbnRlcnNlY3Rpb25zKHRoaXMuX2FyZ1sxXSx0aGlzLl9saSwhMCk7dmFyIGU9bmV3IE50O3RoaXMuX2FyZ1swXS5jb21wdXRlU3BsaXRFZGdlcyhlKSx0aGlzLl9hcmdbMV0uY29tcHV0ZVNwbGl0RWRnZXMoZSksdGhpcy5pbnNlcnRVbmlxdWVFZGdlcyhlKSx0aGlzLmNvbXB1dGVMYWJlbHNGcm9tRGVwdGhzKCksdGhpcy5yZXBsYWNlQ29sbGFwc2VkRWRnZXMoKSxZaS5jaGVja1ZhbGlkKHRoaXMuX2VkZ2VMaXN0LmdldEVkZ2VzKCkpLHRoaXMuX2dyYXBoLmFkZEVkZ2VzKHRoaXMuX2VkZ2VMaXN0LmdldEVkZ2VzKCkpLHRoaXMuY29tcHV0ZUxhYmVsbGluZygpLHRoaXMubGFiZWxJbmNvbXBsZXRlTm9kZXMoKSx0aGlzLmZpbmRSZXN1bHRBcmVhRWRnZXModCksdGhpcy5jYW5jZWxEdXBsaWNhdGVSZXN1bHRFZGdlcygpO3ZhciBuPW5ldyBrZSh0aGlzLl9nZW9tRmFjdCk7bi5hZGQodGhpcy5fZ3JhcGgpLHRoaXMuX3Jlc3VsdFBvbHlMaXN0PW4uZ2V0UG9seWdvbnMoKTt2YXIgaT1uZXcgamkodGhpcyx0aGlzLl9nZW9tRmFjdCx0aGlzLl9wdExvY2F0b3IpO3RoaXMuX3Jlc3VsdExpbmVMaXN0PWkuYnVpbGQodCk7dmFyIHI9bmV3IEhpKHRoaXMsdGhpcy5fZ2VvbUZhY3QsdGhpcy5fcHRMb2NhdG9yKTt0aGlzLl9yZXN1bHRQb2ludExpc3Q9ci5idWlsZCh0KSx0aGlzLl9yZXN1bHRHZW9tPXRoaXMuY29tcHV0ZUdlb21ldHJ5KHRoaXMuX3Jlc3VsdFBvaW50TGlzdCx0aGlzLl9yZXN1bHRMaW5lTGlzdCx0aGlzLl9yZXN1bHRQb2x5TGlzdCx0KX0sZS5wcm90b3R5cGUubGFiZWxJbmNvbXBsZXRlTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3B0TG9jYXRvci5sb2NhdGUodC5nZXRDb29yZGluYXRlKCksdGhpcy5fYXJnW2VdLmdldEdlb21ldHJ5KCkpO3QuZ2V0TGFiZWwoKS5zZXRMb2NhdGlvbihlLG4pfSxlLnByb3RvdHlwZS5jb3B5UG9pbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9hcmdbdF0uZ2V0Tm9kZUl0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLl9ncmFwaC5hZGROb2RlKG4uZ2V0Q29vcmRpbmF0ZSgpKS5zZXRMYWJlbCh0LG4uZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KSl9fSxlLnByb3RvdHlwZS5maW5kUmVzdWx0QXJlYUVkZ2VzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbj10aGlzLl9ncmFwaC5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0TGFiZWwoKTtyLmlzQXJlYSgpJiYhaS5pc0ludGVyaW9yQXJlYUVkZ2UoKSYmZS5pc1Jlc3VsdE9mT3Aoci5nZXRMb2NhdGlvbigwLFNlLlJJR0hUKSxyLmdldExvY2F0aW9uKDEsU2UuUklHSFQpLHQpJiZpLnNldEluUmVzdWx0KCEwKX19LGUucHJvdG90eXBlLmNvbXB1dGVMYWJlbHNGcm9tRGVwdGhzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2VkZ2VMaXN0Lml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKSxuPWUuZ2V0TGFiZWwoKSxpPWUuZ2V0RGVwdGgoKTtpZighaS5pc051bGwoKSl7aS5ub3JtYWxpemUoKTtmb3IodmFyIHI9MDtyPDI7cisrKW4uaXNOdWxsKHIpfHwhbi5pc0FyZWEoKXx8aS5pc051bGwocil8fCgwPT09aS5nZXREZWx0YShyKT9uLnRvTGluZShyKTooZXQuaXNUcnVlKCFpLmlzTnVsbChyLFNlLkxFRlQpLFwiZGVwdGggb2YgTEVGVCBzaWRlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZFwiKSxuLnNldExvY2F0aW9uKHIsU2UuTEVGVCxpLmdldExvY2F0aW9uKHIsU2UuTEVGVCkpLGV0LmlzVHJ1ZSghaS5pc051bGwocixTZS5SSUdIVCksXCJkZXB0aCBvZiBSSUdIVCBzaWRlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZFwiKSxuLnNldExvY2F0aW9uKHIsU2UuUklHSFQsaS5nZXRMb2NhdGlvbihyLFNlLlJJR0hUKSkpKX19fSxlLnByb3RvdHlwZS5jb21wdXRlTGFiZWxsaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2dyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3QubmV4dCgpLmdldEVkZ2VzKCkuY29tcHV0ZUxhYmVsbGluZyh0aGlzLl9hcmcpfXRoaXMubWVyZ2VTeW1MYWJlbHMoKSx0aGlzLnVwZGF0ZU5vZGVMYWJlbGxpbmcoKX0sZS5wcm90b3R5cGUubGFiZWxJbmNvbXBsZXRlTm9kZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fZ3JhcGguZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCksbj1lLmdldExhYmVsKCk7ZS5pc0lzb2xhdGVkKCkmJihuLmlzTnVsbCgwKT90aGlzLmxhYmVsSW5jb21wbGV0ZU5vZGUoZSwwKTp0aGlzLmxhYmVsSW5jb21wbGV0ZU5vZGUoZSwxKSksZS5nZXRFZGdlcygpLnVwZGF0ZUxhYmVsbGluZyhuKX19LGUucHJvdG90eXBlLmlzQ292ZXJlZEJ5QT1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuaXNDb3ZlcmVkKHQsdGhpcy5fcmVzdWx0UG9seUxpc3QpfSxlLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxlLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBlfSxlfShDcik7THIub3ZlcmxheU9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IExyKHQsZSkuZ2V0UmVzdWx0R2VvbWV0cnkobil9LExyLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe2lmKHQuaXNFbXB0eSgpfHxlLmlzRW1wdHkoKSlyZXR1cm4gTHIuY3JlYXRlRW1wdHlSZXN1bHQoTHIuSU5URVJTRUNUSU9OLHQsZSx0LmdldEZhY3RvcnkoKSk7aWYodC5pc0dlb21ldHJ5Q29sbGVjdGlvbigpKXt2YXIgbj1lO3JldHVybiBraS5tYXAodCx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bU3IuTWFwT3BdfSxtYXA6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW50ZXJzZWN0aW9uKG4pfX0pfXJldHVybiB0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksb3Iub3ZlcmxheU9wKHQsZSxMci5JTlRFUlNFQ1RJT04pfSxMci5zeW1EaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7aWYodC5pc0VtcHR5KCl8fGUuaXNFbXB0eSgpKXtpZih0LmlzRW1wdHkoKSYmZS5pc0VtcHR5KCkpcmV0dXJuIExyLmNyZWF0ZUVtcHR5UmVzdWx0KExyLlNZTURJRkZFUkVOQ0UsdCxlLHQuZ2V0RmFjdG9yeSgpKTtpZih0LmlzRW1wdHkoKSlyZXR1cm4gZS5jb3B5KCk7aWYoZS5pc0VtcHR5KCkpcmV0dXJuIHQuY29weSgpfXJldHVybiB0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksb3Iub3ZlcmxheU9wKHQsZSxMci5TWU1ESUZGRVJFTkNFKX0sTHIucmVzdWx0RGltZW5zaW9uPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLmdldERpbWVuc2lvbigpLHI9bi5nZXREaW1lbnNpb24oKSxvPS0xO3N3aXRjaCh0KXtjYXNlIExyLklOVEVSU0VDVElPTjpvPU1hdGgubWluKGkscik7YnJlYWs7Y2FzZSBMci5VTklPTjpvPU1hdGgubWF4KGkscik7YnJlYWs7Y2FzZSBMci5ESUZGRVJFTkNFOm89aTticmVhaztjYXNlIExyLlNZTURJRkZFUkVOQ0U6bz1NYXRoLm1heChpLHIpfXJldHVybiBvfSxMci5jcmVhdGVFbXB0eVJlc3VsdD1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1udWxsO3N3aXRjaChMci5yZXN1bHREaW1lbnNpb24odCxlLG4pKXtjYXNlLTE6cj1pLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihuZXcgQXJyYXkoMCkuZmlsbChudWxsKSk7YnJlYWs7Y2FzZSAwOnI9aS5jcmVhdGVQb2ludCgpO2JyZWFrO2Nhc2UgMTpyPWkuY3JlYXRlTGluZVN0cmluZygpO2JyZWFrO2Nhc2UgMjpyPWkuY3JlYXRlUG9seWdvbigpfXJldHVybiByfSxMci5kaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaXNFbXB0eSgpP0xyLmNyZWF0ZUVtcHR5UmVzdWx0KExyLkRJRkZFUkVOQ0UsdCxlLHQuZ2V0RmFjdG9yeSgpKTplLmlzRW1wdHkoKT90LmNvcHkoKToodC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0KSx0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKGUpLG9yLm92ZXJsYXlPcCh0LGUsTHIuRElGRkVSRU5DRSkpfSxMci5pc1Jlc3VsdE9mT3A9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49dC5nZXRMb2NhdGlvbigwKSxpPXQuZ2V0TG9jYXRpb24oMSk7cmV0dXJuIExyLmlzUmVzdWx0T2ZPcChuLGksZSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxzPWFyZ3VtZW50c1syXTtzd2l0Y2gocj09PXcuQk9VTkRBUlkmJihyPXcuSU5URVJJT1IpLG89PT13LkJPVU5EQVJZJiYobz13LklOVEVSSU9SKSxzKXtjYXNlIExyLklOVEVSU0VDVElPTjpyZXR1cm4gcj09PXcuSU5URVJJT1ImJm89PT13LklOVEVSSU9SO2Nhc2UgTHIuVU5JT046cmV0dXJuIHI9PT13LklOVEVSSU9SfHxvPT09dy5JTlRFUklPUjtjYXNlIExyLkRJRkZFUkVOQ0U6cmV0dXJuIHI9PT13LklOVEVSSU9SJiZvIT09dy5JTlRFUklPUjtjYXNlIExyLlNZTURJRkZFUkVOQ0U6cmV0dXJuIHI9PT13LklOVEVSSU9SJiZvIT09dy5JTlRFUklPUnx8ciE9PXcuSU5URVJJT1ImJm89PT13LklOVEVSSU9SfXJldHVybiExfX0sTHIuSU5URVJTRUNUSU9OPTEsTHIuVU5JT049MixMci5ESUZGRVJFTkNFPTMsTHIuU1lNRElGRkVSRU5DRT00O3ZhciBicj1mdW5jdGlvbigpe3RoaXMuX2c9bnVsbCx0aGlzLl9ib3VuZGFyeURpc3RhbmNlVG9sZXJhbmNlPW51bGwsdGhpcy5fbGluZXdvcms9bnVsbCx0aGlzLl9wdExvY2F0b3I9bmV3IFNpLHRoaXMuX3NlZz1uZXcgZG47dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuX2c9dCx0aGlzLl9ib3VuZGFyeURpc3RhbmNlVG9sZXJhbmNlPWUsdGhpcy5fbGluZXdvcms9dGhpcy5leHRyYWN0TGluZXdvcmsodCl9O2JyLnByb3RvdHlwZS5pc1dpdGhpblRvbGVyYW5jZU9mQm91bmRhcnk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9saW5ld29yay5nZXROdW1HZW9tZXRyaWVzKCk7ZSsrKWZvcih2YXIgbj10aGlzLl9saW5ld29yay5nZXRHZW9tZXRyeU4oZSkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksaT0wO2k8bi5zaXplKCktMTtpKyspe24uZ2V0Q29vcmRpbmF0ZShpLHRoaXMuX3NlZy5wMCksbi5nZXRDb29yZGluYXRlKGkrMSx0aGlzLl9zZWcucDEpO2lmKHRoaXMuX3NlZy5kaXN0YW5jZSh0KTw9dGhpcy5fYm91bmRhcnlEaXN0YW5jZVRvbGVyYW5jZSlyZXR1cm4hMH1yZXR1cm4hMX0sYnIucHJvdG90eXBlLmdldExvY2F0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzV2l0aGluVG9sZXJhbmNlT2ZCb3VuZGFyeSh0KT93LkJPVU5EQVJZOnRoaXMuX3B0TG9jYXRvci5sb2NhdGUodCx0aGlzLl9nKX0sYnIucHJvdG90eXBlLmV4dHJhY3RMaW5ld29yaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgd3I7dC5hcHBseShlKTt2YXIgbj1lLmdldExpbmV3b3JrKCksaT1fZS50b0xpbmVTdHJpbmdBcnJheShuKTtyZXR1cm4gdC5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGkpfSxici5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sYnIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGJyfTt2YXIgd3I9ZnVuY3Rpb24oKXt0aGlzLl9saW5ld29yaz1udWxsLHRoaXMuX2xpbmV3b3JrPW5ldyBOdH07d3IucHJvdG90eXBlLmdldExpbmV3b3JrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmV3b3JrfSx3ci5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiAkdCl7dmFyIGU9dDt0aGlzLl9saW5ld29yay5hZGQoZS5nZXRFeHRlcmlvclJpbmcoKSk7Zm9yKHZhciBuPTA7bjxlLmdldE51bUludGVyaW9yUmluZygpO24rKyl0aGlzLl9saW5ld29yay5hZGQoZS5nZXRJbnRlcmlvclJpbmdOKG4pKX19LHdyLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltWdF19LHdyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB3cn07dmFyIE9yPWZ1bmN0aW9uKCl7dGhpcy5fZz1udWxsLHRoaXMuX2RvTGVmdD0hMCx0aGlzLl9kb1JpZ2h0PSEwO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLl9nPXR9O09yLnByb3RvdHlwZS5leHRyYWN0UG9pbnRzPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9dC5nZXRDb29yZGluYXRlcygpLHI9MDtyPGkubGVuZ3RoLTE7cisrKXRoaXMuY29tcHV0ZU9mZnNldFBvaW50cyhpW3JdLGlbcisxXSxlLG4pfSxPci5wcm90b3R5cGUuc2V0U2lkZXNUb0dlbmVyYXRlPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZG9MZWZ0PXQsdGhpcy5fZG9SaWdodD1lfSxPci5wcm90b3R5cGUuZ2V0UG9pbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgTnQsbj1DaS5nZXRMaW5lcyh0aGlzLl9nKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7dGhpcy5leHRyYWN0UG9pbnRzKGksdCxlKX1yZXR1cm4gZX0sT3IucHJvdG90eXBlLmNvbXB1dGVPZmZzZXRQb2ludHM9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9ZS54LXQueCxvPWUueS10Lnkscz1NYXRoLnNxcnQocipyK28qbyksYT1uKnIvcyx1PW4qby9zLGw9KGUueCt0LngpLzIsYz0oZS55K3QueSkvMjtpZih0aGlzLl9kb0xlZnQpe3ZhciBwPW5ldyBDKGwtdSxjK2EpO2kuYWRkKHApfWlmKHRoaXMuX2RvUmlnaHQpe3ZhciBoPW5ldyBDKGwrdSxjLWEpO2kuYWRkKGgpfX0sT3IucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LE9yLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBPcn07dmFyIFRyPWZ1bmN0aW9uIHQoKXt0aGlzLl9nZW9tPW51bGwsdGhpcy5fbG9jRmluZGVyPW51bGwsdGhpcy5fbG9jYXRpb249bmV3IEFycmF5KDMpLmZpbGwobnVsbCksdGhpcy5faW52YWxpZExvY2F0aW9uPW51bGwsdGhpcy5fYm91bmRhcnlEaXN0YW5jZVRvbGVyYW5jZT10LlRPTEVSQU5DRSx0aGlzLl90ZXN0Q29vcmRzPW5ldyBOdDt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMl07dGhpcy5fYm91bmRhcnlEaXN0YW5jZVRvbGVyYW5jZT10LmNvbXB1dGVCb3VuZGFyeURpc3RhbmNlVG9sZXJhbmNlKGUsbiksdGhpcy5fZ2VvbT1bZSxuLGldLHRoaXMuX2xvY0ZpbmRlcj1bbmV3IGJyKHRoaXMuX2dlb21bMF0sdGhpcy5fYm91bmRhcnlEaXN0YW5jZVRvbGVyYW5jZSksbmV3IGJyKHRoaXMuX2dlb21bMV0sdGhpcy5fYm91bmRhcnlEaXN0YW5jZVRvbGVyYW5jZSksbmV3IGJyKHRoaXMuX2dlb21bMl0sdGhpcy5fYm91bmRhcnlEaXN0YW5jZVRvbGVyYW5jZSldfSxScj17VE9MRVJBTkNFOntjb25maWd1cmFibGU6ITB9fTtUci5wcm90b3R5cGUucmVwb3J0UmVzdWx0PWZ1bmN0aW9uKHQsZSxuKXtZLm91dC5wcmludGxuKFwiT3ZlcmxheSByZXN1bHQgaW52YWxpZCAtIEE6XCIrdy50b0xvY2F0aW9uU3ltYm9sKGVbMF0pK1wiIEI6XCIrdy50b0xvY2F0aW9uU3ltYm9sKGVbMV0pK1wiIGV4cGVjdGVkOlwiKyhuP1wiaVwiOlwiZVwiKStcIiBhY3R1YWw6XCIrdy50b0xvY2F0aW9uU3ltYm9sKGVbMl0pKX0sVHIucHJvdG90eXBlLmlzVmFsaWQ9ZnVuY3Rpb24odCl7dGhpcy5hZGRUZXN0UHRzKHRoaXMuX2dlb21bMF0pLHRoaXMuYWRkVGVzdFB0cyh0aGlzLl9nZW9tWzFdKTt2YXIgZT10aGlzLmNoZWNrVmFsaWQodCk7cmV0dXJuIGV9LFRyLnByb3RvdHlwZS5jaGVja1ZhbGlkPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wO2U8dGhpcy5fdGVzdENvb3Jkcy5zaXplKCk7ZSsrKXt2YXIgbj10aGlzLl90ZXN0Q29vcmRzLmdldChlKTtpZighdGhpcy5jaGVja1ZhbGlkKHQsbikpcmV0dXJuIHRoaXMuX2ludmFsaWRMb2NhdGlvbj1uLCExfXJldHVybiEwfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuX2xvY2F0aW9uWzBdPXRoaXMuX2xvY0ZpbmRlclswXS5nZXRMb2NhdGlvbihyKSx0aGlzLl9sb2NhdGlvblsxXT10aGlzLl9sb2NGaW5kZXJbMV0uZ2V0TG9jYXRpb24ociksdGhpcy5fbG9jYXRpb25bMl09dGhpcy5fbG9jRmluZGVyWzJdLmdldExvY2F0aW9uKHIpLCEhVHIuaGFzTG9jYXRpb24odGhpcy5fbG9jYXRpb24sdy5CT1VOREFSWSl8fHRoaXMuaXNWYWxpZFJlc3VsdChpLHRoaXMuX2xvY2F0aW9uKX19LFRyLnByb3RvdHlwZS5hZGRUZXN0UHRzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBPcih0KTt0aGlzLl90ZXN0Q29vcmRzLmFkZEFsbChlLmdldFBvaW50cyg1KnRoaXMuX2JvdW5kYXJ5RGlzdGFuY2VUb2xlcmFuY2UpKX0sVHIucHJvdG90eXBlLmlzVmFsaWRSZXN1bHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1Mci5pc1Jlc3VsdE9mT3AoZVswXSxlWzFdLHQpLGk9IShuXmVbMl09PT13LklOVEVSSU9SKTtyZXR1cm4gaXx8dGhpcy5yZXBvcnRSZXN1bHQodCxlLG4pLGl9LFRyLnByb3RvdHlwZS5nZXRJbnZhbGlkTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW52YWxpZExvY2F0aW9ufSxUci5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bXX0sVHIucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIFRyfSxUci5oYXNMb2NhdGlvbj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248MztuKyspaWYodFtuXT09PWUpcmV0dXJuITA7cmV0dXJuITF9LFRyLmNvbXB1dGVCb3VuZGFyeURpc3RhbmNlVG9sZXJhbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGgubWluKEppLmNvbXB1dGVTaXplQmFzZWRTbmFwVG9sZXJhbmNlKHQpLEppLmNvbXB1dGVTaXplQmFzZWRTbmFwVG9sZXJhbmNlKGUpKX0sVHIuaXNWYWxpZD1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gbmV3IFRyKHQsZSxpKS5pc1ZhbGlkKG4pfSxSci5UT0xFUkFOQ0UuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDFlLTZ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRyLFJyKTt2YXIgUHI9ZnVuY3Rpb24gdChlKXt0aGlzLl9nZW9tRmFjdG9yeT1udWxsLHRoaXMuX3NraXBFbXB0eT0hMSx0aGlzLl9pbnB1dEdlb21zPW51bGwsdGhpcy5fZ2VvbUZhY3Rvcnk9dC5leHRyYWN0RmFjdG9yeShlKSx0aGlzLl9pbnB1dEdlb21zPWV9O1ByLnByb3RvdHlwZS5leHRyYWN0RWxlbWVudHM9ZnVuY3Rpb24odCxlKXtpZihudWxsPT09dClyZXR1cm4gbnVsbDtmb3IodmFyIG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dC5nZXRHZW9tZXRyeU4obik7dGhpcy5fc2tpcEVtcHR5JiZpLmlzRW1wdHkoKXx8ZS5hZGQoaSl9fSxQci5wcm90b3R5cGUuY29tYmluZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgTnQsZT10aGlzLl9pbnB1dEdlb21zLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLmV4dHJhY3RFbGVtZW50cyhuLHQpfXJldHVybiAwPT09dC5zaXplKCk/bnVsbCE9PXRoaXMuX2dlb21GYWN0b3J5P3RoaXMuX2dlb21GYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKTpudWxsOnRoaXMuX2dlb21GYWN0b3J5LmJ1aWxkR2VvbWV0cnkodCl9LFByLnByb3RvdHlwZS5pbnRlcmZhY2VzXz1mdW5jdGlvbigpe3JldHVybltdfSxQci5wcm90b3R5cGUuZ2V0Q2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gUHJ9LFByLmNvbWJpbmU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBuZXcgUHIodCkuY29tYmluZSgpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuIG5ldyBQcihQci5jcmVhdGVMaXN0KGUsbikpLmNvbWJpbmUoKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdO3JldHVybiBuZXcgUHIoUHIuY3JlYXRlTGlzdChpLHIsbykpLmNvbWJpbmUoKX19LFByLmV4dHJhY3RGYWN0b3J5PWZ1bmN0aW9uKHQpe3JldHVybiB0LmlzRW1wdHkoKT9udWxsOnQuaXRlcmF0b3IoKS5uZXh0KCkuZ2V0RmFjdG9yeSgpfSxQci5jcmVhdGVMaXN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPW5ldyBOdDtyZXR1cm4gbi5hZGQodCksbi5hZGQoZSksbn1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdLHM9bmV3IE50O3JldHVybiBzLmFkZChpKSxzLmFkZChyKSxzLmFkZChvKSxzfX07dmFyIERyPWZ1bmN0aW9uKCl7dGhpcy5faW5wdXRQb2x5cz1udWxsLHRoaXMuX2dlb21GYWN0b3J5PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuX2lucHV0UG9seXM9dCxudWxsPT09dGhpcy5faW5wdXRQb2x5cyYmKHRoaXMuX2lucHV0UG9seXM9bmV3IE50KX0sTXI9e1NUUlRSRUVfTk9ERV9DQVBBQ0lUWTp7Y29uZmlndXJhYmxlOiEwfX07RHIucHJvdG90eXBlLnJlZHVjZVRvR2VvbWV0cmllcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IE50LG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCkscj1udWxsO1QoaSx4dCk/cj10aGlzLnVuaW9uVHJlZShpKTppIGluc3RhbmNlb2YgY3QmJihyPWkpLGUuYWRkKHIpfXJldHVybiBlfSxEci5wcm90b3R5cGUuZXh0cmFjdEJ5RW52ZWxvcGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1uZXcgTnQscj0wO3I8ZS5nZXROdW1HZW9tZXRyaWVzKCk7cisrKXt2YXIgbz1lLmdldEdlb21ldHJ5TihyKTtvLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHQpP2kuYWRkKG8pOm4uYWRkKG8pfXJldHVybiB0aGlzLl9nZW9tRmFjdG9yeS5idWlsZEdlb21ldHJ5KGkpfSxEci5wcm90b3R5cGUudW5pb25PcHRpbWl6ZWQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldEVudmVsb3BlSW50ZXJuYWwoKSxpPWUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO2lmKCFuLmludGVyc2VjdHMoaSkpe3JldHVybiBQci5jb21iaW5lKHQsZSl9aWYodC5nZXROdW1HZW9tZXRyaWVzKCk8PTEmJmUuZ2V0TnVtR2VvbWV0cmllcygpPD0xKXJldHVybiB0aGlzLnVuaW9uQWN0dWFsKHQsZSk7dmFyIHI9bi5pbnRlcnNlY3Rpb24oaSk7cmV0dXJuIHRoaXMudW5pb25Vc2luZ0VudmVsb3BlSW50ZXJzZWN0aW9uKHQsZSxyKX0sRHIucHJvdG90eXBlLnVuaW9uPWZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuX2lucHV0UG9seXMpdGhyb3cgbmV3IEVycm9yKFwidW5pb24oKSBtZXRob2QgY2Fubm90IGJlIGNhbGxlZCB0d2ljZVwiKTtpZih0aGlzLl9pbnB1dFBvbHlzLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt0aGlzLl9nZW9tRmFjdG9yeT10aGlzLl9pbnB1dFBvbHlzLml0ZXJhdG9yKCkubmV4dCgpLmdldEZhY3RvcnkoKTtmb3IodmFyIHQ9bmV3IHNuKERyLlNUUlRSRUVfTk9ERV9DQVBBQ0lUWSksZT10aGlzLl9pbnB1dFBvbHlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0Lmluc2VydChuLmdldEVudmVsb3BlSW50ZXJuYWwoKSxuKX10aGlzLl9pbnB1dFBvbHlzPW51bGw7dmFyIGk9dC5pdGVtc1RyZWUoKTtyZXR1cm4gdGhpcy51bmlvblRyZWUoaSl9LERyLnByb3RvdHlwZS5iaW5hcnlVbmlvbj1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuYmluYXJ5VW5pb24odCwwLHQuc2l6ZSgpKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdO2lmKGktbjw9MSl7dmFyIHI9RHIuZ2V0R2VvbWV0cnkoZSxuKTtyZXR1cm4gdGhpcy51bmlvblNhZmUocixudWxsKX1pZihpLW49PTIpcmV0dXJuIHRoaXMudW5pb25TYWZlKERyLmdldEdlb21ldHJ5KGUsbiksRHIuZ2V0R2VvbWV0cnkoZSxuKzEpKTt2YXIgbz1NYXRoLnRydW5jKChpK24pLzIpLHM9dGhpcy5iaW5hcnlVbmlvbihlLG4sbyksYT10aGlzLmJpbmFyeVVuaW9uKGUsbyxpKTtyZXR1cm4gdGhpcy51bmlvblNhZmUocyxhKX19LERyLnByb3RvdHlwZS5yZXBlYXRlZFVuaW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7ZT1udWxsPT09ZT9pLmNvcHkoKTplLnVuaW9uKGkpfXJldHVybiBlfSxEci5wcm90b3R5cGUudW5pb25TYWZlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PT10JiZudWxsPT09ZT9udWxsOm51bGw9PT10P2UuY29weSgpOm51bGw9PT1lP3QuY29weSgpOnRoaXMudW5pb25PcHRpbWl6ZWQodCxlKX0sRHIucHJvdG90eXBlLnVuaW9uQWN0dWFsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIERyLnJlc3RyaWN0VG9Qb2x5Z29ucyh0LnVuaW9uKGUpKX0sRHIucHJvdG90eXBlLnVuaW9uVHJlZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlZHVjZVRvR2VvbWV0cmllcyh0KTtyZXR1cm4gdGhpcy5iaW5hcnlVbmlvbihlKX0sRHIucHJvdG90eXBlLnVuaW9uVXNpbmdFbnZlbG9wZUludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUsbil7dmFyIGk9bmV3IE50LHI9dGhpcy5leHRyYWN0QnlFbnZlbG9wZShuLHQsaSksbz10aGlzLmV4dHJhY3RCeUVudmVsb3BlKG4sZSxpKSxzPXRoaXMudW5pb25BY3R1YWwocixvKTtpLmFkZChzKTtyZXR1cm4gUHIuY29tYmluZShpKX0sRHIucHJvdG90eXBlLmJ1ZmZlclVuaW9uPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdC5nZXQoMCkuZ2V0RmFjdG9yeSgpLmJ1aWxkR2VvbWV0cnkodCkuYnVmZmVyKDApfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuIGUuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihbZSxuXSkuYnVmZmVyKDApfX0sRHIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LERyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBEcn0sRHIucmVzdHJpY3RUb1BvbHlnb25zPWZ1bmN0aW9uKHQpe2lmKFQodCxadCkpcmV0dXJuIHQ7dmFyIGU9TmkuZ2V0UG9seWdvbnModCk7cmV0dXJuIDE9PT1lLnNpemUoKT9lLmdldCgwKTp0LmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aVBvbHlnb24oX2UudG9Qb2x5Z29uQXJyYXkoZSkpfSxEci5nZXRHZW9tZXRyeT1mdW5jdGlvbih0LGUpe3JldHVybiBlPj10LnNpemUoKT9udWxsOnQuZ2V0KGUpfSxEci51bmlvbj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IERyKHQpLnVuaW9uKCl9LE1yLlNUUlRSRUVfTk9ERV9DQVBBQ0lUWS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gNH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRHIsTXIpO3ZhciBBcj1mdW5jdGlvbigpe307QXIucHJvdG90eXBlLmludGVyZmFjZXNfPWZ1bmN0aW9uKCl7cmV0dXJuW119LEFyLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiBBcn0sQXIudW5pb249ZnVuY3Rpb24odCxlKXtpZih0LmlzRW1wdHkoKXx8ZS5pc0VtcHR5KCkpe2lmKHQuaXNFbXB0eSgpJiZlLmlzRW1wdHkoKSlyZXR1cm4gTHIuY3JlYXRlRW1wdHlSZXN1bHQoTHIuVU5JT04sdCxlLHQuZ2V0RmFjdG9yeSgpKTtpZih0LmlzRW1wdHkoKSlyZXR1cm4gZS5jb3B5KCk7aWYoZS5pc0VtcHR5KCkpcmV0dXJuIHQuY29weSgpfXJldHVybiB0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksb3Iub3ZlcmxheU9wKHQsZSxMci5VTklPTil9LHQuR2VvSlNPTlJlYWRlcj1OZSx0Lkdlb0pTT05Xcml0ZXI9Q2UsdC5PdmVybGF5T3A9THIsdC5Vbmlvbk9wPUFyLHQuQnVmZmVyT3A9ZGksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3R1cmYtanN0cy9qc3RzLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(9);


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(10);\n\nvar _package = __webpack_require__(11);\n\nvar _LPM = _interopRequireDefault(__webpack_require__(12));\n\nvar _LPM2 = _interopRequireDefault(__webpack_require__(13));\n\nvar _LPM3 = _interopRequireDefault(__webpack_require__(0));\n\n__webpack_require__(15);\n\n__webpack_require__(16);\n\n__webpack_require__(17);\n\n__webpack_require__(18);\n\n__webpack_require__(19);\n\n__webpack_require__(20);\n\nvar _LPM4 = _interopRequireDefault(__webpack_require__(2));\n\n__webpack_require__(27);\n\n__webpack_require__(28);\n\n__webpack_require__(29);\n\n__webpack_require__(30);\n\n__webpack_require__(31);\n\n__webpack_require__(32);\n\n__webpack_require__(33);\n\n__webpack_require__(34);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *\n * A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0\n * by Sumit Kumar (@TweetsOfSumit)\n * Github Repo: https://github.com/codeofsumit/leaflet.pm\n */\nL.PM = L.PM || {\n  Map: _LPM.default,\n  Toolbar: _LPM2.default,\n  Draw: _LPM3.default,\n  Edit: _LPM4.default,\n  version: _package.version,\n  initialize: function initialize() {\n    this.addInitHooks();\n  },\n  addInitHooks: function addInitHooks() {\n    function initMap() {\n      if (!this.options.pmIgnore) {\n        this.pm = new L.PM.Map(this);\n      }\n    }\n\n    L.Map.addInitHook(initMap);\n\n    function initLayerGroup() {\n      this.pm = new L.PM.Edit.LayerGroup(this);\n    }\n\n    L.LayerGroup.addInitHook(initLayerGroup);\n\n    function initMarker() {\n      if (!this.options.pmIgnore) {\n        this.pm = new L.PM.Edit.Marker(this);\n      }\n    }\n\n    L.Marker.addInitHook(initMarker);\n\n    function initPolyline() {\n      if (!this.options.pmIgnore) {\n        this.pm = new L.PM.Edit.Line(this);\n      }\n    }\n\n    L.Polyline.addInitHook(initPolyline);\n\n    function initPolygon() {\n      if (!this.options.pmIgnore) {\n        this.pm = new L.PM.Edit.Poly(this);\n      }\n    }\n\n    L.Polygon.addInitHook(initPolygon);\n\n    function initRectangle() {\n      if (!this.options.pmIgnore) {\n        this.pm = new L.PM.Edit.Rectangle(this);\n      }\n    }\n\n    L.Rectangle.addInitHook(initRectangle);\n\n    function initCircle() {\n      if (!this.options.pmIgnore) {\n        this.pm = new L.PM.Edit.Circle(this);\n      }\n    }\n\n    L.Circle.addInitHook(initCircle);\n  }\n}; // initialize leaflet.pm\n\nL.PM.initialize();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9MLlBNLmpzP2FhNjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnJlcXVpcmUoXCIuL3BvbHlmaWxsc1wiKTtcblxudmFyIF9wYWNrYWdlID0gcmVxdWlyZShcIi4uLy4uL3BhY2thZ2UuanNvblwiKTtcblxudmFyIF9MUE0gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0wuUE0uTWFwXCIpKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Ub29sYmFyL0wuUE0uVG9vbGJhclwiKSk7XG5cbnZhciBfTFBNMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vRHJhdy9MLlBNLkRyYXdcIikpO1xuXG5yZXF1aXJlKFwiLi9EcmF3L0wuUE0uRHJhdy5NYXJrZXJcIik7XG5cbnJlcXVpcmUoXCIuL0RyYXcvTC5QTS5EcmF3LkxpbmVcIik7XG5cbnJlcXVpcmUoXCIuL0RyYXcvTC5QTS5EcmF3LlBvbHlcIik7XG5cbnJlcXVpcmUoXCIuL0RyYXcvTC5QTS5EcmF3LlJlY3RhbmdsZVwiKTtcblxucmVxdWlyZShcIi4vRHJhdy9MLlBNLkRyYXcuQ2lyY2xlXCIpO1xuXG5yZXF1aXJlKFwiLi9EcmF3L0wuUE0uRHJhdy5DdXRcIik7XG5cbnZhciBfTFBNNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vRWRpdC9MLlBNLkVkaXRcIikpO1xuXG5yZXF1aXJlKFwiLi9FZGl0L0wuUE0uRWRpdC5MYXllckdyb3VwXCIpO1xuXG5yZXF1aXJlKFwiLi9FZGl0L0wuUE0uRWRpdC5NYXJrZXJcIik7XG5cbnJlcXVpcmUoXCIuL0VkaXQvTC5QTS5FZGl0LkxpbmVcIik7XG5cbnJlcXVpcmUoXCIuL0VkaXQvTC5QTS5FZGl0LlBvbHlcIik7XG5cbnJlcXVpcmUoXCIuL0VkaXQvTC5QTS5FZGl0LlJlY3RhbmdsZVwiKTtcblxucmVxdWlyZShcIi4vRWRpdC9MLlBNLkVkaXQuQ2lyY2xlXCIpO1xuXG5yZXF1aXJlKFwiLi4vY3NzL2xheWVycy5jc3NcIik7XG5cbnJlcXVpcmUoXCIuLi9jc3MvY29udHJvbHMuY3NzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqXG4gKiBBIExlYWZsZXQgUGx1Z2luIEZvciBFZGl0aW5nIEdlb21ldHJ5IExheWVycyBpbiBMZWFmbGV0IDEuMFxuICogYnkgU3VtaXQgS3VtYXIgKEBUd2VldHNPZlN1bWl0KVxuICogR2l0aHViIFJlcG86IGh0dHBzOi8vZ2l0aHViLmNvbS9jb2Rlb2ZzdW1pdC9sZWFmbGV0LnBtXG4gKi9cbkwuUE0gPSBMLlBNIHx8IHtcbiAgTWFwOiBfTFBNLmRlZmF1bHQsXG4gIFRvb2xiYXI6IF9MUE0yLmRlZmF1bHQsXG4gIERyYXc6IF9MUE0zLmRlZmF1bHQsXG4gIEVkaXQ6IF9MUE00LmRlZmF1bHQsXG4gIHZlcnNpb246IF9wYWNrYWdlLnZlcnNpb24sXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5hZGRJbml0SG9va3MoKTtcbiAgfSxcbiAgYWRkSW5pdEhvb2tzOiBmdW5jdGlvbiBhZGRJbml0SG9va3MoKSB7XG4gICAgZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnBtSWdub3JlKSB7XG4gICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5NYXAodGhpcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTC5NYXAuYWRkSW5pdEhvb2soaW5pdE1hcCk7XG5cbiAgICBmdW5jdGlvbiBpbml0TGF5ZXJHcm91cCgpIHtcbiAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0LkxheWVyR3JvdXAodGhpcyk7XG4gICAgfVxuXG4gICAgTC5MYXllckdyb3VwLmFkZEluaXRIb29rKGluaXRMYXllckdyb3VwKTtcblxuICAgIGZ1bmN0aW9uIGluaXRNYXJrZXIoKSB7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICB0aGlzLnBtID0gbmV3IEwuUE0uRWRpdC5NYXJrZXIodGhpcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTC5NYXJrZXIuYWRkSW5pdEhvb2soaW5pdE1hcmtlcik7XG5cbiAgICBmdW5jdGlvbiBpbml0UG9seWxpbmUoKSB7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICB0aGlzLnBtID0gbmV3IEwuUE0uRWRpdC5MaW5lKHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIEwuUG9seWxpbmUuYWRkSW5pdEhvb2soaW5pdFBvbHlsaW5lKTtcblxuICAgIGZ1bmN0aW9uIGluaXRQb2x5Z29uKCkge1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucG1JZ25vcmUpIHtcbiAgICAgICAgdGhpcy5wbSA9IG5ldyBMLlBNLkVkaXQuUG9seSh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBMLlBvbHlnb24uYWRkSW5pdEhvb2soaW5pdFBvbHlnb24pO1xuXG4gICAgZnVuY3Rpb24gaW5pdFJlY3RhbmdsZSgpIHtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnBtSWdub3JlKSB7XG4gICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0LlJlY3RhbmdsZSh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBMLlJlY3RhbmdsZS5hZGRJbml0SG9vayhpbml0UmVjdGFuZ2xlKTtcblxuICAgIGZ1bmN0aW9uIGluaXRDaXJjbGUoKSB7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICB0aGlzLnBtID0gbmV3IEwuUE0uRWRpdC5DaXJjbGUodGhpcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTC5DaXJjbGUuYWRkSW5pdEhvb2soaW5pdENpcmNsZSk7XG4gIH1cbn07IC8vIGluaXRpYWxpemUgbGVhZmxldC5wbVxuXG5MLlBNLmluaXRpYWxpemUoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9MLlBNLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, exports) {

eval("/* eslint-disable */\n// Array.findIndex Polyfill\nArray.prototype.findIndex = Array.prototype.findIndex || function (callback) {\n  if (this === null) {\n    throw new TypeError('Array.prototype.findIndex called on null or undefined');\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('callback must be a function');\n  }\n\n  var list = Object(this); // Makes sures is always has an positive integer as length.\n\n  var length = list.length >>> 0;\n  var thisArg = arguments[1];\n\n  for (var i = 0; i < length; i++) {\n    if (callback.call(thisArg, list[i], i, list)) {\n      return i;\n    }\n  }\n\n  return -1;\n}; // Array.find Polyfill for IE<12.\n// Requested here: https://github.com/codeofsumit/leaflet.pm/issues/173\n\n\nArray.prototype.find = Array.prototype.find || function (callback) {\n  if (this === null) {\n    throw new TypeError('Array.prototype.find called on null or undefined');\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('callback must be a function');\n  }\n\n  var list = Object(this); // Makes sures is always has an positive integer as length.\n\n  var length = list.length >>> 0;\n  var thisArg = arguments[1];\n\n  for (var i = 0; i < length; i++) {\n    var element = list[i];\n\n    if (callback.call(thisArg, element, i, list)) {\n      return element;\n    }\n  }\n}; // Polyfill for Object.assign()\n// https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\nif (typeof Object.assign != 'function') {\n  Object.assign = function (target) {\n    'use strict';\n\n    if (target == null) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    target = Object(target);\n\n    for (var index = 1; index < arguments.length; index++) {\n      var source = arguments[index];\n\n      if (source != null) {\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n\n    return target;\n  };\n} // Polyfill for Element.remove()\n// https://developer.mozilla.org/de/docs/Web/API/ChildNode/remove#Polyfill\n\n\n(function (arr) {\n  arr.forEach(function (item) {\n    if (item.hasOwnProperty('remove')) {\n      return;\n    }\n\n    Object.defineProperty(item, 'remove', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function remove() {\n        this.parentNode.removeChild(this);\n      }\n    });\n  });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcG9seWZpbGxzLmpzP2MyNmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cbi8vIEFycmF5LmZpbmRJbmRleCBQb2x5ZmlsbFxuQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleCA9IEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXggfHwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIGlmICh0aGlzID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleCBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpOyAvLyBNYWtlcyBzdXJlcyBpcyBhbHdheXMgaGFzIGFuIHBvc2l0aXZlIGludGVnZXIgYXMgbGVuZ3RoLlxuXG4gIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMDtcbiAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGxpc3RbaV0sIGksIGxpc3QpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTE7XG59OyAvLyBBcnJheS5maW5kIFBvbHlmaWxsIGZvciBJRTwxMi5cbi8vIFJlcXVlc3RlZCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vY29kZW9mc3VtaXQvbGVhZmxldC5wbS9pc3N1ZXMvMTczXG5cblxuQXJyYXkucHJvdG90eXBlLmZpbmQgPSBBcnJheS5wcm90b3R5cGUuZmluZCB8fCBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgaWYgKHRoaXMgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5wcm90b3R5cGUuZmluZCBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpOyAvLyBNYWtlcyBzdXJlcyBpcyBhbHdheXMgaGFzIGFuIHBvc2l0aXZlIGludGVnZXIgYXMgbGVuZ3RoLlxuXG4gIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMDtcbiAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBlbGVtZW50ID0gbGlzdFtpXTtcblxuICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGVsZW1lbnQsIGksIGxpc3QpKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gIH1cbn07IC8vIFBvbHlmaWxsIGZvciBPYmplY3QuYXNzaWduKClcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RlL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24jUG9seWZpbGxcblxuXG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT0gJ2Z1bmN0aW9uJykge1xuICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgdGFyZ2V0ID0gT2JqZWN0KHRhcmdldCk7XG5cbiAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cbiAgICAgIGlmIChzb3VyY2UgIT0gbnVsbCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbn0gLy8gUG9seWZpbGwgZm9yIEVsZW1lbnQucmVtb3ZlKClcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RlL2RvY3MvV2ViL0FQSS9DaGlsZE5vZGUvcmVtb3ZlI1BvbHlmaWxsXG5cblxuKGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgncmVtb3ZlJykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaXRlbSwgJ3JlbW92ZScsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KShbRWxlbWVudC5wcm90b3R5cGUsIENoYXJhY3RlckRhdGEucHJvdG90eXBlLCBEb2N1bWVudFR5cGUucHJvdG90eXBlXSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvcG9seWZpbGxzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, exports) {

eval("module.exports = {\"name\":\"leaflet.pm\",\"version\":\"0.23.1\",\"description\":\"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0\",\"keywords\":[\"leaflet\",\"polygon management\",\"geometry editing\",\"map data\",\"map overlay\",\"polygon\",\"geojson\",\"leaflet-draw\",\"data-field-geojson\",\"ui-leaflet-draw\"],\"files\":[\"dist\"],\"main\":\"dist/leaflet.pm.min.js\",\"dependencies\":{\"@turf/difference\":\"^5.0.4\",\"@turf/intersect\":\"^5.0.4\",\"@turf/kinks\":\"^5.0.4\"},\"devDependencies\":{\"@babel/core\":\"^7.0.0-beta.34\",\"@babel/preset-env\":\"^7.0.0-beta.34\",\"babel-loader\":\"^8.0.0-beta.0\",\"css-loader\":\"^0.28.0\",\"eslint\":\"^4.11.0\",\"eslint-config-airbnb-base\":\"^12.1.0\",\"eslint-plugin-import\":\"^2.8.0\",\"extract-text-webpack-plugin\":\"^3.0.2\",\"file-loader\":\"^0.11.1\",\"leaflet\":\"^1.2.0\",\"style-loader\":\"^0.19.0\",\"tape\":\"^4.8.0\",\"tape-run\":\"^3.0.0\",\"uglifyjs-webpack-plugin\":\"^1.1.0\",\"url-loader\":\"^0.6.2\",\"webpack\":\"^3.8.1\"},\"peerDependencies\":{\"leaflet\":\"^1.2.0\"},\"scripts\":{\"start\":\"npm run dev\",\"dev\":\"./node_modules/.bin/webpack --config=webpack.dev.js\",\"test\":\"browserify ./spec/test.spec.js | tape-run\",\"build\":\"./node_modules/.bin/webpack --config=webpack.build.js\",\"prepare\":\"npm run build\"},\"repository\":{\"type\":\"git\",\"url\":\"git+https://github.com/codeofsumit/leaflet.pm.git\"},\"author\":{\"name\":\"Sumit Kumar\",\"email\":\"sk@outlook.com\",\"url\":\"http://twitter.com/TweetsOfSumit\"},\"license\":\"MIT\",\"bugs\":{\"url\":\"https://github.com/codeofsumit/leaflet.pm/issues\"},\"homepage\":\"https://leafletpm.now.sh\"}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWNrYWdlLmpzb24/ZWQ4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHtcIm5hbWVcIjpcImxlYWZsZXQucG1cIixcInZlcnNpb25cIjpcIjAuMjMuMVwiLFwiZGVzY3JpcHRpb25cIjpcIkEgTGVhZmxldCBQbHVnaW4gRm9yIEVkaXRpbmcgR2VvbWV0cnkgTGF5ZXJzIGluIExlYWZsZXQgMS4wXCIsXCJrZXl3b3Jkc1wiOltcImxlYWZsZXRcIixcInBvbHlnb24gbWFuYWdlbWVudFwiLFwiZ2VvbWV0cnkgZWRpdGluZ1wiLFwibWFwIGRhdGFcIixcIm1hcCBvdmVybGF5XCIsXCJwb2x5Z29uXCIsXCJnZW9qc29uXCIsXCJsZWFmbGV0LWRyYXdcIixcImRhdGEtZmllbGQtZ2VvanNvblwiLFwidWktbGVhZmxldC1kcmF3XCJdLFwiZmlsZXNcIjpbXCJkaXN0XCJdLFwibWFpblwiOlwiZGlzdC9sZWFmbGV0LnBtLm1pbi5qc1wiLFwiZGVwZW5kZW5jaWVzXCI6e1wiQHR1cmYvZGlmZmVyZW5jZVwiOlwiXjUuMC40XCIsXCJAdHVyZi9pbnRlcnNlY3RcIjpcIl41LjAuNFwiLFwiQHR1cmYva2lua3NcIjpcIl41LjAuNFwifSxcImRldkRlcGVuZGVuY2llc1wiOntcIkBiYWJlbC9jb3JlXCI6XCJeNy4wLjAtYmV0YS4zNFwiLFwiQGJhYmVsL3ByZXNldC1lbnZcIjpcIl43LjAuMC1iZXRhLjM0XCIsXCJiYWJlbC1sb2FkZXJcIjpcIl44LjAuMC1iZXRhLjBcIixcImNzcy1sb2FkZXJcIjpcIl4wLjI4LjBcIixcImVzbGludFwiOlwiXjQuMTEuMFwiLFwiZXNsaW50LWNvbmZpZy1haXJibmItYmFzZVwiOlwiXjEyLjEuMFwiLFwiZXNsaW50LXBsdWdpbi1pbXBvcnRcIjpcIl4yLjguMFwiLFwiZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXCI6XCJeMy4wLjJcIixcImZpbGUtbG9hZGVyXCI6XCJeMC4xMS4xXCIsXCJsZWFmbGV0XCI6XCJeMS4yLjBcIixcInN0eWxlLWxvYWRlclwiOlwiXjAuMTkuMFwiLFwidGFwZVwiOlwiXjQuOC4wXCIsXCJ0YXBlLXJ1blwiOlwiXjMuMC4wXCIsXCJ1Z2xpZnlqcy13ZWJwYWNrLXBsdWdpblwiOlwiXjEuMS4wXCIsXCJ1cmwtbG9hZGVyXCI6XCJeMC42LjJcIixcIndlYnBhY2tcIjpcIl4zLjguMVwifSxcInBlZXJEZXBlbmRlbmNpZXNcIjp7XCJsZWFmbGV0XCI6XCJeMS4yLjBcIn0sXCJzY3JpcHRzXCI6e1wic3RhcnRcIjpcIm5wbSBydW4gZGV2XCIsXCJkZXZcIjpcIi4vbm9kZV9tb2R1bGVzLy5iaW4vd2VicGFjayAtLWNvbmZpZz13ZWJwYWNrLmRldi5qc1wiLFwidGVzdFwiOlwiYnJvd3NlcmlmeSAuL3NwZWMvdGVzdC5zcGVjLmpzIHwgdGFwZS1ydW5cIixcImJ1aWxkXCI6XCIuL25vZGVfbW9kdWxlcy8uYmluL3dlYnBhY2sgLS1jb25maWc9d2VicGFjay5idWlsZC5qc1wiLFwicHJlcGFyZVwiOlwibnBtIHJ1biBidWlsZFwifSxcInJlcG9zaXRvcnlcIjp7XCJ0eXBlXCI6XCJnaXRcIixcInVybFwiOlwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9jb2Rlb2ZzdW1pdC9sZWFmbGV0LnBtLmdpdFwifSxcImF1dGhvclwiOntcIm5hbWVcIjpcIlN1bWl0IEt1bWFyXCIsXCJlbWFpbFwiOlwic2tAb3V0bG9vay5jb21cIixcInVybFwiOlwiaHR0cDovL3R3aXR0ZXIuY29tL1R3ZWV0c09mU3VtaXRcIn0sXCJsaWNlbnNlXCI6XCJNSVRcIixcImJ1Z3NcIjp7XCJ1cmxcIjpcImh0dHBzOi8vZ2l0aHViLmNvbS9jb2Rlb2ZzdW1pdC9sZWFmbGV0LnBtL2lzc3Vlc1wifSxcImhvbWVwYWdlXCI6XCJodHRwczovL2xlYWZsZXRwbS5ub3cuc2hcIn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3BhY2thZ2UuanNvblxuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar Map = L.Class.extend({\n  initialize: function initialize(map) {\n    var _this = this;\n\n    this.map = map;\n    this.Draw = new L.PM.Draw(map);\n    this.Toolbar = new L.PM.Toolbar(map);\n    this.map.on('layerremove', function (e) {\n      if (e.layer.pm && !e.layer._pmTempLayer) {\n        _this.map.fire('pm:remove', e);\n      }\n    });\n    this._globalRemovalMode = false;\n  },\n  addControls: function addControls(options) {\n    this.Toolbar.addControls(options);\n  },\n  removeControls: function removeControls() {\n    this.Toolbar.removeControls();\n  },\n  toggleControls: function toggleControls() {\n    this.Toolbar.toggleControls();\n  },\n  controlsVisible: function controlsVisible() {\n    return this.Toolbar.isVisible;\n  },\n  enableDraw: function enableDraw() {\n    var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Poly';\n    var options = arguments.length > 1 ? arguments[1] : undefined;\n    this.Draw.enable(shape, options);\n  },\n  disableDraw: function disableDraw() {\n    var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Poly';\n    this.Draw.disable(shape);\n  },\n  setPathOptions: function setPathOptions(options) {\n    this.Draw.setPathOptions(options);\n  },\n  removeLayer: function removeLayer(e) {\n    var layer = e.target;\n\n    if (!layer._layers && (!layer.pm || !layer.pm.dragging())) {\n      e.target.remove();\n    }\n  },\n  toggleGlobalRemovalMode: function toggleGlobalRemovalMode() {\n    var _this2 = this;\n\n    // toggle global edit mode\n    if (this.globalRemovalEnabled()) {\n      this._globalRemovalMode = false;\n      this.map.eachLayer(function (layer) {\n        layer.off('click', _this2.removeLayer);\n      });\n    } else {\n      this._globalRemovalMode = true;\n      this.map.eachLayer(function (layer) {\n        if (layer.pm) {\n          layer.on('click', _this2.removeLayer);\n        }\n      });\n    } // toogle the button in the toolbar\n\n\n    this.Toolbar.toggleButton('deleteLayer', this._globalRemovalMode);\n  },\n  globalRemovalEnabled: function globalRemovalEnabled() {\n    return this._globalRemovalMode;\n  },\n  globalEditEnabled: function globalEditEnabled() {\n    return this._globalEditMode;\n  },\n  enableGlobalEditMode: function enableGlobalEditMode(options) {\n    // find all layers handles by leaflet.pm\n    var layers = [];\n    this.map.eachLayer(function (layer) {\n      if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.Circle) {\n        layers.push(layer);\n      }\n    }); // filter out layers that don't have the leaflet.pm instance\n\n    layers = layers.filter(function (layer) {\n      return !!layer.pm;\n    }); // filter out everything that's leaflet.pm specific temporary stuff\n\n    layers = layers.filter(function (layer) {\n      return !layer._pmTempLayer;\n    });\n    this._globalEditMode = true;\n    layers.forEach(function (layer) {\n      layer.pm.enable(options);\n    }); // toggle the button in the toolbar\n\n    this.Toolbar.toggleButton('editPolygon', this._globalEditMode); // fire event\n\n    this._fireEditModeEvent(true);\n  },\n  disableGlobalEditMode: function disableGlobalEditMode() {\n    // find all layers handles by leaflet.pm\n    var layers = [];\n    this.map.eachLayer(function (layer) {\n      if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.Circle) {\n        layers.push(layer);\n      }\n    }); // filter out layers that don't have the leaflet.pm instance\n\n    layers = layers.filter(function (layer) {\n      return !!layer.pm;\n    }); // filter out everything that's leaflet.pm specific temporary stuff\n\n    layers = layers.filter(function (layer) {\n      return !layer._pmTempLayer;\n    });\n    this._globalEditMode = false;\n    layers.forEach(function (layer) {\n      layer.pm.disable();\n    }); // toggle the button in the toolbar\n\n    this.Toolbar.toggleButton('editPolygon', this._globalEditMode); // fire event\n\n    this._fireEditModeEvent(false);\n  },\n  _fireEditModeEvent: function _fireEditModeEvent(enabled) {\n    this.map.fire('pm:globaleditmodetoggled', {\n      enabled: enabled,\n      map: this.map\n    });\n  },\n  toggleGlobalEditMode: function toggleGlobalEditMode(options) {\n    if (this.globalEditEnabled()) {\n      // disable\n      this.disableGlobalEditMode();\n    } else {\n      // enable\n      this.enableGlobalEditMode(options);\n    }\n  }\n});\nvar _default = Map;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTC5QTS5NYXAuanM/ZGUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBNYXAgPSBMLkNsYXNzLmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIHRoaXMuRHJhdyA9IG5ldyBMLlBNLkRyYXcobWFwKTtcbiAgICB0aGlzLlRvb2xiYXIgPSBuZXcgTC5QTS5Ub29sYmFyKG1hcCk7XG4gICAgdGhpcy5tYXAub24oJ2xheWVycmVtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLmxheWVyLnBtICYmICFlLmxheWVyLl9wbVRlbXBMYXllcikge1xuICAgICAgICBfdGhpcy5tYXAuZmlyZSgncG06cmVtb3ZlJywgZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fZ2xvYmFsUmVtb3ZhbE1vZGUgPSBmYWxzZTtcbiAgfSxcbiAgYWRkQ29udHJvbHM6IGZ1bmN0aW9uIGFkZENvbnRyb2xzKG9wdGlvbnMpIHtcbiAgICB0aGlzLlRvb2xiYXIuYWRkQ29udHJvbHMob3B0aW9ucyk7XG4gIH0sXG4gIHJlbW92ZUNvbnRyb2xzOiBmdW5jdGlvbiByZW1vdmVDb250cm9scygpIHtcbiAgICB0aGlzLlRvb2xiYXIucmVtb3ZlQ29udHJvbHMoKTtcbiAgfSxcbiAgdG9nZ2xlQ29udHJvbHM6IGZ1bmN0aW9uIHRvZ2dsZUNvbnRyb2xzKCkge1xuICAgIHRoaXMuVG9vbGJhci50b2dnbGVDb250cm9scygpO1xuICB9LFxuICBjb250cm9sc1Zpc2libGU6IGZ1bmN0aW9uIGNvbnRyb2xzVmlzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5Ub29sYmFyLmlzVmlzaWJsZTtcbiAgfSxcbiAgZW5hYmxlRHJhdzogZnVuY3Rpb24gZW5hYmxlRHJhdygpIHtcbiAgICB2YXIgc2hhcGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdQb2x5JztcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuRHJhdy5lbmFibGUoc2hhcGUsIG9wdGlvbnMpO1xuICB9LFxuICBkaXNhYmxlRHJhdzogZnVuY3Rpb24gZGlzYWJsZURyYXcoKSB7XG4gICAgdmFyIHNoYXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnUG9seSc7XG4gICAgdGhpcy5EcmF3LmRpc2FibGUoc2hhcGUpO1xuICB9LFxuICBzZXRQYXRoT3B0aW9uczogZnVuY3Rpb24gc2V0UGF0aE9wdGlvbnMob3B0aW9ucykge1xuICAgIHRoaXMuRHJhdy5zZXRQYXRoT3B0aW9ucyhvcHRpb25zKTtcbiAgfSxcbiAgcmVtb3ZlTGF5ZXI6IGZ1bmN0aW9uIHJlbW92ZUxheWVyKGUpIHtcbiAgICB2YXIgbGF5ZXIgPSBlLnRhcmdldDtcblxuICAgIGlmICghbGF5ZXIuX2xheWVycyAmJiAoIWxheWVyLnBtIHx8ICFsYXllci5wbS5kcmFnZ2luZygpKSkge1xuICAgICAgZS50YXJnZXQucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuICB0b2dnbGVHbG9iYWxSZW1vdmFsTW9kZTogZnVuY3Rpb24gdG9nZ2xlR2xvYmFsUmVtb3ZhbE1vZGUoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAvLyB0b2dnbGUgZ2xvYmFsIGVkaXQgbW9kZVxuICAgIGlmICh0aGlzLmdsb2JhbFJlbW92YWxFbmFibGVkKCkpIHtcbiAgICAgIHRoaXMuX2dsb2JhbFJlbW92YWxNb2RlID0gZmFsc2U7XG4gICAgICB0aGlzLm1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIGxheWVyLm9mZignY2xpY2snLCBfdGhpczIucmVtb3ZlTGF5ZXIpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2dsb2JhbFJlbW92YWxNb2RlID0gdHJ1ZTtcbiAgICAgIHRoaXMubWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyLnBtKSB7XG4gICAgICAgICAgbGF5ZXIub24oJ2NsaWNrJywgX3RoaXMyLnJlbW92ZUxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSAvLyB0b29nbGUgdGhlIGJ1dHRvbiBpbiB0aGUgdG9vbGJhclxuXG5cbiAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQnV0dG9uKCdkZWxldGVMYXllcicsIHRoaXMuX2dsb2JhbFJlbW92YWxNb2RlKTtcbiAgfSxcbiAgZ2xvYmFsUmVtb3ZhbEVuYWJsZWQ6IGZ1bmN0aW9uIGdsb2JhbFJlbW92YWxFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9nbG9iYWxSZW1vdmFsTW9kZTtcbiAgfSxcbiAgZ2xvYmFsRWRpdEVuYWJsZWQ6IGZ1bmN0aW9uIGdsb2JhbEVkaXRFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9nbG9iYWxFZGl0TW9kZTtcbiAgfSxcbiAgZW5hYmxlR2xvYmFsRWRpdE1vZGU6IGZ1bmN0aW9uIGVuYWJsZUdsb2JhbEVkaXRNb2RlKG9wdGlvbnMpIHtcbiAgICAvLyBmaW5kIGFsbCBsYXllcnMgaGFuZGxlcyBieSBsZWFmbGV0LnBtXG4gICAgdmFyIGxheWVycyA9IFtdO1xuICAgIHRoaXMubWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIEwuUG9seWxpbmUgfHwgbGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciB8fCBsYXllciBpbnN0YW5jZW9mIEwuQ2lyY2xlKSB7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gZmlsdGVyIG91dCBsYXllcnMgdGhhdCBkb24ndCBoYXZlIHRoZSBsZWFmbGV0LnBtIGluc3RhbmNlXG5cbiAgICBsYXllcnMgPSBsYXllcnMuZmlsdGVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgcmV0dXJuICEhbGF5ZXIucG07XG4gICAgfSk7IC8vIGZpbHRlciBvdXQgZXZlcnl0aGluZyB0aGF0J3MgbGVhZmxldC5wbSBzcGVjaWZpYyB0ZW1wb3Jhcnkgc3R1ZmZcblxuICAgIGxheWVycyA9IGxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICByZXR1cm4gIWxheWVyLl9wbVRlbXBMYXllcjtcbiAgICB9KTtcbiAgICB0aGlzLl9nbG9iYWxFZGl0TW9kZSA9IHRydWU7XG4gICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBsYXllci5wbS5lbmFibGUob3B0aW9ucyk7XG4gICAgfSk7IC8vIHRvZ2dsZSB0aGUgYnV0dG9uIGluIHRoZSB0b29sYmFyXG5cbiAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQnV0dG9uKCdlZGl0UG9seWdvbicsIHRoaXMuX2dsb2JhbEVkaXRNb2RlKTsgLy8gZmlyZSBldmVudFxuXG4gICAgdGhpcy5fZmlyZUVkaXRNb2RlRXZlbnQodHJ1ZSk7XG4gIH0sXG4gIGRpc2FibGVHbG9iYWxFZGl0TW9kZTogZnVuY3Rpb24gZGlzYWJsZUdsb2JhbEVkaXRNb2RlKCkge1xuICAgIC8vIGZpbmQgYWxsIGxheWVycyBoYW5kbGVzIGJ5IGxlYWZsZXQucG1cbiAgICB2YXIgbGF5ZXJzID0gW107XG4gICAgdGhpcy5tYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5bGluZSB8fCBsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyIHx8IGxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGUpIHtcbiAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgfVxuICAgIH0pOyAvLyBmaWx0ZXIgb3V0IGxheWVycyB0aGF0IGRvbid0IGhhdmUgdGhlIGxlYWZsZXQucG0gaW5zdGFuY2VcblxuICAgIGxheWVycyA9IGxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICByZXR1cm4gISFsYXllci5wbTtcbiAgICB9KTsgLy8gZmlsdGVyIG91dCBldmVyeXRoaW5nIHRoYXQncyBsZWFmbGV0LnBtIHNwZWNpZmljIHRlbXBvcmFyeSBzdHVmZlxuXG4gICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIHJldHVybiAhbGF5ZXIuX3BtVGVtcExheWVyO1xuICAgIH0pO1xuICAgIHRoaXMuX2dsb2JhbEVkaXRNb2RlID0gZmFsc2U7XG4gICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBsYXllci5wbS5kaXNhYmxlKCk7XG4gICAgfSk7IC8vIHRvZ2dsZSB0aGUgYnV0dG9uIGluIHRoZSB0b29sYmFyXG5cbiAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQnV0dG9uKCdlZGl0UG9seWdvbicsIHRoaXMuX2dsb2JhbEVkaXRNb2RlKTsgLy8gZmlyZSBldmVudFxuXG4gICAgdGhpcy5fZmlyZUVkaXRNb2RlRXZlbnQoZmFsc2UpO1xuICB9LFxuICBfZmlyZUVkaXRNb2RlRXZlbnQ6IGZ1bmN0aW9uIF9maXJlRWRpdE1vZGVFdmVudChlbmFibGVkKSB7XG4gICAgdGhpcy5tYXAuZmlyZSgncG06Z2xvYmFsZWRpdG1vZGV0b2dnbGVkJywge1xuICAgICAgZW5hYmxlZDogZW5hYmxlZCxcbiAgICAgIG1hcDogdGhpcy5tYXBcbiAgICB9KTtcbiAgfSxcbiAgdG9nZ2xlR2xvYmFsRWRpdE1vZGU6IGZ1bmN0aW9uIHRvZ2dsZUdsb2JhbEVkaXRNb2RlKG9wdGlvbnMpIHtcbiAgICBpZiAodGhpcy5nbG9iYWxFZGl0RW5hYmxlZCgpKSB7XG4gICAgICAvLyBkaXNhYmxlXG4gICAgICB0aGlzLmRpc2FibGVHbG9iYWxFZGl0TW9kZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlbmFibGVcbiAgICAgIHRoaXMuZW5hYmxlR2xvYmFsRWRpdE1vZGUob3B0aW9ucyk7XG4gICAgfVxuICB9XG59KTtcbnZhciBfZGVmYXVsdCA9IE1hcDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0wuUE0uTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _L = _interopRequireDefault(__webpack_require__(14));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* The Icons used in this Toolbar are CC-BY Glyphicons - http://glyphicons.com/\n*/\nL.Control.PMButton = _L.default;\nvar Toolbar = L.Class.extend({\n  options: {\n    drawMarker: true,\n    drawPolygon: true,\n    drawPolyline: true,\n    drawCircle: true,\n    drawRectangle: true,\n    editMode: true,\n    cutPolygon: true,\n    dragPolygon: false,\n    removalMode: true,\n    position: 'topleft'\n  },\n  initialize: function initialize(map) {\n    this.map = map;\n    this.buttons = {};\n    this.isVisible = false;\n    this.container = L.DomUtil.create('div', 'leaflet-pm-toolbar leaflet-bar leaflet-control');\n\n    this._defineButtons();\n  },\n  getButtons: function getButtons() {\n    return this.buttons;\n  },\n  addControls: function addControls() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options;\n\n    // adds all buttons to the map specified inside options\n    // make button renaming backwards compatible\n    if (typeof options.editPolygon !== 'undefined') {\n      options.editMode = options.editPolygon;\n    }\n\n    if (typeof options.deleteLayer !== 'undefined') {\n      options.removalMode = options.deleteLayer;\n    } // first set the options\n\n\n    L.Util.setOptions(this, options); // now show the specified buttons\n\n    this._showHideButtons();\n\n    this.isVisible = true;\n  },\n  removeControls: function removeControls() {\n    // grab all buttons to loop through\n    var buttons = this.getButtons(); // remove all buttons\n\n    for (var btn in buttons) {\n      buttons[btn].remove();\n    }\n\n    this.isVisible = false;\n  },\n  toggleControls: function toggleControls() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options;\n\n    if (this.isVisible) {\n      this.removeControls();\n    } else {\n      this.addControls(options);\n    }\n  },\n  _addButton: function _addButton(name, button) {\n    this.buttons[name] = button;\n    this.options[name] = this.options[name] || false;\n    return this.buttons[name];\n  },\n  triggerClickOnToggledButtons: function triggerClickOnToggledButtons(exceptThisButton) {\n    // this function is used when - e.g. drawing mode is enabled and a possible\n    // other active mode (like removal tool) is already active.\n    // we can't have two active modes because of possible event conflicts\n    // so, we trigger a click on all currently active (toggled) buttons\n    for (var name in this.buttons) {\n      if (this.buttons[name] !== exceptThisButton && this.buttons[name].toggled()) {\n        this.buttons[name]._triggerClick();\n      }\n    }\n  },\n  toggleButton: function toggleButton(name, status) {\n    // does not fire the events/functionality of the button\n    // this just changes the state and is used if a functionality (like Draw)\n    // is enabled manually via script\n    // backwards compatibility with button rename\n    if (name === 'editPolygon') {\n      name = 'editMode';\n    }\n\n    if (name === 'deleteLayer') {\n      name = 'removalMode';\n    } // as some mode got enabled, we still have to trigger the click on the other buttons\n    // to disable their mode\n\n\n    this.triggerClickOnToggledButtons(this.buttons[name]); // now toggle the state of the button\n\n    return this.buttons[name].toggle(status);\n  },\n  _defineButtons: function _defineButtons() {\n    var _this = this;\n\n    // some buttons are still in their respective classes, like L.PM.Draw.Poly\n    var deleteButton = {\n      className: ' leaflet-pm-icon-delete',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        _this.map.pm.toggleGlobalRemovalMode();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var drawPolyButton = {\n      className: 'leaflet-pm-icon-polygon',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        // toggle drawing mode\n        _this.map.pm.Draw.Poly.toggle();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var cutButton = {\n      className: 'leaflet-pm-icon-cut',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        // enable polygon drawing mode without snap\n        _this.map.pm.Draw.Cut.toggle({\n          snappable: true,\n          cursorMarker: true,\n          allowSelfIntersection: false\n        });\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var drawMarkerButton = {\n      className: 'leaflet-pm-icon-marker',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        // toggle drawing mode\n        _this.map.pm.Draw.Marker.toggle();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var drawLineButton = {\n      className: 'leaflet-pm-icon-polyline',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        // toggle drawing mode\n        _this.map.pm.Draw.Line.toggle();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var drawCircleButton = {\n      className: 'leaflet-pm-icon-circle',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        // toggle drawing mode\n        _this.map.pm.Draw.Circle.toggle();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var drawRectangleButton = {\n      className: 'leaflet-pm-icon-rectangle',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        // toggle drawing mode\n        _this.map.pm.Draw.Rectangle.toggle();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var editButton = {\n      className: 'leaflet-pm-icon-edit',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {\n        _this.map.pm.toggleGlobalEditMode();\n      },\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n    var dragButton = {\n      className: 'leaflet-pm-icon-drag',\n      onClick: function onClick() {},\n      afterClick: function afterClick() {},\n      doToggle: true,\n      toggleStatus: false,\n      disableOtherButtons: true,\n      position: this.options.position\n    };\n\n    this._addButton('drawMarker', new L.Control.PMButton(drawMarkerButton));\n\n    this._addButton('drawPolyline', new L.Control.PMButton(drawLineButton));\n\n    this._addButton('drawRectangle', new L.Control.PMButton(drawRectangleButton));\n\n    this._addButton('drawPolygon', new L.Control.PMButton(drawPolyButton));\n\n    this._addButton('drawCircle', new L.Control.PMButton(drawCircleButton));\n\n    this._addButton('cutPolygon', new L.Control.PMButton(cutButton));\n\n    this._addButton('editMode', new L.Control.PMButton(editButton));\n\n    this._addButton('dragPolygon', new L.Control.PMButton(dragButton));\n\n    this._addButton('removalMode', new L.Control.PMButton(deleteButton));\n  },\n  _showHideButtons: function _showHideButtons() {\n    // remove all buttons, that's because the Toolbar can be added again with\n    // different options so it's basically a reset and add again\n    this.removeControls();\n    var buttons = this.getButtons();\n\n    for (var btn in buttons) {\n      if (this.options[btn]) {\n        // if options say the button should be visible, add it to the map\n        buttons[btn].setPosition(this.options.position);\n        buttons[btn].addTo(this.map);\n      }\n    }\n  }\n});\nvar _default = Toolbar;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvVG9vbGJhci9MLlBNLlRvb2xiYXIuanM/YzM5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9MID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLkNvbnRyb2xzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4qIFRoZSBJY29ucyB1c2VkIGluIHRoaXMgVG9vbGJhciBhcmUgQ0MtQlkgR2x5cGhpY29ucyAtIGh0dHA6Ly9nbHlwaGljb25zLmNvbS9cbiovXG5MLkNvbnRyb2wuUE1CdXR0b24gPSBfTC5kZWZhdWx0O1xudmFyIFRvb2xiYXIgPSBMLkNsYXNzLmV4dGVuZCh7XG4gIG9wdGlvbnM6IHtcbiAgICBkcmF3TWFya2VyOiB0cnVlLFxuICAgIGRyYXdQb2x5Z29uOiB0cnVlLFxuICAgIGRyYXdQb2x5bGluZTogdHJ1ZSxcbiAgICBkcmF3Q2lyY2xlOiB0cnVlLFxuICAgIGRyYXdSZWN0YW5nbGU6IHRydWUsXG4gICAgZWRpdE1vZGU6IHRydWUsXG4gICAgY3V0UG9seWdvbjogdHJ1ZSxcbiAgICBkcmFnUG9seWdvbjogZmFsc2UsXG4gICAgcmVtb3ZhbE1vZGU6IHRydWUsXG4gICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICB9LFxuICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG1hcCkge1xuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5jb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnbGVhZmxldC1wbS10b29sYmFyIGxlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCcpO1xuXG4gICAgdGhpcy5fZGVmaW5lQnV0dG9ucygpO1xuICB9LFxuICBnZXRCdXR0b25zOiBmdW5jdGlvbiBnZXRCdXR0b25zKCkge1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbnM7XG4gIH0sXG4gIGFkZENvbnRyb2xzOiBmdW5jdGlvbiBhZGRDb250cm9scygpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5vcHRpb25zO1xuXG4gICAgLy8gYWRkcyBhbGwgYnV0dG9ucyB0byB0aGUgbWFwIHNwZWNpZmllZCBpbnNpZGUgb3B0aW9uc1xuICAgIC8vIG1ha2UgYnV0dG9uIHJlbmFtaW5nIGJhY2t3YXJkcyBjb21wYXRpYmxlXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmVkaXRQb2x5Z29uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9ucy5lZGl0TW9kZSA9IG9wdGlvbnMuZWRpdFBvbHlnb247XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRlbGV0ZUxheWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9ucy5yZW1vdmFsTW9kZSA9IG9wdGlvbnMuZGVsZXRlTGF5ZXI7XG4gICAgfSAvLyBmaXJzdCBzZXQgdGhlIG9wdGlvbnNcblxuXG4gICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7IC8vIG5vdyBzaG93IHRoZSBzcGVjaWZpZWQgYnV0dG9uc1xuXG4gICAgdGhpcy5fc2hvd0hpZGVCdXR0b25zKCk7XG5cbiAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gIH0sXG4gIHJlbW92ZUNvbnRyb2xzOiBmdW5jdGlvbiByZW1vdmVDb250cm9scygpIHtcbiAgICAvLyBncmFiIGFsbCBidXR0b25zIHRvIGxvb3AgdGhyb3VnaFxuICAgIHZhciBidXR0b25zID0gdGhpcy5nZXRCdXR0b25zKCk7IC8vIHJlbW92ZSBhbGwgYnV0dG9uc1xuXG4gICAgZm9yICh2YXIgYnRuIGluIGJ1dHRvbnMpIHtcbiAgICAgIGJ1dHRvbnNbYnRuXS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICB9LFxuICB0b2dnbGVDb250cm9sczogZnVuY3Rpb24gdG9nZ2xlQ29udHJvbHMoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMub3B0aW9ucztcblxuICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgdGhpcy5yZW1vdmVDb250cm9scygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZENvbnRyb2xzKG9wdGlvbnMpO1xuICAgIH1cbiAgfSxcbiAgX2FkZEJ1dHRvbjogZnVuY3Rpb24gX2FkZEJ1dHRvbihuYW1lLCBidXR0b24pIHtcbiAgICB0aGlzLmJ1dHRvbnNbbmFtZV0gPSBidXR0b247XG4gICAgdGhpcy5vcHRpb25zW25hbWVdID0gdGhpcy5vcHRpb25zW25hbWVdIHx8IGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbnNbbmFtZV07XG4gIH0sXG4gIHRyaWdnZXJDbGlja09uVG9nZ2xlZEJ1dHRvbnM6IGZ1bmN0aW9uIHRyaWdnZXJDbGlja09uVG9nZ2xlZEJ1dHRvbnMoZXhjZXB0VGhpc0J1dHRvbikge1xuICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIC0gZS5nLiBkcmF3aW5nIG1vZGUgaXMgZW5hYmxlZCBhbmQgYSBwb3NzaWJsZVxuICAgIC8vIG90aGVyIGFjdGl2ZSBtb2RlIChsaWtlIHJlbW92YWwgdG9vbCkgaXMgYWxyZWFkeSBhY3RpdmUuXG4gICAgLy8gd2UgY2FuJ3QgaGF2ZSB0d28gYWN0aXZlIG1vZGVzIGJlY2F1c2Ugb2YgcG9zc2libGUgZXZlbnQgY29uZmxpY3RzXG4gICAgLy8gc28sIHdlIHRyaWdnZXIgYSBjbGljayBvbiBhbGwgY3VycmVudGx5IGFjdGl2ZSAodG9nZ2xlZCkgYnV0dG9uc1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5idXR0b25zKSB7XG4gICAgICBpZiAodGhpcy5idXR0b25zW25hbWVdICE9PSBleGNlcHRUaGlzQnV0dG9uICYmIHRoaXMuYnV0dG9uc1tuYW1lXS50b2dnbGVkKCkpIHtcbiAgICAgICAgdGhpcy5idXR0b25zW25hbWVdLl90cmlnZ2VyQ2xpY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHRvZ2dsZUJ1dHRvbjogZnVuY3Rpb24gdG9nZ2xlQnV0dG9uKG5hbWUsIHN0YXR1cykge1xuICAgIC8vIGRvZXMgbm90IGZpcmUgdGhlIGV2ZW50cy9mdW5jdGlvbmFsaXR5IG9mIHRoZSBidXR0b25cbiAgICAvLyB0aGlzIGp1c3QgY2hhbmdlcyB0aGUgc3RhdGUgYW5kIGlzIHVzZWQgaWYgYSBmdW5jdGlvbmFsaXR5IChsaWtlIERyYXcpXG4gICAgLy8gaXMgZW5hYmxlZCBtYW51YWxseSB2aWEgc2NyaXB0XG4gICAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBidXR0b24gcmVuYW1lXG4gICAgaWYgKG5hbWUgPT09ICdlZGl0UG9seWdvbicpIHtcbiAgICAgIG5hbWUgPSAnZWRpdE1vZGUnO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSAnZGVsZXRlTGF5ZXInKSB7XG4gICAgICBuYW1lID0gJ3JlbW92YWxNb2RlJztcbiAgICB9IC8vIGFzIHNvbWUgbW9kZSBnb3QgZW5hYmxlZCwgd2Ugc3RpbGwgaGF2ZSB0byB0cmlnZ2VyIHRoZSBjbGljayBvbiB0aGUgb3RoZXIgYnV0dG9uc1xuICAgIC8vIHRvIGRpc2FibGUgdGhlaXIgbW9kZVxuXG5cbiAgICB0aGlzLnRyaWdnZXJDbGlja09uVG9nZ2xlZEJ1dHRvbnModGhpcy5idXR0b25zW25hbWVdKTsgLy8gbm93IHRvZ2dsZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvblxuXG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uc1tuYW1lXS50b2dnbGUoc3RhdHVzKTtcbiAgfSxcbiAgX2RlZmluZUJ1dHRvbnM6IGZ1bmN0aW9uIF9kZWZpbmVCdXR0b25zKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAvLyBzb21lIGJ1dHRvbnMgYXJlIHN0aWxsIGluIHRoZWlyIHJlc3BlY3RpdmUgY2xhc3NlcywgbGlrZSBMLlBNLkRyYXcuUG9seVxuICAgIHZhciBkZWxldGVCdXR0b24gPSB7XG4gICAgICBjbGFzc05hbWU6ICcgbGVhZmxldC1wbS1pY29uLWRlbGV0ZScsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICBfdGhpcy5tYXAucG0udG9nZ2xlR2xvYmFsUmVtb3ZhbE1vZGUoKTtcbiAgICAgIH0sXG4gICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgIH07XG4gICAgdmFyIGRyYXdQb2x5QnV0dG9uID0ge1xuICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLXBvbHlnb24nLFxuICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgLy8gdG9nZ2xlIGRyYXdpbmcgbW9kZVxuICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5Qb2x5LnRvZ2dsZSgpO1xuICAgICAgfSxcbiAgICAgIGRvVG9nZ2xlOiB0cnVlLFxuICAgICAgdG9nZ2xlU3RhdHVzOiBmYWxzZSxcbiAgICAgIGRpc2FibGVPdGhlckJ1dHRvbnM6IHRydWUsXG4gICAgICBwb3NpdGlvbjogdGhpcy5vcHRpb25zLnBvc2l0aW9uXG4gICAgfTtcbiAgICB2YXIgY3V0QnV0dG9uID0ge1xuICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLWN1dCcsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAvLyBlbmFibGUgcG9seWdvbiBkcmF3aW5nIG1vZGUgd2l0aG91dCBzbmFwXG4gICAgICAgIF90aGlzLm1hcC5wbS5EcmF3LkN1dC50b2dnbGUoe1xuICAgICAgICAgIHNuYXBwYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjdXJzb3JNYXJrZXI6IHRydWUsXG4gICAgICAgICAgYWxsb3dTZWxmSW50ZXJzZWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgIH07XG4gICAgdmFyIGRyYXdNYXJrZXJCdXR0b24gPSB7XG4gICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LXBtLWljb24tbWFya2VyJyxcbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7fSxcbiAgICAgIGFmdGVyQ2xpY2s6IGZ1bmN0aW9uIGFmdGVyQ2xpY2soKSB7XG4gICAgICAgIC8vIHRvZ2dsZSBkcmF3aW5nIG1vZGVcbiAgICAgICAgX3RoaXMubWFwLnBtLkRyYXcuTWFya2VyLnRvZ2dsZSgpO1xuICAgICAgfSxcbiAgICAgIGRvVG9nZ2xlOiB0cnVlLFxuICAgICAgdG9nZ2xlU3RhdHVzOiBmYWxzZSxcbiAgICAgIGRpc2FibGVPdGhlckJ1dHRvbnM6IHRydWUsXG4gICAgICBwb3NpdGlvbjogdGhpcy5vcHRpb25zLnBvc2l0aW9uXG4gICAgfTtcbiAgICB2YXIgZHJhd0xpbmVCdXR0b24gPSB7XG4gICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LXBtLWljb24tcG9seWxpbmUnLFxuICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgLy8gdG9nZ2xlIGRyYXdpbmcgbW9kZVxuICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5MaW5lLnRvZ2dsZSgpO1xuICAgICAgfSxcbiAgICAgIGRvVG9nZ2xlOiB0cnVlLFxuICAgICAgdG9nZ2xlU3RhdHVzOiBmYWxzZSxcbiAgICAgIGRpc2FibGVPdGhlckJ1dHRvbnM6IHRydWUsXG4gICAgICBwb3NpdGlvbjogdGhpcy5vcHRpb25zLnBvc2l0aW9uXG4gICAgfTtcbiAgICB2YXIgZHJhd0NpcmNsZUJ1dHRvbiA9IHtcbiAgICAgIGNsYXNzTmFtZTogJ2xlYWZsZXQtcG0taWNvbi1jaXJjbGUnLFxuICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgLy8gdG9nZ2xlIGRyYXdpbmcgbW9kZVxuICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5DaXJjbGUudG9nZ2xlKCk7XG4gICAgICB9LFxuICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICB9O1xuICAgIHZhciBkcmF3UmVjdGFuZ2xlQnV0dG9uID0ge1xuICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLXJlY3RhbmdsZScsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAvLyB0b2dnbGUgZHJhd2luZyBtb2RlXG4gICAgICAgIF90aGlzLm1hcC5wbS5EcmF3LlJlY3RhbmdsZS50b2dnbGUoKTtcbiAgICAgIH0sXG4gICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgIH07XG4gICAgdmFyIGVkaXRCdXR0b24gPSB7XG4gICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LXBtLWljb24tZWRpdCcsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICBfdGhpcy5tYXAucG0udG9nZ2xlR2xvYmFsRWRpdE1vZGUoKTtcbiAgICAgIH0sXG4gICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgIH07XG4gICAgdmFyIGRyYWdCdXR0b24gPSB7XG4gICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LXBtLWljb24tZHJhZycsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge30sXG4gICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgIH07XG5cbiAgICB0aGlzLl9hZGRCdXR0b24oJ2RyYXdNYXJrZXInLCBuZXcgTC5Db250cm9sLlBNQnV0dG9uKGRyYXdNYXJrZXJCdXR0b24pKTtcblxuICAgIHRoaXMuX2FkZEJ1dHRvbignZHJhd1BvbHlsaW5lJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkcmF3TGluZUJ1dHRvbikpO1xuXG4gICAgdGhpcy5fYWRkQnV0dG9uKCdkcmF3UmVjdGFuZ2xlJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkcmF3UmVjdGFuZ2xlQnV0dG9uKSk7XG5cbiAgICB0aGlzLl9hZGRCdXR0b24oJ2RyYXdQb2x5Z29uJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkcmF3UG9seUJ1dHRvbikpO1xuXG4gICAgdGhpcy5fYWRkQnV0dG9uKCdkcmF3Q2lyY2xlJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkcmF3Q2lyY2xlQnV0dG9uKSk7XG5cbiAgICB0aGlzLl9hZGRCdXR0b24oJ2N1dFBvbHlnb24nLCBuZXcgTC5Db250cm9sLlBNQnV0dG9uKGN1dEJ1dHRvbikpO1xuXG4gICAgdGhpcy5fYWRkQnV0dG9uKCdlZGl0TW9kZScsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZWRpdEJ1dHRvbikpO1xuXG4gICAgdGhpcy5fYWRkQnV0dG9uKCdkcmFnUG9seWdvbicsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZHJhZ0J1dHRvbikpO1xuXG4gICAgdGhpcy5fYWRkQnV0dG9uKCdyZW1vdmFsTW9kZScsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZGVsZXRlQnV0dG9uKSk7XG4gIH0sXG4gIF9zaG93SGlkZUJ1dHRvbnM6IGZ1bmN0aW9uIF9zaG93SGlkZUJ1dHRvbnMoKSB7XG4gICAgLy8gcmVtb3ZlIGFsbCBidXR0b25zLCB0aGF0J3MgYmVjYXVzZSB0aGUgVG9vbGJhciBjYW4gYmUgYWRkZWQgYWdhaW4gd2l0aFxuICAgIC8vIGRpZmZlcmVudCBvcHRpb25zIHNvIGl0J3MgYmFzaWNhbGx5IGEgcmVzZXQgYW5kIGFkZCBhZ2FpblxuICAgIHRoaXMucmVtb3ZlQ29udHJvbHMoKTtcbiAgICB2YXIgYnV0dG9ucyA9IHRoaXMuZ2V0QnV0dG9ucygpO1xuXG4gICAgZm9yICh2YXIgYnRuIGluIGJ1dHRvbnMpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnNbYnRuXSkge1xuICAgICAgICAvLyBpZiBvcHRpb25zIHNheSB0aGUgYnV0dG9uIHNob3VsZCBiZSB2aXNpYmxlLCBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICBidXR0b25zW2J0bl0uc2V0UG9zaXRpb24odGhpcy5vcHRpb25zLnBvc2l0aW9uKTtcbiAgICAgICAgYnV0dG9uc1tidG5dLmFkZFRvKHRoaXMubWFwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xudmFyIF9kZWZhdWx0ID0gVG9vbGJhcjtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL1Rvb2xiYXIvTC5QTS5Ub29sYmFyLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar PMButton = L.Control.extend({\n  options: {\n    position: 'topleft'\n  },\n  // TODO: clean up variable names like _button should be _options and that domNodeVariable stuff\n  initialize: function initialize(options) {\n    this._button = L.Util.setOptions(this, options);\n  },\n  onAdd: function onAdd(map) {\n    this._map = map;\n    this._container = this._map.pm.Toolbar.container;\n    this.buttonsDomNode = this._makeButton(this._button);\n\n    this._container.appendChild(this.buttonsDomNode);\n\n    return this._container;\n  },\n  onRemove: function onRemove() {\n    this.buttonsDomNode.remove();\n    return this._container;\n  },\n  getText: function getText() {\n    return this._button.text;\n  },\n  getIconUrl: function getIconUrl() {\n    return this._button.iconUrl;\n  },\n  destroy: function destroy() {\n    this._button = {};\n\n    this._update();\n  },\n  toggle: function toggle(e) {\n    if (typeof e === 'boolean') {\n      this._button.toggleStatus = e;\n    } else {\n      this._button.toggleStatus = !this._button.toggleStatus;\n    }\n\n    this._applyStyleClasses();\n\n    return this._button.toggleStatus;\n  },\n  toggled: function toggled() {\n    return this._button.toggleStatus;\n  },\n  onCreate: function onCreate() {\n    this.toggle(false);\n  },\n  _triggerClick: function _triggerClick(e) {\n    this._button.onClick(e);\n\n    this._clicked(e);\n\n    this._button.afterClick(e);\n  },\n  _makeButton: function _makeButton(button) {\n    var _this = this;\n\n    var newButton = L.DomUtil.create('a', 'leaflet-buttons-control-button', this._container);\n\n    if (button.toggleStatus) {\n      L.DomUtil.addClass(newButton, 'active');\n    }\n\n    var image = L.DomUtil.create('div', 'control-icon', newButton);\n\n    if (button.iconUrl) {\n      image.setAttribute('src', button.iconUrl);\n    }\n\n    if (button.className) {\n      L.DomUtil.addClass(image, button.className);\n    } // before the actual click, trigger a click on currently toggled buttons to\n    // untoggle them and their functionality\n\n\n    L.DomEvent.addListener(newButton, 'click', function () {\n      if (_this._button.disableOtherButtons) {\n        _this._map.pm.Toolbar.triggerClickOnToggledButtons(_this);\n      }\n    });\n    L.DomEvent.addListener(newButton, 'click', this._triggerClick, this);\n    L.DomEvent.disableClickPropagation(newButton);\n    return newButton;\n  },\n  _applyStyleClasses: function _applyStyleClasses() {\n    if (!this._container) {\n      return;\n    }\n\n    if (!this._button.toggleStatus) {\n      L.DomUtil.removeClass(this.buttonsDomNode, 'active');\n    } else {\n      L.DomUtil.addClass(this.buttonsDomNode, 'active');\n    }\n  },\n  _clicked: function _clicked() {\n    if (this._button.doToggle) {\n      this.toggle();\n    }\n\n    return;\n  }\n});\nvar _default = PMButton;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvVG9vbGJhci9MLkNvbnRyb2xzLmpzPzg5ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgUE1CdXR0b24gPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgb3B0aW9uczoge1xuICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgfSxcbiAgLy8gVE9ETzogY2xlYW4gdXAgdmFyaWFibGUgbmFtZXMgbGlrZSBfYnV0dG9uIHNob3VsZCBiZSBfb3B0aW9ucyBhbmQgdGhhdCBkb21Ob2RlVmFyaWFibGUgc3R1ZmZcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgdGhpcy5fYnV0dG9uID0gTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcbiAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgdGhpcy5fY29udGFpbmVyID0gdGhpcy5fbWFwLnBtLlRvb2xiYXIuY29udGFpbmVyO1xuICAgIHRoaXMuYnV0dG9uc0RvbU5vZGUgPSB0aGlzLl9tYWtlQnV0dG9uKHRoaXMuX2J1dHRvbik7XG5cbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5idXR0b25zRG9tTm9kZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICB9LFxuICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgdGhpcy5idXR0b25zRG9tTm9kZS5yZW1vdmUoKTtcbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICB9LFxuICBnZXRUZXh0OiBmdW5jdGlvbiBnZXRUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLl9idXR0b24udGV4dDtcbiAgfSxcbiAgZ2V0SWNvblVybDogZnVuY3Rpb24gZ2V0SWNvblVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5fYnV0dG9uLmljb25Vcmw7XG4gIH0sXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fYnV0dG9uID0ge307XG5cbiAgICB0aGlzLl91cGRhdGUoKTtcbiAgfSxcbiAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoZSkge1xuICAgIGlmICh0eXBlb2YgZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICB0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzID0gZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cyA9ICF0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzO1xuICAgIH1cblxuICAgIHRoaXMuX2FwcGx5U3R5bGVDbGFzc2VzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cztcbiAgfSxcbiAgdG9nZ2xlZDogZnVuY3Rpb24gdG9nZ2xlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cztcbiAgfSxcbiAgb25DcmVhdGU6IGZ1bmN0aW9uIG9uQ3JlYXRlKCkge1xuICAgIHRoaXMudG9nZ2xlKGZhbHNlKTtcbiAgfSxcbiAgX3RyaWdnZXJDbGljazogZnVuY3Rpb24gX3RyaWdnZXJDbGljayhlKSB7XG4gICAgdGhpcy5fYnV0dG9uLm9uQ2xpY2soZSk7XG5cbiAgICB0aGlzLl9jbGlja2VkKGUpO1xuXG4gICAgdGhpcy5fYnV0dG9uLmFmdGVyQ2xpY2soZSk7XG4gIH0sXG4gIF9tYWtlQnV0dG9uOiBmdW5jdGlvbiBfbWFrZUJ1dHRvbihidXR0b24pIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIG5ld0J1dHRvbiA9IEwuRG9tVXRpbC5jcmVhdGUoJ2EnLCAnbGVhZmxldC1idXR0b25zLWNvbnRyb2wtYnV0dG9uJywgdGhpcy5fY29udGFpbmVyKTtcblxuICAgIGlmIChidXR0b24udG9nZ2xlU3RhdHVzKSB7XG4gICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MobmV3QnV0dG9uLCAnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgdmFyIGltYWdlID0gTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JywgJ2NvbnRyb2wtaWNvbicsIG5ld0J1dHRvbik7XG5cbiAgICBpZiAoYnV0dG9uLmljb25VcmwpIHtcbiAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgYnV0dG9uLmljb25VcmwpO1xuICAgIH1cblxuICAgIGlmIChidXR0b24uY2xhc3NOYW1lKSB7XG4gICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoaW1hZ2UsIGJ1dHRvbi5jbGFzc05hbWUpO1xuICAgIH0gLy8gYmVmb3JlIHRoZSBhY3R1YWwgY2xpY2ssIHRyaWdnZXIgYSBjbGljayBvbiBjdXJyZW50bHkgdG9nZ2xlZCBidXR0b25zIHRvXG4gICAgLy8gdW50b2dnbGUgdGhlbSBhbmQgdGhlaXIgZnVuY3Rpb25hbGl0eVxuXG5cbiAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKG5ld0J1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLl9idXR0b24uZGlzYWJsZU90aGVyQnV0dG9ucykge1xuICAgICAgICBfdGhpcy5fbWFwLnBtLlRvb2xiYXIudHJpZ2dlckNsaWNrT25Ub2dnbGVkQnV0dG9ucyhfdGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgTC5Eb21FdmVudC5hZGRMaXN0ZW5lcihuZXdCdXR0b24sICdjbGljaycsIHRoaXMuX3RyaWdnZXJDbGljaywgdGhpcyk7XG4gICAgTC5Eb21FdmVudC5kaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbihuZXdCdXR0b24pO1xuICAgIHJldHVybiBuZXdCdXR0b247XG4gIH0sXG4gIF9hcHBseVN0eWxlQ2xhc3NlczogZnVuY3Rpb24gX2FwcGx5U3R5bGVDbGFzc2VzKCkge1xuICAgIGlmICghdGhpcy5fY29udGFpbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzKSB7XG4gICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5idXR0b25zRG9tTm9kZSwgJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5idXR0b25zRG9tTm9kZSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSxcbiAgX2NsaWNrZWQ6IGZ1bmN0aW9uIF9jbGlja2VkKCkge1xuICAgIGlmICh0aGlzLl9idXR0b24uZG9Ub2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG59KTtcbnZhciBfZGVmYXVsdCA9IFBNQnV0dG9uO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvVG9vbGJhci9MLkNvbnRyb2xzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(0));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Marker = _LPM.default.extend({\n  initialize: function initialize(map) {\n    this._map = map;\n    this._shape = 'Marker';\n    this.toolbarButtonName = 'drawMarker';\n  },\n  enable: function enable(options) {\n    // TODO: Think about if these options could be passed globally for all\n    // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n    L.Util.setOptions(this, options); // change enabled state\n\n    this._enabled = true; // create a marker on click on the map\n\n    this._map.on('click', this._createMarker, this); // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true); // this is the hintmarker on the mouse cursor\n\n\n    this._hintMarker = L.marker([0, 0], this.options.markerStyle);\n    this._hintMarker._pmTempLayer = true;\n\n    this._hintMarker.addTo(this._map); // this is just to keep the snappable mixin happy\n\n\n    this._layer = this._hintMarker; // sync hint marker with mouse cursor\n\n    this._map.on('mousemove', this._syncHintMarker, this); // fire drawstart event\n\n\n    this._map.fire('pm:drawstart', {\n      shape: this._shape,\n      workingLayer: this._layer\n    }); // enable edit mode for existing markers\n\n\n    this._map.eachLayer(function (layer) {\n      if (layer instanceof L.Marker && layer.pm) {\n        layer.pm.enable();\n      }\n    });\n  },\n  disable: function disable() {\n    // cancel, if drawing mode isn't even enabled\n    if (!this._enabled) {\n      return;\n    } // undbind click event, don't create a marker on click anymore\n\n\n    this._map.off('click', this._createMarker, this); // remove hint marker\n\n\n    this._hintMarker.remove(); // remove event listener to sync hint marker\n\n\n    this._map.off('mousemove', this._syncHintMarker, this); // disable dragging and removing for all markers\n\n\n    this._map.eachLayer(function (layer) {\n      if (layer instanceof L.Marker && layer.pm && !layer._pmTempLayer) {\n        layer.pm.disable();\n      }\n    }); // fire drawend event\n\n\n    this._map.fire('pm:drawend', {\n      shape: this._shape\n    }); // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false); // change enabled state\n\n\n    this._enabled = false;\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  toggle: function toggle(options) {\n    if (this.enabled()) {\n      this.disable();\n    } else {\n      this.enable(options);\n    }\n  },\n  _createMarker: function _createMarker(e) {\n    if (!e.latlng) {\n      return;\n    } // assign the coordinate of the click to the hintMarker, that's necessary for\n    // mobile where the marker can't follow a cursor\n\n\n    if (!this._hintMarker._snapped) {\n      this._hintMarker.setLatLng(e.latlng);\n    } // get coordinate for new vertex by hintMarker (cursor marker)\n\n\n    var latlng = this._hintMarker.getLatLng(); // create marker\n\n\n    var marker = new L.Marker(latlng, this.options.markerStyle); // add marker to the map\n\n    marker.addTo(this._map); // enable editing for the marker\n\n    marker.pm.enable(); // fire the pm:create event and pass shape and marker\n\n    this._map.fire('pm:create', {\n      shape: this._shape,\n      marker: marker,\n      // DEPRECATED\n      layer: marker\n    });\n\n    this._cleanupSnapping();\n  },\n  _syncHintMarker: function _syncHintMarker(e) {\n    // move the cursor marker\n    this._hintMarker.setLatLng(e.latlng); // if snapping is enabled, do it\n\n\n    if (this.options.snappable) {\n      var fakeDragEvent = e;\n      fakeDragEvent.target = this._hintMarker;\n\n      this._handleSnapping(fakeDragEvent);\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTWFya2VyLmpzP2M3NjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkRyYXdcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNLmRlZmF1bHQuTWFya2VyID0gX0xQTS5kZWZhdWx0LmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgdGhpcy5fbWFwID0gbWFwO1xuICAgIHRoaXMuX3NoYXBlID0gJ01hcmtlcic7XG4gICAgdGhpcy50b29sYmFyQnV0dG9uTmFtZSA9ICdkcmF3TWFya2VyJztcbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgIC8vIFRPRE86IFRoaW5rIGFib3V0IGlmIHRoZXNlIG9wdGlvbnMgY291bGQgYmUgcGFzc2VkIGdsb2JhbGx5IGZvciBhbGxcbiAgICAvLyBpbnN0YW5jZXMgb2YgTC5QTS5EcmF3LiBTbyBhIGRldiBjb3VsZCBzZXQgZHJhd2luZyBzdHlsZSBvbmUgdGltZSBhcyBzb21lIGtpbmQgb2YgY29uZmlnXG4gICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7IC8vIGNoYW5nZSBlbmFibGVkIHN0YXRlXG5cbiAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTsgLy8gY3JlYXRlIGEgbWFya2VyIG9uIGNsaWNrIG9uIHRoZSBtYXBcblxuICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9jcmVhdGVNYXJrZXIsIHRoaXMpOyAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBlbmFibGVkIHdpdGhvdXQgdGhlIGJ1dHRvblxuXG5cbiAgICB0aGlzLl9tYXAucG0uVG9vbGJhci50b2dnbGVCdXR0b24odGhpcy50b29sYmFyQnV0dG9uTmFtZSwgdHJ1ZSk7IC8vIHRoaXMgaXMgdGhlIGhpbnRtYXJrZXIgb24gdGhlIG1vdXNlIGN1cnNvclxuXG5cbiAgICB0aGlzLl9oaW50TWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB0aGlzLm9wdGlvbnMubWFya2VyU3R5bGUpO1xuICAgIHRoaXMuX2hpbnRNYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcblxuICAgIHRoaXMuX2hpbnRNYXJrZXIuYWRkVG8odGhpcy5fbWFwKTsgLy8gdGhpcyBpcyBqdXN0IHRvIGtlZXAgdGhlIHNuYXBwYWJsZSBtaXhpbiBoYXBweVxuXG5cbiAgICB0aGlzLl9sYXllciA9IHRoaXMuX2hpbnRNYXJrZXI7IC8vIHN5bmMgaGludCBtYXJrZXIgd2l0aCBtb3VzZSBjdXJzb3JcblxuICAgIHRoaXMuX21hcC5vbignbW91c2Vtb3ZlJywgdGhpcy5fc3luY0hpbnRNYXJrZXIsIHRoaXMpOyAvLyBmaXJlIGRyYXdzdGFydCBldmVudFxuXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06ZHJhd3N0YXJ0Jywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgd29ya2luZ0xheWVyOiB0aGlzLl9sYXllclxuICAgIH0pOyAvLyBlbmFibGUgZWRpdCBtb2RlIGZvciBleGlzdGluZyBtYXJrZXJzXG5cblxuICAgIHRoaXMuX21hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciAmJiBsYXllci5wbSkge1xuICAgICAgICBsYXllci5wbS5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAvLyBjYW5jZWwsIGlmIGRyYXdpbmcgbW9kZSBpc24ndCBldmVuIGVuYWJsZWRcbiAgICBpZiAoIXRoaXMuX2VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIHVuZGJpbmQgY2xpY2sgZXZlbnQsIGRvbid0IGNyZWF0ZSBhIG1hcmtlciBvbiBjbGljayBhbnltb3JlXG5cblxuICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTsgLy8gcmVtb3ZlIGhpbnQgbWFya2VyXG5cblxuICAgIHRoaXMuX2hpbnRNYXJrZXIucmVtb3ZlKCk7IC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lciB0byBzeW5jIGhpbnQgbWFya2VyXG5cblxuICAgIHRoaXMuX21hcC5vZmYoJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTsgLy8gZGlzYWJsZSBkcmFnZ2luZyBhbmQgcmVtb3ZpbmcgZm9yIGFsbCBtYXJrZXJzXG5cblxuICAgIHRoaXMuX21hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciAmJiBsYXllci5wbSAmJiAhbGF5ZXIuX3BtVGVtcExheWVyKSB7XG4gICAgICAgIGxheWVyLnBtLmRpc2FibGUoKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gZmlyZSBkcmF3ZW5kIGV2ZW50XG5cblxuICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3ZW5kJywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlXG4gICAgfSk7IC8vIHRvZ2dsZSB0aGUgZHJhdyBidXR0b24gb2YgdGhlIFRvb2xiYXIgaW4gY2FzZSBkcmF3aW5nIG1vZGUgZ290IGRpc2FibGVkIHdpdGhvdXQgdGhlIGJ1dHRvblxuXG5cbiAgICB0aGlzLl9tYXAucG0uVG9vbGJhci50b2dnbGVCdXR0b24odGhpcy50b29sYmFyQnV0dG9uTmFtZSwgZmFsc2UpOyAvLyBjaGFuZ2UgZW5hYmxlZCBzdGF0ZVxuXG5cbiAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gIH0sXG4gIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gIH0sXG4gIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKG9wdGlvbnMpIHtcbiAgICBpZiAodGhpcy5lbmFibGVkKCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZShvcHRpb25zKTtcbiAgICB9XG4gIH0sXG4gIF9jcmVhdGVNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVNYXJrZXIoZSkge1xuICAgIGlmICghZS5sYXRsbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIGFzc2lnbiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgY2xpY2sgdG8gdGhlIGhpbnRNYXJrZXIsIHRoYXQncyBuZWNlc3NhcnkgZm9yXG4gICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG5cblxuICAgIGlmICghdGhpcy5faGludE1hcmtlci5fc25hcHBlZCkge1xuICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuICAgIH0gLy8gZ2V0IGNvb3JkaW5hdGUgZm9yIG5ldyB2ZXJ0ZXggYnkgaGludE1hcmtlciAoY3Vyc29yIG1hcmtlcilcblxuXG4gICAgdmFyIGxhdGxuZyA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7IC8vIGNyZWF0ZSBtYXJrZXJcblxuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHRoaXMub3B0aW9ucy5tYXJrZXJTdHlsZSk7IC8vIGFkZCBtYXJrZXIgdG8gdGhlIG1hcFxuXG4gICAgbWFya2VyLmFkZFRvKHRoaXMuX21hcCk7IC8vIGVuYWJsZSBlZGl0aW5nIGZvciB0aGUgbWFya2VyXG5cbiAgICBtYXJrZXIucG0uZW5hYmxlKCk7IC8vIGZpcmUgdGhlIHBtOmNyZWF0ZSBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbWFya2VyXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06Y3JlYXRlJywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgbWFya2VyOiBtYXJrZXIsXG4gICAgICAvLyBERVBSRUNBVEVEXG4gICAgICBsYXllcjogbWFya2VyXG4gICAgfSk7XG5cbiAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgfSxcbiAgX3N5bmNIaW50TWFya2VyOiBmdW5jdGlvbiBfc3luY0hpbnRNYXJrZXIoZSkge1xuICAgIC8vIG1vdmUgdGhlIGN1cnNvciBtYXJrZXJcbiAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7IC8vIGlmIHNuYXBwaW5nIGlzIGVuYWJsZWQsIGRvIGl0XG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICB2YXIgZmFrZURyYWdFdmVudCA9IGU7XG4gICAgICBmYWtlRHJhZ0V2ZW50LnRhcmdldCA9IHRoaXMuX2hpbnRNYXJrZXI7XG5cbiAgICAgIHRoaXMuX2hhbmRsZVNuYXBwaW5nKGZha2VEcmFnRXZlbnQpO1xuICAgIH1cbiAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _kinks = _interopRequireDefault(__webpack_require__(6));\n\nvar _LPM = _interopRequireDefault(__webpack_require__(0));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Line = _LPM.default.extend({\n  initialize: function initialize(map) {\n    this._map = map;\n    this._shape = 'Line';\n    this.toolbarButtonName = 'drawPolyline';\n    this._doesSelfIntersect = false;\n  },\n  enable: function enable(options) {\n    L.Util.setOptions(this, options); // fallback option for finishOnDoubleClick\n    // TODO: remove in a later release\n\n    if (this.options.finishOnDoubleClick && !this.options.finishOn) {\n      this.options.finishOn = 'dblclick';\n    } // enable draw mode\n\n\n    this._enabled = true; // create a new layergroup\n\n    this._layerGroup = new L.LayerGroup();\n    this._layerGroup._pmTempLayer = true;\n\n    this._layerGroup.addTo(this._map); // this is the polyLine that'll make up the polygon\n\n\n    this._layer = L.polyline([], this.options.templineStyle);\n    this._layer._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._layer); // this is the hintline from the mouse cursor to the last marker\n\n\n    this._hintline = L.polyline([], this.options.hintlineStyle);\n    this._hintline._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._hintline); // this is the hintmarker on the mouse cursor\n\n\n    this._hintMarker = L.marker(this._map.getCenter(), {\n      icon: L.divIcon({\n        className: 'marker-icon cursor-marker'\n      })\n    });\n    this._hintMarker._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._hintMarker); // show the hintmarker if the option is set\n\n\n    if (this.options.cursorMarker) {\n      L.DomUtil.addClass(this._hintMarker._icon, 'visible');\n    } // change map cursor\n\n\n    this._map._container.style.cursor = 'crosshair'; // create a polygon-point on click\n\n    this._map.on('click', this._createVertex, this); // finish on layer event\n    // #http://leafletjs.com/reference-1.2.0.html#interactive-layer-click\n\n\n    if (this.options.finishOn) {\n      this._map.on(this.options.finishOn, this._finishShape, this);\n    } // prevent zoom on double click if finishOn is === dblclick\n\n\n    if (this.options.finishOn === 'dblclick') {\n      this.tempMapDoubleClickZoomState = this._map.doubleClickZoom._enabled;\n\n      if (this.tempMapDoubleClickZoomState) {\n        this._map.doubleClickZoom.disable();\n      }\n    } // sync hint marker with mouse cursor\n\n\n    this._map.on('mousemove', this._syncHintMarker, this); // sync the hintline with hint marker\n\n\n    this._hintMarker.on('move', this._syncHintLine, this); // fire drawstart event\n\n\n    this._map.fire('pm:drawstart', {\n      shape: this._shape,\n      workingLayer: this._layer\n    }); // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true); // an array used in the snapping mixin.\n    // TODO: think about moving this somewhere else?\n\n\n    this._otherSnapLayers = [];\n  },\n  disable: function disable() {\n    // disable draw mode\n    // cancel, if drawing mode isn't even enabled\n    if (!this._enabled) {\n      return;\n    }\n\n    this._enabled = false; // reset cursor\n\n    this._map._container.style.cursor = 'default'; // unbind listeners\n\n    this._map.off('click', this._createVertex, this);\n\n    this._map.off('mousemove', this._syncHintMarker, this);\n\n    if (this.options.finishOn) {\n      this._map.off(this.options.finishOn, this._finishShape, this);\n    }\n\n    if (this.tempMapDoubleClickZoomState) {\n      this._map.doubleClickZoom.enable();\n    } // remove layer\n\n\n    this._map.removeLayer(this._layerGroup); // fire drawend event\n\n\n    this._map.fire('pm:drawend', {\n      shape: this._shape\n    }); // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false); // cleanup snapping\n\n\n    if (this.options.snappable) {\n      this._cleanupSnapping();\n    }\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  toggle: function toggle(options) {\n    if (this.enabled()) {\n      this.disable();\n    } else {\n      this.enable(options);\n    }\n  },\n  hasSelfIntersection: function hasSelfIntersection() {\n    // check for self intersection of the layer and return true/false\n    var selfIntersection = (0, _kinks.default)(this._layer.toGeoJSON());\n    return selfIntersection.features.length > 0;\n  },\n  _syncHintLine: function _syncHintLine() {\n    var polyPoints = this._layer.getLatLngs();\n\n    if (polyPoints.length > 0) {\n      var lastPolygonPoint = polyPoints[polyPoints.length - 1]; // set coords for hintline from marker to last vertex of drawin polyline\n\n      this._hintline.setLatLngs([lastPolygonPoint, this._hintMarker.getLatLng()]);\n    }\n  },\n  _syncHintMarker: function _syncHintMarker(e) {\n    // move the cursor marker\n    this._hintMarker.setLatLng(e.latlng); // if snapping is enabled, do it\n\n\n    if (this.options.snappable) {\n      var fakeDragEvent = e;\n      fakeDragEvent.target = this._hintMarker;\n\n      this._handleSnapping(fakeDragEvent);\n    } // if self-intersection is forbidden, handle it\n\n\n    if (!this.options.allowSelfIntersection) {\n      this._handleSelfIntersection();\n    }\n  },\n  _handleSelfIntersection: function _handleSelfIntersection() {\n    // ok we need to check the self intersection here\n    // problem: during draw, the marker on the cursor is not yet part\n    // of the layer. So we need to clone the layer, add the\n    // potential new vertex (cursor markers latlngs) and check the self\n    // intersection on the clone. Phew... - let's do it \n    // clone layer (polyline is enough, even when it's a polygon)\n    var clone = L.polyline(this._layer.getLatLngs()); // add the vertex\n\n    clone.addLatLng(this._hintMarker.getLatLng()); // check the self intersection\n\n    var selfIntersection = (0, _kinks.default)(clone.toGeoJSON());\n    this._doesSelfIntersect = selfIntersection.features.length > 0; // change the style based on self intersection\n\n    if (this._doesSelfIntersect) {\n      this._hintline.setStyle({\n        color: 'red'\n      });\n    } else {\n      this._hintline.setStyle({\n        color: '#3388ff'\n      });\n    }\n  },\n  _createVertex: function _createVertex(e) {\n    if (!this.options.allowSelfIntersection && this._doesSelfIntersect) {\n      return;\n    } // assign the coordinate of the click to the hintMarker, that's necessary for\n    // mobile where the marker can't follow a cursor\n\n\n    if (!this._hintMarker._snapped) {\n      this._hintMarker.setLatLng(e.latlng);\n    } // get coordinate for new vertex by hintMarker (cursor marker)\n\n\n    var latlng = this._hintMarker.getLatLng(); // check if the first and this vertex have the same latlng\n\n\n    if (latlng.equals(this._layer.getLatLngs()[0])) {\n      // yes? finish the polygon\n      this._finishShape(e); // \"why?\", you ask? Because this happens when we snap the last vertex to the first one\n      // and then click without hitting the last marker. Click happens on the map\n      // in 99% of cases it's because the user wants to finish the polygon. So...\n\n\n      return;\n    } // is this the first point?\n\n\n    var first = this._layer.getLatLngs().length === 0;\n\n    this._layer.addLatLng(latlng);\n\n    var newMarker = this._createMarker(latlng, first);\n\n    this._hintline.setLatLngs([latlng, latlng]);\n\n    this._layer.fire('pm:vertexadded', {\n      shape: this._shape,\n      workingLayer: this._layer,\n      marker: newMarker,\n      latlng: latlng\n    });\n  },\n  _finishShape: function _finishShape() {\n    // if self intersection is not allowed, do not finish the shape!\n    if (!this.options.allowSelfIntersection && this._doesSelfIntersect) {\n      return;\n    } // get coordinates, create the leaflet shape and add it to the map\n\n\n    var coords = this._layer.getLatLngs();\n\n    var polylineLayer = L.polyline(coords, this.options.pathOptions).addTo(this._map); // disable drawing\n\n    this.disable(); // fire the pm:create event and pass shape and layer\n\n    this._map.fire('pm:create', {\n      shape: this._shape,\n      layer: polylineLayer\n    });\n\n    if (this.options.snappable) {\n      this._cleanupSnapping();\n    }\n  },\n  _createMarker: function _createMarker(latlng) {\n    // create the new marker\n    var marker = new L.Marker(latlng, {\n      draggable: false,\n      icon: L.divIcon({\n        className: 'marker-icon'\n      })\n    });\n    marker._pmTempLayer = true; // add it to the map\n\n    this._layerGroup.addLayer(marker); // a click on any marker finishes this shape\n\n\n    marker.on('click', this._finishShape, this);\n    return marker;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTGluZS5qcz9kMGJiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2tpbmtzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQHR1cmYva2lua3NcIikpO1xuXG52YXIgX0xQTSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTC5QTS5EcmF3XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTS5kZWZhdWx0LkxpbmUgPSBfTFBNLmRlZmF1bHQuZXh0ZW5kKHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgdGhpcy5fc2hhcGUgPSAnTGluZSc7XG4gICAgdGhpcy50b29sYmFyQnV0dG9uTmFtZSA9ICdkcmF3UG9seWxpbmUnO1xuICAgIHRoaXMuX2RvZXNTZWxmSW50ZXJzZWN0ID0gZmFsc2U7XG4gIH0sXG4gIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKG9wdGlvbnMpIHtcbiAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTsgLy8gZmFsbGJhY2sgb3B0aW9uIGZvciBmaW5pc2hPbkRvdWJsZUNsaWNrXG4gICAgLy8gVE9ETzogcmVtb3ZlIGluIGEgbGF0ZXIgcmVsZWFzZVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5maW5pc2hPbkRvdWJsZUNsaWNrICYmICF0aGlzLm9wdGlvbnMuZmluaXNoT24pIHtcbiAgICAgIHRoaXMub3B0aW9ucy5maW5pc2hPbiA9ICdkYmxjbGljayc7XG4gICAgfSAvLyBlbmFibGUgZHJhdyBtb2RlXG5cblxuICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlOyAvLyBjcmVhdGUgYSBuZXcgbGF5ZXJncm91cFxuXG4gICAgdGhpcy5fbGF5ZXJHcm91cCA9IG5ldyBMLkxheWVyR3JvdXAoKTtcbiAgICB0aGlzLl9sYXllckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZFRvKHRoaXMuX21hcCk7IC8vIHRoaXMgaXMgdGhlIHBvbHlMaW5lIHRoYXQnbGwgbWFrZSB1cCB0aGUgcG9seWdvblxuXG5cbiAgICB0aGlzLl9sYXllciA9IEwucG9seWxpbmUoW10sIHRoaXMub3B0aW9ucy50ZW1wbGluZVN0eWxlKTtcbiAgICB0aGlzLl9sYXllci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9sYXllcik7IC8vIHRoaXMgaXMgdGhlIGhpbnRsaW5lIGZyb20gdGhlIG1vdXNlIGN1cnNvciB0byB0aGUgbGFzdCBtYXJrZXJcblxuXG4gICAgdGhpcy5faGludGxpbmUgPSBMLnBvbHlsaW5lKFtdLCB0aGlzLm9wdGlvbnMuaGludGxpbmVTdHlsZSk7XG4gICAgdGhpcy5faGludGxpbmUuX3BtVGVtcExheWVyID0gdHJ1ZTtcblxuICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5faGludGxpbmUpOyAvLyB0aGlzIGlzIHRoZSBoaW50bWFya2VyIG9uIHRoZSBtb3VzZSBjdXJzb3JcblxuXG4gICAgdGhpcy5faGludE1hcmtlciA9IEwubWFya2VyKHRoaXMuX21hcC5nZXRDZW50ZXIoKSwge1xuICAgICAgaWNvbjogTC5kaXZJY29uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbWFya2VyLWljb24gY3Vyc29yLW1hcmtlcidcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgdGhpcy5faGludE1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9oaW50TWFya2VyKTsgLy8gc2hvdyB0aGUgaGludG1hcmtlciBpZiB0aGUgb3B0aW9uIGlzIHNldFxuXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmN1cnNvck1hcmtlcikge1xuICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2hpbnRNYXJrZXIuX2ljb24sICd2aXNpYmxlJyk7XG4gICAgfSAvLyBjaGFuZ2UgbWFwIGN1cnNvclxuXG5cbiAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJzsgLy8gY3JlYXRlIGEgcG9seWdvbi1wb2ludCBvbiBjbGlja1xuXG4gICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIHRoaXMuX2NyZWF0ZVZlcnRleCwgdGhpcyk7IC8vIGZpbmlzaCBvbiBsYXllciBldmVudFxuICAgIC8vICNodHRwOi8vbGVhZmxldGpzLmNvbS9yZWZlcmVuY2UtMS4yLjAuaHRtbCNpbnRlcmFjdGl2ZS1sYXllci1jbGlja1xuXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmZpbmlzaE9uKSB7XG4gICAgICB0aGlzLl9tYXAub24odGhpcy5vcHRpb25zLmZpbmlzaE9uLCB0aGlzLl9maW5pc2hTaGFwZSwgdGhpcyk7XG4gICAgfSAvLyBwcmV2ZW50IHpvb20gb24gZG91YmxlIGNsaWNrIGlmIGZpbmlzaE9uIGlzID09PSBkYmxjbGlja1xuXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmZpbmlzaE9uID09PSAnZGJsY2xpY2snKSB7XG4gICAgICB0aGlzLnRlbXBNYXBEb3VibGVDbGlja1pvb21TdGF0ZSA9IHRoaXMuX21hcC5kb3VibGVDbGlja1pvb20uX2VuYWJsZWQ7XG5cbiAgICAgIGlmICh0aGlzLnRlbXBNYXBEb3VibGVDbGlja1pvb21TdGF0ZSkge1xuICAgICAgICB0aGlzLl9tYXAuZG91YmxlQ2xpY2tab29tLmRpc2FibGUoKTtcbiAgICAgIH1cbiAgICB9IC8vIHN5bmMgaGludCBtYXJrZXIgd2l0aCBtb3VzZSBjdXJzb3JcblxuXG4gICAgdGhpcy5fbWFwLm9uKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7IC8vIHN5bmMgdGhlIGhpbnRsaW5lIHdpdGggaGludCBtYXJrZXJcblxuXG4gICAgdGhpcy5faGludE1hcmtlci5vbignbW92ZScsIHRoaXMuX3N5bmNIaW50TGluZSwgdGhpcyk7IC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG5cblxuICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7XG4gICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICB3b3JraW5nTGF5ZXI6IHRoaXMuX2xheWVyXG4gICAgfSk7IC8vIHRvZ2dsZSB0aGUgZHJhdyBidXR0b24gb2YgdGhlIFRvb2xiYXIgaW4gY2FzZSBkcmF3aW5nIG1vZGUgZ290IGVuYWJsZWQgd2l0aG91dCB0aGUgYnV0dG9uXG5cblxuICAgIHRoaXMuX21hcC5wbS5Ub29sYmFyLnRvZ2dsZUJ1dHRvbih0aGlzLnRvb2xiYXJCdXR0b25OYW1lLCB0cnVlKTsgLy8gYW4gYXJyYXkgdXNlZCBpbiB0aGUgc25hcHBpbmcgbWl4aW4uXG4gICAgLy8gVE9ETzogdGhpbmsgYWJvdXQgbW92aW5nIHRoaXMgc29tZXdoZXJlIGVsc2U/XG5cblxuICAgIHRoaXMuX290aGVyU25hcExheWVycyA9IFtdO1xuICB9LFxuICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIC8vIGRpc2FibGUgZHJhdyBtb2RlXG4gICAgLy8gY2FuY2VsLCBpZiBkcmF3aW5nIG1vZGUgaXNuJ3QgZXZlbiBlbmFibGVkXG4gICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZW5hYmxlZCA9IGZhbHNlOyAvLyByZXNldCBjdXJzb3JcblxuICAgIHRoaXMuX21hcC5fY29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JzsgLy8gdW5iaW5kIGxpc3RlbmVyc1xuXG4gICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9jcmVhdGVWZXJ0ZXgsIHRoaXMpO1xuXG4gICAgdGhpcy5fbWFwLm9mZignbW91c2Vtb3ZlJywgdGhpcy5fc3luY0hpbnRNYXJrZXIsIHRoaXMpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5maW5pc2hPbikge1xuICAgICAgdGhpcy5fbWFwLm9mZih0aGlzLm9wdGlvbnMuZmluaXNoT24sIHRoaXMuX2ZpbmlzaFNoYXBlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50ZW1wTWFwRG91YmxlQ2xpY2tab29tU3RhdGUpIHtcbiAgICAgIHRoaXMuX21hcC5kb3VibGVDbGlja1pvb20uZW5hYmxlKCk7XG4gICAgfSAvLyByZW1vdmUgbGF5ZXJcblxuXG4gICAgdGhpcy5fbWFwLnJlbW92ZUxheWVyKHRoaXMuX2xheWVyR3JvdXApOyAvLyBmaXJlIGRyYXdlbmQgZXZlbnRcblxuXG4gICAgdGhpcy5fbWFwLmZpcmUoJ3BtOmRyYXdlbmQnLCB7XG4gICAgICBzaGFwZTogdGhpcy5fc2hhcGVcbiAgICB9KTsgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZGlzYWJsZWQgd2l0aG91dCB0aGUgYnV0dG9uXG5cblxuICAgIHRoaXMuX21hcC5wbS5Ub29sYmFyLnRvZ2dsZUJ1dHRvbih0aGlzLnRvb2xiYXJCdXR0b25OYW1lLCBmYWxzZSk7IC8vIGNsZWFudXAgc25hcHBpbmdcblxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgIHRoaXMuX2NsZWFudXBTbmFwcGluZygpO1xuICAgIH1cbiAgfSxcbiAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgfSxcbiAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUob3B0aW9ucykge1xuICAgIGlmICh0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlKG9wdGlvbnMpO1xuICAgIH1cbiAgfSxcbiAgaGFzU2VsZkludGVyc2VjdGlvbjogZnVuY3Rpb24gaGFzU2VsZkludGVyc2VjdGlvbigpIHtcbiAgICAvLyBjaGVjayBmb3Igc2VsZiBpbnRlcnNlY3Rpb24gb2YgdGhlIGxheWVyIGFuZCByZXR1cm4gdHJ1ZS9mYWxzZVxuICAgIHZhciBzZWxmSW50ZXJzZWN0aW9uID0gKDAsIF9raW5rcy5kZWZhdWx0KSh0aGlzLl9sYXllci50b0dlb0pTT04oKSk7XG4gICAgcmV0dXJuIHNlbGZJbnRlcnNlY3Rpb24uZmVhdHVyZXMubGVuZ3RoID4gMDtcbiAgfSxcbiAgX3N5bmNIaW50TGluZTogZnVuY3Rpb24gX3N5bmNIaW50TGluZSgpIHtcbiAgICB2YXIgcG9seVBvaW50cyA9IHRoaXMuX2xheWVyLmdldExhdExuZ3MoKTtcblxuICAgIGlmIChwb2x5UG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHZhciBsYXN0UG9seWdvblBvaW50ID0gcG9seVBvaW50c1twb2x5UG9pbnRzLmxlbmd0aCAtIDFdOyAvLyBzZXQgY29vcmRzIGZvciBoaW50bGluZSBmcm9tIG1hcmtlciB0byBsYXN0IHZlcnRleCBvZiBkcmF3aW4gcG9seWxpbmVcblxuICAgICAgdGhpcy5faGludGxpbmUuc2V0TGF0TG5ncyhbbGFzdFBvbHlnb25Qb2ludCwgdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKV0pO1xuICAgIH1cbiAgfSxcbiAgX3N5bmNIaW50TWFya2VyOiBmdW5jdGlvbiBfc3luY0hpbnRNYXJrZXIoZSkge1xuICAgIC8vIG1vdmUgdGhlIGN1cnNvciBtYXJrZXJcbiAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7IC8vIGlmIHNuYXBwaW5nIGlzIGVuYWJsZWQsIGRvIGl0XG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICB2YXIgZmFrZURyYWdFdmVudCA9IGU7XG4gICAgICBmYWtlRHJhZ0V2ZW50LnRhcmdldCA9IHRoaXMuX2hpbnRNYXJrZXI7XG5cbiAgICAgIHRoaXMuX2hhbmRsZVNuYXBwaW5nKGZha2VEcmFnRXZlbnQpO1xuICAgIH0gLy8gaWYgc2VsZi1pbnRlcnNlY3Rpb24gaXMgZm9yYmlkZGVuLCBoYW5kbGUgaXRcblxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuYWxsb3dTZWxmSW50ZXJzZWN0aW9uKSB7XG4gICAgICB0aGlzLl9oYW5kbGVTZWxmSW50ZXJzZWN0aW9uKCk7XG4gICAgfVxuICB9LFxuICBfaGFuZGxlU2VsZkludGVyc2VjdGlvbjogZnVuY3Rpb24gX2hhbmRsZVNlbGZJbnRlcnNlY3Rpb24oKSB7XG4gICAgLy8gb2sgd2UgbmVlZCB0byBjaGVjayB0aGUgc2VsZiBpbnRlcnNlY3Rpb24gaGVyZVxuICAgIC8vIHByb2JsZW06IGR1cmluZyBkcmF3LCB0aGUgbWFya2VyIG9uIHRoZSBjdXJzb3IgaXMgbm90IHlldCBwYXJ0XG4gICAgLy8gb2YgdGhlIGxheWVyLiBTbyB3ZSBuZWVkIHRvIGNsb25lIHRoZSBsYXllciwgYWRkIHRoZVxuICAgIC8vIHBvdGVudGlhbCBuZXcgdmVydGV4IChjdXJzb3IgbWFya2VycyBsYXRsbmdzKSBhbmQgY2hlY2sgdGhlIHNlbGZcbiAgICAvLyBpbnRlcnNlY3Rpb24gb24gdGhlIGNsb25lLiBQaGV3Li4uIC0gbGV0J3MgZG8gaXQg8J+SqlxuICAgIC8vIGNsb25lIGxheWVyIChwb2x5bGluZSBpcyBlbm91Z2gsIGV2ZW4gd2hlbiBpdCdzIGEgcG9seWdvbilcbiAgICB2YXIgY2xvbmUgPSBMLnBvbHlsaW5lKHRoaXMuX2xheWVyLmdldExhdExuZ3MoKSk7IC8vIGFkZCB0aGUgdmVydGV4XG5cbiAgICBjbG9uZS5hZGRMYXRMbmcodGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKSk7IC8vIGNoZWNrIHRoZSBzZWxmIGludGVyc2VjdGlvblxuXG4gICAgdmFyIHNlbGZJbnRlcnNlY3Rpb24gPSAoMCwgX2tpbmtzLmRlZmF1bHQpKGNsb25lLnRvR2VvSlNPTigpKTtcbiAgICB0aGlzLl9kb2VzU2VsZkludGVyc2VjdCA9IHNlbGZJbnRlcnNlY3Rpb24uZmVhdHVyZXMubGVuZ3RoID4gMDsgLy8gY2hhbmdlIHRoZSBzdHlsZSBiYXNlZCBvbiBzZWxmIGludGVyc2VjdGlvblxuXG4gICAgaWYgKHRoaXMuX2RvZXNTZWxmSW50ZXJzZWN0KSB7XG4gICAgICB0aGlzLl9oaW50bGluZS5zZXRTdHlsZSh7XG4gICAgICAgIGNvbG9yOiAncmVkJ1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpbnRsaW5lLnNldFN0eWxlKHtcbiAgICAgICAgY29sb3I6ICcjMzM4OGZmJ1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBfY3JlYXRlVmVydGV4OiBmdW5jdGlvbiBfY3JlYXRlVmVydGV4KGUpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5hbGxvd1NlbGZJbnRlcnNlY3Rpb24gJiYgdGhpcy5fZG9lc1NlbGZJbnRlcnNlY3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIGFzc2lnbiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgY2xpY2sgdG8gdGhlIGhpbnRNYXJrZXIsIHRoYXQncyBuZWNlc3NhcnkgZm9yXG4gICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG5cblxuICAgIGlmICghdGhpcy5faGludE1hcmtlci5fc25hcHBlZCkge1xuICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuICAgIH0gLy8gZ2V0IGNvb3JkaW5hdGUgZm9yIG5ldyB2ZXJ0ZXggYnkgaGludE1hcmtlciAoY3Vyc29yIG1hcmtlcilcblxuXG4gICAgdmFyIGxhdGxuZyA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7IC8vIGNoZWNrIGlmIHRoZSBmaXJzdCBhbmQgdGhpcyB2ZXJ0ZXggaGF2ZSB0aGUgc2FtZSBsYXRsbmdcblxuXG4gICAgaWYgKGxhdGxuZy5lcXVhbHModGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpWzBdKSkge1xuICAgICAgLy8geWVzPyBmaW5pc2ggdGhlIHBvbHlnb25cbiAgICAgIHRoaXMuX2ZpbmlzaFNoYXBlKGUpOyAvLyBcIndoeT9cIiwgeW91IGFzaz8gQmVjYXVzZSB0aGlzIGhhcHBlbnMgd2hlbiB3ZSBzbmFwIHRoZSBsYXN0IHZlcnRleCB0byB0aGUgZmlyc3Qgb25lXG4gICAgICAvLyBhbmQgdGhlbiBjbGljayB3aXRob3V0IGhpdHRpbmcgdGhlIGxhc3QgbWFya2VyLiBDbGljayBoYXBwZW5zIG9uIHRoZSBtYXBcbiAgICAgIC8vIGluIDk5JSBvZiBjYXNlcyBpdCdzIGJlY2F1c2UgdGhlIHVzZXIgd2FudHMgdG8gZmluaXNoIHRoZSBwb2x5Z29uLiBTby4uLlxuXG5cbiAgICAgIHJldHVybjtcbiAgICB9IC8vIGlzIHRoaXMgdGhlIGZpcnN0IHBvaW50P1xuXG5cbiAgICB2YXIgZmlyc3QgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCkubGVuZ3RoID09PSAwO1xuXG4gICAgdGhpcy5fbGF5ZXIuYWRkTGF0TG5nKGxhdGxuZyk7XG5cbiAgICB2YXIgbmV3TWFya2VyID0gdGhpcy5fY3JlYXRlTWFya2VyKGxhdGxuZywgZmlyc3QpO1xuXG4gICAgdGhpcy5faGludGxpbmUuc2V0TGF0TG5ncyhbbGF0bG5nLCBsYXRsbmddKTtcblxuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOnZlcnRleGFkZGVkJywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgd29ya2luZ0xheWVyOiB0aGlzLl9sYXllcixcbiAgICAgIG1hcmtlcjogbmV3TWFya2VyLFxuICAgICAgbGF0bG5nOiBsYXRsbmdcbiAgICB9KTtcbiAgfSxcbiAgX2ZpbmlzaFNoYXBlOiBmdW5jdGlvbiBfZmluaXNoU2hhcGUoKSB7XG4gICAgLy8gaWYgc2VsZiBpbnRlcnNlY3Rpb24gaXMgbm90IGFsbG93ZWQsIGRvIG5vdCBmaW5pc2ggdGhlIHNoYXBlIVxuICAgIGlmICghdGhpcy5vcHRpb25zLmFsbG93U2VsZkludGVyc2VjdGlvbiAmJiB0aGlzLl9kb2VzU2VsZkludGVyc2VjdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gZ2V0IGNvb3JkaW5hdGVzLCBjcmVhdGUgdGhlIGxlYWZsZXQgc2hhcGUgYW5kIGFkZCBpdCB0byB0aGUgbWFwXG5cblxuICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG5cbiAgICB2YXIgcG9seWxpbmVMYXllciA9IEwucG9seWxpbmUoY29vcmRzLCB0aGlzLm9wdGlvbnMucGF0aE9wdGlvbnMpLmFkZFRvKHRoaXMuX21hcCk7IC8vIGRpc2FibGUgZHJhd2luZ1xuXG4gICAgdGhpcy5kaXNhYmxlKCk7IC8vIGZpcmUgdGhlIHBtOmNyZWF0ZSBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbGF5ZXJcblxuICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICBsYXllcjogcG9seWxpbmVMYXllclxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgIHRoaXMuX2NsZWFudXBTbmFwcGluZygpO1xuICAgIH1cbiAgfSxcbiAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcpIHtcbiAgICAvLyBjcmVhdGUgdGhlIG5ldyBtYXJrZXJcbiAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKGxhdGxuZywge1xuICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgIGljb246IEwuZGl2SWNvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1pY29uJ1xuICAgICAgfSlcbiAgICB9KTtcbiAgICBtYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTsgLy8gYWRkIGl0IHRvIHRoZSBtYXBcblxuICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTsgLy8gYSBjbGljayBvbiBhbnkgbWFya2VyIGZpbmlzaGVzIHRoaXMgc2hhcGVcblxuXG4gICAgbWFya2VyLm9uKCdjbGljaycsIHRoaXMuX2ZpbmlzaFNoYXBlLCB0aGlzKTtcbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5MaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(0));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Poly = _LPM.default.Line.extend({\n  initialize: function initialize(map) {\n    this._map = map;\n    this._shape = 'Poly';\n    this.toolbarButtonName = 'drawPolygon';\n  },\n  _finishShape: function _finishShape() {\n    // if self intersection is not allowed, do not finish the shape!\n    if (!this.options.allowSelfIntersection && this._doesSelfIntersect) {\n      return;\n    } // get coordinates, create the leaflet shape and add it to the map\n\n\n    var coords = this._layer.getLatLngs();\n\n    var polygonLayer = L.polygon(coords, this.options.pathOptions).addTo(this._map); // disable drawing\n\n    this.disable(); // fire the pm:create event and pass shape and layer\n\n    this._map.fire('pm:create', {\n      shape: this._shape,\n      layer: polygonLayer\n    }); // clean up snapping states\n\n\n    this._cleanupSnapping(); // remove the first vertex from \"other snapping layers\"\n\n\n    this._otherSnapLayers.splice(this._tempSnapLayerIndex, 1);\n\n    delete this._tempSnapLayerIndex;\n  },\n  _createMarker: function _createMarker(latlng, first) {\n    // create the new marker\n    var marker = new L.Marker(latlng, {\n      draggable: false,\n      icon: L.divIcon({\n        className: 'marker-icon'\n      })\n    }); // mark this marker as temporary\n\n    marker._pmTempLayer = true; // add it to the map\n\n    this._layerGroup.addLayer(marker); // if the first marker gets clicked again, finish this shape\n\n\n    if (first) {\n      marker.on('click', this._finishShape, this); // add the first vertex to \"other snapping layers\" so the polygon is easier to finish\n\n      this._tempSnapLayerIndex = this._otherSnapLayers.push(marker) - 1;\n\n      if (this.options.snappable) {\n        this._cleanupSnapping();\n      }\n    }\n\n    return marker;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuUG9seS5qcz8zMDYyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX0xQTSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTC5QTS5EcmF3XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTS5kZWZhdWx0LlBvbHkgPSBfTFBNLmRlZmF1bHQuTGluZS5leHRlbmQoe1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG1hcCkge1xuICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICB0aGlzLl9zaGFwZSA9ICdQb2x5JztcbiAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdQb2x5Z29uJztcbiAgfSxcbiAgX2ZpbmlzaFNoYXBlOiBmdW5jdGlvbiBfZmluaXNoU2hhcGUoKSB7XG4gICAgLy8gaWYgc2VsZiBpbnRlcnNlY3Rpb24gaXMgbm90IGFsbG93ZWQsIGRvIG5vdCBmaW5pc2ggdGhlIHNoYXBlIVxuICAgIGlmICghdGhpcy5vcHRpb25zLmFsbG93U2VsZkludGVyc2VjdGlvbiAmJiB0aGlzLl9kb2VzU2VsZkludGVyc2VjdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gZ2V0IGNvb3JkaW5hdGVzLCBjcmVhdGUgdGhlIGxlYWZsZXQgc2hhcGUgYW5kIGFkZCBpdCB0byB0aGUgbWFwXG5cblxuICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG5cbiAgICB2YXIgcG9seWdvbkxheWVyID0gTC5wb2x5Z29uKGNvb3JkcywgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zKS5hZGRUbyh0aGlzLl9tYXApOyAvLyBkaXNhYmxlIGRyYXdpbmdcblxuICAgIHRoaXMuZGlzYWJsZSgpOyAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06Y3JlYXRlJywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgbGF5ZXI6IHBvbHlnb25MYXllclxuICAgIH0pOyAvLyBjbGVhbiB1cCBzbmFwcGluZyBzdGF0ZXNcblxuXG4gICAgdGhpcy5fY2xlYW51cFNuYXBwaW5nKCk7IC8vIHJlbW92ZSB0aGUgZmlyc3QgdmVydGV4IGZyb20gXCJvdGhlciBzbmFwcGluZyBsYXllcnNcIlxuXG5cbiAgICB0aGlzLl9vdGhlclNuYXBMYXllcnMuc3BsaWNlKHRoaXMuX3RlbXBTbmFwTGF5ZXJJbmRleCwgMSk7XG5cbiAgICBkZWxldGUgdGhpcy5fdGVtcFNuYXBMYXllckluZGV4O1xuICB9LFxuICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZywgZmlyc3QpIHtcbiAgICAvLyBjcmVhdGUgdGhlIG5ldyBtYXJrZXJcbiAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKGxhdGxuZywge1xuICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgIGljb246IEwuZGl2SWNvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1pY29uJ1xuICAgICAgfSlcbiAgICB9KTsgLy8gbWFyayB0aGlzIG1hcmtlciBhcyB0ZW1wb3JhcnlcblxuICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlOyAvLyBhZGQgaXQgdG8gdGhlIG1hcFxuXG4gICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcihtYXJrZXIpOyAvLyBpZiB0aGUgZmlyc3QgbWFya2VyIGdldHMgY2xpY2tlZCBhZ2FpbiwgZmluaXNoIHRoaXMgc2hhcGVcblxuXG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICBtYXJrZXIub24oJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpOyAvLyBhZGQgdGhlIGZpcnN0IHZlcnRleCB0byBcIm90aGVyIHNuYXBwaW5nIGxheWVyc1wiIHNvIHRoZSBwb2x5Z29uIGlzIGVhc2llciB0byBmaW5pc2hcblxuICAgICAgdGhpcy5fdGVtcFNuYXBMYXllckluZGV4ID0gdGhpcy5fb3RoZXJTbmFwTGF5ZXJzLnB1c2gobWFya2VyKSAtIDE7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXBTbmFwcGluZygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXJrZXI7XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LlBvbHkuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(0));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Rectangle = _LPM.default.extend({\n  initialize: function initialize(map) {\n    this._map = map;\n    this._shape = 'Rectangle';\n    this.toolbarButtonName = 'drawRectangle';\n  },\n  enable: function enable(options) {\n    // TODO: Think about if these options could be passed globally for all\n    // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n    L.Util.setOptions(this, options); // enable draw mode\n\n    this._enabled = true; // create a new layergroup\n\n    this._layerGroup = new L.LayerGroup();\n    this._layerGroup._pmTempLayer = true;\n\n    this._layerGroup.addTo(this._map); // the rectangle we want to draw\n\n\n    this._layer = L.rectangle([[0, 0], [0, 0]], this.options.pathOptions);\n    this._layer._pmTempLayer = true; // this is the marker at the origin of the rectangle\n    // this needs to be present, for tracking purposes, but we'll make it invisible if a user doesn't want to see it!\n\n    this._startMarker = L.marker([0, 0], {\n      icon: L.divIcon({\n        className: 'marker-icon rect-start-marker'\n      }),\n      draggable: true,\n      zIndexOffset: 100,\n      opacity: this.options.cursorMarker ? 1 : 0\n    });\n    this._startMarker._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._startMarker); // this is the hintmarker on the mouse cursor\n\n\n    this._hintMarker = L.marker([0, 0], {\n      icon: L.divIcon({\n        className: 'marker-icon cursor-marker'\n      })\n    });\n    this._hintMarker._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._hintMarker); // show the hintmarker if the option is set\n\n\n    if (this.options.cursorMarker) {\n      L.DomUtil.addClass(this._hintMarker._icon, 'visible'); // Add two more matching style markers, if cursor marker is rendered\n\n      this._styleMarkers = [];\n\n      for (var i = 0; i < 2; i += 1) {\n        var styleMarker = L.marker([0, 0], {\n          icon: L.divIcon({\n            className: 'marker-icon rect-style-marker'\n          }),\n          draggable: true,\n          zIndexOffset: 100\n        });\n        styleMarker._pmTempLayer = true;\n\n        this._layerGroup.addLayer(styleMarker);\n\n        this._styleMarkers.push(styleMarker);\n      }\n    } // change map cursor\n\n\n    this._map._container.style.cursor = 'crosshair'; // create a polygon-point on click\n\n    this._map.on('click', this._placeStartingMarkers, this); // sync hint marker with mouse cursor\n\n\n    this._map.on('mousemove', this._syncHintMarker, this); // fire drawstart event\n\n\n    this._map.fire('pm:drawstart', {\n      shape: this._shape,\n      workingLayer: this._layer\n    }); // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true); // an array used in the snapping mixin.\n    // TODO: think about moving this somewhere else?\n\n\n    this._otherSnapLayers = [];\n  },\n  disable: function disable() {\n    // disable drawing mode\n    // cancel, if drawing mode isn't event enabled\n    if (!this._enabled) {\n      return;\n    }\n\n    this._enabled = false; // reset cursor\n\n    this._map._container.style.cursor = 'default'; // unbind listeners\n\n    this._map.off('click', this._finishShape, this);\n\n    this._map.off('click', this._placeStartingMarkers, this);\n\n    this._map.off('mousemove', this._syncHintMarker, this); // remove helping layers\n\n\n    this._map.removeLayer(this._layerGroup); // fire drawend event\n\n\n    this._map.fire('pm:drawend', {\n      shape: this._shape\n    }); // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false); // cleanup snapping\n\n\n    if (this.options.snappable) {\n      this._cleanupSnapping();\n    }\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  toggle: function toggle(options) {\n    if (this.enabled()) {\n      this.disable();\n    } else {\n      this.enable(options);\n    }\n  },\n  _placeStartingMarkers: function _placeStartingMarkers(e) {\n    // assign the coordinate of the click to the hintMarker, that's necessary for\n    // mobile where the marker can't follow a cursor\n    if (!this._hintMarker._snapped) {\n      this._hintMarker.setLatLng(e.latlng);\n    } // get coordinate for new vertex by hintMarker (cursor marker)\n\n\n    var latlng = this._hintMarker.getLatLng(); // show and place start marker\n\n\n    L.DomUtil.addClass(this._startMarker._icon, 'visible');\n\n    this._startMarker.setLatLng(latlng); // if we have the other two visibilty markers, show and place them now\n\n\n    if (this.options.cursorMarker && this._styleMarkers) {\n      this._styleMarkers.forEach(function (styleMarker) {\n        L.DomUtil.addClass(styleMarker._icon, 'visible');\n        styleMarker.setLatLng(latlng);\n      });\n    }\n\n    this._map.off('click', this._placeStartingMarkers, this);\n\n    this._map.on('click', this._finishShape, this);\n\n    this._setRectangleOrigin();\n  },\n  _setRectangleOrigin: function _setRectangleOrigin() {\n    var latlng = this._startMarker.getLatLng();\n\n    if (latlng) {\n      // show it first\n      this._layerGroup.addLayer(this._layer);\n\n      this._layer.setLatLngs([latlng, latlng]);\n\n      this._hintMarker.on('move', this._syncRectangleSize, this);\n    }\n  },\n  _syncHintMarker: function _syncHintMarker(e) {\n    // move the cursor marker\n    this._hintMarker.setLatLng(e.latlng); // if snapping is enabled, do it\n\n\n    if (this.options.snappable) {\n      var fakeDragEvent = e;\n      fakeDragEvent.target = this._hintMarker;\n\n      this._handleSnapping(fakeDragEvent);\n    }\n  },\n  _syncRectangleSize: function _syncRectangleSize() {\n    var _this = this;\n\n    // Create a box using corners A & B (A = Starting Position, B = Current Mouse Position)\n    var A = this._startMarker.getLatLng();\n\n    var B = this._hintMarker.getLatLng();\n\n    this._layer.setBounds([A, B]); // Add matching style markers, if cursor marker is shown\n\n\n    if (this.options.cursorMarker && this._styleMarkers) {\n      var corners = this._findCorners();\n\n      var unmarkedCorners = []; // Find two corners not currently occupied by starting marker and hint marker\n\n      corners.forEach(function (corner) {\n        if (!corner.equals(_this._startMarker.getLatLng()) && !corner.equals(_this._hintMarker.getLatLng())) {\n          unmarkedCorners.push(corner);\n        }\n      }); // Reposition style markers\n\n      unmarkedCorners.forEach(function (unmarkedCorner, index) {\n        _this._styleMarkers[index].setLatLng(unmarkedCorner);\n      });\n    }\n  },\n  _finishShape: function _finishShape() {\n    // create the final rectangle layer, based on opposite corners A & B\n    var A = this._startMarker.getLatLng();\n\n    var B = this._hintMarker.getLatLng();\n\n    var rectangleLayer = L.rectangle([A, B], this.options.pathOptions).addTo(this._map); // disable drawing\n\n    this.disable(); // fire the pm:create event and pass shape and layer\n\n    this._map.fire('pm:create', {\n      shape: this._shape,\n      layer: rectangleLayer\n    });\n  },\n  _findCorners: function _findCorners() {\n    var corners = this._layer.getBounds();\n\n    var northwest = corners.getNorthWest();\n    var northeast = corners.getNorthEast();\n    var southeast = corners.getSouthEast();\n    var southwest = corners.getSouthWest();\n    return [northwest, northeast, southeast, southwest];\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuUmVjdGFuZ2xlLmpzPzVlYjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkRyYXdcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNLmRlZmF1bHQuUmVjdGFuZ2xlID0gX0xQTS5kZWZhdWx0LmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgdGhpcy5fbWFwID0gbWFwO1xuICAgIHRoaXMuX3NoYXBlID0gJ1JlY3RhbmdsZSc7XG4gICAgdGhpcy50b29sYmFyQnV0dG9uTmFtZSA9ICdkcmF3UmVjdGFuZ2xlJztcbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgIC8vIFRPRE86IFRoaW5rIGFib3V0IGlmIHRoZXNlIG9wdGlvbnMgY291bGQgYmUgcGFzc2VkIGdsb2JhbGx5IGZvciBhbGxcbiAgICAvLyBpbnN0YW5jZXMgb2YgTC5QTS5EcmF3LiBTbyBhIGRldiBjb3VsZCBzZXQgZHJhd2luZyBzdHlsZSBvbmUgdGltZSBhcyBzb21lIGtpbmQgb2YgY29uZmlnXG4gICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7IC8vIGVuYWJsZSBkcmF3IG1vZGVcblxuICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlOyAvLyBjcmVhdGUgYSBuZXcgbGF5ZXJncm91cFxuXG4gICAgdGhpcy5fbGF5ZXJHcm91cCA9IG5ldyBMLkxheWVyR3JvdXAoKTtcbiAgICB0aGlzLl9sYXllckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZFRvKHRoaXMuX21hcCk7IC8vIHRoZSByZWN0YW5nbGUgd2Ugd2FudCB0byBkcmF3XG5cblxuICAgIHRoaXMuX2xheWVyID0gTC5yZWN0YW5nbGUoW1swLCAwXSwgWzAsIDBdXSwgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zKTtcbiAgICB0aGlzLl9sYXllci5fcG1UZW1wTGF5ZXIgPSB0cnVlOyAvLyB0aGlzIGlzIHRoZSBtYXJrZXIgYXQgdGhlIG9yaWdpbiBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgLy8gdGhpcyBuZWVkcyB0byBiZSBwcmVzZW50LCBmb3IgdHJhY2tpbmcgcHVycG9zZXMsIGJ1dCB3ZSdsbCBtYWtlIGl0IGludmlzaWJsZSBpZiBhIHVzZXIgZG9lc24ndCB3YW50IHRvIHNlZSBpdCFcblxuICAgIHRoaXMuX3N0YXJ0TWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB7XG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbiByZWN0LXN0YXJ0LW1hcmtlcidcbiAgICAgIH0pLFxuICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgekluZGV4T2Zmc2V0OiAxMDAsXG4gICAgICBvcGFjaXR5OiB0aGlzLm9wdGlvbnMuY3Vyc29yTWFya2VyID8gMSA6IDBcbiAgICB9KTtcbiAgICB0aGlzLl9zdGFydE1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9zdGFydE1hcmtlcik7IC8vIHRoaXMgaXMgdGhlIGhpbnRtYXJrZXIgb24gdGhlIG1vdXNlIGN1cnNvclxuXG5cbiAgICB0aGlzLl9oaW50TWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB7XG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbiBjdXJzb3ItbWFya2VyJ1xuICAgICAgfSlcbiAgICB9KTtcbiAgICB0aGlzLl9oaW50TWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRNYXJrZXIpOyAvLyBzaG93IHRoZSBoaW50bWFya2VyIGlmIHRoZSBvcHRpb24gaXMgc2V0XG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuY3Vyc29yTWFya2VyKSB7XG4gICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5faGludE1hcmtlci5faWNvbiwgJ3Zpc2libGUnKTsgLy8gQWRkIHR3byBtb3JlIG1hdGNoaW5nIHN0eWxlIG1hcmtlcnMsIGlmIGN1cnNvciBtYXJrZXIgaXMgcmVuZGVyZWRcblxuICAgICAgdGhpcy5fc3R5bGVNYXJrZXJzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSArPSAxKSB7XG4gICAgICAgIHZhciBzdHlsZU1hcmtlciA9IEwubWFya2VyKFswLCAwXSwge1xuICAgICAgICAgIGljb246IEwuZGl2SWNvbih7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbiByZWN0LXN0eWxlLW1hcmtlcidcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgekluZGV4T2Zmc2V0OiAxMDBcbiAgICAgICAgfSk7XG4gICAgICAgIHN0eWxlTWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcihzdHlsZU1hcmtlcik7XG5cbiAgICAgICAgdGhpcy5fc3R5bGVNYXJrZXJzLnB1c2goc3R5bGVNYXJrZXIpO1xuICAgICAgfVxuICAgIH0gLy8gY2hhbmdlIG1hcCBjdXJzb3JcblxuXG4gICAgdGhpcy5fbWFwLl9jb250YWluZXIuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7IC8vIGNyZWF0ZSBhIHBvbHlnb24tcG9pbnQgb24gY2xpY2tcblxuICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9wbGFjZVN0YXJ0aW5nTWFya2VycywgdGhpcyk7IC8vIHN5bmMgaGludCBtYXJrZXIgd2l0aCBtb3VzZSBjdXJzb3JcblxuXG4gICAgdGhpcy5fbWFwLm9uKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7IC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG5cblxuICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7XG4gICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICB3b3JraW5nTGF5ZXI6IHRoaXMuX2xheWVyXG4gICAgfSk7IC8vIHRvZ2dsZSB0aGUgZHJhdyBidXR0b24gb2YgdGhlIFRvb2xiYXIgaW4gY2FzZSBkcmF3aW5nIG1vZGUgZ290IGVuYWJsZWQgd2l0aG91dCB0aGUgYnV0dG9uXG5cblxuICAgIHRoaXMuX21hcC5wbS5Ub29sYmFyLnRvZ2dsZUJ1dHRvbih0aGlzLnRvb2xiYXJCdXR0b25OYW1lLCB0cnVlKTsgLy8gYW4gYXJyYXkgdXNlZCBpbiB0aGUgc25hcHBpbmcgbWl4aW4uXG4gICAgLy8gVE9ETzogdGhpbmsgYWJvdXQgbW92aW5nIHRoaXMgc29tZXdoZXJlIGVsc2U/XG5cblxuICAgIHRoaXMuX290aGVyU25hcExheWVycyA9IFtdO1xuICB9LFxuICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIC8vIGRpc2FibGUgZHJhd2luZyBtb2RlXG4gICAgLy8gY2FuY2VsLCBpZiBkcmF3aW5nIG1vZGUgaXNuJ3QgZXZlbnQgZW5hYmxlZFxuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZTsgLy8gcmVzZXQgY3Vyc29yXG5cbiAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7IC8vIHVuYmluZCBsaXN0ZW5lcnNcblxuICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuXG4gICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9wbGFjZVN0YXJ0aW5nTWFya2VycywgdGhpcyk7XG5cbiAgICB0aGlzLl9tYXAub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7IC8vIHJlbW92ZSBoZWxwaW5nIGxheWVyc1xuXG5cbiAgICB0aGlzLl9tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJHcm91cCk7IC8vIGZpcmUgZHJhd2VuZCBldmVudFxuXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06ZHJhd2VuZCcsIHtcbiAgICAgIHNoYXBlOiB0aGlzLl9zaGFwZVxuICAgIH0pOyAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBkaXNhYmxlZCB3aXRob3V0IHRoZSBidXR0b25cblxuXG4gICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIGZhbHNlKTsgLy8gY2xlYW51cCBzbmFwcGluZ1xuXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgdGhpcy5fY2xlYW51cFNuYXBwaW5nKCk7XG4gICAgfVxuICB9LFxuICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZShvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgfVxuICB9LFxuICBfcGxhY2VTdGFydGluZ01hcmtlcnM6IGZ1bmN0aW9uIF9wbGFjZVN0YXJ0aW5nTWFya2VycyhlKSB7XG4gICAgLy8gYXNzaWduIHRoZSBjb29yZGluYXRlIG9mIHRoZSBjbGljayB0byB0aGUgaGludE1hcmtlciwgdGhhdCdzIG5lY2Vzc2FyeSBmb3JcbiAgICAvLyBtb2JpbGUgd2hlcmUgdGhlIG1hcmtlciBjYW4ndCBmb2xsb3cgYSBjdXJzb3JcbiAgICBpZiAoIXRoaXMuX2hpbnRNYXJrZXIuX3NuYXBwZWQpIHtcbiAgICAgIHRoaXMuX2hpbnRNYXJrZXIuc2V0TGF0TG5nKGUubGF0bG5nKTtcbiAgICB9IC8vIGdldCBjb29yZGluYXRlIGZvciBuZXcgdmVydGV4IGJ5IGhpbnRNYXJrZXIgKGN1cnNvciBtYXJrZXIpXG5cblxuICAgIHZhciBsYXRsbmcgPSB0aGlzLl9oaW50TWFya2VyLmdldExhdExuZygpOyAvLyBzaG93IGFuZCBwbGFjZSBzdGFydCBtYXJrZXJcblxuXG4gICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX3N0YXJ0TWFya2VyLl9pY29uLCAndmlzaWJsZScpO1xuXG4gICAgdGhpcy5fc3RhcnRNYXJrZXIuc2V0TGF0TG5nKGxhdGxuZyk7IC8vIGlmIHdlIGhhdmUgdGhlIG90aGVyIHR3byB2aXNpYmlsdHkgbWFya2Vycywgc2hvdyBhbmQgcGxhY2UgdGhlbSBub3dcblxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jdXJzb3JNYXJrZXIgJiYgdGhpcy5fc3R5bGVNYXJrZXJzKSB7XG4gICAgICB0aGlzLl9zdHlsZU1hcmtlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3R5bGVNYXJrZXIpIHtcbiAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHN0eWxlTWFya2VyLl9pY29uLCAndmlzaWJsZScpO1xuICAgICAgICBzdHlsZU1hcmtlci5zZXRMYXRMbmcobGF0bG5nKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fcGxhY2VTdGFydGluZ01hcmtlcnMsIHRoaXMpO1xuXG4gICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIHRoaXMuX2ZpbmlzaFNoYXBlLCB0aGlzKTtcblxuICAgIHRoaXMuX3NldFJlY3RhbmdsZU9yaWdpbigpO1xuICB9LFxuICBfc2V0UmVjdGFuZ2xlT3JpZ2luOiBmdW5jdGlvbiBfc2V0UmVjdGFuZ2xlT3JpZ2luKCkge1xuICAgIHZhciBsYXRsbmcgPSB0aGlzLl9zdGFydE1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgIGlmIChsYXRsbmcpIHtcbiAgICAgIC8vIHNob3cgaXQgZmlyc3RcbiAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5fbGF5ZXIpO1xuXG4gICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKFtsYXRsbmcsIGxhdGxuZ10pO1xuXG4gICAgICB0aGlzLl9oaW50TWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fc3luY1JlY3RhbmdsZVNpemUsIHRoaXMpO1xuICAgIH1cbiAgfSxcbiAgX3N5bmNIaW50TWFya2VyOiBmdW5jdGlvbiBfc3luY0hpbnRNYXJrZXIoZSkge1xuICAgIC8vIG1vdmUgdGhlIGN1cnNvciBtYXJrZXJcbiAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7IC8vIGlmIHNuYXBwaW5nIGlzIGVuYWJsZWQsIGRvIGl0XG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICB2YXIgZmFrZURyYWdFdmVudCA9IGU7XG4gICAgICBmYWtlRHJhZ0V2ZW50LnRhcmdldCA9IHRoaXMuX2hpbnRNYXJrZXI7XG5cbiAgICAgIHRoaXMuX2hhbmRsZVNuYXBwaW5nKGZha2VEcmFnRXZlbnQpO1xuICAgIH1cbiAgfSxcbiAgX3N5bmNSZWN0YW5nbGVTaXplOiBmdW5jdGlvbiBfc3luY1JlY3RhbmdsZVNpemUoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vIENyZWF0ZSBhIGJveCB1c2luZyBjb3JuZXJzIEEgJiBCIChBID0gU3RhcnRpbmcgUG9zaXRpb24sIEIgPSBDdXJyZW50IE1vdXNlIFBvc2l0aW9uKVxuICAgIHZhciBBID0gdGhpcy5fc3RhcnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICB2YXIgQiA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICB0aGlzLl9sYXllci5zZXRCb3VuZHMoW0EsIEJdKTsgLy8gQWRkIG1hdGNoaW5nIHN0eWxlIG1hcmtlcnMsIGlmIGN1cnNvciBtYXJrZXIgaXMgc2hvd25cblxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jdXJzb3JNYXJrZXIgJiYgdGhpcy5fc3R5bGVNYXJrZXJzKSB7XG4gICAgICB2YXIgY29ybmVycyA9IHRoaXMuX2ZpbmRDb3JuZXJzKCk7XG5cbiAgICAgIHZhciB1bm1hcmtlZENvcm5lcnMgPSBbXTsgLy8gRmluZCB0d28gY29ybmVycyBub3QgY3VycmVudGx5IG9jY3VwaWVkIGJ5IHN0YXJ0aW5nIG1hcmtlciBhbmQgaGludCBtYXJrZXJcblxuICAgICAgY29ybmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb3JuZXIpIHtcbiAgICAgICAgaWYgKCFjb3JuZXIuZXF1YWxzKF90aGlzLl9zdGFydE1hcmtlci5nZXRMYXRMbmcoKSkgJiYgIWNvcm5lci5lcXVhbHMoX3RoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCkpKSB7XG4gICAgICAgICAgdW5tYXJrZWRDb3JuZXJzLnB1c2goY29ybmVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIFJlcG9zaXRpb24gc3R5bGUgbWFya2Vyc1xuXG4gICAgICB1bm1hcmtlZENvcm5lcnMuZm9yRWFjaChmdW5jdGlvbiAodW5tYXJrZWRDb3JuZXIsIGluZGV4KSB7XG4gICAgICAgIF90aGlzLl9zdHlsZU1hcmtlcnNbaW5kZXhdLnNldExhdExuZyh1bm1hcmtlZENvcm5lcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIF9maW5pc2hTaGFwZTogZnVuY3Rpb24gX2ZpbmlzaFNoYXBlKCkge1xuICAgIC8vIGNyZWF0ZSB0aGUgZmluYWwgcmVjdGFuZ2xlIGxheWVyLCBiYXNlZCBvbiBvcHBvc2l0ZSBjb3JuZXJzIEEgJiBCXG4gICAgdmFyIEEgPSB0aGlzLl9zdGFydE1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgIHZhciBCID0gdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgIHZhciByZWN0YW5nbGVMYXllciA9IEwucmVjdGFuZ2xlKFtBLCBCXSwgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zKS5hZGRUbyh0aGlzLl9tYXApOyAvLyBkaXNhYmxlIGRyYXdpbmdcblxuICAgIHRoaXMuZGlzYWJsZSgpOyAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06Y3JlYXRlJywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgbGF5ZXI6IHJlY3RhbmdsZUxheWVyXG4gICAgfSk7XG4gIH0sXG4gIF9maW5kQ29ybmVyczogZnVuY3Rpb24gX2ZpbmRDb3JuZXJzKCkge1xuICAgIHZhciBjb3JuZXJzID0gdGhpcy5fbGF5ZXIuZ2V0Qm91bmRzKCk7XG5cbiAgICB2YXIgbm9ydGh3ZXN0ID0gY29ybmVycy5nZXROb3J0aFdlc3QoKTtcbiAgICB2YXIgbm9ydGhlYXN0ID0gY29ybmVycy5nZXROb3J0aEVhc3QoKTtcbiAgICB2YXIgc291dGhlYXN0ID0gY29ybmVycy5nZXRTb3V0aEVhc3QoKTtcbiAgICB2YXIgc291dGh3ZXN0ID0gY29ybmVycy5nZXRTb3V0aFdlc3QoKTtcbiAgICByZXR1cm4gW25vcnRod2VzdCwgbm9ydGhlYXN0LCBzb3V0aGVhc3QsIHNvdXRod2VzdF07XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LlJlY3RhbmdsZS5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(0));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Circle = _LPM.default.extend({\n  initialize: function initialize(map) {\n    this._map = map;\n    this._shape = 'Circle';\n    this.toolbarButtonName = 'drawCircle';\n  },\n  enable: function enable(options) {\n    // TODO: Think about if these options could be passed globally for all\n    // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n    L.Util.setOptions(this, options);\n    this.options.radius = 0; // enable draw mode\n\n    this._enabled = true; // create a new layergroup\n\n    this._layerGroup = new L.LayerGroup();\n    this._layerGroup._pmTempLayer = true;\n\n    this._layerGroup.addTo(this._map); // this is the circle we want to draw\n\n\n    this._layer = L.circle([0, 0], this.options.templineStyle);\n    this._layer._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._layer); // this is the marker in the center of the circle\n\n\n    this._centerMarker = L.marker([0, 0], {\n      icon: L.divIcon({\n        className: 'marker-icon'\n      }),\n      draggable: false,\n      zIndexOffset: 100\n    });\n    this._centerMarker._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._centerMarker); // this is the hintmarker on the mouse cursor\n\n\n    this._hintMarker = L.marker([0, 0], {\n      icon: L.divIcon({\n        className: 'marker-icon cursor-marker'\n      })\n    });\n    this._hintMarker._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._hintMarker); // show the hintmarker if the option is set\n\n\n    if (this.options.cursorMarker) {\n      L.DomUtil.addClass(this._hintMarker._icon, 'visible');\n    } // this is the hintline from the hint marker to the center marker\n\n\n    this._hintline = L.polyline([], this.options.hintlineStyle);\n    this._hintline._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._hintline); // change map cursor\n\n\n    this._map._container.style.cursor = 'crosshair'; // create a polygon-point on click\n\n    this._map.on('click', this._placeCenterMarker, this); // sync hint marker with mouse cursor\n\n\n    this._map.on('mousemove', this._syncHintMarker, this); // fire drawstart event\n\n\n    this._map.fire('pm:drawstart', {\n      shape: this._shape,\n      workingLayer: this._layer\n    }); // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true); // an array used in the snapping mixin.\n    // TODO: think about moving this somewhere else?\n\n\n    this._otherSnapLayers = [];\n  },\n  disable: function disable() {\n    // disable drawing mode\n    // cancel, if drawing mode isn't event enabled\n    if (!this._enabled) {\n      return;\n    }\n\n    this._enabled = false; // reset cursor\n\n    this._map._container.style.cursor = 'default'; // unbind listeners\n\n    this._map.off('click', this._finishShape, this);\n\n    this._map.off('click', this._placeCenterMarker, this);\n\n    this._map.off('mousemove', this._syncHintMarker, this); // remove helping layers\n\n\n    this._map.removeLayer(this._layerGroup); // fire drawend event\n\n\n    this._map.fire('pm:drawend', {\n      shape: this._shape\n    }); // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n\n\n    this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false); // cleanup snapping\n\n\n    if (this.options.snappable) {\n      this._cleanupSnapping();\n    }\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  toggle: function toggle(options) {\n    if (this.enabled()) {\n      this.disable();\n    } else {\n      this.enable(options);\n    }\n  },\n  _syncHintLine: function _syncHintLine() {\n    var latlng = this._centerMarker.getLatLng(); // set coords for hintline from marker to last vertex of drawin polyline\n\n\n    this._hintline.setLatLngs([latlng, this._hintMarker.getLatLng()]);\n  },\n  _syncCircleRadius: function _syncCircleRadius() {\n    var A = this._centerMarker.getLatLng();\n\n    var B = this._hintMarker.getLatLng();\n\n    var distance = A.distanceTo(B);\n\n    this._layer.setRadius(distance);\n  },\n  _syncHintMarker: function _syncHintMarker(e) {\n    // move the cursor marker\n    this._hintMarker.setLatLng(e.latlng); // if snapping is enabled, do it\n\n\n    if (this.options.snappable) {\n      var fakeDragEvent = e;\n      fakeDragEvent.target = this._hintMarker;\n\n      this._handleSnapping(fakeDragEvent);\n    }\n  },\n  _placeCenterMarker: function _placeCenterMarker(e) {\n    // assign the coordinate of the click to the hintMarker, that's necessary for\n    // mobile where the marker can't follow a cursor\n    if (!this._hintMarker._snapped) {\n      this._hintMarker.setLatLng(e.latlng);\n    } // get coordinate for new vertex by hintMarker (cursor marker)\n\n\n    var latlng = this._hintMarker.getLatLng();\n\n    this._centerMarker.setLatLng(latlng);\n\n    this._map.off('click', this._placeCenterMarker, this);\n\n    this._map.on('click', this._finishShape, this);\n\n    this._placeCircleCenter();\n  },\n  _placeCircleCenter: function _placeCircleCenter() {\n    var latlng = this._centerMarker.getLatLng();\n\n    if (latlng) {\n      this._layer.setLatLng(latlng); // sync the hintline with hint marker\n\n\n      this._hintMarker.on('move', this._syncHintLine, this);\n\n      this._hintMarker.on('move', this._syncCircleRadius, this);\n\n      this._layer.fire('pm:centerplaced', {\n        shape: this._shape,\n        workingLayer: this._layer,\n        latlng: latlng\n      });\n    }\n  },\n  _finishShape: function _finishShape() {\n    // calc the radius\n    var center = this._centerMarker.getLatLng();\n\n    var cursor = this._hintMarker.getLatLng();\n\n    var radius = center.distanceTo(cursor); // create the final circle layer\n\n    var circleLayer = L.circle(center, {\n      radius: radius\n    }).addTo(this._map); // disable drawing\n\n    this.disable(); // fire the pm:create event and pass shape and layer\n\n    this._map.fire('pm:create', {\n      shape: this._shape,\n      layer: circleLayer\n    });\n  },\n  _createMarker: function _createMarker(latlng) {\n    // create the new marker\n    var marker = new L.Marker(latlng, {\n      draggable: false,\n      icon: L.divIcon({\n        className: 'marker-icon'\n      })\n    });\n    marker._pmTempLayer = true; // add it to the map\n\n    this._layerGroup.addLayer(marker);\n\n    return marker;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuQ2lyY2xlLmpzPzgxOTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkRyYXdcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNLmRlZmF1bHQuQ2lyY2xlID0gX0xQTS5kZWZhdWx0LmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgdGhpcy5fbWFwID0gbWFwO1xuICAgIHRoaXMuX3NoYXBlID0gJ0NpcmNsZSc7XG4gICAgdGhpcy50b29sYmFyQnV0dG9uTmFtZSA9ICdkcmF3Q2lyY2xlJztcbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgIC8vIFRPRE86IFRoaW5rIGFib3V0IGlmIHRoZXNlIG9wdGlvbnMgY291bGQgYmUgcGFzc2VkIGdsb2JhbGx5IGZvciBhbGxcbiAgICAvLyBpbnN0YW5jZXMgb2YgTC5QTS5EcmF3LiBTbyBhIGRldiBjb3VsZCBzZXQgZHJhd2luZyBzdHlsZSBvbmUgdGltZSBhcyBzb21lIGtpbmQgb2YgY29uZmlnXG4gICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG4gICAgdGhpcy5vcHRpb25zLnJhZGl1cyA9IDA7IC8vIGVuYWJsZSBkcmF3IG1vZGVcblxuICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlOyAvLyBjcmVhdGUgYSBuZXcgbGF5ZXJncm91cFxuXG4gICAgdGhpcy5fbGF5ZXJHcm91cCA9IG5ldyBMLkxheWVyR3JvdXAoKTtcbiAgICB0aGlzLl9sYXllckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZFRvKHRoaXMuX21hcCk7IC8vIHRoaXMgaXMgdGhlIGNpcmNsZSB3ZSB3YW50IHRvIGRyYXdcblxuXG4gICAgdGhpcy5fbGF5ZXIgPSBMLmNpcmNsZShbMCwgMF0sIHRoaXMub3B0aW9ucy50ZW1wbGluZVN0eWxlKTtcbiAgICB0aGlzLl9sYXllci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9sYXllcik7IC8vIHRoaXMgaXMgdGhlIG1hcmtlciBpbiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcblxuXG4gICAgdGhpcy5fY2VudGVyTWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB7XG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbidcbiAgICAgIH0pLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgIHpJbmRleE9mZnNldDogMTAwXG4gICAgfSk7XG4gICAgdGhpcy5fY2VudGVyTWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2NlbnRlck1hcmtlcik7IC8vIHRoaXMgaXMgdGhlIGhpbnRtYXJrZXIgb24gdGhlIG1vdXNlIGN1cnNvclxuXG5cbiAgICB0aGlzLl9oaW50TWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB7XG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbiBjdXJzb3ItbWFya2VyJ1xuICAgICAgfSlcbiAgICB9KTtcbiAgICB0aGlzLl9oaW50TWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRNYXJrZXIpOyAvLyBzaG93IHRoZSBoaW50bWFya2VyIGlmIHRoZSBvcHRpb24gaXMgc2V0XG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuY3Vyc29yTWFya2VyKSB7XG4gICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5faGludE1hcmtlci5faWNvbiwgJ3Zpc2libGUnKTtcbiAgICB9IC8vIHRoaXMgaXMgdGhlIGhpbnRsaW5lIGZyb20gdGhlIGhpbnQgbWFya2VyIHRvIHRoZSBjZW50ZXIgbWFya2VyXG5cblxuICAgIHRoaXMuX2hpbnRsaW5lID0gTC5wb2x5bGluZShbXSwgdGhpcy5vcHRpb25zLmhpbnRsaW5lU3R5bGUpO1xuICAgIHRoaXMuX2hpbnRsaW5lLl9wbVRlbXBMYXllciA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRsaW5lKTsgLy8gY2hhbmdlIG1hcCBjdXJzb3JcblxuXG4gICAgdGhpcy5fbWFwLl9jb250YWluZXIuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7IC8vIGNyZWF0ZSBhIHBvbHlnb24tcG9pbnQgb24gY2xpY2tcblxuICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9wbGFjZUNlbnRlck1hcmtlciwgdGhpcyk7IC8vIHN5bmMgaGludCBtYXJrZXIgd2l0aCBtb3VzZSBjdXJzb3JcblxuXG4gICAgdGhpcy5fbWFwLm9uKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7IC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG5cblxuICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7XG4gICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICB3b3JraW5nTGF5ZXI6IHRoaXMuX2xheWVyXG4gICAgfSk7IC8vIHRvZ2dsZSB0aGUgZHJhdyBidXR0b24gb2YgdGhlIFRvb2xiYXIgaW4gY2FzZSBkcmF3aW5nIG1vZGUgZ290IGVuYWJsZWQgd2l0aG91dCB0aGUgYnV0dG9uXG5cblxuICAgIHRoaXMuX21hcC5wbS5Ub29sYmFyLnRvZ2dsZUJ1dHRvbih0aGlzLnRvb2xiYXJCdXR0b25OYW1lLCB0cnVlKTsgLy8gYW4gYXJyYXkgdXNlZCBpbiB0aGUgc25hcHBpbmcgbWl4aW4uXG4gICAgLy8gVE9ETzogdGhpbmsgYWJvdXQgbW92aW5nIHRoaXMgc29tZXdoZXJlIGVsc2U/XG5cblxuICAgIHRoaXMuX290aGVyU25hcExheWVycyA9IFtdO1xuICB9LFxuICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIC8vIGRpc2FibGUgZHJhd2luZyBtb2RlXG4gICAgLy8gY2FuY2VsLCBpZiBkcmF3aW5nIG1vZGUgaXNuJ3QgZXZlbnQgZW5hYmxlZFxuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZTsgLy8gcmVzZXQgY3Vyc29yXG5cbiAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7IC8vIHVuYmluZCBsaXN0ZW5lcnNcblxuICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuXG4gICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9wbGFjZUNlbnRlck1hcmtlciwgdGhpcyk7XG5cbiAgICB0aGlzLl9tYXAub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7IC8vIHJlbW92ZSBoZWxwaW5nIGxheWVyc1xuXG5cbiAgICB0aGlzLl9tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJHcm91cCk7IC8vIGZpcmUgZHJhd2VuZCBldmVudFxuXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06ZHJhd2VuZCcsIHtcbiAgICAgIHNoYXBlOiB0aGlzLl9zaGFwZVxuICAgIH0pOyAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBkaXNhYmxlZCB3aXRob3V0IHRoZSBidXR0b25cblxuXG4gICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIGZhbHNlKTsgLy8gY2xlYW51cCBzbmFwcGluZ1xuXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgdGhpcy5fY2xlYW51cFNuYXBwaW5nKCk7XG4gICAgfVxuICB9LFxuICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZShvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgfVxuICB9LFxuICBfc3luY0hpbnRMaW5lOiBmdW5jdGlvbiBfc3luY0hpbnRMaW5lKCkge1xuICAgIHZhciBsYXRsbmcgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7IC8vIHNldCBjb29yZHMgZm9yIGhpbnRsaW5lIGZyb20gbWFya2VyIHRvIGxhc3QgdmVydGV4IG9mIGRyYXdpbiBwb2x5bGluZVxuXG5cbiAgICB0aGlzLl9oaW50bGluZS5zZXRMYXRMbmdzKFtsYXRsbmcsIHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCldKTtcbiAgfSxcbiAgX3N5bmNDaXJjbGVSYWRpdXM6IGZ1bmN0aW9uIF9zeW5jQ2lyY2xlUmFkaXVzKCkge1xuICAgIHZhciBBID0gdGhpcy5fY2VudGVyTWFya2VyLmdldExhdExuZygpO1xuXG4gICAgdmFyIEIgPSB0aGlzLl9oaW50TWFya2VyLmdldExhdExuZygpO1xuXG4gICAgdmFyIGRpc3RhbmNlID0gQS5kaXN0YW5jZVRvKEIpO1xuXG4gICAgdGhpcy5fbGF5ZXIuc2V0UmFkaXVzKGRpc3RhbmNlKTtcbiAgfSxcbiAgX3N5bmNIaW50TWFya2VyOiBmdW5jdGlvbiBfc3luY0hpbnRNYXJrZXIoZSkge1xuICAgIC8vIG1vdmUgdGhlIGN1cnNvciBtYXJrZXJcbiAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7IC8vIGlmIHNuYXBwaW5nIGlzIGVuYWJsZWQsIGRvIGl0XG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICB2YXIgZmFrZURyYWdFdmVudCA9IGU7XG4gICAgICBmYWtlRHJhZ0V2ZW50LnRhcmdldCA9IHRoaXMuX2hpbnRNYXJrZXI7XG5cbiAgICAgIHRoaXMuX2hhbmRsZVNuYXBwaW5nKGZha2VEcmFnRXZlbnQpO1xuICAgIH1cbiAgfSxcbiAgX3BsYWNlQ2VudGVyTWFya2VyOiBmdW5jdGlvbiBfcGxhY2VDZW50ZXJNYXJrZXIoZSkge1xuICAgIC8vIGFzc2lnbiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgY2xpY2sgdG8gdGhlIGhpbnRNYXJrZXIsIHRoYXQncyBuZWNlc3NhcnkgZm9yXG4gICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG4gICAgaWYgKCF0aGlzLl9oaW50TWFya2VyLl9zbmFwcGVkKSB7XG4gICAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7XG4gICAgfSAvLyBnZXQgY29vcmRpbmF0ZSBmb3IgbmV3IHZlcnRleCBieSBoaW50TWFya2VyIChjdXJzb3IgbWFya2VyKVxuXG5cbiAgICB2YXIgbGF0bG5nID0gdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgIHRoaXMuX2NlbnRlck1hcmtlci5zZXRMYXRMbmcobGF0bG5nKTtcblxuICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fcGxhY2VDZW50ZXJNYXJrZXIsIHRoaXMpO1xuXG4gICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIHRoaXMuX2ZpbmlzaFNoYXBlLCB0aGlzKTtcblxuICAgIHRoaXMuX3BsYWNlQ2lyY2xlQ2VudGVyKCk7XG4gIH0sXG4gIF9wbGFjZUNpcmNsZUNlbnRlcjogZnVuY3Rpb24gX3BsYWNlQ2lyY2xlQ2VudGVyKCkge1xuICAgIHZhciBsYXRsbmcgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICBpZiAobGF0bG5nKSB7XG4gICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmcobGF0bG5nKTsgLy8gc3luYyB0aGUgaGludGxpbmUgd2l0aCBoaW50IG1hcmtlclxuXG5cbiAgICAgIHRoaXMuX2hpbnRNYXJrZXIub24oJ21vdmUnLCB0aGlzLl9zeW5jSGludExpbmUsIHRoaXMpO1xuXG4gICAgICB0aGlzLl9oaW50TWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fc3luY0NpcmNsZVJhZGl1cywgdGhpcyk7XG5cbiAgICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOmNlbnRlcnBsYWNlZCcsIHtcbiAgICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgICB3b3JraW5nTGF5ZXI6IHRoaXMuX2xheWVyLFxuICAgICAgICBsYXRsbmc6IGxhdGxuZ1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBfZmluaXNoU2hhcGU6IGZ1bmN0aW9uIF9maW5pc2hTaGFwZSgpIHtcbiAgICAvLyBjYWxjIHRoZSByYWRpdXNcbiAgICB2YXIgY2VudGVyID0gdGhpcy5fY2VudGVyTWFya2VyLmdldExhdExuZygpO1xuXG4gICAgdmFyIGN1cnNvciA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICB2YXIgcmFkaXVzID0gY2VudGVyLmRpc3RhbmNlVG8oY3Vyc29yKTsgLy8gY3JlYXRlIHRoZSBmaW5hbCBjaXJjbGUgbGF5ZXJcblxuICAgIHZhciBjaXJjbGVMYXllciA9IEwuY2lyY2xlKGNlbnRlciwge1xuICAgICAgcmFkaXVzOiByYWRpdXNcbiAgICB9KS5hZGRUbyh0aGlzLl9tYXApOyAvLyBkaXNhYmxlIGRyYXdpbmdcblxuICAgIHRoaXMuZGlzYWJsZSgpOyAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG5cbiAgICB0aGlzLl9tYXAuZmlyZSgncG06Y3JlYXRlJywge1xuICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgbGF5ZXI6IGNpcmNsZUxheWVyXG4gICAgfSk7XG4gIH0sXG4gIF9jcmVhdGVNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVNYXJrZXIobGF0bG5nKSB7XG4gICAgLy8gY3JlYXRlIHRoZSBuZXcgbWFya2VyXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbidcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgbWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7IC8vIGFkZCBpdCB0byB0aGUgbWFwXG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5DaXJjbGUuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _intersect = _interopRequireDefault(__webpack_require__(21));\n\nvar _difference = _interopRequireDefault(__webpack_require__(24));\n\nvar _LPM = _interopRequireDefault(__webpack_require__(0));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Cut = _LPM.default.Poly.extend({\n  initialize: function initialize(map) {\n    this._map = map;\n    this._shape = 'Cut';\n    this.toolbarButtonName = 'cutPolygon';\n  },\n  _cut: function _cut(layer) {\n    var _this = this;\n\n    var all = this._map._layers; // find all layers that intersect with `layer`, the just drawn cutting layer\n\n    var layers = Object.keys(all) // convert object to array\n    .map(function (l) {\n      return all[l];\n    }) // only layers handled by leaflet.pm\n    .filter(function (l) {\n      return l.pm;\n    }) // only polygons\n    .filter(function (l) {\n      return l instanceof L.Polygon;\n    }) // exclude the drawn one\n    .filter(function (l) {\n      return l !== layer;\n    }) // only layers with intersections\n    .filter(function (l) {\n      try {\n        return !!(0, _intersect.default)(layer.toGeoJSON(), l.toGeoJSON());\n      } catch (e) {\n        console.error('You cant cut polygons with self-intersections');\n        return false;\n      }\n    }); // the resulting layers after the cut\n\n    var resultingLayers = []; // loop through all layers that intersect with the drawn (cutting) layer\n\n    layers.forEach(function (l) {\n      // find layer difference\n      var diff = (0, _difference.default)(l.toGeoJSON(), layer.toGeoJSON()); // if result is a multipolygon, split it into regular polygons\n      // TODO: remove as soon as multipolygons are supported\n\n      if (diff.geometry.type === 'MultiPolygon') {\n        var geoJSONs = diff.geometry.coordinates.reduce(function (arr, coords) {\n          arr.push({\n            type: 'Polygon',\n            coordinates: coords\n          });\n          return arr;\n        }, []); // add new layers to map\n\n        geoJSONs.forEach(function (g) {\n          var newL = L.geoJSON(g, l.options);\n          resultingLayers.push(newL);\n          newL.addTo(_this._map); // give the new layer the original options\n\n          newL.pm.enable(_this.options);\n          newL.pm.disable();\n        });\n      } else {\n        // add new layer to map\n        var newL = L.geoJSON(diff, l.options).addTo(_this._map);\n        resultingLayers.push(newL);\n        newL.addTo(_this._map); // give the new layer the original options\n\n        newL.pm.enable(_this.options);\n        newL.pm.disable();\n      } // fire pm:cut on the cutted layer\n\n\n      l.fire('pm:cut', {\n        shape: _this._shape,\n        layer: l,\n        resultingLayers: resultingLayers\n      }); // fire pm:cut on the map for each cutted layer\n\n      _this._map.fire('pm:cut', {\n        shape: _this._shape,\n        cuttedLayer: l,\n        resultingLayers: resultingLayers\n      }); // add templayer prop so pm:remove isn't fired\n\n\n      l._pmTempLayer = true;\n      layer._pmTempLayer = true; // remove old layer and cutting layer\n\n      l.remove();\n      layer.remove();\n    });\n  },\n  _finishShape: function _finishShape() {\n    var coords = this._layer.getLatLngs();\n\n    var polygonLayer = L.polygon(coords, this.options.pathOptions);\n\n    this._cut(polygonLayer); // disable drawing\n\n\n    this.disable(); // clean up snapping states\n\n    this._cleanupSnapping(); // remove the first vertex from \"other snapping layers\"\n\n\n    this._otherSnapLayers.splice(this._tempSnapLayerIndex, 1);\n\n    delete this._tempSnapLayerIndex;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuQ3V0LmpzPzFiMzUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJzZWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQHR1cmYvaW50ZXJzZWN0XCIpKTtcblxudmFyIF9kaWZmZXJlbmNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQHR1cmYvZGlmZmVyZW5jZVwiKSk7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkRyYXdcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNLmRlZmF1bHQuQ3V0ID0gX0xQTS5kZWZhdWx0LlBvbHkuZXh0ZW5kKHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgdGhpcy5fc2hhcGUgPSAnQ3V0JztcbiAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2N1dFBvbHlnb24nO1xuICB9LFxuICBfY3V0OiBmdW5jdGlvbiBfY3V0KGxheWVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBhbGwgPSB0aGlzLl9tYXAuX2xheWVyczsgLy8gZmluZCBhbGwgbGF5ZXJzIHRoYXQgaW50ZXJzZWN0IHdpdGggYGxheWVyYCwgdGhlIGp1c3QgZHJhd24gY3V0dGluZyBsYXllclxuXG4gICAgdmFyIGxheWVycyA9IE9iamVjdC5rZXlzKGFsbCkgLy8gY29udmVydCBvYmplY3QgdG8gYXJyYXlcbiAgICAubWFwKGZ1bmN0aW9uIChsKSB7XG4gICAgICByZXR1cm4gYWxsW2xdO1xuICAgIH0pIC8vIG9ubHkgbGF5ZXJzIGhhbmRsZWQgYnkgbGVhZmxldC5wbVxuICAgIC5maWx0ZXIoZnVuY3Rpb24gKGwpIHtcbiAgICAgIHJldHVybiBsLnBtO1xuICAgIH0pIC8vIG9ubHkgcG9seWdvbnNcbiAgICAuZmlsdGVyKGZ1bmN0aW9uIChsKSB7XG4gICAgICByZXR1cm4gbCBpbnN0YW5jZW9mIEwuUG9seWdvbjtcbiAgICB9KSAvLyBleGNsdWRlIHRoZSBkcmF3biBvbmVcbiAgICAuZmlsdGVyKGZ1bmN0aW9uIChsKSB7XG4gICAgICByZXR1cm4gbCAhPT0gbGF5ZXI7XG4gICAgfSkgLy8gb25seSBsYXllcnMgd2l0aCBpbnRlcnNlY3Rpb25zXG4gICAgLmZpbHRlcihmdW5jdGlvbiAobCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuICEhKDAsIF9pbnRlcnNlY3QuZGVmYXVsdCkobGF5ZXIudG9HZW9KU09OKCksIGwudG9HZW9KU09OKCkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdZb3UgY2FudCBjdXQgcG9seWdvbnMgd2l0aCBzZWxmLWludGVyc2VjdGlvbnMnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pOyAvLyB0aGUgcmVzdWx0aW5nIGxheWVycyBhZnRlciB0aGUgY3V0XG5cbiAgICB2YXIgcmVzdWx0aW5nTGF5ZXJzID0gW107IC8vIGxvb3AgdGhyb3VnaCBhbGwgbGF5ZXJzIHRoYXQgaW50ZXJzZWN0IHdpdGggdGhlIGRyYXduIChjdXR0aW5nKSBsYXllclxuXG4gICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgIC8vIGZpbmQgbGF5ZXIgZGlmZmVyZW5jZVxuICAgICAgdmFyIGRpZmYgPSAoMCwgX2RpZmZlcmVuY2UuZGVmYXVsdCkobC50b0dlb0pTT04oKSwgbGF5ZXIudG9HZW9KU09OKCkpOyAvLyBpZiByZXN1bHQgaXMgYSBtdWx0aXBvbHlnb24sIHNwbGl0IGl0IGludG8gcmVndWxhciBwb2x5Z29uc1xuICAgICAgLy8gVE9ETzogcmVtb3ZlIGFzIHNvb24gYXMgbXVsdGlwb2x5Z29ucyBhcmUgc3VwcG9ydGVkXG5cbiAgICAgIGlmIChkaWZmLmdlb21ldHJ5LnR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSB7XG4gICAgICAgIHZhciBnZW9KU09OcyA9IGRpZmYuZ2VvbWV0cnkuY29vcmRpbmF0ZXMucmVkdWNlKGZ1bmN0aW9uIChhcnIsIGNvb3Jkcykge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9LCBbXSk7IC8vIGFkZCBuZXcgbGF5ZXJzIHRvIG1hcFxuXG4gICAgICAgIGdlb0pTT05zLmZvckVhY2goZnVuY3Rpb24gKGcpIHtcbiAgICAgICAgICB2YXIgbmV3TCA9IEwuZ2VvSlNPTihnLCBsLm9wdGlvbnMpO1xuICAgICAgICAgIHJlc3VsdGluZ0xheWVycy5wdXNoKG5ld0wpO1xuICAgICAgICAgIG5ld0wuYWRkVG8oX3RoaXMuX21hcCk7IC8vIGdpdmUgdGhlIG5ldyBsYXllciB0aGUgb3JpZ2luYWwgb3B0aW9uc1xuXG4gICAgICAgICAgbmV3TC5wbS5lbmFibGUoX3RoaXMub3B0aW9ucyk7XG4gICAgICAgICAgbmV3TC5wbS5kaXNhYmxlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWRkIG5ldyBsYXllciB0byBtYXBcbiAgICAgICAgdmFyIG5ld0wgPSBMLmdlb0pTT04oZGlmZiwgbC5vcHRpb25zKS5hZGRUbyhfdGhpcy5fbWFwKTtcbiAgICAgICAgcmVzdWx0aW5nTGF5ZXJzLnB1c2gobmV3TCk7XG4gICAgICAgIG5ld0wuYWRkVG8oX3RoaXMuX21hcCk7IC8vIGdpdmUgdGhlIG5ldyBsYXllciB0aGUgb3JpZ2luYWwgb3B0aW9uc1xuXG4gICAgICAgIG5ld0wucG0uZW5hYmxlKF90aGlzLm9wdGlvbnMpO1xuICAgICAgICBuZXdMLnBtLmRpc2FibGUoKTtcbiAgICAgIH0gLy8gZmlyZSBwbTpjdXQgb24gdGhlIGN1dHRlZCBsYXllclxuXG5cbiAgICAgIGwuZmlyZSgncG06Y3V0Jywge1xuICAgICAgICBzaGFwZTogX3RoaXMuX3NoYXBlLFxuICAgICAgICBsYXllcjogbCxcbiAgICAgICAgcmVzdWx0aW5nTGF5ZXJzOiByZXN1bHRpbmdMYXllcnNcbiAgICAgIH0pOyAvLyBmaXJlIHBtOmN1dCBvbiB0aGUgbWFwIGZvciBlYWNoIGN1dHRlZCBsYXllclxuXG4gICAgICBfdGhpcy5fbWFwLmZpcmUoJ3BtOmN1dCcsIHtcbiAgICAgICAgc2hhcGU6IF90aGlzLl9zaGFwZSxcbiAgICAgICAgY3V0dGVkTGF5ZXI6IGwsXG4gICAgICAgIHJlc3VsdGluZ0xheWVyczogcmVzdWx0aW5nTGF5ZXJzXG4gICAgICB9KTsgLy8gYWRkIHRlbXBsYXllciBwcm9wIHNvIHBtOnJlbW92ZSBpc24ndCBmaXJlZFxuXG5cbiAgICAgIGwuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgIGxheWVyLl9wbVRlbXBMYXllciA9IHRydWU7IC8vIHJlbW92ZSBvbGQgbGF5ZXIgYW5kIGN1dHRpbmcgbGF5ZXJcblxuICAgICAgbC5yZW1vdmUoKTtcbiAgICAgIGxheWVyLnJlbW92ZSgpO1xuICAgIH0pO1xuICB9LFxuICBfZmluaXNoU2hhcGU6IGZ1bmN0aW9uIF9maW5pc2hTaGFwZSgpIHtcbiAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpO1xuXG4gICAgdmFyIHBvbHlnb25MYXllciA9IEwucG9seWdvbihjb29yZHMsIHRoaXMub3B0aW9ucy5wYXRoT3B0aW9ucyk7XG5cbiAgICB0aGlzLl9jdXQocG9seWdvbkxheWVyKTsgLy8gZGlzYWJsZSBkcmF3aW5nXG5cblxuICAgIHRoaXMuZGlzYWJsZSgpOyAvLyBjbGVhbiB1cCBzbmFwcGluZyBzdGF0ZXNcblxuICAgIHRoaXMuX2NsZWFudXBTbmFwcGluZygpOyAvLyByZW1vdmUgdGhlIGZpcnN0IHZlcnRleCBmcm9tIFwib3RoZXIgc25hcHBpbmcgbGF5ZXJzXCJcblxuXG4gICAgdGhpcy5fb3RoZXJTbmFwTGF5ZXJzLnNwbGljZSh0aGlzLl90ZW1wU25hcExheWVySW5kZXgsIDEpO1xuXG4gICAgZGVsZXRlIHRoaXMuX3RlbXBTbmFwTGF5ZXJJbmRleDtcbiAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuQ3V0LmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_turf_jsts__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_turf_jsts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_turf_jsts__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__turf_truncate__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__turf_invariant__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__turf_helpers__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__turf_clean_coords__ = __webpack_require__(23);\n\n\n\n\n\n\n// depend on jsts for now http://bjornharrtell.github.io/jsts/\n/**\n * Takes two {@link Polygon|polygons} and finds their intersection. If they share a border, returns the border; if they don't intersect, returns undefined.\n *\n * @name intersect\n * @param {Feature<Polygon>} poly1 the first polygon\n * @param {Feature<Polygon>} poly2 the second polygon\n * @returns {Feature|null} returns a feature representing the point(s) they share (in case of a {@link Point}  or {@link MultiPoint}), the borders they share (in case of a {@link LineString} or a {@link MultiLineString}), the area they share (in case of {@link Polygon} or {@link MultiPolygon}). If they do not share any point, returns `null`.\n * @example\n * var poly1 = turf.polygon([[\n *   [-122.801742, 45.48565],\n *   [-122.801742, 45.60491],\n *   [-122.584762, 45.60491],\n *   [-122.584762, 45.48565],\n *   [-122.801742, 45.48565]\n * ]]);\n *\n * var poly2 = turf.polygon([[\n *   [-122.520217, 45.535693],\n *   [-122.64038, 45.553967],\n *   [-122.720031, 45.526554],\n *   [-122.669906, 45.507309],\n *   [-122.723464, 45.446643],\n *   [-122.532577, 45.408574],\n *   [-122.487258, 45.477466],\n *   [-122.520217, 45.535693]\n * ]]);\n *\n * var intersection = turf.intersect(poly1, poly2);\n *\n * //addToMap\n * var addToMap = [poly1, poly2, intersection];\n */\nfunction intersect(poly1, poly2) {\n    var geom1 = Object(__WEBPACK_IMPORTED_MODULE_2__turf_invariant__[\"b\" /* getGeom */])(poly1);\n    var geom2 = Object(__WEBPACK_IMPORTED_MODULE_2__turf_invariant__[\"b\" /* getGeom */])(poly2);\n\n    // Return null if geometry is too narrow in coordinate precision\n    // fixes topology errors with JSTS\n    // https://github.com/Turfjs/turf/issues/463\n    // https://github.com/Turfjs/turf/pull/1004\n    if (Object(__WEBPACK_IMPORTED_MODULE_4__turf_clean_coords__[\"a\" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_1__turf_truncate__[\"a\" /* default */])(geom2, {precision: 4})).coordinates[0].length < 4) return null;\n    if (Object(__WEBPACK_IMPORTED_MODULE_4__turf_clean_coords__[\"a\" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_1__turf_truncate__[\"a\" /* default */])(geom1, {precision: 4})).coordinates[0].length < 4) return null;\n\n    var reader = new __WEBPACK_IMPORTED_MODULE_0_turf_jsts__[\"GeoJSONReader\"]();\n    var a = reader.read(Object(__WEBPACK_IMPORTED_MODULE_1__turf_truncate__[\"a\" /* default */])(geom1));\n    var b = reader.read(Object(__WEBPACK_IMPORTED_MODULE_1__turf_truncate__[\"a\" /* default */])(geom2));\n    var intersection = __WEBPACK_IMPORTED_MODULE_0_turf_jsts__[\"OverlayOp\"].intersection(a, b);\n\n    // https://github.com/Turfjs/turf/issues/951\n    if (intersection.isEmpty()) return null;\n\n    var writer = new __WEBPACK_IMPORTED_MODULE_0_turf_jsts__[\"GeoJSONWriter\"]();\n    var geom = writer.write(intersection);\n    return Object(__WEBPACK_IMPORTED_MODULE_3__turf_helpers__[\"a\" /* feature */])(geom);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (intersect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvaW50ZXJzZWN0L21haW4uZXMuanM/MDM5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZW9KU09OUmVhZGVyLCBHZW9KU09OV3JpdGVyLCBPdmVybGF5T3AgfSBmcm9tICd0dXJmLWpzdHMnO1xuaW1wb3J0IHRydW5jYXRlIGZyb20gJ0B0dXJmL3RydW5jYXRlJztcbmltcG9ydCB7IGdldEdlb20gfSBmcm9tICdAdHVyZi9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgZmVhdHVyZSB9IGZyb20gJ0B0dXJmL2hlbHBlcnMnO1xuaW1wb3J0IGNsZWFuQ29vcmRzIGZyb20gJ0B0dXJmL2NsZWFuLWNvb3Jkcyc7XG5cbi8vIGRlcGVuZCBvbiBqc3RzIGZvciBub3cgaHR0cDovL2Jqb3JuaGFycnRlbGwuZ2l0aHViLmlvL2pzdHMvXG4vKipcbiAqIFRha2VzIHR3byB7QGxpbmsgUG9seWdvbnxwb2x5Z29uc30gYW5kIGZpbmRzIHRoZWlyIGludGVyc2VjdGlvbi4gSWYgdGhleSBzaGFyZSBhIGJvcmRlciwgcmV0dXJucyB0aGUgYm9yZGVyOyBpZiB0aGV5IGRvbid0IGludGVyc2VjdCwgcmV0dXJucyB1bmRlZmluZWQuXG4gKlxuICogQG5hbWUgaW50ZXJzZWN0XG4gKiBAcGFyYW0ge0ZlYXR1cmU8UG9seWdvbj59IHBvbHkxIHRoZSBmaXJzdCBwb2x5Z29uXG4gKiBAcGFyYW0ge0ZlYXR1cmU8UG9seWdvbj59IHBvbHkyIHRoZSBzZWNvbmQgcG9seWdvblxuICogQHJldHVybnMge0ZlYXR1cmV8bnVsbH0gcmV0dXJucyBhIGZlYXR1cmUgcmVwcmVzZW50aW5nIHRoZSBwb2ludChzKSB0aGV5IHNoYXJlIChpbiBjYXNlIG9mIGEge0BsaW5rIFBvaW50fSAgb3Ige0BsaW5rIE11bHRpUG9pbnR9KSwgdGhlIGJvcmRlcnMgdGhleSBzaGFyZSAoaW4gY2FzZSBvZiBhIHtAbGluayBMaW5lU3RyaW5nfSBvciBhIHtAbGluayBNdWx0aUxpbmVTdHJpbmd9KSwgdGhlIGFyZWEgdGhleSBzaGFyZSAoaW4gY2FzZSBvZiB7QGxpbmsgUG9seWdvbn0gb3Ige0BsaW5rIE11bHRpUG9seWdvbn0pLiBJZiB0aGV5IGRvIG5vdCBzaGFyZSBhbnkgcG9pbnQsIHJldHVybnMgYG51bGxgLlxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5MSA9IHR1cmYucG9seWdvbihbW1xuICogICBbLTEyMi44MDE3NDIsIDQ1LjQ4NTY1XSxcbiAqICAgWy0xMjIuODAxNzQyLCA0NS42MDQ5MV0sXG4gKiAgIFstMTIyLjU4NDc2MiwgNDUuNjA0OTFdLFxuICogICBbLTEyMi41ODQ3NjIsIDQ1LjQ4NTY1XSxcbiAqICAgWy0xMjIuODAxNzQyLCA0NS40ODU2NV1cbiAqIF1dKTtcbiAqXG4gKiB2YXIgcG9seTIgPSB0dXJmLnBvbHlnb24oW1tcbiAqICAgWy0xMjIuNTIwMjE3LCA0NS41MzU2OTNdLFxuICogICBbLTEyMi42NDAzOCwgNDUuNTUzOTY3XSxcbiAqICAgWy0xMjIuNzIwMDMxLCA0NS41MjY1NTRdLFxuICogICBbLTEyMi42Njk5MDYsIDQ1LjUwNzMwOV0sXG4gKiAgIFstMTIyLjcyMzQ2NCwgNDUuNDQ2NjQzXSxcbiAqICAgWy0xMjIuNTMyNTc3LCA0NS40MDg1NzRdLFxuICogICBbLTEyMi40ODcyNTgsIDQ1LjQ3NzQ2Nl0sXG4gKiAgIFstMTIyLjUyMDIxNywgNDUuNTM1NjkzXVxuICogXV0pO1xuICpcbiAqIHZhciBpbnRlcnNlY3Rpb24gPSB0dXJmLmludGVyc2VjdChwb2x5MSwgcG9seTIpO1xuICpcbiAqIC8vYWRkVG9NYXBcbiAqIHZhciBhZGRUb01hcCA9IFtwb2x5MSwgcG9seTIsIGludGVyc2VjdGlvbl07XG4gKi9cbmZ1bmN0aW9uIGludGVyc2VjdChwb2x5MSwgcG9seTIpIHtcbiAgICB2YXIgZ2VvbTEgPSBnZXRHZW9tKHBvbHkxKTtcbiAgICB2YXIgZ2VvbTIgPSBnZXRHZW9tKHBvbHkyKTtcblxuICAgIC8vIFJldHVybiBudWxsIGlmIGdlb21ldHJ5IGlzIHRvbyBuYXJyb3cgaW4gY29vcmRpbmF0ZSBwcmVjaXNpb25cbiAgICAvLyBmaXhlcyB0b3BvbG9neSBlcnJvcnMgd2l0aCBKU1RTXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1R1cmZqcy90dXJmL2lzc3Vlcy80NjNcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vVHVyZmpzL3R1cmYvcHVsbC8xMDA0XG4gICAgaWYgKGNsZWFuQ29vcmRzKHRydW5jYXRlKGdlb20yLCB7cHJlY2lzaW9uOiA0fSkpLmNvb3JkaW5hdGVzWzBdLmxlbmd0aCA8IDQpIHJldHVybiBudWxsO1xuICAgIGlmIChjbGVhbkNvb3Jkcyh0cnVuY2F0ZShnZW9tMSwge3ByZWNpc2lvbjogNH0pKS5jb29yZGluYXRlc1swXS5sZW5ndGggPCA0KSByZXR1cm4gbnVsbDtcblxuICAgIHZhciByZWFkZXIgPSBuZXcgR2VvSlNPTlJlYWRlcigpO1xuICAgIHZhciBhID0gcmVhZGVyLnJlYWQodHJ1bmNhdGUoZ2VvbTEpKTtcbiAgICB2YXIgYiA9IHJlYWRlci5yZWFkKHRydW5jYXRlKGdlb20yKSk7XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IE92ZXJsYXlPcC5pbnRlcnNlY3Rpb24oYSwgYik7XG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vVHVyZmpzL3R1cmYvaXNzdWVzLzk1MVxuICAgIGlmIChpbnRlcnNlY3Rpb24uaXNFbXB0eSgpKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciB3cml0ZXIgPSBuZXcgR2VvSlNPTldyaXRlcigpO1xuICAgIHZhciBnZW9tID0gd3JpdGVyLndyaXRlKGludGVyc2VjdGlvbik7XG4gICAgcmV0dXJuIGZlYXR1cmUoZ2VvbSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGludGVyc2VjdDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0B0dXJmL2ludGVyc2VjdC9tYWluLmVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n");

/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__turf_meta__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__turf_helpers__ = __webpack_require__(1);\n\n\n\n/**\n * Takes a GeoJSON Feature or FeatureCollection and truncates the precision of the geometry.\n *\n * @name truncate\n * @param {GeoJSON} geojson any GeoJSON Feature, FeatureCollection, Geometry or GeometryCollection.\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.precision=6] coordinate decimal precision\n * @param {number} [options.coordinates=3] maximum number of coordinates (primarly used to remove z coordinates)\n * @param {boolean} [options.mutate=false] allows GeoJSON input to be mutated (significant performance increase if true)\n * @returns {GeoJSON} layer with truncated geometry\n * @example\n * var point = turf.point([\n *     70.46923055566859,\n *     58.11088890802906,\n *     1508\n * ]);\n * var options = {precision: 3, coordinates: 2};\n * var truncated = turf.truncate(point, options);\n * //=truncated.geometry.coordinates => [70.469, 58.111]\n *\n * //addToMap\n * var addToMap = [truncated];\n */\nfunction truncate(geojson, options) {\n    // Optional parameters\n    options = options || {};\n    if (!Object(__WEBPACK_IMPORTED_MODULE_1__turf_helpers__[\"c\" /* isObject */])(options)) throw new Error('options is invalid');\n    var precision = options.precision;\n    var coordinates = options.coordinates;\n    var mutate = options.mutate;\n\n    // default params\n    precision = (precision === undefined || precision === null || isNaN(precision)) ? 6 : precision;\n    coordinates = (coordinates === undefined || coordinates === null || isNaN(coordinates)) ? 3 : coordinates;\n\n    // validation\n    if (!geojson) throw new Error('<geojson> is required');\n    if (typeof precision !== 'number') throw new Error('<precision> must be a number');\n    if (typeof coordinates !== 'number') throw new Error('<coordinates> must be a number');\n\n    // prevent input mutation\n    if (mutate === false || mutate === undefined) geojson = JSON.parse(JSON.stringify(geojson));\n\n    var factor = Math.pow(10, precision);\n\n    // Truncate Coordinates\n    Object(__WEBPACK_IMPORTED_MODULE_0__turf_meta__[\"a\" /* coordEach */])(geojson, function (coords) {\n        truncateCoords(coords, factor, coordinates);\n    });\n    return geojson;\n}\n\n/**\n * Truncate Coordinates - Mutates coordinates in place\n *\n * @private\n * @param {Array<any>} coords Geometry Coordinates\n * @param {number} factor rounding factor for coordinate decimal precision\n * @param {number} coordinates maximum number of coordinates (primarly used to remove z coordinates)\n * @returns {Array<any>} mutated coordinates\n */\nfunction truncateCoords(coords, factor, coordinates) {\n    // Remove extra coordinates (usually elevation coordinates and more)\n    if (coords.length > coordinates) coords.splice(coordinates, coords.length);\n\n    // Truncate coordinate decimals\n    for (var i = 0; i < coords.length; i++) {\n        coords[i] = Math.round(coords[i] * factor) / factor;\n    }\n    return coords;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (truncate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvdHJ1bmNhdGUvbWFpbi5lcy5qcz8yMDllIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvb3JkRWFjaCB9IGZyb20gJ0B0dXJmL21ldGEnO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICdAdHVyZi9oZWxwZXJzJztcblxuLyoqXG4gKiBUYWtlcyBhIEdlb0pTT04gRmVhdHVyZSBvciBGZWF0dXJlQ29sbGVjdGlvbiBhbmQgdHJ1bmNhdGVzIHRoZSBwcmVjaXNpb24gb2YgdGhlIGdlb21ldHJ5LlxuICpcbiAqIEBuYW1lIHRydW5jYXRlXG4gKiBAcGFyYW0ge0dlb0pTT059IGdlb2pzb24gYW55IEdlb0pTT04gRmVhdHVyZSwgRmVhdHVyZUNvbGxlY3Rpb24sIEdlb21ldHJ5IG9yIEdlb21ldHJ5Q29sbGVjdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnByZWNpc2lvbj02XSBjb29yZGluYXRlIGRlY2ltYWwgcHJlY2lzaW9uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuY29vcmRpbmF0ZXM9M10gbWF4aW11bSBudW1iZXIgb2YgY29vcmRpbmF0ZXMgKHByaW1hcmx5IHVzZWQgdG8gcmVtb3ZlIHogY29vcmRpbmF0ZXMpXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm11dGF0ZT1mYWxzZV0gYWxsb3dzIEdlb0pTT04gaW5wdXQgdG8gYmUgbXV0YXRlZCAoc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgaW5jcmVhc2UgaWYgdHJ1ZSlcbiAqIEByZXR1cm5zIHtHZW9KU09OfSBsYXllciB3aXRoIHRydW5jYXRlZCBnZW9tZXRyeVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHR1cmYucG9pbnQoW1xuICogICAgIDcwLjQ2OTIzMDU1NTY2ODU5LFxuICogICAgIDU4LjExMDg4ODkwODAyOTA2LFxuICogICAgIDE1MDhcbiAqIF0pO1xuICogdmFyIG9wdGlvbnMgPSB7cHJlY2lzaW9uOiAzLCBjb29yZGluYXRlczogMn07XG4gKiB2YXIgdHJ1bmNhdGVkID0gdHVyZi50cnVuY2F0ZShwb2ludCwgb3B0aW9ucyk7XG4gKiAvLz10cnVuY2F0ZWQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgPT4gWzcwLjQ2OSwgNTguMTExXVxuICpcbiAqIC8vYWRkVG9NYXBcbiAqIHZhciBhZGRUb01hcCA9IFt0cnVuY2F0ZWRdO1xuICovXG5mdW5jdGlvbiB0cnVuY2F0ZShnZW9qc29uLCBvcHRpb25zKSB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmICghaXNPYmplY3Qob3B0aW9ucykpIHRocm93IG5ldyBFcnJvcignb3B0aW9ucyBpcyBpbnZhbGlkJyk7XG4gICAgdmFyIHByZWNpc2lvbiA9IG9wdGlvbnMucHJlY2lzaW9uO1xuICAgIHZhciBjb29yZGluYXRlcyA9IG9wdGlvbnMuY29vcmRpbmF0ZXM7XG4gICAgdmFyIG11dGF0ZSA9IG9wdGlvbnMubXV0YXRlO1xuXG4gICAgLy8gZGVmYXVsdCBwYXJhbXNcbiAgICBwcmVjaXNpb24gPSAocHJlY2lzaW9uID09PSB1bmRlZmluZWQgfHwgcHJlY2lzaW9uID09PSBudWxsIHx8IGlzTmFOKHByZWNpc2lvbikpID8gNiA6IHByZWNpc2lvbjtcbiAgICBjb29yZGluYXRlcyA9IChjb29yZGluYXRlcyA9PT0gdW5kZWZpbmVkIHx8IGNvb3JkaW5hdGVzID09PSBudWxsIHx8IGlzTmFOKGNvb3JkaW5hdGVzKSkgPyAzIDogY29vcmRpbmF0ZXM7XG5cbiAgICAvLyB2YWxpZGF0aW9uXG4gICAgaWYgKCFnZW9qc29uKSB0aHJvdyBuZXcgRXJyb3IoJzxnZW9qc29uPiBpcyByZXF1aXJlZCcpO1xuICAgIGlmICh0eXBlb2YgcHJlY2lzaW9uICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3IEVycm9yKCc8cHJlY2lzaW9uPiBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgaWYgKHR5cGVvZiBjb29yZGluYXRlcyAhPT0gJ251bWJlcicpIHRocm93IG5ldyBFcnJvcignPGNvb3JkaW5hdGVzPiBtdXN0IGJlIGEgbnVtYmVyJyk7XG5cbiAgICAvLyBwcmV2ZW50IGlucHV0IG11dGF0aW9uXG4gICAgaWYgKG11dGF0ZSA9PT0gZmFsc2UgfHwgbXV0YXRlID09PSB1bmRlZmluZWQpIGdlb2pzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdlb2pzb24pKTtcblxuICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTtcblxuICAgIC8vIFRydW5jYXRlIENvb3JkaW5hdGVzXG4gICAgY29vcmRFYWNoKGdlb2pzb24sIGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgICAgdHJ1bmNhdGVDb29yZHMoY29vcmRzLCBmYWN0b3IsIGNvb3JkaW5hdGVzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZ2VvanNvbjtcbn1cblxuLyoqXG4gKiBUcnVuY2F0ZSBDb29yZGluYXRlcyAtIE11dGF0ZXMgY29vcmRpbmF0ZXMgaW4gcGxhY2VcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBjb29yZHMgR2VvbWV0cnkgQ29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3Igcm91bmRpbmcgZmFjdG9yIGZvciBjb29yZGluYXRlIGRlY2ltYWwgcHJlY2lzaW9uXG4gKiBAcGFyYW0ge251bWJlcn0gY29vcmRpbmF0ZXMgbWF4aW11bSBudW1iZXIgb2YgY29vcmRpbmF0ZXMgKHByaW1hcmx5IHVzZWQgdG8gcmVtb3ZlIHogY29vcmRpbmF0ZXMpXG4gKiBAcmV0dXJucyB7QXJyYXk8YW55Pn0gbXV0YXRlZCBjb29yZGluYXRlc1xuICovXG5mdW5jdGlvbiB0cnVuY2F0ZUNvb3Jkcyhjb29yZHMsIGZhY3RvciwgY29vcmRpbmF0ZXMpIHtcbiAgICAvLyBSZW1vdmUgZXh0cmEgY29vcmRpbmF0ZXMgKHVzdWFsbHkgZWxldmF0aW9uIGNvb3JkaW5hdGVzIGFuZCBtb3JlKVxuICAgIGlmIChjb29yZHMubGVuZ3RoID4gY29vcmRpbmF0ZXMpIGNvb3Jkcy5zcGxpY2UoY29vcmRpbmF0ZXMsIGNvb3Jkcy5sZW5ndGgpO1xuXG4gICAgLy8gVHJ1bmNhdGUgY29vcmRpbmF0ZSBkZWNpbWFsc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvb3Jkc1tpXSA9IE1hdGgucm91bmQoY29vcmRzW2ldICogZmFjdG9yKSAvIGZhY3RvcjtcbiAgICB9XG4gICAgcmV0dXJuIGNvb3Jkcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgdHJ1bmNhdGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AdHVyZi90cnVuY2F0ZS9tYWluLmVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n");

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__turf_helpers__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__turf_invariant__ = __webpack_require__(4);\n\n\n\n/**\n * Removes redundant coordinates from any GeoJSON Geometry.\n *\n * @name cleanCoords\n * @param {Geometry|Feature} geojson Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.mutate=false] allows GeoJSON input to be mutated\n * @returns {Geometry|Feature} the cleaned input Feature/Geometry\n * @example\n * var line = turf.lineString([[0, 0], [0, 2], [0, 5], [0, 8], [0, 8], [0, 10]]);\n * var multiPoint = turf.multiPoint([[0, 0], [0, 0], [2, 2]]);\n *\n * turf.cleanCoords(line).geometry.coordinates;\n * //= [[0, 0], [0, 10]]\n *\n * turf.cleanCoords(multiPoint).geometry.coordinates;\n * //= [[0, 0], [2, 2]]\n */\nfunction cleanCoords(geojson, options) {\n    // Backwards compatible with v4.0\n    var mutate = (typeof options === 'object') ? options.mutate : options;\n    if (!geojson) throw new Error('geojson is required');\n    var type = Object(__WEBPACK_IMPORTED_MODULE_1__turf_invariant__[\"c\" /* getType */])(geojson);\n\n    // Store new \"clean\" points in this Array\n    var newCoords = [];\n\n    switch (type) {\n    case 'LineString':\n        newCoords = cleanLine(geojson);\n        break;\n    case 'MultiLineString':\n    case 'Polygon':\n        Object(__WEBPACK_IMPORTED_MODULE_1__turf_invariant__[\"a\" /* getCoords */])(geojson).forEach(function (line) {\n            newCoords.push(cleanLine(line));\n        });\n        break;\n    case 'MultiPolygon':\n        Object(__WEBPACK_IMPORTED_MODULE_1__turf_invariant__[\"a\" /* getCoords */])(geojson).forEach(function (polygons) {\n            var polyPoints = [];\n            polygons.forEach(function (ring) {\n                polyPoints.push(cleanLine(ring));\n            });\n            newCoords.push(polyPoints);\n        });\n        break;\n    case 'Point':\n        return geojson;\n    case 'MultiPoint':\n        var existing = {};\n        Object(__WEBPACK_IMPORTED_MODULE_1__turf_invariant__[\"a\" /* getCoords */])(geojson).forEach(function (coord) {\n            var key = coord.join('-');\n            if (!existing.hasOwnProperty(key)) {\n                newCoords.push(coord);\n                existing[key] = true;\n            }\n        });\n        break;\n    default:\n        throw new Error(type + ' geometry not supported');\n    }\n\n    // Support input mutation\n    if (geojson.coordinates) {\n        if (mutate === true) {\n            geojson.coordinates = newCoords;\n            return geojson;\n        }\n        return {type: type, coordinates: newCoords};\n    } else {\n        if (mutate === true) {\n            geojson.geometry.coordinates = newCoords;\n            return geojson;\n        }\n        return Object(__WEBPACK_IMPORTED_MODULE_0__turf_helpers__[\"a\" /* feature */])({type: type, coordinates: newCoords}, geojson.properties, geojson.bbox, geojson.id);\n    }\n}\n\n/**\n * Clean Coords\n *\n * @private\n * @param {Array<number>|LineString} line Line\n * @returns {Array<number>} Cleaned coordinates\n */\nfunction cleanLine(line) {\n    var points = Object(__WEBPACK_IMPORTED_MODULE_1__turf_invariant__[\"a\" /* getCoords */])(line);\n    // handle \"clean\" segment\n    if (points.length === 2 && !equals(points[0], points[1])) return points;\n\n    var prevPoint, point, nextPoint;\n    var newPoints = [];\n    var secondToLast = points.length - 1;\n\n    newPoints.push(points[0]);\n    for (var i = 1; i < secondToLast; i++) {\n        prevPoint = points[i - 1];\n        point = points[i];\n        nextPoint = points[i + 1];\n\n        if (!isPointOnLineSegment(prevPoint, nextPoint, point)) {\n            newPoints.push(point);\n        }\n    }\n    newPoints.push(nextPoint);\n    return newPoints;\n}\n\n/**\n * Compares two points and returns if they are equals\n *\n * @private\n * @param {Position} pt1 point\n * @param {Position} pt2 point\n * @returns {boolean} true if they are equals\n */\nfunction equals(pt1, pt2) {\n    return pt1[0] === pt2[0] && pt1[1] === pt2[1];\n}\n\n/**\n * Returns if `point` is on the segment between `start` and `end`.\n * Borrowed from `@turf/boolean-point-on-line` to speed up the evaluation (instead of using the module as dependency)\n *\n * @private\n * @param {Position} start coord pair of start of line\n * @param {Position} end coord pair of end of line\n * @param {Position} point coord pair of point to check\n * @returns {boolean} true/false\n */\nfunction isPointOnLineSegment(start, end, point) {\n    var x = point[0], y = point[1];\n    var startX = start[0], startY = start[1];\n    var endX = end[0], endY = end[1];\n\n    var dxc = x - startX;\n    var dyc = y - startY;\n    var dxl = endX - startX;\n    var dyl = endY - startY;\n    var cross = dxc * dyl - dyc * dxl;\n\n    if (cross !== 0) return false;\n    else if (Math.abs(dxl) >= Math.abs(dyl)) return dxl > 0 ? startX <= x && x <= endX : endX <= x && x <= startX;\n    else return dyl > 0 ? startY <= y && y <= endY : endY <= y && y <= startY;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (cleanCoords);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvY2xlYW4tY29vcmRzL21haW4uZXMuanM/Zjk2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZWF0dXJlIH0gZnJvbSAnQHR1cmYvaGVscGVycyc7XG5pbXBvcnQgeyBnZXRDb29yZHMsIGdldFR5cGUgfSBmcm9tICdAdHVyZi9pbnZhcmlhbnQnO1xuXG4vKipcbiAqIFJlbW92ZXMgcmVkdW5kYW50IGNvb3JkaW5hdGVzIGZyb20gYW55IEdlb0pTT04gR2VvbWV0cnkuXG4gKlxuICogQG5hbWUgY2xlYW5Db29yZHNcbiAqIEBwYXJhbSB7R2VvbWV0cnl8RmVhdHVyZX0gZ2VvanNvbiBGZWF0dXJlIG9yIEdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIE9wdGlvbmFsIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubXV0YXRlPWZhbHNlXSBhbGxvd3MgR2VvSlNPTiBpbnB1dCB0byBiZSBtdXRhdGVkXG4gKiBAcmV0dXJucyB7R2VvbWV0cnl8RmVhdHVyZX0gdGhlIGNsZWFuZWQgaW5wdXQgRmVhdHVyZS9HZW9tZXRyeVxuICogQGV4YW1wbGVcbiAqIHZhciBsaW5lID0gdHVyZi5saW5lU3RyaW5nKFtbMCwgMF0sIFswLCAyXSwgWzAsIDVdLCBbMCwgOF0sIFswLCA4XSwgWzAsIDEwXV0pO1xuICogdmFyIG11bHRpUG9pbnQgPSB0dXJmLm11bHRpUG9pbnQoW1swLCAwXSwgWzAsIDBdLCBbMiwgMl1dKTtcbiAqXG4gKiB0dXJmLmNsZWFuQ29vcmRzKGxpbmUpLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICogLy89IFtbMCwgMF0sIFswLCAxMF1dXG4gKlxuICogdHVyZi5jbGVhbkNvb3JkcyhtdWx0aVBvaW50KS5nZW9tZXRyeS5jb29yZGluYXRlcztcbiAqIC8vPSBbWzAsIDBdLCBbMiwgMl1dXG4gKi9cbmZ1bmN0aW9uIGNsZWFuQ29vcmRzKGdlb2pzb24sIG9wdGlvbnMpIHtcbiAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoIHY0LjBcbiAgICB2YXIgbXV0YXRlID0gKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JykgPyBvcHRpb25zLm11dGF0ZSA6IG9wdGlvbnM7XG4gICAgaWYgKCFnZW9qc29uKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgcmVxdWlyZWQnKTtcbiAgICB2YXIgdHlwZSA9IGdldFR5cGUoZ2VvanNvbik7XG5cbiAgICAvLyBTdG9yZSBuZXcgXCJjbGVhblwiIHBvaW50cyBpbiB0aGlzIEFycmF5XG4gICAgdmFyIG5ld0Nvb3JkcyA9IFtdO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICAgIG5ld0Nvb3JkcyA9IGNsZWFuTGluZShnZW9qc29uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgICAgZ2V0Q29vcmRzKGdlb2pzb24pLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgICAgIG5ld0Nvb3Jkcy5wdXNoKGNsZWFuTGluZShsaW5lKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvbHlnb24nOlxuICAgICAgICBnZXRDb29yZHMoZ2VvanNvbikuZm9yRWFjaChmdW5jdGlvbiAocG9seWdvbnMpIHtcbiAgICAgICAgICAgIHZhciBwb2x5UG9pbnRzID0gW107XG4gICAgICAgICAgICBwb2x5Z29ucy5mb3JFYWNoKGZ1bmN0aW9uIChyaW5nKSB7XG4gICAgICAgICAgICAgICAgcG9seVBvaW50cy5wdXNoKGNsZWFuTGluZShyaW5nKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5ld0Nvb3Jkcy5wdXNoKHBvbHlQb2ludHMpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSAnUG9pbnQnOlxuICAgICAgICByZXR1cm4gZ2VvanNvbjtcbiAgICBjYXNlICdNdWx0aVBvaW50JzpcbiAgICAgICAgdmFyIGV4aXN0aW5nID0ge307XG4gICAgICAgIGdldENvb3JkcyhnZW9qc29uKS5mb3JFYWNoKGZ1bmN0aW9uIChjb29yZCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGNvb3JkLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmcuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIG5ld0Nvb3Jkcy5wdXNoKGNvb3JkKTtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1trZXldID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0eXBlICsgJyBnZW9tZXRyeSBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBpbnB1dCBtdXRhdGlvblxuICAgIGlmIChnZW9qc29uLmNvb3JkaW5hdGVzKSB7XG4gICAgICAgIGlmIChtdXRhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGdlb2pzb24uY29vcmRpbmF0ZXMgPSBuZXdDb29yZHM7XG4gICAgICAgICAgICByZXR1cm4gZ2VvanNvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge3R5cGU6IHR5cGUsIGNvb3JkaW5hdGVzOiBuZXdDb29yZHN9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChtdXRhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGdlb2pzb24uZ2VvbWV0cnkuY29vcmRpbmF0ZXMgPSBuZXdDb29yZHM7XG4gICAgICAgICAgICByZXR1cm4gZ2VvanNvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmVhdHVyZSh7dHlwZTogdHlwZSwgY29vcmRpbmF0ZXM6IG5ld0Nvb3Jkc30sIGdlb2pzb24ucHJvcGVydGllcywgZ2VvanNvbi5iYm94LCBnZW9qc29uLmlkKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ2xlYW4gQ29vcmRzXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPnxMaW5lU3RyaW5nfSBsaW5lIExpbmVcbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBDbGVhbmVkIGNvb3JkaW5hdGVzXG4gKi9cbmZ1bmN0aW9uIGNsZWFuTGluZShsaW5lKSB7XG4gICAgdmFyIHBvaW50cyA9IGdldENvb3JkcyhsaW5lKTtcbiAgICAvLyBoYW5kbGUgXCJjbGVhblwiIHNlZ21lbnRcbiAgICBpZiAocG9pbnRzLmxlbmd0aCA9PT0gMiAmJiAhZXF1YWxzKHBvaW50c1swXSwgcG9pbnRzWzFdKSkgcmV0dXJuIHBvaW50cztcblxuICAgIHZhciBwcmV2UG9pbnQsIHBvaW50LCBuZXh0UG9pbnQ7XG4gICAgdmFyIG5ld1BvaW50cyA9IFtdO1xuICAgIHZhciBzZWNvbmRUb0xhc3QgPSBwb2ludHMubGVuZ3RoIC0gMTtcblxuICAgIG5ld1BvaW50cy5wdXNoKHBvaW50c1swXSk7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzZWNvbmRUb0xhc3Q7IGkrKykge1xuICAgICAgICBwcmV2UG9pbnQgPSBwb2ludHNbaSAtIDFdO1xuICAgICAgICBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgICAgbmV4dFBvaW50ID0gcG9pbnRzW2kgKyAxXTtcblxuICAgICAgICBpZiAoIWlzUG9pbnRPbkxpbmVTZWdtZW50KHByZXZQb2ludCwgbmV4dFBvaW50LCBwb2ludCkpIHtcbiAgICAgICAgICAgIG5ld1BvaW50cy5wdXNoKHBvaW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXdQb2ludHMucHVzaChuZXh0UG9pbnQpO1xuICAgIHJldHVybiBuZXdQb2ludHM7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHBvaW50cyBhbmQgcmV0dXJucyBpZiB0aGV5IGFyZSBlcXVhbHNcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtQb3NpdGlvbn0gcHQxIHBvaW50XG4gKiBAcGFyYW0ge1Bvc2l0aW9ufSBwdDIgcG9pbnRcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZXkgYXJlIGVxdWFsc1xuICovXG5mdW5jdGlvbiBlcXVhbHMocHQxLCBwdDIpIHtcbiAgICByZXR1cm4gcHQxWzBdID09PSBwdDJbMF0gJiYgcHQxWzFdID09PSBwdDJbMV07XG59XG5cbi8qKlxuICogUmV0dXJucyBpZiBgcG9pbnRgIGlzIG9uIHRoZSBzZWdtZW50IGJldHdlZW4gYHN0YXJ0YCBhbmQgYGVuZGAuXG4gKiBCb3Jyb3dlZCBmcm9tIGBAdHVyZi9ib29sZWFuLXBvaW50LW9uLWxpbmVgIHRvIHNwZWVkIHVwIHRoZSBldmFsdWF0aW9uIChpbnN0ZWFkIG9mIHVzaW5nIHRoZSBtb2R1bGUgYXMgZGVwZW5kZW5jeSlcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtQb3NpdGlvbn0gc3RhcnQgY29vcmQgcGFpciBvZiBzdGFydCBvZiBsaW5lXG4gKiBAcGFyYW0ge1Bvc2l0aW9ufSBlbmQgY29vcmQgcGFpciBvZiBlbmQgb2YgbGluZVxuICogQHBhcmFtIHtQb3NpdGlvbn0gcG9pbnQgY29vcmQgcGFpciBvZiBwb2ludCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNQb2ludE9uTGluZVNlZ21lbnQoc3RhcnQsIGVuZCwgcG9pbnQpIHtcbiAgICB2YXIgeCA9IHBvaW50WzBdLCB5ID0gcG9pbnRbMV07XG4gICAgdmFyIHN0YXJ0WCA9IHN0YXJ0WzBdLCBzdGFydFkgPSBzdGFydFsxXTtcbiAgICB2YXIgZW5kWCA9IGVuZFswXSwgZW5kWSA9IGVuZFsxXTtcblxuICAgIHZhciBkeGMgPSB4IC0gc3RhcnRYO1xuICAgIHZhciBkeWMgPSB5IC0gc3RhcnRZO1xuICAgIHZhciBkeGwgPSBlbmRYIC0gc3RhcnRYO1xuICAgIHZhciBkeWwgPSBlbmRZIC0gc3RhcnRZO1xuICAgIHZhciBjcm9zcyA9IGR4YyAqIGR5bCAtIGR5YyAqIGR4bDtcblxuICAgIGlmIChjcm9zcyAhPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgaWYgKE1hdGguYWJzKGR4bCkgPj0gTWF0aC5hYnMoZHlsKSkgcmV0dXJuIGR4bCA+IDAgPyBzdGFydFggPD0geCAmJiB4IDw9IGVuZFggOiBlbmRYIDw9IHggJiYgeCA8PSBzdGFydFg7XG4gICAgZWxzZSByZXR1cm4gZHlsID4gMCA/IHN0YXJ0WSA8PSB5ICYmIHkgPD0gZW5kWSA6IGVuZFkgPD0geSAmJiB5IDw9IHN0YXJ0WTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xlYW5Db29yZHM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AdHVyZi9jbGVhbi1jb29yZHMvbWFpbi5lcy5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23\n");

/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_turf_jsts__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_turf_jsts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_turf_jsts__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__turf_area__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__turf_helpers__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__turf_invariant__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__turf_meta__ = __webpack_require__(3);\n\n\n\n\n\n\n/**\n * Finds the difference between two {@link Polygon|polygons} by clipping the second polygon from the first.\n *\n * @name difference\n * @param {Feature<Polygon|MultiPolygon>} polygon1 input Polygon feature\n * @param {Feature<Polygon|MultiPolygon>} polygon2 Polygon feature to difference from polygon1\n * @returns {Feature<Polygon|MultiPolygon>|null} a Polygon or MultiPolygon feature showing the area of `polygon1` excluding the area of `polygon2` (if empty returns `null`)\n * @example\n * var polygon1 = turf.polygon([[\n *   [128, -26],\n *   [141, -26],\n *   [141, -21],\n *   [128, -21],\n *   [128, -26]\n * ]], {\n *   \"fill\": \"#F00\",\n *   \"fill-opacity\": 0.1\n * });\n * var polygon2 = turf.polygon([[\n *   [126, -28],\n *   [140, -28],\n *   [140, -20],\n *   [126, -20],\n *   [126, -28]\n * ]], {\n *   \"fill\": \"#00F\",\n *   \"fill-opacity\": 0.1\n * });\n *\n * var difference = turf.difference(polygon1, polygon2);\n *\n * //addToMap\n * var addToMap = [polygon1, polygon2, difference];\n */\nfunction difference(polygon1, polygon2) {\n    var geom1 = Object(__WEBPACK_IMPORTED_MODULE_3__turf_invariant__[\"b\" /* getGeom */])(polygon1);\n    var geom2 = Object(__WEBPACK_IMPORTED_MODULE_3__turf_invariant__[\"b\" /* getGeom */])(polygon2);\n    var properties = polygon1.properties || {};\n\n    // Issue #721 - JSTS can't handle empty polygons\n    geom1 = removeEmptyPolygon(geom1);\n    geom2 = removeEmptyPolygon(geom2);\n    if (!geom1) return null;\n    if (!geom2) return Object(__WEBPACK_IMPORTED_MODULE_2__turf_helpers__[\"a\" /* feature */])(geom1, properties);\n\n    // JSTS difference operation\n    var reader = new __WEBPACK_IMPORTED_MODULE_0_turf_jsts__[\"GeoJSONReader\"]();\n    var a = reader.read(geom1);\n    var b = reader.read(geom2);\n    var differenced = __WEBPACK_IMPORTED_MODULE_0_turf_jsts__[\"OverlayOp\"].difference(a, b);\n    if (differenced.isEmpty()) return null;\n    var writer = new __WEBPACK_IMPORTED_MODULE_0_turf_jsts__[\"GeoJSONWriter\"]();\n    var geom = writer.write(differenced);\n\n    return Object(__WEBPACK_IMPORTED_MODULE_2__turf_helpers__[\"a\" /* feature */])(geom, properties);\n}\n\n/**\n * Detect Empty Polygon\n *\n * @private\n * @param {Geometry<Polygon|MultiPolygon>} geom Geometry Object\n * @returns {Geometry<Polygon|MultiPolygon>|null} removed any polygons with no areas\n */\nfunction removeEmptyPolygon(geom) {\n    switch (geom.type) {\n    case 'Polygon':\n        if (Object(__WEBPACK_IMPORTED_MODULE_1__turf_area__[\"a\" /* default */])(geom) > 1) return geom;\n        return null;\n    case 'MultiPolygon':\n        var coordinates = [];\n        Object(__WEBPACK_IMPORTED_MODULE_4__turf_meta__[\"b\" /* flattenEach */])(geom, function (feature$$1) {\n            if (Object(__WEBPACK_IMPORTED_MODULE_1__turf_area__[\"a\" /* default */])(feature$$1) > 1) coordinates.push(feature$$1.geometry.coordinates);\n        });\n        if (coordinates.length) return {type: 'MultiPolygon', coordinates: coordinates};\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (difference);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvZGlmZmVyZW5jZS9tYWluLmVzLmpzPzEzZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2VvSlNPTlJlYWRlciwgR2VvSlNPTldyaXRlciwgT3ZlcmxheU9wIH0gZnJvbSAndHVyZi1qc3RzJztcbmltcG9ydCBhcmVhIGZyb20gJ0B0dXJmL2FyZWEnO1xuaW1wb3J0IHsgZmVhdHVyZSB9IGZyb20gJ0B0dXJmL2hlbHBlcnMnO1xuaW1wb3J0IHsgZ2V0R2VvbSB9IGZyb20gJ0B0dXJmL2ludmFyaWFudCc7XG5pbXBvcnQgeyBmbGF0dGVuRWFjaCB9IGZyb20gJ0B0dXJmL21ldGEnO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIHtAbGluayBQb2x5Z29ufHBvbHlnb25zfSBieSBjbGlwcGluZyB0aGUgc2Vjb25kIHBvbHlnb24gZnJvbSB0aGUgZmlyc3QuXG4gKlxuICogQG5hbWUgZGlmZmVyZW5jZVxuICogQHBhcmFtIHtGZWF0dXJlPFBvbHlnb258TXVsdGlQb2x5Z29uPn0gcG9seWdvbjEgaW5wdXQgUG9seWdvbiBmZWF0dXJlXG4gKiBAcGFyYW0ge0ZlYXR1cmU8UG9seWdvbnxNdWx0aVBvbHlnb24+fSBwb2x5Z29uMiBQb2x5Z29uIGZlYXR1cmUgdG8gZGlmZmVyZW5jZSBmcm9tIHBvbHlnb24xXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29ufE11bHRpUG9seWdvbj58bnVsbH0gYSBQb2x5Z29uIG9yIE11bHRpUG9seWdvbiBmZWF0dXJlIHNob3dpbmcgdGhlIGFyZWEgb2YgYHBvbHlnb24xYCBleGNsdWRpbmcgdGhlIGFyZWEgb2YgYHBvbHlnb24yYCAoaWYgZW1wdHkgcmV0dXJucyBgbnVsbGApXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb24xID0gdHVyZi5wb2x5Z29uKFtbXG4gKiAgIFsxMjgsIC0yNl0sXG4gKiAgIFsxNDEsIC0yNl0sXG4gKiAgIFsxNDEsIC0yMV0sXG4gKiAgIFsxMjgsIC0yMV0sXG4gKiAgIFsxMjgsIC0yNl1cbiAqIF1dLCB7XG4gKiAgIFwiZmlsbFwiOiBcIiNGMDBcIixcbiAqICAgXCJmaWxsLW9wYWNpdHlcIjogMC4xXG4gKiB9KTtcbiAqIHZhciBwb2x5Z29uMiA9IHR1cmYucG9seWdvbihbW1xuICogICBbMTI2LCAtMjhdLFxuICogICBbMTQwLCAtMjhdLFxuICogICBbMTQwLCAtMjBdLFxuICogICBbMTI2LCAtMjBdLFxuICogICBbMTI2LCAtMjhdXG4gKiBdXSwge1xuICogICBcImZpbGxcIjogXCIjMDBGXCIsXG4gKiAgIFwiZmlsbC1vcGFjaXR5XCI6IDAuMVxuICogfSk7XG4gKlxuICogdmFyIGRpZmZlcmVuY2UgPSB0dXJmLmRpZmZlcmVuY2UocG9seWdvbjEsIHBvbHlnb24yKTtcbiAqXG4gKiAvL2FkZFRvTWFwXG4gKiB2YXIgYWRkVG9NYXAgPSBbcG9seWdvbjEsIHBvbHlnb24yLCBkaWZmZXJlbmNlXTtcbiAqL1xuZnVuY3Rpb24gZGlmZmVyZW5jZShwb2x5Z29uMSwgcG9seWdvbjIpIHtcbiAgICB2YXIgZ2VvbTEgPSBnZXRHZW9tKHBvbHlnb24xKTtcbiAgICB2YXIgZ2VvbTIgPSBnZXRHZW9tKHBvbHlnb24yKTtcbiAgICB2YXIgcHJvcGVydGllcyA9IHBvbHlnb24xLnByb3BlcnRpZXMgfHwge307XG5cbiAgICAvLyBJc3N1ZSAjNzIxIC0gSlNUUyBjYW4ndCBoYW5kbGUgZW1wdHkgcG9seWdvbnNcbiAgICBnZW9tMSA9IHJlbW92ZUVtcHR5UG9seWdvbihnZW9tMSk7XG4gICAgZ2VvbTIgPSByZW1vdmVFbXB0eVBvbHlnb24oZ2VvbTIpO1xuICAgIGlmICghZ2VvbTEpIHJldHVybiBudWxsO1xuICAgIGlmICghZ2VvbTIpIHJldHVybiBmZWF0dXJlKGdlb20xLCBwcm9wZXJ0aWVzKTtcblxuICAgIC8vIEpTVFMgZGlmZmVyZW5jZSBvcGVyYXRpb25cbiAgICB2YXIgcmVhZGVyID0gbmV3IEdlb0pTT05SZWFkZXIoKTtcbiAgICB2YXIgYSA9IHJlYWRlci5yZWFkKGdlb20xKTtcbiAgICB2YXIgYiA9IHJlYWRlci5yZWFkKGdlb20yKTtcbiAgICB2YXIgZGlmZmVyZW5jZWQgPSBPdmVybGF5T3AuZGlmZmVyZW5jZShhLCBiKTtcbiAgICBpZiAoZGlmZmVyZW5jZWQuaXNFbXB0eSgpKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgd3JpdGVyID0gbmV3IEdlb0pTT05Xcml0ZXIoKTtcbiAgICB2YXIgZ2VvbSA9IHdyaXRlci53cml0ZShkaWZmZXJlbmNlZCk7XG5cbiAgICByZXR1cm4gZmVhdHVyZShnZW9tLCBwcm9wZXJ0aWVzKTtcbn1cblxuLyoqXG4gKiBEZXRlY3QgRW1wdHkgUG9seWdvblxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0dlb21ldHJ5PFBvbHlnb258TXVsdGlQb2x5Z29uPn0gZ2VvbSBHZW9tZXRyeSBPYmplY3RcbiAqIEByZXR1cm5zIHtHZW9tZXRyeTxQb2x5Z29ufE11bHRpUG9seWdvbj58bnVsbH0gcmVtb3ZlZCBhbnkgcG9seWdvbnMgd2l0aCBubyBhcmVhc1xuICovXG5mdW5jdGlvbiByZW1vdmVFbXB0eVBvbHlnb24oZ2VvbSkge1xuICAgIHN3aXRjaCAoZ2VvbS50eXBlKSB7XG4gICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgIGlmIChhcmVhKGdlb20pID4gMSkgcmV0dXJuIGdlb207XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgIHZhciBjb29yZGluYXRlcyA9IFtdO1xuICAgICAgICBmbGF0dGVuRWFjaChnZW9tLCBmdW5jdGlvbiAoZmVhdHVyZSQkMSkge1xuICAgICAgICAgICAgaWYgKGFyZWEoZmVhdHVyZSQkMSkgPiAxKSBjb29yZGluYXRlcy5wdXNoKGZlYXR1cmUkJDEuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCkgcmV0dXJuIHt0eXBlOiAnTXVsdGlQb2x5Z29uJywgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzfTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRpZmZlcmVuY2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AdHVyZi9kaWZmZXJlbmNlL21haW4uZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///24\n");

/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__turf_meta__ = __webpack_require__(3);\n\n\n/**\n * Takes one or more features and returns their area in square meters.\n *\n * @name area\n * @param {GeoJSON} geojson input GeoJSON feature(s)\n * @returns {number} area in square meters\n * @example\n * var polygon = turf.polygon([[[125, -15], [113, -22], [154, -27], [144, -15], [125, -15]]]);\n *\n * var area = turf.area(polygon);\n *\n * //addToMap\n * var addToMap = [polygon]\n * polygon.properties.area = area\n */\nfunction area(geojson) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__turf_meta__[\"c\" /* geomReduce */])(geojson, function (value, geom) {\n        return value + calculateArea(geom);\n    }, 0);\n}\n\nvar RADIUS = 6378137;\n// var FLATTENING_DENOM = 298.257223563;\n// var FLATTENING = 1 / FLATTENING_DENOM;\n// var POLAR_RADIUS = RADIUS * (1 - FLATTENING);\n\n/**\n * Calculate Area\n *\n * @private\n * @param {GeoJSON} geojson GeoJSON\n * @returns {number} area\n */\nfunction calculateArea(geojson) {\n    var area = 0, i;\n    switch (geojson.type) {\n    case 'Polygon':\n        return polygonArea(geojson.coordinates);\n    case 'MultiPolygon':\n        for (i = 0; i < geojson.coordinates.length; i++) {\n            area += polygonArea(geojson.coordinates[i]);\n        }\n        return area;\n    case 'Point':\n    case 'MultiPoint':\n    case 'LineString':\n    case 'MultiLineString':\n        return 0;\n    case 'GeometryCollection':\n        for (i = 0; i < geojson.geometries.length; i++) {\n            area += calculateArea(geojson.geometries[i]);\n        }\n        return area;\n    }\n}\n\nfunction polygonArea(coords) {\n    var area = 0;\n    if (coords && coords.length > 0) {\n        area += Math.abs(ringArea(coords[0]));\n        for (var i = 1; i < coords.length; i++) {\n            area -= Math.abs(ringArea(coords[i]));\n        }\n    }\n    return area;\n}\n\n/**\n * @private\n * Calculate the approximate area of the polygon were it projected onto the earth.\n * Note that this area will be positive if ring is oriented clockwise, otherwise it will be negative.\n *\n * Reference:\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n *\n * @param {Array<Array<number>>} coords Ring Coordinates\n * @returns {number} The approximate signed geodesic area of the polygon in square meters.\n */\nfunction ringArea(coords) {\n    var p1;\n    var p2;\n    var p3;\n    var lowerIndex;\n    var middleIndex;\n    var upperIndex;\n    var i;\n    var area = 0;\n    var coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n        for (i = 0; i < coordsLength; i++) {\n            if (i === coordsLength - 2) { // i = N-2\n                lowerIndex = coordsLength - 2;\n                middleIndex = coordsLength - 1;\n                upperIndex = 0;\n            } else if (i === coordsLength - 1) { // i = N-1\n                lowerIndex = coordsLength - 1;\n                middleIndex = 0;\n                upperIndex = 1;\n            } else { // i = 0 to N-3\n                lowerIndex = i;\n                middleIndex = i + 1;\n                upperIndex = i + 2;\n            }\n            p1 = coords[lowerIndex];\n            p2 = coords[middleIndex];\n            p3 = coords[upperIndex];\n            area += (rad(p3[0]) - rad(p1[0])) * Math.sin(rad(p2[1]));\n        }\n\n        area = area * RADIUS * RADIUS / 2;\n    }\n\n    return area;\n}\n\nfunction rad(_) {\n    return _ * Math.PI / 180;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (area);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvYXJlYS9tYWluLmVzLmpzP2NjNzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VvbVJlZHVjZSB9IGZyb20gJ0B0dXJmL21ldGEnO1xuXG4vKipcbiAqIFRha2VzIG9uZSBvciBtb3JlIGZlYXR1cmVzIGFuZCByZXR1cm5zIHRoZWlyIGFyZWEgaW4gc3F1YXJlIG1ldGVycy5cbiAqXG4gKiBAbmFtZSBhcmVhXG4gKiBAcGFyYW0ge0dlb0pTT059IGdlb2pzb24gaW5wdXQgR2VvSlNPTiBmZWF0dXJlKHMpXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhcmVhIGluIHNxdWFyZSBtZXRlcnNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbiA9IHR1cmYucG9seWdvbihbW1sxMjUsIC0xNV0sIFsxMTMsIC0yMl0sIFsxNTQsIC0yN10sIFsxNDQsIC0xNV0sIFsxMjUsIC0xNV1dXSk7XG4gKlxuICogdmFyIGFyZWEgPSB0dXJmLmFyZWEocG9seWdvbik7XG4gKlxuICogLy9hZGRUb01hcFxuICogdmFyIGFkZFRvTWFwID0gW3BvbHlnb25dXG4gKiBwb2x5Z29uLnByb3BlcnRpZXMuYXJlYSA9IGFyZWFcbiAqL1xuZnVuY3Rpb24gYXJlYShnZW9qc29uKSB7XG4gICAgcmV0dXJuIGdlb21SZWR1Y2UoZ2VvanNvbiwgZnVuY3Rpb24gKHZhbHVlLCBnZW9tKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSArIGNhbGN1bGF0ZUFyZWEoZ2VvbSk7XG4gICAgfSwgMCk7XG59XG5cbnZhciBSQURJVVMgPSA2Mzc4MTM3O1xuLy8gdmFyIEZMQVRURU5JTkdfREVOT00gPSAyOTguMjU3MjIzNTYzO1xuLy8gdmFyIEZMQVRURU5JTkcgPSAxIC8gRkxBVFRFTklOR19ERU5PTTtcbi8vIHZhciBQT0xBUl9SQURJVVMgPSBSQURJVVMgKiAoMSAtIEZMQVRURU5JTkcpO1xuXG4vKipcbiAqIENhbGN1bGF0ZSBBcmVhXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7R2VvSlNPTn0gZ2VvanNvbiBHZW9KU09OXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhcmVhXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUFyZWEoZ2VvanNvbikge1xuICAgIHZhciBhcmVhID0gMCwgaTtcbiAgICBzd2l0Y2ggKGdlb2pzb24udHlwZSkge1xuICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgICByZXR1cm4gcG9seWdvbkFyZWEoZ2VvanNvbi5jb29yZGluYXRlcyk7XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGdlb2pzb24uY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZWEgKz0gcG9seWdvbkFyZWEoZ2VvanNvbi5jb29yZGluYXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyZWE7XG4gICAgY2FzZSAnUG9pbnQnOlxuICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgICAgIHJldHVybiAwO1xuICAgIGNhc2UgJ0dlb21ldHJ5Q29sbGVjdGlvbic6XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBnZW9qc29uLmdlb21ldHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZWEgKz0gY2FsY3VsYXRlQXJlYShnZW9qc29uLmdlb21ldHJpZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmVhO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcG9seWdvbkFyZWEoY29vcmRzKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGlmIChjb29yZHMgJiYgY29vcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXJlYSArPSBNYXRoLmFicyhyaW5nQXJlYShjb29yZHNbMF0pKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMocmluZ0FyZWEoY29vcmRzW2ldKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIENhbGN1bGF0ZSB0aGUgYXBwcm94aW1hdGUgYXJlYSBvZiB0aGUgcG9seWdvbiB3ZXJlIGl0IHByb2plY3RlZCBvbnRvIHRoZSBlYXJ0aC5cbiAqIE5vdGUgdGhhdCB0aGlzIGFyZWEgd2lsbCBiZSBwb3NpdGl2ZSBpZiByaW5nIGlzIG9yaWVudGVkIGNsb2Nrd2lzZSwgb3RoZXJ3aXNlIGl0IHdpbGwgYmUgbmVnYXRpdmUuXG4gKlxuICogUmVmZXJlbmNlOlxuICogUm9iZXJ0LiBHLiBDaGFtYmVybGFpbiBhbmQgV2lsbGlhbSBILiBEdXF1ZXR0ZSwgXCJTb21lIEFsZ29yaXRobXMgZm9yIFBvbHlnb25zIG9uIGEgU3BoZXJlXCIsIEpQTCBQdWJsaWNhdGlvbiAwNy0wMywgSmV0IFByb3B1bHNpb25cbiAqIExhYm9yYXRvcnksIFBhc2FkZW5hLCBDQSwgSnVuZSAyMDA3IGh0dHA6Ly90cnMtbmV3LmpwbC5uYXNhLmdvdi9kc3BhY2UvaGFuZGxlLzIwMTQvNDA0MDlcbiAqXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZHMgUmluZyBDb29yZGluYXRlc1xuICogQHJldHVybnMge251bWJlcn0gVGhlIGFwcHJveGltYXRlIHNpZ25lZCBnZW9kZXNpYyBhcmVhIG9mIHRoZSBwb2x5Z29uIGluIHNxdWFyZSBtZXRlcnMuXG4gKi9cbmZ1bmN0aW9uIHJpbmdBcmVhKGNvb3Jkcykge1xuICAgIHZhciBwMTtcbiAgICB2YXIgcDI7XG4gICAgdmFyIHAzO1xuICAgIHZhciBsb3dlckluZGV4O1xuICAgIHZhciBtaWRkbGVJbmRleDtcbiAgICB2YXIgdXBwZXJJbmRleDtcbiAgICB2YXIgaTtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgdmFyIGNvb3Jkc0xlbmd0aCA9IGNvb3Jkcy5sZW5ndGg7XG5cbiAgICBpZiAoY29vcmRzTGVuZ3RoID4gMikge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09PSBjb29yZHNMZW5ndGggLSAyKSB7IC8vIGkgPSBOLTJcbiAgICAgICAgICAgICAgICBsb3dlckluZGV4ID0gY29vcmRzTGVuZ3RoIC0gMjtcbiAgICAgICAgICAgICAgICBtaWRkbGVJbmRleCA9IGNvb3Jkc0xlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgdXBwZXJJbmRleCA9IDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IGNvb3Jkc0xlbmd0aCAtIDEpIHsgLy8gaSA9IE4tMVxuICAgICAgICAgICAgICAgIGxvd2VySW5kZXggPSBjb29yZHNMZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIG1pZGRsZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB1cHBlckluZGV4ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGkgPSAwIHRvIE4tM1xuICAgICAgICAgICAgICAgIGxvd2VySW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIG1pZGRsZUluZGV4ID0gaSArIDE7XG4gICAgICAgICAgICAgICAgdXBwZXJJbmRleCA9IGkgKyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcDEgPSBjb29yZHNbbG93ZXJJbmRleF07XG4gICAgICAgICAgICBwMiA9IGNvb3Jkc1ttaWRkbGVJbmRleF07XG4gICAgICAgICAgICBwMyA9IGNvb3Jkc1t1cHBlckluZGV4XTtcbiAgICAgICAgICAgIGFyZWEgKz0gKHJhZChwM1swXSkgLSByYWQocDFbMF0pKSAqIE1hdGguc2luKHJhZChwMlsxXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXJlYSA9IGFyZWEgKiBSQURJVVMgKiBSQURJVVMgLyAyO1xuICAgIH1cblxuICAgIHJldHVybiBhcmVhO1xufVxuXG5mdW5jdGlvbiByYWQoXykge1xuICAgIHJldHVybiBfICogTWF0aC5QSSAvIDE4MDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXJlYTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0B0dXJmL2FyZWEvbWFpbi5lcy5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///25\n");

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar DragMixin = {\n  _initDraggableLayer: function _initDraggableLayer() {\n    // temporary coord variable for delta calculation\n    this._tempDragCoord = null; // add CSS class\n\n    if (this._layer._path === undefined) {\n      var el = this._layer._renderer._container;\n    } else {\n      var el = this._layer._path;\n    }\n\n    console.log(this, el);\n    L.DomUtil.addClass(el, 'leaflet-pm-draggable');\n    this._originalMapDragState = this._layer._map.dragging._enabled; // can we reliably save the map's draggable state?\n    // (if the mouse up event happens outside the container, then the map can become undraggable)\n\n    this._safeToCacheDragState = true;\n\n    this._layer.on('mousedown', this._dragMixinOnMouseDown, this);\n  },\n  _dragMixinOnMouseUp: function _dragMixinOnMouseUp() {\n    var _this = this;\n\n    //const el = this._layer._path;\n    if (this._layer._path === undefined) {\n      var el = this._layer._renderer._container;\n    } else {\n      var el = this._layer._path;\n    } // re-enable map drag\n\n\n    if (this._originalMapDragState) {\n      this._layer._map.dragging.enable();\n    } // if mouseup event fired, it's safe to cache the map draggable state on the next mouse down\n\n\n    this._safeToCacheDragState = true; // clear up mousemove event\n\n    this._layer._map.off('mousemove', this._dragMixinOnMouseMove, this); // clear up mouseup event\n\n\n    this._layer.off('mouseup', this._dragMixinOnMouseUp, this); // if no drag happened, don't do anything\n\n\n    if (!this._dragging) {\n      return false;\n    } // show markers again\n\n\n    this._initMarkers(); // timeout to prevent click event after drag :-/\n    // TODO: do it better as soon as leaflet has a way to do it better :-)\n\n\n    window.setTimeout(function () {\n      // set state\n      _this._dragging = false;\n      L.DomUtil.removeClass(el, 'leaflet-pm-dragging'); // fire pm:dragend event\n\n      _this._layer.fire('pm:dragend'); // fire edit\n\n\n      _this._fireEdit();\n    }, 10);\n    return true;\n  },\n  _dragMixinOnMouseMove: function _dragMixinOnMouseMove(e) {\n    //const el = this._layer._path;\n    if (this._layer._path === undefined) {\n      var el = this._layer._renderer._container;\n    } else {\n      var el = this._layer._path;\n    }\n\n    if (!this._dragging) {\n      // set state\n      this._dragging = true;\n      L.DomUtil.addClass(el, 'leaflet-pm-dragging'); // bring it to front to prevent drag interception\n\n      this._layer.bringToFront(); // disbale map drag\n\n\n      if (this._originalMapDragState) {\n        this._layer._map.dragging.disable();\n      } // hide markers\n\n\n      this._markerGroup.clearLayers(); // fire pm:dragstart event\n\n\n      this._layer.fire('pm:dragstart');\n    }\n\n    this._onLayerDrag(e);\n  },\n  _dragMixinOnMouseDown: function _dragMixinOnMouseDown(e) {\n    // save current map dragging state\n    if (this._safeToCacheDragState) {\n      this._originalMapDragState = this._layer._map.dragging._enabled; // don't cache the state again until another mouse up is registered\n\n      this._safeToCacheDragState = false;\n    } // save for delta calculation\n\n\n    this._tempDragCoord = e.latlng;\n\n    this._layer.on('mouseup', this._dragMixinOnMouseUp, this); // listen to mousemove on map (instead of polygon),\n    // otherwise fast mouse movements stop the drag\n\n\n    this._layer._map.on('mousemove', this._dragMixinOnMouseMove, this);\n  },\n  dragging: function dragging() {\n    return this._dragging;\n  },\n  _onLayerDrag: function _onLayerDrag(e) {\n    // latLng of mouse event\n    var latlng = e.latlng; // delta coords (how far was dragged)\n\n    var deltaLatLng = {\n      lat: latlng.lat - this._tempDragCoord.lat,\n      lng: latlng.lng - this._tempDragCoord.lng\n    }; // move the coordinates by the delta\n\n    var moveCoords = function moveCoords(coords) {\n      return coords.map(function (currentLatLng) {\n        var c = {\n          lat: currentLatLng.lat + deltaLatLng.lat,\n          lng: currentLatLng.lng + deltaLatLng.lng\n        };\n        return c;\n      });\n    }; // create the new coordinates array\n\n\n    var newCoords;\n\n    if (this.isPolygon()) {\n      newCoords = this._layer._latlngs.map(moveCoords, this);\n    } else {\n      newCoords = moveCoords(this._layer._latlngs);\n    } // set new coordinates and redraw\n\n\n    this._layer.setLatLngs(newCoords).redraw(); // save current latlng for next delta calculation\n\n\n    this._tempDragCoord = latlng; // fire pm:dragstart event\n\n    this._layer.fire('pm:drag');\n  }\n};\nvar _default = DragMixin;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTWl4aW5zL0RyYWcuanM/MmZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBEcmFnTWl4aW4gPSB7XG4gIF9pbml0RHJhZ2dhYmxlTGF5ZXI6IGZ1bmN0aW9uIF9pbml0RHJhZ2dhYmxlTGF5ZXIoKSB7XG4gICAgLy8gdGVtcG9yYXJ5IGNvb3JkIHZhcmlhYmxlIGZvciBkZWx0YSBjYWxjdWxhdGlvblxuICAgIHRoaXMuX3RlbXBEcmFnQ29vcmQgPSBudWxsOyAvLyBhZGQgQ1NTIGNsYXNzXG5cbiAgICBpZiAodGhpcy5fbGF5ZXIuX3BhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGVsID0gdGhpcy5fbGF5ZXIuX3JlbmRlcmVyLl9jb250YWluZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKHRoaXMsIGVsKTtcbiAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWRyYWdnYWJsZScpO1xuICAgIHRoaXMuX29yaWdpbmFsTWFwRHJhZ1N0YXRlID0gdGhpcy5fbGF5ZXIuX21hcC5kcmFnZ2luZy5fZW5hYmxlZDsgLy8gY2FuIHdlIHJlbGlhYmx5IHNhdmUgdGhlIG1hcCdzIGRyYWdnYWJsZSBzdGF0ZT9cbiAgICAvLyAoaWYgdGhlIG1vdXNlIHVwIGV2ZW50IGhhcHBlbnMgb3V0c2lkZSB0aGUgY29udGFpbmVyLCB0aGVuIHRoZSBtYXAgY2FuIGJlY29tZSB1bmRyYWdnYWJsZSlcblxuICAgIHRoaXMuX3NhZmVUb0NhY2hlRHJhZ1N0YXRlID0gdHJ1ZTtcblxuICAgIHRoaXMuX2xheWVyLm9uKCdtb3VzZWRvd24nLCB0aGlzLl9kcmFnTWl4aW5Pbk1vdXNlRG93biwgdGhpcyk7XG4gIH0sXG4gIF9kcmFnTWl4aW5Pbk1vdXNlVXA6IGZ1bmN0aW9uIF9kcmFnTWl4aW5Pbk1vdXNlVXAoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vY29uc3QgZWwgPSB0aGlzLl9sYXllci5fcGF0aDtcbiAgICBpZiAodGhpcy5fbGF5ZXIuX3BhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGVsID0gdGhpcy5fbGF5ZXIuX3JlbmRlcmVyLl9jb250YWluZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuICAgIH0gLy8gcmUtZW5hYmxlIG1hcCBkcmFnXG5cblxuICAgIGlmICh0aGlzLl9vcmlnaW5hbE1hcERyYWdTdGF0ZSkge1xuICAgICAgdGhpcy5fbGF5ZXIuX21hcC5kcmFnZ2luZy5lbmFibGUoKTtcbiAgICB9IC8vIGlmIG1vdXNldXAgZXZlbnQgZmlyZWQsIGl0J3Mgc2FmZSB0byBjYWNoZSB0aGUgbWFwIGRyYWdnYWJsZSBzdGF0ZSBvbiB0aGUgbmV4dCBtb3VzZSBkb3duXG5cblxuICAgIHRoaXMuX3NhZmVUb0NhY2hlRHJhZ1N0YXRlID0gdHJ1ZTsgLy8gY2xlYXIgdXAgbW91c2Vtb3ZlIGV2ZW50XG5cbiAgICB0aGlzLl9sYXllci5fbWFwLm9mZignbW91c2Vtb3ZlJywgdGhpcy5fZHJhZ01peGluT25Nb3VzZU1vdmUsIHRoaXMpOyAvLyBjbGVhciB1cCBtb3VzZXVwIGV2ZW50XG5cblxuICAgIHRoaXMuX2xheWVyLm9mZignbW91c2V1cCcsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VVcCwgdGhpcyk7IC8vIGlmIG5vIGRyYWcgaGFwcGVuZWQsIGRvbid0IGRvIGFueXRoaW5nXG5cblxuICAgIGlmICghdGhpcy5fZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IC8vIHNob3cgbWFya2VycyBhZ2FpblxuXG5cbiAgICB0aGlzLl9pbml0TWFya2VycygpOyAvLyB0aW1lb3V0IHRvIHByZXZlbnQgY2xpY2sgZXZlbnQgYWZ0ZXIgZHJhZyA6LS9cbiAgICAvLyBUT0RPOiBkbyBpdCBiZXR0ZXIgYXMgc29vbiBhcyBsZWFmbGV0IGhhcyBhIHdheSB0byBkbyBpdCBiZXR0ZXIgOi0pXG5cblxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHNldCBzdGF0ZVxuICAgICAgX3RoaXMuX2RyYWdnaW5nID0gZmFsc2U7XG4gICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWRyYWdnaW5nJyk7IC8vIGZpcmUgcG06ZHJhZ2VuZCBldmVudFxuXG4gICAgICBfdGhpcy5fbGF5ZXIuZmlyZSgncG06ZHJhZ2VuZCcpOyAvLyBmaXJlIGVkaXRcblxuXG4gICAgICBfdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LCAxMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIF9kcmFnTWl4aW5Pbk1vdXNlTW92ZTogZnVuY3Rpb24gX2RyYWdNaXhpbk9uTW91c2VNb3ZlKGUpIHtcbiAgICAvL2NvbnN0IGVsID0gdGhpcy5fbGF5ZXIuX3BhdGg7XG4gICAgaWYgKHRoaXMuX2xheWVyLl9wYXRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9yZW5kZXJlci5fY29udGFpbmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZWwgPSB0aGlzLl9sYXllci5fcGF0aDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2RyYWdnaW5nKSB7XG4gICAgICAvLyBzZXQgc3RhdGVcbiAgICAgIHRoaXMuX2RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhlbCwgJ2xlYWZsZXQtcG0tZHJhZ2dpbmcnKTsgLy8gYnJpbmcgaXQgdG8gZnJvbnQgdG8gcHJldmVudCBkcmFnIGludGVyY2VwdGlvblxuXG4gICAgICB0aGlzLl9sYXllci5icmluZ1RvRnJvbnQoKTsgLy8gZGlzYmFsZSBtYXAgZHJhZ1xuXG5cbiAgICAgIGlmICh0aGlzLl9vcmlnaW5hbE1hcERyYWdTdGF0ZSkge1xuICAgICAgICB0aGlzLl9sYXllci5fbWFwLmRyYWdnaW5nLmRpc2FibGUoKTtcbiAgICAgIH0gLy8gaGlkZSBtYXJrZXJzXG5cblxuICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTsgLy8gZmlyZSBwbTpkcmFnc3RhcnQgZXZlbnRcblxuXG4gICAgICB0aGlzLl9sYXllci5maXJlKCdwbTpkcmFnc3RhcnQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9vbkxheWVyRHJhZyhlKTtcbiAgfSxcbiAgX2RyYWdNaXhpbk9uTW91c2VEb3duOiBmdW5jdGlvbiBfZHJhZ01peGluT25Nb3VzZURvd24oZSkge1xuICAgIC8vIHNhdmUgY3VycmVudCBtYXAgZHJhZ2dpbmcgc3RhdGVcbiAgICBpZiAodGhpcy5fc2FmZVRvQ2FjaGVEcmFnU3RhdGUpIHtcbiAgICAgIHRoaXMuX29yaWdpbmFsTWFwRHJhZ1N0YXRlID0gdGhpcy5fbGF5ZXIuX21hcC5kcmFnZ2luZy5fZW5hYmxlZDsgLy8gZG9uJ3QgY2FjaGUgdGhlIHN0YXRlIGFnYWluIHVudGlsIGFub3RoZXIgbW91c2UgdXAgaXMgcmVnaXN0ZXJlZFxuXG4gICAgICB0aGlzLl9zYWZlVG9DYWNoZURyYWdTdGF0ZSA9IGZhbHNlO1xuICAgIH0gLy8gc2F2ZSBmb3IgZGVsdGEgY2FsY3VsYXRpb25cblxuXG4gICAgdGhpcy5fdGVtcERyYWdDb29yZCA9IGUubGF0bG5nO1xuXG4gICAgdGhpcy5fbGF5ZXIub24oJ21vdXNldXAnLCB0aGlzLl9kcmFnTWl4aW5Pbk1vdXNlVXAsIHRoaXMpOyAvLyBsaXN0ZW4gdG8gbW91c2Vtb3ZlIG9uIG1hcCAoaW5zdGVhZCBvZiBwb2x5Z29uKSxcbiAgICAvLyBvdGhlcndpc2UgZmFzdCBtb3VzZSBtb3ZlbWVudHMgc3RvcCB0aGUgZHJhZ1xuXG5cbiAgICB0aGlzLl9sYXllci5fbWFwLm9uKCdtb3VzZW1vdmUnLCB0aGlzLl9kcmFnTWl4aW5Pbk1vdXNlTW92ZSwgdGhpcyk7XG4gIH0sXG4gIGRyYWdnaW5nOiBmdW5jdGlvbiBkcmFnZ2luZygpIHtcbiAgICByZXR1cm4gdGhpcy5fZHJhZ2dpbmc7XG4gIH0sXG4gIF9vbkxheWVyRHJhZzogZnVuY3Rpb24gX29uTGF5ZXJEcmFnKGUpIHtcbiAgICAvLyBsYXRMbmcgb2YgbW91c2UgZXZlbnRcbiAgICB2YXIgbGF0bG5nID0gZS5sYXRsbmc7IC8vIGRlbHRhIGNvb3JkcyAoaG93IGZhciB3YXMgZHJhZ2dlZClcblxuICAgIHZhciBkZWx0YUxhdExuZyA9IHtcbiAgICAgIGxhdDogbGF0bG5nLmxhdCAtIHRoaXMuX3RlbXBEcmFnQ29vcmQubGF0LFxuICAgICAgbG5nOiBsYXRsbmcubG5nIC0gdGhpcy5fdGVtcERyYWdDb29yZC5sbmdcbiAgICB9OyAvLyBtb3ZlIHRoZSBjb29yZGluYXRlcyBieSB0aGUgZGVsdGFcblxuICAgIHZhciBtb3ZlQ29vcmRzID0gZnVuY3Rpb24gbW92ZUNvb3Jkcyhjb29yZHMpIHtcbiAgICAgIHJldHVybiBjb29yZHMubWFwKGZ1bmN0aW9uIChjdXJyZW50TGF0TG5nKSB7XG4gICAgICAgIHZhciBjID0ge1xuICAgICAgICAgIGxhdDogY3VycmVudExhdExuZy5sYXQgKyBkZWx0YUxhdExuZy5sYXQsXG4gICAgICAgICAgbG5nOiBjdXJyZW50TGF0TG5nLmxuZyArIGRlbHRhTGF0TG5nLmxuZ1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYztcbiAgICAgIH0pO1xuICAgIH07IC8vIGNyZWF0ZSB0aGUgbmV3IGNvb3JkaW5hdGVzIGFycmF5XG5cblxuICAgIHZhciBuZXdDb29yZHM7XG5cbiAgICBpZiAodGhpcy5pc1BvbHlnb24oKSkge1xuICAgICAgbmV3Q29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3MubWFwKG1vdmVDb29yZHMsIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdDb29yZHMgPSBtb3ZlQ29vcmRzKHRoaXMuX2xheWVyLl9sYXRsbmdzKTtcbiAgICB9IC8vIHNldCBuZXcgY29vcmRpbmF0ZXMgYW5kIHJlZHJhd1xuXG5cbiAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKG5ld0Nvb3JkcykucmVkcmF3KCk7IC8vIHNhdmUgY3VycmVudCBsYXRsbmcgZm9yIG5leHQgZGVsdGEgY2FsY3VsYXRpb25cblxuXG4gICAgdGhpcy5fdGVtcERyYWdDb29yZCA9IGxhdGxuZzsgLy8gZmlyZSBwbTpkcmFnc3RhcnQgZXZlbnRcblxuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOmRyYWcnKTtcbiAgfVxufTtcbnZhciBfZGVmYXVsdCA9IERyYWdNaXhpbjtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL01peGlucy9EcmFnLmpzXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26\n");

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// LayerGroup doesn't inherit from L.PM.Edit because it's just calling L.PM.Edit.Poly\n// (which inherits from L.PM.Edit) for each layer,\n// so it's not really a parent class\n_LPM.default.LayerGroup = L.Class.extend({\n  initialize: function initialize(layerGroup) {\n    var _this = this;\n\n    this._layerGroup = layerGroup;\n    this._layers = this.findLayers(); // init all layers of the group\n\n    this._layers.forEach(function (layer) {\n      return _this._initLayer(layer);\n    }); // if a new layer is added to the group, reinitialize\n    // This only works for FeatureGroups, not LayerGroups\n    // https://github.com/Leaflet/Leaflet/issues/4861\n\n\n    this._layerGroup.on('layeradd', function (e) {\n      if (e.target._pmTempLayer) {\n        return;\n      }\n\n      _this._layers = _this.findLayers(); // init the newly added layer\n\n      if (e.layer.pm) {\n        _this._initLayer(e.layer);\n      } // if editing was already enabled for this group, enable it again\n      // so the new layers are enabled\n\n\n      if (e.target.pm.enabled()) {// this.enable(this.getOptions());\n      }\n    });\n  },\n  findLayers: function findLayers() {\n    // get all layers of the layer group\n    var layers = this._layerGroup.getLayers(); // filter out layers that don't have leaflet.pm\n\n\n    layers = layers.filter(function (layer) {\n      return !!layer.pm;\n    }); // filter out everything that's leaflet.pm specific temporary stuff\n\n    layers = layers.filter(function (layer) {\n      return !layer._pmTempLayer;\n    }); // return them\n\n    return layers;\n  },\n  _initLayer: function _initLayer(layer) {\n    var _this2 = this;\n\n    // available events\n    var availableEvents = ['pm:edit', 'pm:update', 'pm:remove', 'pm:dragstart', 'pm:drag', 'pm:dragend', 'pm:snap', 'pm:unsnap', 'pm:cut', 'pm:intersect', 'pm:raiseMarkers', 'pm:markerdragend', 'pm:markerdragstart', 'pm:vertexadded', 'pm:vertexremoved', 'pm:centerplaced']; // listen to the events of the layers in this group\n\n    availableEvents.forEach(function (event) {\n      layer.on(event, _this2._fireEvent, _this2);\n    }); // add reference for the group to each layer inside said group\n\n    layer.pm._layerGroup = this._layerGroup;\n  },\n  _fireEvent: function _fireEvent(e) {\n    this._layerGroup.fireEvent(e.type, e);\n  },\n  toggleEdit: function toggleEdit(options) {\n    this._options = options;\n\n    this._layers.forEach(function (layer) {\n      layer.pm.toggleEdit(options);\n    });\n  },\n  enable: function enable(options) {\n    this._options = options;\n\n    this._layers.forEach(function (layer) {\n      layer.pm.enable(options);\n    });\n  },\n  disable: function disable() {\n    this._layers.forEach(function (layer) {\n      layer.pm.disable();\n    });\n  },\n  enabled: function enabled() {\n    var enabled = this._layers.find(function (layer) {\n      return layer.pm.enabled();\n    });\n\n    return !!enabled;\n  },\n  dragging: function dragging() {\n    var dragging = this._layers.find(function (layer) {\n      return layer.pm.dragging();\n    });\n\n    return !!dragging;\n  },\n  getOptions: function getOptions() {\n    return this._options;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGF5ZXJHcm91cC5qcz9hMWYzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX0xQTSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTC5QTS5FZGl0XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy8gTGF5ZXJHcm91cCBkb2Vzbid0IGluaGVyaXQgZnJvbSBMLlBNLkVkaXQgYmVjYXVzZSBpdCdzIGp1c3QgY2FsbGluZyBMLlBNLkVkaXQuUG9seVxuLy8gKHdoaWNoIGluaGVyaXRzIGZyb20gTC5QTS5FZGl0KSBmb3IgZWFjaCBsYXllcixcbi8vIHNvIGl0J3Mgbm90IHJlYWxseSBhIHBhcmVudCBjbGFzc1xuX0xQTS5kZWZhdWx0LkxheWVyR3JvdXAgPSBMLkNsYXNzLmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobGF5ZXJHcm91cCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwID0gbGF5ZXJHcm91cDtcbiAgICB0aGlzLl9sYXllcnMgPSB0aGlzLmZpbmRMYXllcnMoKTsgLy8gaW5pdCBhbGwgbGF5ZXJzIG9mIHRoZSBncm91cFxuXG4gICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICByZXR1cm4gX3RoaXMuX2luaXRMYXllcihsYXllcik7XG4gICAgfSk7IC8vIGlmIGEgbmV3IGxheWVyIGlzIGFkZGVkIHRvIHRoZSBncm91cCwgcmVpbml0aWFsaXplXG4gICAgLy8gVGhpcyBvbmx5IHdvcmtzIGZvciBGZWF0dXJlR3JvdXBzLCBub3QgTGF5ZXJHcm91cHNcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTGVhZmxldC9MZWFmbGV0L2lzc3Vlcy80ODYxXG5cblxuICAgIHRoaXMuX2xheWVyR3JvdXAub24oJ2xheWVyYWRkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldC5fcG1UZW1wTGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5fbGF5ZXJzID0gX3RoaXMuZmluZExheWVycygpOyAvLyBpbml0IHRoZSBuZXdseSBhZGRlZCBsYXllclxuXG4gICAgICBpZiAoZS5sYXllci5wbSkge1xuICAgICAgICBfdGhpcy5faW5pdExheWVyKGUubGF5ZXIpO1xuICAgICAgfSAvLyBpZiBlZGl0aW5nIHdhcyBhbHJlYWR5IGVuYWJsZWQgZm9yIHRoaXMgZ3JvdXAsIGVuYWJsZSBpdCBhZ2FpblxuICAgICAgLy8gc28gdGhlIG5ldyBsYXllcnMgYXJlIGVuYWJsZWRcblxuXG4gICAgICBpZiAoZS50YXJnZXQucG0uZW5hYmxlZCgpKSB7Ly8gdGhpcy5lbmFibGUodGhpcy5nZXRPcHRpb25zKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBmaW5kTGF5ZXJzOiBmdW5jdGlvbiBmaW5kTGF5ZXJzKCkge1xuICAgIC8vIGdldCBhbGwgbGF5ZXJzIG9mIHRoZSBsYXllciBncm91cFxuICAgIHZhciBsYXllcnMgPSB0aGlzLl9sYXllckdyb3VwLmdldExheWVycygpOyAvLyBmaWx0ZXIgb3V0IGxheWVycyB0aGF0IGRvbid0IGhhdmUgbGVhZmxldC5wbVxuXG5cbiAgICBsYXllcnMgPSBsYXllcnMuZmlsdGVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgcmV0dXJuICEhbGF5ZXIucG07XG4gICAgfSk7IC8vIGZpbHRlciBvdXQgZXZlcnl0aGluZyB0aGF0J3MgbGVhZmxldC5wbSBzcGVjaWZpYyB0ZW1wb3Jhcnkgc3R1ZmZcblxuICAgIGxheWVycyA9IGxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICByZXR1cm4gIWxheWVyLl9wbVRlbXBMYXllcjtcbiAgICB9KTsgLy8gcmV0dXJuIHRoZW1cblxuICAgIHJldHVybiBsYXllcnM7XG4gIH0sXG4gIF9pbml0TGF5ZXI6IGZ1bmN0aW9uIF9pbml0TGF5ZXIobGF5ZXIpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIC8vIGF2YWlsYWJsZSBldmVudHNcbiAgICB2YXIgYXZhaWxhYmxlRXZlbnRzID0gWydwbTplZGl0JywgJ3BtOnVwZGF0ZScsICdwbTpyZW1vdmUnLCAncG06ZHJhZ3N0YXJ0JywgJ3BtOmRyYWcnLCAncG06ZHJhZ2VuZCcsICdwbTpzbmFwJywgJ3BtOnVuc25hcCcsICdwbTpjdXQnLCAncG06aW50ZXJzZWN0JywgJ3BtOnJhaXNlTWFya2VycycsICdwbTptYXJrZXJkcmFnZW5kJywgJ3BtOm1hcmtlcmRyYWdzdGFydCcsICdwbTp2ZXJ0ZXhhZGRlZCcsICdwbTp2ZXJ0ZXhyZW1vdmVkJywgJ3BtOmNlbnRlcnBsYWNlZCddOyAvLyBsaXN0ZW4gdG8gdGhlIGV2ZW50cyBvZiB0aGUgbGF5ZXJzIGluIHRoaXMgZ3JvdXBcblxuICAgIGF2YWlsYWJsZUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgbGF5ZXIub24oZXZlbnQsIF90aGlzMi5fZmlyZUV2ZW50LCBfdGhpczIpO1xuICAgIH0pOyAvLyBhZGQgcmVmZXJlbmNlIGZvciB0aGUgZ3JvdXAgdG8gZWFjaCBsYXllciBpbnNpZGUgc2FpZCBncm91cFxuXG4gICAgbGF5ZXIucG0uX2xheWVyR3JvdXAgPSB0aGlzLl9sYXllckdyb3VwO1xuICB9LFxuICBfZmlyZUV2ZW50OiBmdW5jdGlvbiBfZmlyZUV2ZW50KGUpIHtcbiAgICB0aGlzLl9sYXllckdyb3VwLmZpcmVFdmVudChlLnR5cGUsIGUpO1xuICB9LFxuICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMuX2xheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgbGF5ZXIucG0udG9nZ2xlRWRpdChvcHRpb25zKTtcbiAgICB9KTtcbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBsYXllci5wbS5lbmFibGUob3B0aW9ucyk7XG4gICAgfSk7XG4gIH0sXG4gIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBsYXllci5wbS5kaXNhYmxlKCk7XG4gICAgfSk7XG4gIH0sXG4gIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgdmFyIGVuYWJsZWQgPSB0aGlzLl9sYXllcnMuZmluZChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIHJldHVybiBsYXllci5wbS5lbmFibGVkKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gISFlbmFibGVkO1xuICB9LFxuICBkcmFnZ2luZzogZnVuY3Rpb24gZHJhZ2dpbmcoKSB7XG4gICAgdmFyIGRyYWdnaW5nID0gdGhpcy5fbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICByZXR1cm4gbGF5ZXIucG0uZHJhZ2dpbmcoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAhIWRyYWdnaW5nO1xuICB9LFxuICBnZXRPcHRpb25zOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5MYXllckdyb3VwLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///27\n");

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Marker = _LPM.default.extend({\n  initialize: function initialize(layer) {\n    // layer is a marker in this case :-)\n    this._layer = layer;\n    this._enabled = false; // register dragend event e.g. to fire pm:edit\n\n    this._layer.on('dragend', this._onDragEnd, this);\n  },\n  toggleEdit: function toggleEdit(options) {\n    if (!this.enabled()) {\n      this.enable(options);\n    } else {\n      this.disable();\n    }\n  },\n  enable: function enable() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      draggable: true,\n      snappable: true\n    };\n    this.options = options;\n    this._map = this._layer._map;\n\n    if (this.enabled()) {\n      return;\n    }\n\n    this._enabled = true; // enable removal for the marker\n\n    this._layer.on('contextmenu', this._removeMarker, this); // enable dragging and removal for the marker\n\n\n    if (this.options.draggable) {\n      this._layer.dragging.enable();\n    } // enable snapping\n\n\n    if (this.options.snappable) {\n      this._initSnappableMarkers();\n    }\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  disable: function disable() {\n    this._enabled = false; // disable dragging and removal for the marker\n\n    this._layer.dragging.disable();\n\n    this._layer.off('contextmenu', this._removeMarker, this);\n\n    if (this._layerEdited) {\n      this._layer.fire('pm:update', {});\n    }\n\n    this._layerEdited = false;\n  },\n  _removeMarker: function _removeMarker(e) {\n    var marker = e.target;\n    marker.remove();\n    marker.fire('pm:remove');\n  },\n  _onDragEnd: function _onDragEnd(e) {\n    var marker = e.target; // fire the pm:edit event and pass shape and marker\n\n    marker.fire('pm:edit');\n    this._layerEdited = true;\n  },\n  // overwrite initSnappableMarkers from Snapping.js Mixin\n  _initSnappableMarkers: function _initSnappableMarkers() {\n    var marker = this._layer;\n    this.options.snapDistance = this.options.snapDistance || 30;\n    marker.off('drag', this._handleSnapping, this);\n    marker.on('drag', this._handleSnapping, this);\n    marker.off('dragend', this._cleanupSnapping, this);\n    marker.on('dragend', this._cleanupSnapping, this);\n    marker.off('pm:dragstart', this._unsnap, this);\n    marker.on('pm:dragstart', this._unsnap, this);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTWFya2VyLmpzP2QwOTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkVkaXRcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNLmRlZmF1bHQuTWFya2VyID0gX0xQTS5kZWZhdWx0LmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobGF5ZXIpIHtcbiAgICAvLyBsYXllciBpcyBhIG1hcmtlciBpbiB0aGlzIGNhc2UgOi0pXG4gICAgdGhpcy5fbGF5ZXIgPSBsYXllcjtcbiAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7IC8vIHJlZ2lzdGVyIGRyYWdlbmQgZXZlbnQgZS5nLiB0byBmaXJlIHBtOmVkaXRcblxuICAgIHRoaXMuX2xheWVyLm9uKCdkcmFnZW5kJywgdGhpcy5fb25EcmFnRW5kLCB0aGlzKTtcbiAgfSxcbiAgdG9nZ2xlRWRpdDogZnVuY3Rpb24gdG9nZ2xlRWRpdChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH1cbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHtcbiAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgIHNuYXBwYWJsZTogdHJ1ZVxuICAgIH07XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl9tYXAgPSB0aGlzLl9sYXllci5fbWFwO1xuXG4gICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7IC8vIGVuYWJsZSByZW1vdmFsIGZvciB0aGUgbWFya2VyXG5cbiAgICB0aGlzLl9sYXllci5vbignY29udGV4dG1lbnUnLCB0aGlzLl9yZW1vdmVNYXJrZXIsIHRoaXMpOyAvLyBlbmFibGUgZHJhZ2dpbmcgYW5kIHJlbW92YWwgZm9yIHRoZSBtYXJrZXJcblxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5kcmFnZ2FibGUpIHtcbiAgICAgIHRoaXMuX2xheWVyLmRyYWdnaW5nLmVuYWJsZSgpO1xuICAgIH0gLy8gZW5hYmxlIHNuYXBwaW5nXG5cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgIH1cbiAgfSxcbiAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgfSxcbiAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7IC8vIGRpc2FibGUgZHJhZ2dpbmcgYW5kIHJlbW92YWwgZm9yIHRoZSBtYXJrZXJcblxuICAgIHRoaXMuX2xheWVyLmRyYWdnaW5nLmRpc2FibGUoKTtcblxuICAgIHRoaXMuX2xheWVyLm9mZignY29udGV4dG1lbnUnLCB0aGlzLl9yZW1vdmVNYXJrZXIsIHRoaXMpO1xuXG4gICAgaWYgKHRoaXMuX2xheWVyRWRpdGVkKSB7XG4gICAgICB0aGlzLl9sYXllci5maXJlKCdwbTp1cGRhdGUnLCB7fSk7XG4gICAgfVxuXG4gICAgdGhpcy5fbGF5ZXJFZGl0ZWQgPSBmYWxzZTtcbiAgfSxcbiAgX3JlbW92ZU1hcmtlcjogZnVuY3Rpb24gX3JlbW92ZU1hcmtlcihlKSB7XG4gICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuICAgIG1hcmtlci5yZW1vdmUoKTtcbiAgICBtYXJrZXIuZmlyZSgncG06cmVtb3ZlJyk7XG4gIH0sXG4gIF9vbkRyYWdFbmQ6IGZ1bmN0aW9uIF9vbkRyYWdFbmQoZSkge1xuICAgIHZhciBtYXJrZXIgPSBlLnRhcmdldDsgLy8gZmlyZSB0aGUgcG06ZWRpdCBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbWFya2VyXG5cbiAgICBtYXJrZXIuZmlyZSgncG06ZWRpdCcpO1xuICAgIHRoaXMuX2xheWVyRWRpdGVkID0gdHJ1ZTtcbiAgfSxcbiAgLy8gb3ZlcndyaXRlIGluaXRTbmFwcGFibGVNYXJrZXJzIGZyb20gU25hcHBpbmcuanMgTWl4aW5cbiAgX2luaXRTbmFwcGFibGVNYXJrZXJzOiBmdW5jdGlvbiBfaW5pdFNuYXBwYWJsZU1hcmtlcnMoKSB7XG4gICAgdmFyIG1hcmtlciA9IHRoaXMuX2xheWVyO1xuICAgIHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2UgPSB0aGlzLm9wdGlvbnMuc25hcERpc3RhbmNlIHx8IDMwO1xuICAgIG1hcmtlci5vZmYoJ2RyYWcnLCB0aGlzLl9oYW5kbGVTbmFwcGluZywgdGhpcyk7XG4gICAgbWFya2VyLm9uKCdkcmFnJywgdGhpcy5faGFuZGxlU25hcHBpbmcsIHRoaXMpO1xuICAgIG1hcmtlci5vZmYoJ2RyYWdlbmQnLCB0aGlzLl9jbGVhbnVwU25hcHBpbmcsIHRoaXMpO1xuICAgIG1hcmtlci5vbignZHJhZ2VuZCcsIHRoaXMuX2NsZWFudXBTbmFwcGluZywgdGhpcyk7XG4gICAgbWFya2VyLm9mZigncG06ZHJhZ3N0YXJ0JywgdGhpcy5fdW5zbmFwLCB0aGlzKTtcbiAgICBtYXJrZXIub24oJ3BtOmRyYWdzdGFydCcsIHRoaXMuX3Vuc25hcCwgdGhpcyk7XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0Lk1hcmtlci5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///28\n");

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _kinks = _interopRequireDefault(__webpack_require__(6));\n\nvar _LPM = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Line = _LPM.default.extend({\n  initialize: function initialize(layer) {\n    this._layer = layer;\n    this._enabled = false;\n  },\n  toggleEdit: function toggleEdit(options) {\n    if (!this.enabled()) {\n      this.enable(options);\n    } else {\n      this.disable();\n    }\n  },\n  enable: function enable(options) {\n    L.Util.setOptions(this, options);\n    this._map = this._layer._map; // cancel when map isn't available, this happens when the polygon is removed before this fires\n\n    if (!this._map) {\n      return;\n    }\n\n    if (!this.enabled()) {\n      // if it was already enabled, disable first\n      // we don't block enabling again because new options might be passed\n      this.disable();\n    } // change state\n\n\n    this._enabled = true; // init markers\n\n    this._initMarkers(); // if polygon gets removed from map, disable edit mode\n\n\n    this._layer.on('remove', this._onLayerRemove, this);\n\n    if (!this.options.allowSelfIntersection) {\n      this._layer.on('pm:vertexremoved', this._handleSelfIntersectionOnVertexRemoval, this);\n    }\n\n    if (this.options.draggable) {\n      this._initDraggableLayer();\n    }\n\n    if (!this.options.allowSelfIntersection) {\n      this._handleLayerStyle();\n    }\n  },\n  _onLayerRemove: function _onLayerRemove(e) {\n    this.disable(e.target);\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  disable: function disable() {\n    var poly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._layer;\n\n    // if it's not enabled, it doesn't need to be disabled\n    if (!this.enabled()) {\n      return false;\n    } // prevent disabling if polygon is being dragged\n\n\n    if (poly.pm._dragging) {\n      return false;\n    }\n\n    poly.pm._enabled = false;\n\n    poly.pm._markerGroup.clearLayers(); // clean up draggable\n\n\n    poly.off('mousedown');\n    poly.off('mouseup'); // remove onRemove listener\n\n    this._layer.off('remove', this._onLayerRemove);\n\n    if (!this.options.allowSelfIntersection) {\n      this._layer.off('pm:vertexremoved', this._handleSelfIntersectionOnVertexRemoval);\n    } // remove draggable class\n    //const el = poly._path;\n\n\n    if (poly._path === undefined) {\n      var el = this._layer._renderer._container;\n    } else {\n      var el = poly._path;\n    }\n\n    L.DomUtil.removeClass(el, 'leaflet-pm-draggable'); // remove invalid class if layer has self intersection\n\n    if (this.hasSelfIntersection()) {\n      L.DomUtil.removeClass(el, 'leaflet-pm-invalid');\n    }\n\n    if (this._layerEdited) {\n      this._layer.fire('pm:update', {});\n    }\n\n    this._layerEdited = false;\n    return true;\n  },\n  hasSelfIntersection: function hasSelfIntersection() {\n    // check for self intersection of the layer and return true/false\n    var selfIntersection = (0, _kinks.default)(this._layer.toGeoJSON());\n    return selfIntersection.features.length > 0;\n  },\n  _handleSelfIntersectionOnVertexRemoval: function _handleSelfIntersectionOnVertexRemoval() {\n    // check for selfintersection again (mainly to reset the style)\n    this._handleLayerStyle(true);\n\n    if (this.hasSelfIntersection()) {\n      // reset coordinates\n      this._layer.setLatLngs(this._coordsBeforeEdit);\n\n      this._coordsBeforeEdit = null; // re-enable markers for the new coords\n\n      this._initMarkers();\n    }\n  },\n  _handleLayerStyle: function _handleLayerStyle(flash) {\n    //const el = this._layer._path;\n    if (this._layer._path === undefined) {\n      var el = this._layer._renderer._container;\n    } else {\n      var el = this._layer._path;\n    }\n\n    if (this.hasSelfIntersection()) {\n      if (L.DomUtil.hasClass(el, 'leaflet-pm-invalid')) {\n        return;\n      } // if it does self-intersect, mark or flash it red\n\n\n      if (flash) {\n        L.DomUtil.addClass(el, 'leaflet-pm-invalid');\n        window.setTimeout(function () {\n          L.DomUtil.removeClass(el, 'leaflet-pm-invalid');\n        }, 200);\n      } else {\n        L.DomUtil.addClass(el, 'leaflet-pm-invalid');\n      } // fire intersect event\n\n\n      this._layer.fire('pm:intersect', {\n        intersection: (0, _kinks.default)(this._layer.toGeoJSON())\n      });\n    } else {\n      // if not, reset the style to the default color\n      L.DomUtil.removeClass(el, 'leaflet-pm-invalid');\n    }\n  },\n  _initMarkers: function _initMarkers() {\n    var _this = this;\n\n    var map = this._map;\n\n    var coords = this._layer.getLatLngs(); // cleanup old ones first\n\n\n    if (this._markerGroup) {\n      this._markerGroup.clearLayers();\n    } // add markerGroup to map, markerGroup includes regular and middle markers\n\n\n    this._markerGroup = new L.LayerGroup();\n    this._markerGroup._pmTempLayer = true;\n    map.addLayer(this._markerGroup); // handle coord-rings (outer, inner, etc)\n\n    var handleRing = function handleRing(coordsArr) {\n      // the marker array, it includes only the markers of vertexes (no middle markers)\n      var ringArr = coordsArr.map(_this._createMarker, _this); // create small markers in the middle of the regular markers\n\n      coordsArr.map(function (v, k) {\n        var nextIndex;\n\n        if (_this.isPolygon()) {\n          nextIndex = (k + 1) % coordsArr.length;\n        } else {\n          nextIndex = k + 1;\n        }\n\n        return _this._createMiddleMarker(ringArr[k], ringArr[nextIndex]);\n      });\n      return ringArr;\n    };\n\n    this._markers = [];\n\n    if (this.isPolygon()) {\n      // coords is a multidimansional array, handle all rings\n      this._markers = coords.map(handleRing, this);\n    } else {\n      // coords is one dimensional, handle the ring\n      this._markers = handleRing(coords);\n    }\n\n    if (this.options.snappable) {\n      this._initSnappableMarkers();\n    }\n  },\n  // creates initial markers for coordinates\n  _createMarker: function _createMarker(latlng) {\n    var marker = new L.Marker(latlng, {\n      draggable: true,\n      icon: L.divIcon({\n        className: 'marker-icon'\n      })\n    });\n    marker._pmTempLayer = true;\n    marker.on('dragstart', this._onMarkerDragStart, this);\n    marker.on('move', this._onMarkerDrag, this);\n    marker.on('dragend', this._onMarkerDragEnd, this);\n    marker.on('contextmenu', this._removeMarker, this);\n\n    this._markerGroup.addLayer(marker);\n\n    return marker;\n  },\n  // creates the middle markes between coordinates\n  _createMiddleMarker: function _createMiddleMarker(leftM, rightM) {\n    var _this2 = this;\n\n    // cancel if there are no two markers\n    if (!leftM || !rightM) {\n      return false;\n    }\n\n    var latlng = this._calcMiddleLatLng(leftM.getLatLng(), rightM.getLatLng());\n\n    var middleMarker = this._createMarker(latlng);\n\n    var middleIcon = L.divIcon({\n      className: 'marker-icon marker-icon-middle'\n    });\n    middleMarker.setIcon(middleIcon); // save reference to this middle markers on the neighboor regular markers\n\n    leftM._middleMarkerNext = middleMarker;\n    rightM._middleMarkerPrev = middleMarker;\n    middleMarker.on('click', function () {\n      // TODO: move the next two lines inside _addMarker() as soon as\n      // https://github.com/Leaflet/Leaflet/issues/4484\n      // is fixed\n      var icon = L.divIcon({\n        className: 'marker-icon'\n      });\n      middleMarker.setIcon(icon);\n\n      _this2._addMarker(middleMarker, leftM, rightM);\n    });\n    middleMarker.on('movestart', function () {\n      // TODO: This is a workaround. Remove the moveend listener and\n      // callback as soon as this is fixed:\n      // https://github.com/Leaflet/Leaflet/issues/4484\n      middleMarker.on('moveend', function () {\n        var icon = L.divIcon({\n          className: 'marker-icon'\n        });\n        middleMarker.setIcon(icon);\n        middleMarker.off('moveend');\n      });\n\n      _this2._addMarker(middleMarker, leftM, rightM);\n    });\n    return middleMarker;\n  },\n  // adds a new marker from a middlemarker\n  _addMarker: function _addMarker(newM, leftM, rightM) {\n    // first, make this middlemarker a regular marker\n    newM.off('movestart');\n    newM.off('click'); // now, create the polygon coordinate point for that marker\n    // and push into marker array\n    // and associate polygon coordinate with marker coordinate\n\n    var latlng = newM.getLatLng();\n    var coords = this._layer._latlngs;\n\n    var _findMarkerIndex = this.findMarkerIndex(this._markers, rightM),\n        ringIndex = _findMarkerIndex.ringIndex,\n        index = _findMarkerIndex.index; // define the coordsRing that is edited\n\n\n    var coordsRing = ringIndex > -1 ? coords[ringIndex] : coords; // define the markers array that is edited\n\n    var markerArr = ringIndex > -1 ? this._markers[ringIndex] : this._markers; // add coordinate to coordinate array\n\n    coordsRing.splice(index, 0, latlng); // add marker to marker array\n\n    markerArr.splice(index, 0, newM); // set new latlngs to update polygon\n\n    this._layer.setLatLngs(coords); // create the new middlemarkers\n\n\n    this._createMiddleMarker(leftM, newM);\n\n    this._createMiddleMarker(newM, rightM); // fire edit event\n\n\n    this._fireEdit();\n\n    this._layer.fire('pm:vertexadded', {\n      layer: this._layer,\n      marker: newM,\n      index: index,\n      ringIndex: ringIndex // TODO: maybe add latlng as well?\n\n    });\n\n    if (this.options.snappable) {\n      this._initSnappableMarkers();\n    }\n  },\n  _removeMarker: function _removeMarker(e) {\n    // if self intersection isn't allowed, save the coords upon dragstart\n    // in case we need to reset the layer\n    if (!this.options.allowSelfIntersection) {\n      var c = this._layer.getLatLngs();\n\n      this._coordsBeforeEdit = JSON.parse(JSON.stringify(c));\n    } // the marker that should be removed\n\n\n    var marker = e.target; // coords of the layer\n\n    var coords = this._layer.getLatLngs(); // find the coord ring index and index of the marker\n\n\n    var _findMarkerIndex2 = this.findMarkerIndex(this._markers, marker),\n        ringIndex = _findMarkerIndex2.ringIndex,\n        index = _findMarkerIndex2.index; // define the coordsRing that is edited\n\n\n    var coordsRing = ringIndex > -1 ? coords[ringIndex] : coords; // define the markers array that is edited\n\n    var markerArr = ringIndex > -1 ? this._markers[ringIndex] : this._markers; // only continue if this is NOT a middle marker (those can't be deleted)\n\n    var isMiddleMarker = this.findMarkerIndex(this._markers, marker).index === -1;\n\n    if (isMiddleMarker) {\n      return;\n    } // remove coordinate\n\n\n    coordsRing.splice(index, 1); // set new latlngs to the polygon\n\n    this._layer.setLatLngs(coords); // if the ring of the poly has no coordinates left, remove the ring\n\n\n    if (coordsRing.length <= 1) {\n      // remove coords ring\n      coords.splice(ringIndex, 1); // set new coords\n\n      this._layer.setLatLngs(coords); // re-enable editing so unnecessary markers are removed\n      // TODO: kind of an ugly workaround maybe do it better?\n\n\n      this.disable();\n      this.enable(this.options);\n    } // if no coords are left, remove the layer\n\n\n    if (coords.length < 1) {\n      this._layer.remove();\n    } // now handle the middle markers\n    // remove the marker and the middlemarkers next to it from the map\n\n\n    if (marker._middleMarkerPrev) {\n      this._markerGroup.removeLayer(marker._middleMarkerPrev);\n    }\n\n    if (marker._middleMarkerNext) {\n      this._markerGroup.removeLayer(marker._middleMarkerNext);\n    } // remove the marker from the map\n\n\n    this._markerGroup.removeLayer(marker);\n\n    var rightMarkerIndex;\n    var leftMarkerIndex;\n\n    if (this.isPolygon()) {\n      // find neighbor marker-indexes\n      rightMarkerIndex = (index + 1) % markerArr.length;\n      leftMarkerIndex = (index + (markerArr.length - 1)) % markerArr.length;\n    } else {\n      // find neighbor marker-indexes\n      leftMarkerIndex = index - 1 < 0 ? undefined : index - 1;\n      rightMarkerIndex = index + 1 >= markerArr.length ? undefined : index + 1;\n    } // don't create middlemarkers if there is only one marker left\n\n\n    if (rightMarkerIndex !== leftMarkerIndex) {\n      var leftM = markerArr[leftMarkerIndex];\n      var rightM = markerArr[rightMarkerIndex];\n\n      this._createMiddleMarker(leftM, rightM);\n    } // remove the marker from the markers array\n\n\n    markerArr.splice(index, 1); // fire edit event\n\n    this._fireEdit(); // fire vertex removal event\n\n\n    this._layer.fire('pm:vertexremoved', {\n      layer: this._layer,\n      marker: marker,\n      index: index,\n      ringIndex: ringIndex // TODO: maybe add latlng as well?\n\n    });\n  },\n  findMarkerIndex: function findMarkerIndex(markers, marker) {\n    // find the index of a marker in the markers array and returns the parent index as well in case of a multidimensional array\n    // Multidimensional arrays would mean the layer has multiple coordinate rings (like holes in polygons)\n    var index;\n    var ringIndex;\n\n    if (!this.isPolygon()) {\n      index = markers.findIndex(function (m) {\n        return marker._leaflet_id === m._leaflet_id;\n      });\n    } else {\n      ringIndex = markers.findIndex(function (inner) {\n        index = inner.findIndex(function (m) {\n          return marker._leaflet_id === m._leaflet_id;\n        });\n        return index > -1;\n      });\n    }\n\n    return {\n      index: index,\n      ringIndex: ringIndex\n    };\n  },\n  updatePolygonCoordsFromMarkerDrag: function updatePolygonCoordsFromMarkerDrag(marker) {\n    // update polygon coords\n    var coords = this._layer.getLatLngs();\n\n    var _findMarkerIndex3 = this.findMarkerIndex(this._markers, marker),\n        ringIndex = _findMarkerIndex3.ringIndex,\n        index = _findMarkerIndex3.index;\n\n    var ring = ringIndex > -1 ? coords[ringIndex] : coords;\n    ring.splice(index, 1, marker.getLatLng()); // set new coords on layer\n\n    this._layer.setLatLngs(coords).redraw();\n  },\n  _onMarkerDrag: function _onMarkerDrag(e) {\n    // dragged marker\n    var marker = e.target; // only continue if this is NOT a middle marker\n\n    var isMiddleMarker = this.findMarkerIndex(this._markers, marker).index === -1;\n\n    if (isMiddleMarker) {\n      return;\n    }\n\n    this.updatePolygonCoordsFromMarkerDrag(marker); // the dragged markers neighbors\n\n    var _findMarkerIndex4 = this.findMarkerIndex(this._markers, marker),\n        ringIndex = _findMarkerIndex4.ringIndex,\n        index = _findMarkerIndex4.index;\n\n    var markerArr = ringIndex > -1 ? this._markers[ringIndex] : this._markers; // find the indizes of next and previous markers\n\n    var nextMarkerIndex = (index + 1) % markerArr.length;\n    var prevMarkerIndex = (index + markerArr.length - 1) % markerArr.length; // update middle markers on the left and right\n    // be aware that \"next\" and \"prev\" might be interchanged, depending on the geojson array\n\n    var markerLatLng = marker.getLatLng(); // get latlng of prev and next marker\n\n    var prevMarkerLatLng = markerArr[prevMarkerIndex].getLatLng();\n    var nextMarkerLatLng = markerArr[nextMarkerIndex].getLatLng();\n\n    if (marker._middleMarkerNext) {\n      var middleMarkerNextLatLng = this._calcMiddleLatLng(markerLatLng, nextMarkerLatLng);\n\n      marker._middleMarkerNext.setLatLng(middleMarkerNextLatLng);\n    }\n\n    if (marker._middleMarkerPrev) {\n      var middleMarkerPrevLatLng = this._calcMiddleLatLng(markerLatLng, prevMarkerLatLng);\n\n      marker._middleMarkerPrev.setLatLng(middleMarkerPrevLatLng);\n    } // if self intersection is not allowed, handle it\n\n\n    if (!this.options.allowSelfIntersection) {\n      this._handleLayerStyle();\n    }\n  },\n  _onMarkerDragEnd: function _onMarkerDragEnd(e) {\n    var marker = e.target;\n\n    var _findMarkerIndex5 = this.findMarkerIndex(this._markers, marker),\n        ringIndex = _findMarkerIndex5.ringIndex,\n        index = _findMarkerIndex5.index; // if self intersection is not allowed but this edit caused a self intersection,\n    // reset and cancel; do not fire events\n\n\n    if (!this.options.allowSelfIntersection && this.hasSelfIntersection()) {\n      // reset coordinates\n      this._layer.setLatLngs(this._coordsBeforeEdit);\n\n      this._coordsBeforeEdit = null; // re-enable markers for the new coords\n\n      this._initMarkers(); // check for selfintersection again (mainly to reset the style)\n\n\n      this._handleLayerStyle();\n\n      return;\n    }\n\n    this._layer.fire('pm:markerdragend', {\n      markerEvent: e,\n      ringIndex: ringIndex,\n      index: index\n    }); // fire edit event\n\n\n    this._fireEdit();\n  },\n  _onMarkerDragStart: function _onMarkerDragStart(e) {\n    var marker = e.target;\n\n    var _findMarkerIndex6 = this.findMarkerIndex(this._markers, marker),\n        ringIndex = _findMarkerIndex6.ringIndex,\n        index = _findMarkerIndex6.index;\n\n    this._layer.fire('pm:markerdragstart', {\n      markerEvent: e,\n      ringIndex: ringIndex,\n      index: index\n    }); // if self intersection isn't allowed, save the coords upon dragstart\n    // in case we need to reset the layer\n\n\n    if (!this.options.allowSelfIntersection) {\n      this._coordsBeforeEdit = this._layer.getLatLngs();\n    }\n  },\n  _fireEdit: function _fireEdit() {\n    // fire edit event\n    this._layerEdited = true;\n\n    this._layer.fire('pm:edit');\n  },\n  _calcMiddleLatLng: function _calcMiddleLatLng(latlng1, latlng2) {\n    // calculate the middle coordinates between two markers\n    // TODO: put this into a utils.js or something\n    var map = this._map;\n    var p1 = map.project(latlng1);\n    var p2 = map.project(latlng2);\n    var latlng = map.unproject(p1._add(p2)._divideBy(2));\n    return latlng;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGluZS5qcz85NDg2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2tpbmtzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQHR1cmYva2lua3NcIikpO1xuXG52YXIgX0xQTSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTC5QTS5FZGl0XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTS5kZWZhdWx0LkxpbmUgPSBfTFBNLmRlZmF1bHQuZXh0ZW5kKHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShsYXllcikge1xuICAgIHRoaXMuX2xheWVyID0gbGF5ZXI7XG4gICAgdGhpcy5fZW5hYmxlZCA9IGZhbHNlO1xuICB9LFxuICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLmVuYWJsZShvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfVxuICB9LFxuICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZShvcHRpb25zKSB7XG4gICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG4gICAgdGhpcy5fbWFwID0gdGhpcy5fbGF5ZXIuX21hcDsgLy8gY2FuY2VsIHdoZW4gbWFwIGlzbid0IGF2YWlsYWJsZSwgdGhpcyBoYXBwZW5zIHdoZW4gdGhlIHBvbHlnb24gaXMgcmVtb3ZlZCBiZWZvcmUgdGhpcyBmaXJlc1xuXG4gICAgaWYgKCF0aGlzLl9tYXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAvLyBpZiBpdCB3YXMgYWxyZWFkeSBlbmFibGVkLCBkaXNhYmxlIGZpcnN0XG4gICAgICAvLyB3ZSBkb24ndCBibG9jayBlbmFibGluZyBhZ2FpbiBiZWNhdXNlIG5ldyBvcHRpb25zIG1pZ2h0IGJlIHBhc3NlZFxuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfSAvLyBjaGFuZ2Ugc3RhdGVcblxuXG4gICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7IC8vIGluaXQgbWFya2Vyc1xuXG4gICAgdGhpcy5faW5pdE1hcmtlcnMoKTsgLy8gaWYgcG9seWdvbiBnZXRzIHJlbW92ZWQgZnJvbSBtYXAsIGRpc2FibGUgZWRpdCBtb2RlXG5cblxuICAgIHRoaXMuX2xheWVyLm9uKCdyZW1vdmUnLCB0aGlzLl9vbkxheWVyUmVtb3ZlLCB0aGlzKTtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmFsbG93U2VsZkludGVyc2VjdGlvbikge1xuICAgICAgdGhpcy5fbGF5ZXIub24oJ3BtOnZlcnRleHJlbW92ZWQnLCB0aGlzLl9oYW5kbGVTZWxmSW50ZXJzZWN0aW9uT25WZXJ0ZXhSZW1vdmFsLCB0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmRyYWdnYWJsZSkge1xuICAgICAgdGhpcy5faW5pdERyYWdnYWJsZUxheWVyKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuYWxsb3dTZWxmSW50ZXJzZWN0aW9uKSB7XG4gICAgICB0aGlzLl9oYW5kbGVMYXllclN0eWxlKCk7XG4gICAgfVxuICB9LFxuICBfb25MYXllclJlbW92ZTogZnVuY3Rpb24gX29uTGF5ZXJSZW1vdmUoZSkge1xuICAgIHRoaXMuZGlzYWJsZShlLnRhcmdldCk7XG4gIH0sXG4gIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gIH0sXG4gIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdmFyIHBvbHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuX2xheWVyO1xuXG4gICAgLy8gaWYgaXQncyBub3QgZW5hYmxlZCwgaXQgZG9lc24ndCBuZWVkIHRvIGJlIGRpc2FibGVkXG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gcHJldmVudCBkaXNhYmxpbmcgaWYgcG9seWdvbiBpcyBiZWluZyBkcmFnZ2VkXG5cblxuICAgIGlmIChwb2x5LnBtLl9kcmFnZ2luZykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHBvbHkucG0uX2VuYWJsZWQgPSBmYWxzZTtcblxuICAgIHBvbHkucG0uX21hcmtlckdyb3VwLmNsZWFyTGF5ZXJzKCk7IC8vIGNsZWFuIHVwIGRyYWdnYWJsZVxuXG5cbiAgICBwb2x5Lm9mZignbW91c2Vkb3duJyk7XG4gICAgcG9seS5vZmYoJ21vdXNldXAnKTsgLy8gcmVtb3ZlIG9uUmVtb3ZlIGxpc3RlbmVyXG5cbiAgICB0aGlzLl9sYXllci5vZmYoJ3JlbW92ZScsIHRoaXMuX29uTGF5ZXJSZW1vdmUpO1xuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuYWxsb3dTZWxmSW50ZXJzZWN0aW9uKSB7XG4gICAgICB0aGlzLl9sYXllci5vZmYoJ3BtOnZlcnRleHJlbW92ZWQnLCB0aGlzLl9oYW5kbGVTZWxmSW50ZXJzZWN0aW9uT25WZXJ0ZXhSZW1vdmFsKTtcbiAgICB9IC8vIHJlbW92ZSBkcmFnZ2FibGUgY2xhc3NcbiAgICAvL2NvbnN0IGVsID0gcG9seS5fcGF0aDtcblxuXG4gICAgaWYgKHBvbHkuX3BhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGVsID0gdGhpcy5fbGF5ZXIuX3JlbmRlcmVyLl9jb250YWluZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlbCA9IHBvbHkuX3BhdGg7XG4gICAgfVxuXG4gICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKGVsLCAnbGVhZmxldC1wbS1kcmFnZ2FibGUnKTsgLy8gcmVtb3ZlIGludmFsaWQgY2xhc3MgaWYgbGF5ZXIgaGFzIHNlbGYgaW50ZXJzZWN0aW9uXG5cbiAgICBpZiAodGhpcy5oYXNTZWxmSW50ZXJzZWN0aW9uKCkpIHtcbiAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0taW52YWxpZCcpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9sYXllckVkaXRlZCkge1xuICAgICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06dXBkYXRlJywge30pO1xuICAgIH1cblxuICAgIHRoaXMuX2xheWVyRWRpdGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGhhc1NlbGZJbnRlcnNlY3Rpb246IGZ1bmN0aW9uIGhhc1NlbGZJbnRlcnNlY3Rpb24oKSB7XG4gICAgLy8gY2hlY2sgZm9yIHNlbGYgaW50ZXJzZWN0aW9uIG9mIHRoZSBsYXllciBhbmQgcmV0dXJuIHRydWUvZmFsc2VcbiAgICB2YXIgc2VsZkludGVyc2VjdGlvbiA9ICgwLCBfa2lua3MuZGVmYXVsdCkodGhpcy5fbGF5ZXIudG9HZW9KU09OKCkpO1xuICAgIHJldHVybiBzZWxmSW50ZXJzZWN0aW9uLmZlYXR1cmVzLmxlbmd0aCA+IDA7XG4gIH0sXG4gIF9oYW5kbGVTZWxmSW50ZXJzZWN0aW9uT25WZXJ0ZXhSZW1vdmFsOiBmdW5jdGlvbiBfaGFuZGxlU2VsZkludGVyc2VjdGlvbk9uVmVydGV4UmVtb3ZhbCgpIHtcbiAgICAvLyBjaGVjayBmb3Igc2VsZmludGVyc2VjdGlvbiBhZ2FpbiAobWFpbmx5IHRvIHJlc2V0IHRoZSBzdHlsZSlcbiAgICB0aGlzLl9oYW5kbGVMYXllclN0eWxlKHRydWUpO1xuXG4gICAgaWYgKHRoaXMuaGFzU2VsZkludGVyc2VjdGlvbigpKSB7XG4gICAgICAvLyByZXNldCBjb29yZGluYXRlc1xuICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyh0aGlzLl9jb29yZHNCZWZvcmVFZGl0KTtcblxuICAgICAgdGhpcy5fY29vcmRzQmVmb3JlRWRpdCA9IG51bGw7IC8vIHJlLWVuYWJsZSBtYXJrZXJzIGZvciB0aGUgbmV3IGNvb3Jkc1xuXG4gICAgICB0aGlzLl9pbml0TWFya2VycygpO1xuICAgIH1cbiAgfSxcbiAgX2hhbmRsZUxheWVyU3R5bGU6IGZ1bmN0aW9uIF9oYW5kbGVMYXllclN0eWxlKGZsYXNoKSB7XG4gICAgLy9jb25zdCBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuICAgIGlmICh0aGlzLl9sYXllci5fcGF0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzLl9sYXllci5fcmVuZGVyZXIuX2NvbnRhaW5lcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVsID0gdGhpcy5fbGF5ZXIuX3BhdGg7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzU2VsZkludGVyc2VjdGlvbigpKSB7XG4gICAgICBpZiAoTC5Eb21VdGlsLmhhc0NsYXNzKGVsLCAnbGVhZmxldC1wbS1pbnZhbGlkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBpZiBpdCBkb2VzIHNlbGYtaW50ZXJzZWN0LCBtYXJrIG9yIGZsYXNoIGl0IHJlZFxuXG5cbiAgICAgIGlmIChmbGFzaCkge1xuICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWludmFsaWQnKTtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0taW52YWxpZCcpO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGVsLCAnbGVhZmxldC1wbS1pbnZhbGlkJyk7XG4gICAgICB9IC8vIGZpcmUgaW50ZXJzZWN0IGV2ZW50XG5cblxuICAgICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06aW50ZXJzZWN0Jywge1xuICAgICAgICBpbnRlcnNlY3Rpb246ICgwLCBfa2lua3MuZGVmYXVsdCkodGhpcy5fbGF5ZXIudG9HZW9KU09OKCkpXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgbm90LCByZXNldCB0aGUgc3R5bGUgdG8gdGhlIGRlZmF1bHQgY29sb3JcbiAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0taW52YWxpZCcpO1xuICAgIH1cbiAgfSxcbiAgX2luaXRNYXJrZXJzOiBmdW5jdGlvbiBfaW5pdE1hcmtlcnMoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpOyAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG5cblxuICAgIGlmICh0aGlzLl9tYXJrZXJHcm91cCkge1xuICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcbiAgICB9IC8vIGFkZCBtYXJrZXJHcm91cCB0byBtYXAsIG1hcmtlckdyb3VwIGluY2x1ZGVzIHJlZ3VsYXIgYW5kIG1pZGRsZSBtYXJrZXJzXG5cblxuICAgIHRoaXMuX21hcmtlckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgIHRoaXMuX21hcmtlckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgbWFwLmFkZExheWVyKHRoaXMuX21hcmtlckdyb3VwKTsgLy8gaGFuZGxlIGNvb3JkLXJpbmdzIChvdXRlciwgaW5uZXIsIGV0YylcblxuICAgIHZhciBoYW5kbGVSaW5nID0gZnVuY3Rpb24gaGFuZGxlUmluZyhjb29yZHNBcnIpIHtcbiAgICAgIC8vIHRoZSBtYXJrZXIgYXJyYXksIGl0IGluY2x1ZGVzIG9ubHkgdGhlIG1hcmtlcnMgb2YgdmVydGV4ZXMgKG5vIG1pZGRsZSBtYXJrZXJzKVxuICAgICAgdmFyIHJpbmdBcnIgPSBjb29yZHNBcnIubWFwKF90aGlzLl9jcmVhdGVNYXJrZXIsIF90aGlzKTsgLy8gY3JlYXRlIHNtYWxsIG1hcmtlcnMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcmVndWxhciBtYXJrZXJzXG5cbiAgICAgIGNvb3Jkc0Fyci5tYXAoZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgdmFyIG5leHRJbmRleDtcblxuICAgICAgICBpZiAoX3RoaXMuaXNQb2x5Z29uKCkpIHtcbiAgICAgICAgICBuZXh0SW5kZXggPSAoayArIDEpICUgY29vcmRzQXJyLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SW5kZXggPSBrICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKHJpbmdBcnJba10sIHJpbmdBcnJbbmV4dEluZGV4XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByaW5nQXJyO1xuICAgIH07XG5cbiAgICB0aGlzLl9tYXJrZXJzID0gW107XG5cbiAgICBpZiAodGhpcy5pc1BvbHlnb24oKSkge1xuICAgICAgLy8gY29vcmRzIGlzIGEgbXVsdGlkaW1hbnNpb25hbCBhcnJheSwgaGFuZGxlIGFsbCByaW5nc1xuICAgICAgdGhpcy5fbWFya2VycyA9IGNvb3Jkcy5tYXAoaGFuZGxlUmluZywgdGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvb3JkcyBpcyBvbmUgZGltZW5zaW9uYWwsIGhhbmRsZSB0aGUgcmluZ1xuICAgICAgdGhpcy5fbWFya2VycyA9IGhhbmRsZVJpbmcoY29vcmRzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgdGhpcy5faW5pdFNuYXBwYWJsZU1hcmtlcnMoKTtcbiAgICB9XG4gIH0sXG4gIC8vIGNyZWF0ZXMgaW5pdGlhbCBtYXJrZXJzIGZvciBjb29yZGluYXRlc1xuICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZykge1xuICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIobGF0bG5nLCB7XG4gICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbidcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgbWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgbWFya2VyLm9uKCdkcmFnc3RhcnQnLCB0aGlzLl9vbk1hcmtlckRyYWdTdGFydCwgdGhpcyk7XG4gICAgbWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fb25NYXJrZXJEcmFnLCB0aGlzKTtcbiAgICBtYXJrZXIub24oJ2RyYWdlbmQnLCB0aGlzLl9vbk1hcmtlckRyYWdFbmQsIHRoaXMpO1xuICAgIG1hcmtlci5vbignY29udGV4dG1lbnUnLCB0aGlzLl9yZW1vdmVNYXJrZXIsIHRoaXMpO1xuXG4gICAgdGhpcy5fbWFya2VyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgIHJldHVybiBtYXJrZXI7XG4gIH0sXG4gIC8vIGNyZWF0ZXMgdGhlIG1pZGRsZSBtYXJrZXMgYmV0d2VlbiBjb29yZGluYXRlc1xuICBfY3JlYXRlTWlkZGxlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCByaWdodE0pIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIC8vIGNhbmNlbCBpZiB0aGVyZSBhcmUgbm8gdHdvIG1hcmtlcnNcbiAgICBpZiAoIWxlZnRNIHx8ICFyaWdodE0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbGF0bG5nID0gdGhpcy5fY2FsY01pZGRsZUxhdExuZyhsZWZ0TS5nZXRMYXRMbmcoKSwgcmlnaHRNLmdldExhdExuZygpKTtcblxuICAgIHZhciBtaWRkbGVNYXJrZXIgPSB0aGlzLl9jcmVhdGVNYXJrZXIobGF0bG5nKTtcblxuICAgIHZhciBtaWRkbGVJY29uID0gTC5kaXZJY29uKHtcbiAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1pY29uIG1hcmtlci1pY29uLW1pZGRsZSdcbiAgICB9KTtcbiAgICBtaWRkbGVNYXJrZXIuc2V0SWNvbihtaWRkbGVJY29uKTsgLy8gc2F2ZSByZWZlcmVuY2UgdG8gdGhpcyBtaWRkbGUgbWFya2VycyBvbiB0aGUgbmVpZ2hib29yIHJlZ3VsYXIgbWFya2Vyc1xuXG4gICAgbGVmdE0uX21pZGRsZU1hcmtlck5leHQgPSBtaWRkbGVNYXJrZXI7XG4gICAgcmlnaHRNLl9taWRkbGVNYXJrZXJQcmV2ID0gbWlkZGxlTWFya2VyO1xuICAgIG1pZGRsZU1hcmtlci5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBUT0RPOiBtb3ZlIHRoZSBuZXh0IHR3byBsaW5lcyBpbnNpZGUgX2FkZE1hcmtlcigpIGFzIHNvb24gYXNcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9MZWFmbGV0L0xlYWZsZXQvaXNzdWVzLzQ0ODRcbiAgICAgIC8vIGlzIGZpeGVkXG4gICAgICB2YXIgaWNvbiA9IEwuZGl2SWNvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1pY29uJ1xuICAgICAgfSk7XG4gICAgICBtaWRkbGVNYXJrZXIuc2V0SWNvbihpY29uKTtcblxuICAgICAgX3RoaXMyLl9hZGRNYXJrZXIobWlkZGxlTWFya2VyLCBsZWZ0TSwgcmlnaHRNKTtcbiAgICB9KTtcbiAgICBtaWRkbGVNYXJrZXIub24oJ21vdmVzdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFRPRE86IFRoaXMgaXMgYSB3b3JrYXJvdW5kLiBSZW1vdmUgdGhlIG1vdmVlbmQgbGlzdGVuZXIgYW5kXG4gICAgICAvLyBjYWxsYmFjayBhcyBzb29uIGFzIHRoaXMgaXMgZml4ZWQ6XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTGVhZmxldC9MZWFmbGV0L2lzc3Vlcy80NDg0XG4gICAgICBtaWRkbGVNYXJrZXIub24oJ21vdmVlbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpY29uID0gTC5kaXZJY29uKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbidcbiAgICAgICAgfSk7XG4gICAgICAgIG1pZGRsZU1hcmtlci5zZXRJY29uKGljb24pO1xuICAgICAgICBtaWRkbGVNYXJrZXIub2ZmKCdtb3ZlZW5kJyk7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXMyLl9hZGRNYXJrZXIobWlkZGxlTWFya2VyLCBsZWZ0TSwgcmlnaHRNKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWlkZGxlTWFya2VyO1xuICB9LFxuICAvLyBhZGRzIGEgbmV3IG1hcmtlciBmcm9tIGEgbWlkZGxlbWFya2VyXG4gIF9hZGRNYXJrZXI6IGZ1bmN0aW9uIF9hZGRNYXJrZXIobmV3TSwgbGVmdE0sIHJpZ2h0TSkge1xuICAgIC8vIGZpcnN0LCBtYWtlIHRoaXMgbWlkZGxlbWFya2VyIGEgcmVndWxhciBtYXJrZXJcbiAgICBuZXdNLm9mZignbW92ZXN0YXJ0Jyk7XG4gICAgbmV3TS5vZmYoJ2NsaWNrJyk7IC8vIG5vdywgY3JlYXRlIHRoZSBwb2x5Z29uIGNvb3JkaW5hdGUgcG9pbnQgZm9yIHRoYXQgbWFya2VyXG4gICAgLy8gYW5kIHB1c2ggaW50byBtYXJrZXIgYXJyYXlcbiAgICAvLyBhbmQgYXNzb2NpYXRlIHBvbHlnb24gY29vcmRpbmF0ZSB3aXRoIG1hcmtlciBjb29yZGluYXRlXG5cbiAgICB2YXIgbGF0bG5nID0gbmV3TS5nZXRMYXRMbmcoKTtcbiAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3M7XG5cbiAgICB2YXIgX2ZpbmRNYXJrZXJJbmRleCA9IHRoaXMuZmluZE1hcmtlckluZGV4KHRoaXMuX21hcmtlcnMsIHJpZ2h0TSksXG4gICAgICAgIHJpbmdJbmRleCA9IF9maW5kTWFya2VySW5kZXgucmluZ0luZGV4LFxuICAgICAgICBpbmRleCA9IF9maW5kTWFya2VySW5kZXguaW5kZXg7IC8vIGRlZmluZSB0aGUgY29vcmRzUmluZyB0aGF0IGlzIGVkaXRlZFxuXG5cbiAgICB2YXIgY29vcmRzUmluZyA9IHJpbmdJbmRleCA+IC0xID8gY29vcmRzW3JpbmdJbmRleF0gOiBjb29yZHM7IC8vIGRlZmluZSB0aGUgbWFya2VycyBhcnJheSB0aGF0IGlzIGVkaXRlZFxuXG4gICAgdmFyIG1hcmtlckFyciA9IHJpbmdJbmRleCA+IC0xID8gdGhpcy5fbWFya2Vyc1tyaW5nSW5kZXhdIDogdGhpcy5fbWFya2VyczsgLy8gYWRkIGNvb3JkaW5hdGUgdG8gY29vcmRpbmF0ZSBhcnJheVxuXG4gICAgY29vcmRzUmluZy5zcGxpY2UoaW5kZXgsIDAsIGxhdGxuZyk7IC8vIGFkZCBtYXJrZXIgdG8gbWFya2VyIGFycmF5XG5cbiAgICBtYXJrZXJBcnIuc3BsaWNlKGluZGV4LCAwLCBuZXdNKTsgLy8gc2V0IG5ldyBsYXRsbmdzIHRvIHVwZGF0ZSBwb2x5Z29uXG5cbiAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3Jkcyk7IC8vIGNyZWF0ZSB0aGUgbmV3IG1pZGRsZW1hcmtlcnNcblxuXG4gICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCBuZXdNKTtcblxuICAgIHRoaXMuX2NyZWF0ZU1pZGRsZU1hcmtlcihuZXdNLCByaWdodE0pOyAvLyBmaXJlIGVkaXQgZXZlbnRcblxuXG4gICAgdGhpcy5fZmlyZUVkaXQoKTtcblxuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOnZlcnRleGFkZGVkJywge1xuICAgICAgbGF5ZXI6IHRoaXMuX2xheWVyLFxuICAgICAgbWFya2VyOiBuZXdNLFxuICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgcmluZ0luZGV4OiByaW5nSW5kZXggLy8gVE9ETzogbWF5YmUgYWRkIGxhdGxuZyBhcyB3ZWxsP1xuXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgdGhpcy5faW5pdFNuYXBwYWJsZU1hcmtlcnMoKTtcbiAgICB9XG4gIH0sXG4gIF9yZW1vdmVNYXJrZXI6IGZ1bmN0aW9uIF9yZW1vdmVNYXJrZXIoZSkge1xuICAgIC8vIGlmIHNlbGYgaW50ZXJzZWN0aW9uIGlzbid0IGFsbG93ZWQsIHNhdmUgdGhlIGNvb3JkcyB1cG9uIGRyYWdzdGFydFxuICAgIC8vIGluIGNhc2Ugd2UgbmVlZCB0byByZXNldCB0aGUgbGF5ZXJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5hbGxvd1NlbGZJbnRlcnNlY3Rpb24pIHtcbiAgICAgIHZhciBjID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpO1xuXG4gICAgICB0aGlzLl9jb29yZHNCZWZvcmVFZGl0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjKSk7XG4gICAgfSAvLyB0aGUgbWFya2VyIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWRcblxuXG4gICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0OyAvLyBjb29yZHMgb2YgdGhlIGxheWVyXG5cbiAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpOyAvLyBmaW5kIHRoZSBjb29yZCByaW5nIGluZGV4IGFuZCBpbmRleCBvZiB0aGUgbWFya2VyXG5cblxuICAgIHZhciBfZmluZE1hcmtlckluZGV4MiA9IHRoaXMuZmluZE1hcmtlckluZGV4KHRoaXMuX21hcmtlcnMsIG1hcmtlciksXG4gICAgICAgIHJpbmdJbmRleCA9IF9maW5kTWFya2VySW5kZXgyLnJpbmdJbmRleCxcbiAgICAgICAgaW5kZXggPSBfZmluZE1hcmtlckluZGV4Mi5pbmRleDsgLy8gZGVmaW5lIHRoZSBjb29yZHNSaW5nIHRoYXQgaXMgZWRpdGVkXG5cblxuICAgIHZhciBjb29yZHNSaW5nID0gcmluZ0luZGV4ID4gLTEgPyBjb29yZHNbcmluZ0luZGV4XSA6IGNvb3JkczsgLy8gZGVmaW5lIHRoZSBtYXJrZXJzIGFycmF5IHRoYXQgaXMgZWRpdGVkXG5cbiAgICB2YXIgbWFya2VyQXJyID0gcmluZ0luZGV4ID4gLTEgPyB0aGlzLl9tYXJrZXJzW3JpbmdJbmRleF0gOiB0aGlzLl9tYXJrZXJzOyAvLyBvbmx5IGNvbnRpbnVlIGlmIHRoaXMgaXMgTk9UIGEgbWlkZGxlIG1hcmtlciAodGhvc2UgY2FuJ3QgYmUgZGVsZXRlZClcblxuICAgIHZhciBpc01pZGRsZU1hcmtlciA9IHRoaXMuZmluZE1hcmtlckluZGV4KHRoaXMuX21hcmtlcnMsIG1hcmtlcikuaW5kZXggPT09IC0xO1xuXG4gICAgaWYgKGlzTWlkZGxlTWFya2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyByZW1vdmUgY29vcmRpbmF0ZVxuXG5cbiAgICBjb29yZHNSaW5nLnNwbGljZShpbmRleCwgMSk7IC8vIHNldCBuZXcgbGF0bG5ncyB0byB0aGUgcG9seWdvblxuXG4gICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyhjb29yZHMpOyAvLyBpZiB0aGUgcmluZyBvZiB0aGUgcG9seSBoYXMgbm8gY29vcmRpbmF0ZXMgbGVmdCwgcmVtb3ZlIHRoZSByaW5nXG5cblxuICAgIGlmIChjb29yZHNSaW5nLmxlbmd0aCA8PSAxKSB7XG4gICAgICAvLyByZW1vdmUgY29vcmRzIHJpbmdcbiAgICAgIGNvb3Jkcy5zcGxpY2UocmluZ0luZGV4LCAxKTsgLy8gc2V0IG5ldyBjb29yZHNcblxuICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyhjb29yZHMpOyAvLyByZS1lbmFibGUgZWRpdGluZyBzbyB1bm5lY2Vzc2FyeSBtYXJrZXJzIGFyZSByZW1vdmVkXG4gICAgICAvLyBUT0RPOiBraW5kIG9mIGFuIHVnbHkgd29ya2Fyb3VuZCBtYXliZSBkbyBpdCBiZXR0ZXI/XG5cblxuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICB0aGlzLmVuYWJsZSh0aGlzLm9wdGlvbnMpO1xuICAgIH0gLy8gaWYgbm8gY29vcmRzIGFyZSBsZWZ0LCByZW1vdmUgdGhlIGxheWVyXG5cblxuICAgIGlmIChjb29yZHMubGVuZ3RoIDwgMSkge1xuICAgICAgdGhpcy5fbGF5ZXIucmVtb3ZlKCk7XG4gICAgfSAvLyBub3cgaGFuZGxlIHRoZSBtaWRkbGUgbWFya2Vyc1xuICAgIC8vIHJlbW92ZSB0aGUgbWFya2VyIGFuZCB0aGUgbWlkZGxlbWFya2VycyBuZXh0IHRvIGl0IGZyb20gdGhlIG1hcFxuXG5cbiAgICBpZiAobWFya2VyLl9taWRkbGVNYXJrZXJQcmV2KSB7XG4gICAgICB0aGlzLl9tYXJrZXJHcm91cC5yZW1vdmVMYXllcihtYXJrZXIuX21pZGRsZU1hcmtlclByZXYpO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIuX21pZGRsZU1hcmtlck5leHQpIHtcbiAgICAgIHRoaXMuX21hcmtlckdyb3VwLnJlbW92ZUxheWVyKG1hcmtlci5fbWlkZGxlTWFya2VyTmV4dCk7XG4gICAgfSAvLyByZW1vdmUgdGhlIG1hcmtlciBmcm9tIHRoZSBtYXBcblxuXG4gICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblxuICAgIHZhciByaWdodE1hcmtlckluZGV4O1xuICAgIHZhciBsZWZ0TWFya2VySW5kZXg7XG5cbiAgICBpZiAodGhpcy5pc1BvbHlnb24oKSkge1xuICAgICAgLy8gZmluZCBuZWlnaGJvciBtYXJrZXItaW5kZXhlc1xuICAgICAgcmlnaHRNYXJrZXJJbmRleCA9IChpbmRleCArIDEpICUgbWFya2VyQXJyLmxlbmd0aDtcbiAgICAgIGxlZnRNYXJrZXJJbmRleCA9IChpbmRleCArIChtYXJrZXJBcnIubGVuZ3RoIC0gMSkpICUgbWFya2VyQXJyLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmluZCBuZWlnaGJvciBtYXJrZXItaW5kZXhlc1xuICAgICAgbGVmdE1hcmtlckluZGV4ID0gaW5kZXggLSAxIDwgMCA/IHVuZGVmaW5lZCA6IGluZGV4IC0gMTtcbiAgICAgIHJpZ2h0TWFya2VySW5kZXggPSBpbmRleCArIDEgPj0gbWFya2VyQXJyLmxlbmd0aCA/IHVuZGVmaW5lZCA6IGluZGV4ICsgMTtcbiAgICB9IC8vIGRvbid0IGNyZWF0ZSBtaWRkbGVtYXJrZXJzIGlmIHRoZXJlIGlzIG9ubHkgb25lIG1hcmtlciBsZWZ0XG5cblxuICAgIGlmIChyaWdodE1hcmtlckluZGV4ICE9PSBsZWZ0TWFya2VySW5kZXgpIHtcbiAgICAgIHZhciBsZWZ0TSA9IG1hcmtlckFycltsZWZ0TWFya2VySW5kZXhdO1xuICAgICAgdmFyIHJpZ2h0TSA9IG1hcmtlckFycltyaWdodE1hcmtlckluZGV4XTtcblxuICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCByaWdodE0pO1xuICAgIH0gLy8gcmVtb3ZlIHRoZSBtYXJrZXIgZnJvbSB0aGUgbWFya2VycyBhcnJheVxuXG5cbiAgICBtYXJrZXJBcnIuc3BsaWNlKGluZGV4LCAxKTsgLy8gZmlyZSBlZGl0IGV2ZW50XG5cbiAgICB0aGlzLl9maXJlRWRpdCgpOyAvLyBmaXJlIHZlcnRleCByZW1vdmFsIGV2ZW50XG5cblxuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOnZlcnRleHJlbW92ZWQnLCB7XG4gICAgICBsYXllcjogdGhpcy5fbGF5ZXIsXG4gICAgICBtYXJrZXI6IG1hcmtlcixcbiAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgIHJpbmdJbmRleDogcmluZ0luZGV4IC8vIFRPRE86IG1heWJlIGFkZCBsYXRsbmcgYXMgd2VsbD9cblxuICAgIH0pO1xuICB9LFxuICBmaW5kTWFya2VySW5kZXg6IGZ1bmN0aW9uIGZpbmRNYXJrZXJJbmRleChtYXJrZXJzLCBtYXJrZXIpIHtcbiAgICAvLyBmaW5kIHRoZSBpbmRleCBvZiBhIG1hcmtlciBpbiB0aGUgbWFya2VycyBhcnJheSBhbmQgcmV0dXJucyB0aGUgcGFyZW50IGluZGV4IGFzIHdlbGwgaW4gY2FzZSBvZiBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXlcbiAgICAvLyBNdWx0aWRpbWVuc2lvbmFsIGFycmF5cyB3b3VsZCBtZWFuIHRoZSBsYXllciBoYXMgbXVsdGlwbGUgY29vcmRpbmF0ZSByaW5ncyAobGlrZSBob2xlcyBpbiBwb2x5Z29ucylcbiAgICB2YXIgaW5kZXg7XG4gICAgdmFyIHJpbmdJbmRleDtcblxuICAgIGlmICghdGhpcy5pc1BvbHlnb24oKSkge1xuICAgICAgaW5kZXggPSBtYXJrZXJzLmZpbmRJbmRleChmdW5jdGlvbiAobSkge1xuICAgICAgICByZXR1cm4gbWFya2VyLl9sZWFmbGV0X2lkID09PSBtLl9sZWFmbGV0X2lkO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJpbmdJbmRleCA9IG1hcmtlcnMuZmluZEluZGV4KGZ1bmN0aW9uIChpbm5lcikge1xuICAgICAgICBpbmRleCA9IGlubmVyLmZpbmRJbmRleChmdW5jdGlvbiAobSkge1xuICAgICAgICAgIHJldHVybiBtYXJrZXIuX2xlYWZsZXRfaWQgPT09IG0uX2xlYWZsZXRfaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW5kZXggPiAtMTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpbmRleDogaW5kZXgsXG4gICAgICByaW5nSW5kZXg6IHJpbmdJbmRleFxuICAgIH07XG4gIH0sXG4gIHVwZGF0ZVBvbHlnb25Db29yZHNGcm9tTWFya2VyRHJhZzogZnVuY3Rpb24gdXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnKG1hcmtlcikge1xuICAgIC8vIHVwZGF0ZSBwb2x5Z29uIGNvb3Jkc1xuICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG5cbiAgICB2YXIgX2ZpbmRNYXJrZXJJbmRleDMgPSB0aGlzLmZpbmRNYXJrZXJJbmRleCh0aGlzLl9tYXJrZXJzLCBtYXJrZXIpLFxuICAgICAgICByaW5nSW5kZXggPSBfZmluZE1hcmtlckluZGV4My5yaW5nSW5kZXgsXG4gICAgICAgIGluZGV4ID0gX2ZpbmRNYXJrZXJJbmRleDMuaW5kZXg7XG5cbiAgICB2YXIgcmluZyA9IHJpbmdJbmRleCA+IC0xID8gY29vcmRzW3JpbmdJbmRleF0gOiBjb29yZHM7XG4gICAgcmluZy5zcGxpY2UoaW5kZXgsIDEsIG1hcmtlci5nZXRMYXRMbmcoKSk7IC8vIHNldCBuZXcgY29vcmRzIG9uIGxheWVyXG5cbiAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3JkcykucmVkcmF3KCk7XG4gIH0sXG4gIF9vbk1hcmtlckRyYWc6IGZ1bmN0aW9uIF9vbk1hcmtlckRyYWcoZSkge1xuICAgIC8vIGRyYWdnZWQgbWFya2VyXG4gICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0OyAvLyBvbmx5IGNvbnRpbnVlIGlmIHRoaXMgaXMgTk9UIGEgbWlkZGxlIG1hcmtlclxuXG4gICAgdmFyIGlzTWlkZGxlTWFya2VyID0gdGhpcy5maW5kTWFya2VySW5kZXgodGhpcy5fbWFya2VycywgbWFya2VyKS5pbmRleCA9PT0gLTE7XG5cbiAgICBpZiAoaXNNaWRkbGVNYXJrZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVBvbHlnb25Db29yZHNGcm9tTWFya2VyRHJhZyhtYXJrZXIpOyAvLyB0aGUgZHJhZ2dlZCBtYXJrZXJzIG5laWdoYm9yc1xuXG4gICAgdmFyIF9maW5kTWFya2VySW5kZXg0ID0gdGhpcy5maW5kTWFya2VySW5kZXgodGhpcy5fbWFya2VycywgbWFya2VyKSxcbiAgICAgICAgcmluZ0luZGV4ID0gX2ZpbmRNYXJrZXJJbmRleDQucmluZ0luZGV4LFxuICAgICAgICBpbmRleCA9IF9maW5kTWFya2VySW5kZXg0LmluZGV4O1xuXG4gICAgdmFyIG1hcmtlckFyciA9IHJpbmdJbmRleCA+IC0xID8gdGhpcy5fbWFya2Vyc1tyaW5nSW5kZXhdIDogdGhpcy5fbWFya2VyczsgLy8gZmluZCB0aGUgaW5kaXplcyBvZiBuZXh0IGFuZCBwcmV2aW91cyBtYXJrZXJzXG5cbiAgICB2YXIgbmV4dE1hcmtlckluZGV4ID0gKGluZGV4ICsgMSkgJSBtYXJrZXJBcnIubGVuZ3RoO1xuICAgIHZhciBwcmV2TWFya2VySW5kZXggPSAoaW5kZXggKyBtYXJrZXJBcnIubGVuZ3RoIC0gMSkgJSBtYXJrZXJBcnIubGVuZ3RoOyAvLyB1cGRhdGUgbWlkZGxlIG1hcmtlcnMgb24gdGhlIGxlZnQgYW5kIHJpZ2h0XG4gICAgLy8gYmUgYXdhcmUgdGhhdCBcIm5leHRcIiBhbmQgXCJwcmV2XCIgbWlnaHQgYmUgaW50ZXJjaGFuZ2VkLCBkZXBlbmRpbmcgb24gdGhlIGdlb2pzb24gYXJyYXlcblxuICAgIHZhciBtYXJrZXJMYXRMbmcgPSBtYXJrZXIuZ2V0TGF0TG5nKCk7IC8vIGdldCBsYXRsbmcgb2YgcHJldiBhbmQgbmV4dCBtYXJrZXJcblxuICAgIHZhciBwcmV2TWFya2VyTGF0TG5nID0gbWFya2VyQXJyW3ByZXZNYXJrZXJJbmRleF0uZ2V0TGF0TG5nKCk7XG4gICAgdmFyIG5leHRNYXJrZXJMYXRMbmcgPSBtYXJrZXJBcnJbbmV4dE1hcmtlckluZGV4XS5nZXRMYXRMbmcoKTtcblxuICAgIGlmIChtYXJrZXIuX21pZGRsZU1hcmtlck5leHQpIHtcbiAgICAgIHZhciBtaWRkbGVNYXJrZXJOZXh0TGF0TG5nID0gdGhpcy5fY2FsY01pZGRsZUxhdExuZyhtYXJrZXJMYXRMbmcsIG5leHRNYXJrZXJMYXRMbmcpO1xuXG4gICAgICBtYXJrZXIuX21pZGRsZU1hcmtlck5leHQuc2V0TGF0TG5nKG1pZGRsZU1hcmtlck5leHRMYXRMbmcpO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIuX21pZGRsZU1hcmtlclByZXYpIHtcbiAgICAgIHZhciBtaWRkbGVNYXJrZXJQcmV2TGF0TG5nID0gdGhpcy5fY2FsY01pZGRsZUxhdExuZyhtYXJrZXJMYXRMbmcsIHByZXZNYXJrZXJMYXRMbmcpO1xuXG4gICAgICBtYXJrZXIuX21pZGRsZU1hcmtlclByZXYuc2V0TGF0TG5nKG1pZGRsZU1hcmtlclByZXZMYXRMbmcpO1xuICAgIH0gLy8gaWYgc2VsZiBpbnRlcnNlY3Rpb24gaXMgbm90IGFsbG93ZWQsIGhhbmRsZSBpdFxuXG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5hbGxvd1NlbGZJbnRlcnNlY3Rpb24pIHtcbiAgICAgIHRoaXMuX2hhbmRsZUxheWVyU3R5bGUoKTtcbiAgICB9XG4gIH0sXG4gIF9vbk1hcmtlckRyYWdFbmQ6IGZ1bmN0aW9uIF9vbk1hcmtlckRyYWdFbmQoZSkge1xuICAgIHZhciBtYXJrZXIgPSBlLnRhcmdldDtcblxuICAgIHZhciBfZmluZE1hcmtlckluZGV4NSA9IHRoaXMuZmluZE1hcmtlckluZGV4KHRoaXMuX21hcmtlcnMsIG1hcmtlciksXG4gICAgICAgIHJpbmdJbmRleCA9IF9maW5kTWFya2VySW5kZXg1LnJpbmdJbmRleCxcbiAgICAgICAgaW5kZXggPSBfZmluZE1hcmtlckluZGV4NS5pbmRleDsgLy8gaWYgc2VsZiBpbnRlcnNlY3Rpb24gaXMgbm90IGFsbG93ZWQgYnV0IHRoaXMgZWRpdCBjYXVzZWQgYSBzZWxmIGludGVyc2VjdGlvbixcbiAgICAvLyByZXNldCBhbmQgY2FuY2VsOyBkbyBub3QgZmlyZSBldmVudHNcblxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuYWxsb3dTZWxmSW50ZXJzZWN0aW9uICYmIHRoaXMuaGFzU2VsZkludGVyc2VjdGlvbigpKSB7XG4gICAgICAvLyByZXNldCBjb29yZGluYXRlc1xuICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyh0aGlzLl9jb29yZHNCZWZvcmVFZGl0KTtcblxuICAgICAgdGhpcy5fY29vcmRzQmVmb3JlRWRpdCA9IG51bGw7IC8vIHJlLWVuYWJsZSBtYXJrZXJzIGZvciB0aGUgbmV3IGNvb3Jkc1xuXG4gICAgICB0aGlzLl9pbml0TWFya2VycygpOyAvLyBjaGVjayBmb3Igc2VsZmludGVyc2VjdGlvbiBhZ2FpbiAobWFpbmx5IHRvIHJlc2V0IHRoZSBzdHlsZSlcblxuXG4gICAgICB0aGlzLl9oYW5kbGVMYXllclN0eWxlKCk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9sYXllci5maXJlKCdwbTptYXJrZXJkcmFnZW5kJywge1xuICAgICAgbWFya2VyRXZlbnQ6IGUsXG4gICAgICByaW5nSW5kZXg6IHJpbmdJbmRleCxcbiAgICAgIGluZGV4OiBpbmRleFxuICAgIH0pOyAvLyBmaXJlIGVkaXQgZXZlbnRcblxuXG4gICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgfSxcbiAgX29uTWFya2VyRHJhZ1N0YXJ0OiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnU3RhcnQoZSkge1xuICAgIHZhciBtYXJrZXIgPSBlLnRhcmdldDtcblxuICAgIHZhciBfZmluZE1hcmtlckluZGV4NiA9IHRoaXMuZmluZE1hcmtlckluZGV4KHRoaXMuX21hcmtlcnMsIG1hcmtlciksXG4gICAgICAgIHJpbmdJbmRleCA9IF9maW5kTWFya2VySW5kZXg2LnJpbmdJbmRleCxcbiAgICAgICAgaW5kZXggPSBfZmluZE1hcmtlckluZGV4Ni5pbmRleDtcblxuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOm1hcmtlcmRyYWdzdGFydCcsIHtcbiAgICAgIG1hcmtlckV2ZW50OiBlLFxuICAgICAgcmluZ0luZGV4OiByaW5nSW5kZXgsXG4gICAgICBpbmRleDogaW5kZXhcbiAgICB9KTsgLy8gaWYgc2VsZiBpbnRlcnNlY3Rpb24gaXNuJ3QgYWxsb3dlZCwgc2F2ZSB0aGUgY29vcmRzIHVwb24gZHJhZ3N0YXJ0XG4gICAgLy8gaW4gY2FzZSB3ZSBuZWVkIHRvIHJlc2V0IHRoZSBsYXllclxuXG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5hbGxvd1NlbGZJbnRlcnNlY3Rpb24pIHtcbiAgICAgIHRoaXMuX2Nvb3Jkc0JlZm9yZUVkaXQgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG4gICAgfVxuICB9LFxuICBfZmlyZUVkaXQ6IGZ1bmN0aW9uIF9maXJlRWRpdCgpIHtcbiAgICAvLyBmaXJlIGVkaXQgZXZlbnRcbiAgICB0aGlzLl9sYXllckVkaXRlZCA9IHRydWU7XG5cbiAgICB0aGlzLl9sYXllci5maXJlKCdwbTplZGl0Jyk7XG4gIH0sXG4gIF9jYWxjTWlkZGxlTGF0TG5nOiBmdW5jdGlvbiBfY2FsY01pZGRsZUxhdExuZyhsYXRsbmcxLCBsYXRsbmcyKSB7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBtaWRkbGUgY29vcmRpbmF0ZXMgYmV0d2VlbiB0d28gbWFya2Vyc1xuICAgIC8vIFRPRE86IHB1dCB0aGlzIGludG8gYSB1dGlscy5qcyBvciBzb21ldGhpbmdcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuICAgIHZhciBwMSA9IG1hcC5wcm9qZWN0KGxhdGxuZzEpO1xuICAgIHZhciBwMiA9IG1hcC5wcm9qZWN0KGxhdGxuZzIpO1xuICAgIHZhciBsYXRsbmcgPSBtYXAudW5wcm9qZWN0KHAxLl9hZGQocDIpLl9kaXZpZGVCeSgyKSk7XG4gICAgcmV0dXJuIGxhdGxuZztcbiAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGluZS5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///29\n");

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Poly = _LPM.default.Line.extend({// this is a bit weird but... Polygons are completely supported by L.PM.Edit.Line now .\n  // I'll keep this class in case there is something Polygon-specific that we'd need in the future.\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuUG9seS5qcz9mMGUxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX0xQTSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vTC5QTS5FZGl0XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTS5kZWZhdWx0LlBvbHkgPSBfTFBNLmRlZmF1bHQuTGluZS5leHRlbmQoey8vIHRoaXMgaXMgYSBiaXQgd2VpcmQgYnV0Li4uIFBvbHlnb25zIGFyZSBjb21wbGV0ZWx5IHN1cHBvcnRlZCBieSBMLlBNLkVkaXQuTGluZSBub3cg8J+Ysi5cbiAgLy8gSSdsbCBrZWVwIHRoaXMgY2xhc3MgaW4gY2FzZSB0aGVyZSBpcyBzb21ldGhpbmcgUG9seWdvbi1zcGVjaWZpYyB0aGF0IHdlJ2QgbmVlZCBpbiB0aGUgZnV0dXJlLlxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuUG9seS5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///30\n");

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Corner detection based on Leaflet Draw's Edit.Rectangle.js Class:\n// https://github.com/Leaflet/Leaflet.draw/blob/master/src/edit/handler/Edit.Rectangle.js\n_LPM.default.Rectangle = _LPM.default.Poly.extend({\n  // initializes Rectangle Markers\n  _initMarkers: function _initMarkers() {\n    var map = this._map;\n\n    var corners = this._findCorners(); // cleanup old ones first\n\n\n    if (this._markerGroup) {\n      this._markerGroup.clearLayers();\n    } // add markerGroup to map, markerGroup includes regular and middle markers\n\n\n    this._markerGroup = new L.LayerGroup();\n    this._markerGroup._pmTempLayer = true;\n    map.addLayer(this._markerGroup); // create markers for four corners of rectangle\n\n    this._markers = []; // nest set of corner markers in a 2D array so that we can Cut this Rectangle, if needed\n\n    this._markers[0] = corners.map(this._createMarker, this); // convenience alias, for better readability\n\n    this._cornerMarkers = this._markers[0];\n\n    if (this.options.snappable) {\n      this._initSnappableMarkers();\n    }\n  },\n  // creates initial markers for coordinates\n  _createMarker: function _createMarker(latlng, index) {\n    var marker = new L.Marker(latlng, {\n      draggable: true,\n      icon: L.divIcon({\n        className: 'marker-icon'\n      })\n    });\n    marker._origLatLng = latlng;\n    marker._index = index;\n    marker._pmTempLayer = true;\n    marker.on('dragstart', this._onMarkerDragStart, this);\n    marker.on('drag', this._onMarkerDrag, this);\n    marker.on('dragend', this._onMarkerDragEnd, this);\n    marker.on('contextmenu', this._removeMarker, this);\n    marker.on('pm:snap', this._adjustRectangleForMarkerSnap, this);\n\n    this._markerGroup.addLayer(marker);\n\n    return marker;\n  },\n  // Empty callback for 'contextmenu' binding set in L.PM.Edit.Line.js's _createMarker method (AKA, right-click on marker event)\n  // (A Rectangle is designed to always remain a \"true\" rectangle -- if you want it editable, use Polygon Tool instead!!!)\n  _removeMarker: function _removeMarker() {\n    // The method, it does nothing!!!\n    return null;\n  },\n  _onMarkerDragStart: function _onMarkerDragStart(e) {\n    // dragged marker\n    var draggedMarker = e.target; // Store/update a reference to marker in opposite corner\n\n    var corners = this._findCorners();\n\n    draggedMarker._oppositeCornerLatLng = corners[(draggedMarker._index + 2) % 4]; // Automatically unsnap all markers on drag start (they'll snap back if close enough to another snappable object)\n    // (Without this, it's occasionally possible for a marker to get stuck as 'snapped,' which prevents Rectangle resizing)\n\n    draggedMarker._snapped = false;\n\n    this._layer.fire('pm:markerdragstart', {\n      markerEvent: e\n    });\n  },\n  _onMarkerDrag: function _onMarkerDrag(e) {\n    // dragged marker\n    var draggedMarker = e.target; // only continue if this is NOT a middle marker (should NEVER be one, but this is just a safety check)\n\n    if (draggedMarker._index === undefined) {\n      return;\n    } // If marker is currently snapped to an object, then ignore all drag events (as this resets rectangle shape)\n\n\n    if (!draggedMarker._snapped) {\n      this._adjustRectangleForMarkerMove(draggedMarker);\n    }\n  },\n  _onMarkerDragEnd: function _onMarkerDragEnd(e) {\n    var corners = this._findCorners(); // Reposition ALL markers (so that indices are correctly correlated with corner order (NW, NE, SE, SW))\n\n\n    this._adjustAllMarkers(corners); // Clean-up data attributes\n\n\n    this._cornerMarkers.forEach(function (m) {\n      delete m._oppositeCornerLatLng;\n    }); // Update bounding box\n\n\n    this._layer.setLatLngs(corners); // Redraw the shape a final time\n\n\n    this._layer.redraw();\n\n    this._layer.fire('pm:markerdragend', {\n      markerEvent: e\n    }); // fire edit event\n\n\n    this._fireEdit();\n  },\n  // adjusts the rectangle's size and bounds whenever a marker is moved\n  // params: movedMarker -- the Marker object\n  _adjustRectangleForMarkerMove: function _adjustRectangleForMarkerMove(movedMarker) {\n    // update moved marker coordinates\n    L.extend(movedMarker._origLatLng, movedMarker._latlng); // update rectangle boundaries, based on moved marker's new LatLng and cached opposite corner's LatLng\n\n    var movedLatLng = movedMarker.getLatLng();\n\n    this._layer.setBounds(L.latLngBounds(movedLatLng, movedMarker._oppositeCornerLatLng)); // Reposition the markers at each corner\n\n\n    this._adjustAdjacentMarkers(movedMarker); // Redraw the shape (to update altered rectangle)\n\n\n    this._layer.redraw();\n  },\n  // adjusts the rectangle's size and bounds whenever a marker snaps to another polygon\n  // params: e -- the snap event\n  _adjustRectangleForMarkerSnap: function _adjustRectangleForMarkerSnap(e) {\n    if (!this.options.snappable) {\n      return;\n    }\n\n    var snappedMarker = e.target;\n\n    this._adjustRectangleForMarkerMove(snappedMarker);\n  },\n  // adjusts the position of all Markers\n  // params: markerLatLngs -- an array of exactly LatLng objects\n  _adjustAllMarkers: function _adjustAllMarkers(markerLatLngs) {\n    if (!markerLatLngs.length || markerLatLngs.length != 4) {\n      console.error('_adjustAllMarkers() requires an array of EXACTLY 4 LatLng coordinates');\n      return;\n    }\n\n    this._cornerMarkers.forEach(function (marker, index) {\n      marker.setLatLng(markerLatLngs[index]);\n    });\n  },\n  // adjusts the position of the two Markers adjacent to the Marker specified\n  // params: anchorMarker -- the Marker object used to determine adjacent Markers\n  _adjustAdjacentMarkers: function _adjustAdjacentMarkers(anchorMarker) {\n    if (!anchorMarker || !anchorMarker.getLatLng || !anchorMarker._oppositeCornerLatLng) {\n      console.error('_adjustAdjacentMarkers() requires a valid Marker object');\n      return;\n    }\n\n    var anchorLatLng = anchorMarker.getLatLng();\n    var oppositeLatLng = anchorMarker._oppositeCornerLatLng; // Find two corners not currently occupied by dragged marker and its opposite corner\n\n    var unmarkedCorners = [];\n\n    var corners = this._findCorners();\n\n    corners.forEach(function (corner) {\n      if (!corner.equals(anchorLatLng) && !corner.equals(oppositeLatLng)) {\n        unmarkedCorners.push(corner);\n      }\n    }); // reposition markers for those corners\n\n    var unmarkedCornerIndex = 0;\n\n    if (unmarkedCorners.length == 2) {\n      this._cornerMarkers.forEach(function (marker) {\n        var markerLatLng = marker.getLatLng();\n\n        if (!markerLatLng.equals(anchorLatLng) && !markerLatLng.equals(oppositeLatLng)) {\n          marker.setLatLng(unmarkedCorners[unmarkedCornerIndex]);\n          unmarkedCornerIndex += 1;\n        }\n      });\n    }\n  },\n  // finds the 4 corners of the current bounding box\n  // returns array of 4 LatLng objects in this order: Northwest corner, Northeast corner, Southeast corner, Southwest corner\n  _findCorners: function _findCorners() {\n    var corners = this._layer.getBounds();\n\n    var northwest = corners.getNorthWest();\n    var northeast = corners.getNorthEast();\n    var southeast = corners.getSouthEast();\n    var southwest = corners.getSouthWest();\n    return [northwest, northeast, southeast, southwest];\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuUmVjdGFuZ2xlLmpzP2I2NzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkVkaXRcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vLyBDb3JuZXIgZGV0ZWN0aW9uIGJhc2VkIG9uIExlYWZsZXQgRHJhdydzIEVkaXQuUmVjdGFuZ2xlLmpzIENsYXNzOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0xlYWZsZXQvTGVhZmxldC5kcmF3L2Jsb2IvbWFzdGVyL3NyYy9lZGl0L2hhbmRsZXIvRWRpdC5SZWN0YW5nbGUuanNcbl9MUE0uZGVmYXVsdC5SZWN0YW5nbGUgPSBfTFBNLmRlZmF1bHQuUG9seS5leHRlbmQoe1xuICAvLyBpbml0aWFsaXplcyBSZWN0YW5nbGUgTWFya2Vyc1xuICBfaW5pdE1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0TWFya2VycygpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuXG4gICAgdmFyIGNvcm5lcnMgPSB0aGlzLl9maW5kQ29ybmVycygpOyAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG5cblxuICAgIGlmICh0aGlzLl9tYXJrZXJHcm91cCkge1xuICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcbiAgICB9IC8vIGFkZCBtYXJrZXJHcm91cCB0byBtYXAsIG1hcmtlckdyb3VwIGluY2x1ZGVzIHJlZ3VsYXIgYW5kIG1pZGRsZSBtYXJrZXJzXG5cblxuICAgIHRoaXMuX21hcmtlckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgIHRoaXMuX21hcmtlckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgbWFwLmFkZExheWVyKHRoaXMuX21hcmtlckdyb3VwKTsgLy8gY3JlYXRlIG1hcmtlcnMgZm9yIGZvdXIgY29ybmVycyBvZiByZWN0YW5nbGVcblxuICAgIHRoaXMuX21hcmtlcnMgPSBbXTsgLy8gbmVzdCBzZXQgb2YgY29ybmVyIG1hcmtlcnMgaW4gYSAyRCBhcnJheSBzbyB0aGF0IHdlIGNhbiBDdXQgdGhpcyBSZWN0YW5nbGUsIGlmIG5lZWRlZFxuXG4gICAgdGhpcy5fbWFya2Vyc1swXSA9IGNvcm5lcnMubWFwKHRoaXMuX2NyZWF0ZU1hcmtlciwgdGhpcyk7IC8vIGNvbnZlbmllbmNlIGFsaWFzLCBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5XG5cbiAgICB0aGlzLl9jb3JuZXJNYXJrZXJzID0gdGhpcy5fbWFya2Vyc1swXTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgIH1cbiAgfSxcbiAgLy8gY3JlYXRlcyBpbml0aWFsIG1hcmtlcnMgZm9yIGNvb3JkaW5hdGVzXG4gIF9jcmVhdGVNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVNYXJrZXIobGF0bG5nLCBpbmRleCkge1xuICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIobGF0bG5nLCB7XG4gICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbidcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgbWFya2VyLl9vcmlnTGF0TG5nID0gbGF0bG5nO1xuICAgIG1hcmtlci5faW5kZXggPSBpbmRleDtcbiAgICBtYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICBtYXJrZXIub24oJ2RyYWdzdGFydCcsIHRoaXMuX29uTWFya2VyRHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICBtYXJrZXIub24oJ2RyYWcnLCB0aGlzLl9vbk1hcmtlckRyYWcsIHRoaXMpO1xuICAgIG1hcmtlci5vbignZHJhZ2VuZCcsIHRoaXMuX29uTWFya2VyRHJhZ0VuZCwgdGhpcyk7XG4gICAgbWFya2VyLm9uKCdjb250ZXh0bWVudScsIHRoaXMuX3JlbW92ZU1hcmtlciwgdGhpcyk7XG4gICAgbWFya2VyLm9uKCdwbTpzbmFwJywgdGhpcy5fYWRqdXN0UmVjdGFuZ2xlRm9yTWFya2VyU25hcCwgdGhpcyk7XG5cbiAgICB0aGlzLl9tYXJrZXJHcm91cC5hZGRMYXllcihtYXJrZXIpO1xuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgLy8gRW1wdHkgY2FsbGJhY2sgZm9yICdjb250ZXh0bWVudScgYmluZGluZyBzZXQgaW4gTC5QTS5FZGl0LkxpbmUuanMncyBfY3JlYXRlTWFya2VyIG1ldGhvZCAoQUtBLCByaWdodC1jbGljayBvbiBtYXJrZXIgZXZlbnQpXG4gIC8vIChBIFJlY3RhbmdsZSBpcyBkZXNpZ25lZCB0byBhbHdheXMgcmVtYWluIGEgXCJ0cnVlXCIgcmVjdGFuZ2xlIC0tIGlmIHlvdSB3YW50IGl0IGVkaXRhYmxlLCB1c2UgUG9seWdvbiBUb29sIGluc3RlYWQhISEpXG4gIF9yZW1vdmVNYXJrZXI6IGZ1bmN0aW9uIF9yZW1vdmVNYXJrZXIoKSB7XG4gICAgLy8gVGhlIG1ldGhvZCwgaXQgZG9lcyBub3RoaW5nISEhXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIF9vbk1hcmtlckRyYWdTdGFydDogZnVuY3Rpb24gX29uTWFya2VyRHJhZ1N0YXJ0KGUpIHtcbiAgICAvLyBkcmFnZ2VkIG1hcmtlclxuICAgIHZhciBkcmFnZ2VkTWFya2VyID0gZS50YXJnZXQ7IC8vIFN0b3JlL3VwZGF0ZSBhIHJlZmVyZW5jZSB0byBtYXJrZXIgaW4gb3Bwb3NpdGUgY29ybmVyXG5cbiAgICB2YXIgY29ybmVycyA9IHRoaXMuX2ZpbmRDb3JuZXJzKCk7XG5cbiAgICBkcmFnZ2VkTWFya2VyLl9vcHBvc2l0ZUNvcm5lckxhdExuZyA9IGNvcm5lcnNbKGRyYWdnZWRNYXJrZXIuX2luZGV4ICsgMikgJSA0XTsgLy8gQXV0b21hdGljYWxseSB1bnNuYXAgYWxsIG1hcmtlcnMgb24gZHJhZyBzdGFydCAodGhleSdsbCBzbmFwIGJhY2sgaWYgY2xvc2UgZW5vdWdoIHRvIGFub3RoZXIgc25hcHBhYmxlIG9iamVjdClcbiAgICAvLyAoV2l0aG91dCB0aGlzLCBpdCdzIG9jY2FzaW9uYWxseSBwb3NzaWJsZSBmb3IgYSBtYXJrZXIgdG8gZ2V0IHN0dWNrIGFzICdzbmFwcGVkLCcgd2hpY2ggcHJldmVudHMgUmVjdGFuZ2xlIHJlc2l6aW5nKVxuXG4gICAgZHJhZ2dlZE1hcmtlci5fc25hcHBlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06bWFya2VyZHJhZ3N0YXJ0Jywge1xuICAgICAgbWFya2VyRXZlbnQ6IGVcbiAgICB9KTtcbiAgfSxcbiAgX29uTWFya2VyRHJhZzogZnVuY3Rpb24gX29uTWFya2VyRHJhZyhlKSB7XG4gICAgLy8gZHJhZ2dlZCBtYXJrZXJcbiAgICB2YXIgZHJhZ2dlZE1hcmtlciA9IGUudGFyZ2V0OyAvLyBvbmx5IGNvbnRpbnVlIGlmIHRoaXMgaXMgTk9UIGEgbWlkZGxlIG1hcmtlciAoc2hvdWxkIE5FVkVSIGJlIG9uZSwgYnV0IHRoaXMgaXMganVzdCBhIHNhZmV0eSBjaGVjaylcblxuICAgIGlmIChkcmFnZ2VkTWFya2VyLl9pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBJZiBtYXJrZXIgaXMgY3VycmVudGx5IHNuYXBwZWQgdG8gYW4gb2JqZWN0LCB0aGVuIGlnbm9yZSBhbGwgZHJhZyBldmVudHMgKGFzIHRoaXMgcmVzZXRzIHJlY3RhbmdsZSBzaGFwZSlcblxuXG4gICAgaWYgKCFkcmFnZ2VkTWFya2VyLl9zbmFwcGVkKSB7XG4gICAgICB0aGlzLl9hZGp1c3RSZWN0YW5nbGVGb3JNYXJrZXJNb3ZlKGRyYWdnZWRNYXJrZXIpO1xuICAgIH1cbiAgfSxcbiAgX29uTWFya2VyRHJhZ0VuZDogZnVuY3Rpb24gX29uTWFya2VyRHJhZ0VuZChlKSB7XG4gICAgdmFyIGNvcm5lcnMgPSB0aGlzLl9maW5kQ29ybmVycygpOyAvLyBSZXBvc2l0aW9uIEFMTCBtYXJrZXJzIChzbyB0aGF0IGluZGljZXMgYXJlIGNvcnJlY3RseSBjb3JyZWxhdGVkIHdpdGggY29ybmVyIG9yZGVyIChOVywgTkUsIFNFLCBTVykpXG5cblxuICAgIHRoaXMuX2FkanVzdEFsbE1hcmtlcnMoY29ybmVycyk7IC8vIENsZWFuLXVwIGRhdGEgYXR0cmlidXRlc1xuXG5cbiAgICB0aGlzLl9jb3JuZXJNYXJrZXJzLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgIGRlbGV0ZSBtLl9vcHBvc2l0ZUNvcm5lckxhdExuZztcbiAgICB9KTsgLy8gVXBkYXRlIGJvdW5kaW5nIGJveFxuXG5cbiAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvcm5lcnMpOyAvLyBSZWRyYXcgdGhlIHNoYXBlIGEgZmluYWwgdGltZVxuXG5cbiAgICB0aGlzLl9sYXllci5yZWRyYXcoKTtcblxuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOm1hcmtlcmRyYWdlbmQnLCB7XG4gICAgICBtYXJrZXJFdmVudDogZVxuICAgIH0pOyAvLyBmaXJlIGVkaXQgZXZlbnRcblxuXG4gICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgfSxcbiAgLy8gYWRqdXN0cyB0aGUgcmVjdGFuZ2xlJ3Mgc2l6ZSBhbmQgYm91bmRzIHdoZW5ldmVyIGEgbWFya2VyIGlzIG1vdmVkXG4gIC8vIHBhcmFtczogbW92ZWRNYXJrZXIgLS0gdGhlIE1hcmtlciBvYmplY3RcbiAgX2FkanVzdFJlY3RhbmdsZUZvck1hcmtlck1vdmU6IGZ1bmN0aW9uIF9hZGp1c3RSZWN0YW5nbGVGb3JNYXJrZXJNb3ZlKG1vdmVkTWFya2VyKSB7XG4gICAgLy8gdXBkYXRlIG1vdmVkIG1hcmtlciBjb29yZGluYXRlc1xuICAgIEwuZXh0ZW5kKG1vdmVkTWFya2VyLl9vcmlnTGF0TG5nLCBtb3ZlZE1hcmtlci5fbGF0bG5nKTsgLy8gdXBkYXRlIHJlY3RhbmdsZSBib3VuZGFyaWVzLCBiYXNlZCBvbiBtb3ZlZCBtYXJrZXIncyBuZXcgTGF0TG5nIGFuZCBjYWNoZWQgb3Bwb3NpdGUgY29ybmVyJ3MgTGF0TG5nXG5cbiAgICB2YXIgbW92ZWRMYXRMbmcgPSBtb3ZlZE1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgIHRoaXMuX2xheWVyLnNldEJvdW5kcyhMLmxhdExuZ0JvdW5kcyhtb3ZlZExhdExuZywgbW92ZWRNYXJrZXIuX29wcG9zaXRlQ29ybmVyTGF0TG5nKSk7IC8vIFJlcG9zaXRpb24gdGhlIG1hcmtlcnMgYXQgZWFjaCBjb3JuZXJcblxuXG4gICAgdGhpcy5fYWRqdXN0QWRqYWNlbnRNYXJrZXJzKG1vdmVkTWFya2VyKTsgLy8gUmVkcmF3IHRoZSBzaGFwZSAodG8gdXBkYXRlIGFsdGVyZWQgcmVjdGFuZ2xlKVxuXG5cbiAgICB0aGlzLl9sYXllci5yZWRyYXcoKTtcbiAgfSxcbiAgLy8gYWRqdXN0cyB0aGUgcmVjdGFuZ2xlJ3Mgc2l6ZSBhbmQgYm91bmRzIHdoZW5ldmVyIGEgbWFya2VyIHNuYXBzIHRvIGFub3RoZXIgcG9seWdvblxuICAvLyBwYXJhbXM6IGUgLS0gdGhlIHNuYXAgZXZlbnRcbiAgX2FkanVzdFJlY3RhbmdsZUZvck1hcmtlclNuYXA6IGZ1bmN0aW9uIF9hZGp1c3RSZWN0YW5nbGVGb3JNYXJrZXJTbmFwKGUpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc25hcHBlZE1hcmtlciA9IGUudGFyZ2V0O1xuXG4gICAgdGhpcy5fYWRqdXN0UmVjdGFuZ2xlRm9yTWFya2VyTW92ZShzbmFwcGVkTWFya2VyKTtcbiAgfSxcbiAgLy8gYWRqdXN0cyB0aGUgcG9zaXRpb24gb2YgYWxsIE1hcmtlcnNcbiAgLy8gcGFyYW1zOiBtYXJrZXJMYXRMbmdzIC0tIGFuIGFycmF5IG9mIGV4YWN0bHkgTGF0TG5nIG9iamVjdHNcbiAgX2FkanVzdEFsbE1hcmtlcnM6IGZ1bmN0aW9uIF9hZGp1c3RBbGxNYXJrZXJzKG1hcmtlckxhdExuZ3MpIHtcbiAgICBpZiAoIW1hcmtlckxhdExuZ3MubGVuZ3RoIHx8IG1hcmtlckxhdExuZ3MubGVuZ3RoICE9IDQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ19hZGp1c3RBbGxNYXJrZXJzKCkgcmVxdWlyZXMgYW4gYXJyYXkgb2YgRVhBQ1RMWSA0IExhdExuZyBjb29yZGluYXRlcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2Nvcm5lck1hcmtlcnMuZm9yRWFjaChmdW5jdGlvbiAobWFya2VyLCBpbmRleCkge1xuICAgICAgbWFya2VyLnNldExhdExuZyhtYXJrZXJMYXRMbmdzW2luZGV4XSk7XG4gICAgfSk7XG4gIH0sXG4gIC8vIGFkanVzdHMgdGhlIHBvc2l0aW9uIG9mIHRoZSB0d28gTWFya2VycyBhZGphY2VudCB0byB0aGUgTWFya2VyIHNwZWNpZmllZFxuICAvLyBwYXJhbXM6IGFuY2hvck1hcmtlciAtLSB0aGUgTWFya2VyIG9iamVjdCB1c2VkIHRvIGRldGVybWluZSBhZGphY2VudCBNYXJrZXJzXG4gIF9hZGp1c3RBZGphY2VudE1hcmtlcnM6IGZ1bmN0aW9uIF9hZGp1c3RBZGphY2VudE1hcmtlcnMoYW5jaG9yTWFya2VyKSB7XG4gICAgaWYgKCFhbmNob3JNYXJrZXIgfHwgIWFuY2hvck1hcmtlci5nZXRMYXRMbmcgfHwgIWFuY2hvck1hcmtlci5fb3Bwb3NpdGVDb3JuZXJMYXRMbmcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ19hZGp1c3RBZGphY2VudE1hcmtlcnMoKSByZXF1aXJlcyBhIHZhbGlkIE1hcmtlciBvYmplY3QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYW5jaG9yTGF0TG5nID0gYW5jaG9yTWFya2VyLmdldExhdExuZygpO1xuICAgIHZhciBvcHBvc2l0ZUxhdExuZyA9IGFuY2hvck1hcmtlci5fb3Bwb3NpdGVDb3JuZXJMYXRMbmc7IC8vIEZpbmQgdHdvIGNvcm5lcnMgbm90IGN1cnJlbnRseSBvY2N1cGllZCBieSBkcmFnZ2VkIG1hcmtlciBhbmQgaXRzIG9wcG9zaXRlIGNvcm5lclxuXG4gICAgdmFyIHVubWFya2VkQ29ybmVycyA9IFtdO1xuXG4gICAgdmFyIGNvcm5lcnMgPSB0aGlzLl9maW5kQ29ybmVycygpO1xuXG4gICAgY29ybmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb3JuZXIpIHtcbiAgICAgIGlmICghY29ybmVyLmVxdWFscyhhbmNob3JMYXRMbmcpICYmICFjb3JuZXIuZXF1YWxzKG9wcG9zaXRlTGF0TG5nKSkge1xuICAgICAgICB1bm1hcmtlZENvcm5lcnMucHVzaChjb3JuZXIpO1xuICAgICAgfVxuICAgIH0pOyAvLyByZXBvc2l0aW9uIG1hcmtlcnMgZm9yIHRob3NlIGNvcm5lcnNcblxuICAgIHZhciB1bm1hcmtlZENvcm5lckluZGV4ID0gMDtcblxuICAgIGlmICh1bm1hcmtlZENvcm5lcnMubGVuZ3RoID09IDIpIHtcbiAgICAgIHRoaXMuX2Nvcm5lck1hcmtlcnMuZm9yRWFjaChmdW5jdGlvbiAobWFya2VyKSB7XG4gICAgICAgIHZhciBtYXJrZXJMYXRMbmcgPSBtYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgaWYgKCFtYXJrZXJMYXRMbmcuZXF1YWxzKGFuY2hvckxhdExuZykgJiYgIW1hcmtlckxhdExuZy5lcXVhbHMob3Bwb3NpdGVMYXRMbmcpKSB7XG4gICAgICAgICAgbWFya2VyLnNldExhdExuZyh1bm1hcmtlZENvcm5lcnNbdW5tYXJrZWRDb3JuZXJJbmRleF0pO1xuICAgICAgICAgIHVubWFya2VkQ29ybmVySW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBmaW5kcyB0aGUgNCBjb3JuZXJzIG9mIHRoZSBjdXJyZW50IGJvdW5kaW5nIGJveFxuICAvLyByZXR1cm5zIGFycmF5IG9mIDQgTGF0TG5nIG9iamVjdHMgaW4gdGhpcyBvcmRlcjogTm9ydGh3ZXN0IGNvcm5lciwgTm9ydGhlYXN0IGNvcm5lciwgU291dGhlYXN0IGNvcm5lciwgU291dGh3ZXN0IGNvcm5lclxuICBfZmluZENvcm5lcnM6IGZ1bmN0aW9uIF9maW5kQ29ybmVycygpIHtcbiAgICB2YXIgY29ybmVycyA9IHRoaXMuX2xheWVyLmdldEJvdW5kcygpO1xuXG4gICAgdmFyIG5vcnRod2VzdCA9IGNvcm5lcnMuZ2V0Tm9ydGhXZXN0KCk7XG4gICAgdmFyIG5vcnRoZWFzdCA9IGNvcm5lcnMuZ2V0Tm9ydGhFYXN0KCk7XG4gICAgdmFyIHNvdXRoZWFzdCA9IGNvcm5lcnMuZ2V0U291dGhFYXN0KCk7XG4gICAgdmFyIHNvdXRod2VzdCA9IGNvcm5lcnMuZ2V0U291dGhXZXN0KCk7XG4gICAgcmV0dXJuIFtub3J0aHdlc3QsIG5vcnRoZWFzdCwgc291dGhlYXN0LCBzb3V0aHdlc3RdO1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5SZWN0YW5nbGUuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///31\n");

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM.default.Circle = _LPM.default.extend({\n  initialize: function initialize(layer) {\n    this._layer = layer;\n    this._enabled = false;\n  },\n  toggleEdit: function toggleEdit(options) {\n    if (!this.enabled()) {\n      this.enable(options);\n    } else {\n      this.disable();\n    }\n  },\n  enabled: function enabled() {\n    return this._enabled;\n  },\n  enable: function enable(options) {\n    var _this = this;\n\n    L.Util.setOptions(this, options);\n    this._map = this._layer._map;\n\n    if (!this.enabled()) {\n      // if it was already enabled, disable first\n      // we don't block enabling again because new options might be passed\n      this.disable();\n    } // change state\n\n\n    this._enabled = true; // // init markers\n\n    this._initMarkers(); // if polygon gets removed from map, disable edit mode\n\n\n    this._layer.on('remove', function (e) {\n      _this.disable(e.target);\n    });\n  },\n  disable: function disable() {\n    var layer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._layer;\n\n    // if it's not enabled, it doesn't need to be disabled\n    if (!this.enabled()) {\n      return false;\n    } // prevent disabling if layer is being dragged\n\n\n    if (layer.pm._dragging) {\n      return false;\n    }\n\n    layer.pm._enabled = false;\n\n    layer.pm._layerGroup.clearLayers(); // clean up draggable\n\n\n    layer.off('mousedown');\n    layer.off('mouseup'); // remove draggable class\n\n    var el = layer._path;\n    L.DomUtil.removeClass(el, 'leaflet-pm-draggable');\n\n    if (this._layerEdited) {\n      this._layer.fire('pm:update', {});\n    }\n\n    this._layerEdited = false;\n    return true;\n  },\n  _initMarkers: function _initMarkers() {\n    var map = this._map; // cleanup old ones first\n\n    if (this._layerGroup) {\n      this._layerGroup.clearLayers();\n    } // add markerGroup to map, markerGroup includes regular and middle markers\n\n\n    this._layerGroup = new L.LayerGroup();\n    map.addLayer(this._layerGroup); // create marker for each coordinate\n\n    var center = this._layer.getLatLng();\n\n    var radius = this._layer._radius;\n\n    var outer = this._getLatLngOnCircle(center, radius);\n\n    this._centerMarker = this._createCenterMarker(center);\n    this._outerMarker = this._createOuterMarker(outer);\n    this._markers = [this._centerMarker, this._outerMarker];\n\n    this._createHintLine(this._centerMarker, this._outerMarker);\n\n    if (this.options.snappable) {\n      this._initSnappableMarkers();\n    }\n  },\n  _getLatLngOnCircle: function _getLatLngOnCircle(center, radius) {\n    var pointA = this._map.project(center);\n\n    var pointB = L.point(pointA.x + radius, pointA.y);\n    return this._map.unproject(pointB);\n  },\n  _resizeCircle: function _resizeCircle() {\n    this._syncHintLine();\n\n    this._syncCircleRadius();\n\n    this._fireEdit();\n  },\n  _moveCircle: function _moveCircle(e) {\n    var center = e.latlng;\n\n    this._layer.setLatLng(center);\n\n    var radius = this._layer._radius;\n\n    var outer = this._getLatLngOnCircle(center, radius);\n\n    this._outerMarker.setLatLng(outer);\n\n    this._syncHintLine();\n\n    this._fireEdit();\n\n    this._layer.fire('pm:centerplaced', {\n      layer: this._layer,\n      latlng: center\n    });\n  },\n  _onMarkerDragStart: function _onMarkerDragStart(e) {\n    this._layer.fire('pm:markerdragstart', {\n      markerEvent: e\n    });\n  },\n  _onMarkerDragEnd: function _onMarkerDragEnd(e) {\n    this._layer.fire('pm:markerdragend', {\n      markerEvent: e\n    });\n  },\n  _syncCircleRadius: function _syncCircleRadius() {\n    var A = this._centerMarker.getLatLng();\n\n    var B = this._outerMarker.getLatLng();\n\n    var distance = A.distanceTo(B);\n\n    this._layer.setRadius(distance);\n  },\n  _syncHintLine: function _syncHintLine() {\n    var A = this._centerMarker.getLatLng();\n\n    var B = this._outerMarker.getLatLng(); // set coords for hintline from marker to last vertex of drawin polyline\n\n\n    this._hintline.setLatLngs([A, B]);\n  },\n  _createHintLine: function _createHintLine(markerA, markerB) {\n    var A = markerA.getLatLng();\n    var B = markerB.getLatLng();\n    this._hintline = L.polyline([A, B], this.options.hintlineStyle);\n    this._hintline._pmTempLayer = true;\n\n    this._layerGroup.addLayer(this._hintline);\n  },\n  _createCenterMarker: function _createCenterMarker(latlng) {\n    var marker = this._createMarker(latlng);\n\n    marker.on('move', this._moveCircle, this); // marker.on('contextmenu', this._removeMarker, this);\n\n    return marker;\n  },\n  _createOuterMarker: function _createOuterMarker(latlng) {\n    var marker = this._createMarker(latlng);\n\n    marker.on('move', this._resizeCircle, this); // marker.on('contextmenu', this._removeMarker, this);\n\n    return marker;\n  },\n  _createMarker: function _createMarker(latlng) {\n    var marker = new L.Marker(latlng, {\n      draggable: true,\n      icon: L.divIcon({\n        className: 'marker-icon'\n      })\n    });\n    marker._origLatLng = latlng;\n    marker._pmTempLayer = true;\n    marker.on('dragstart', this._onMarkerDragStart, this);\n    marker.on('dragend', this._onMarkerDragEnd, this);\n\n    this._layerGroup.addLayer(marker);\n\n    return marker;\n  },\n  _fireEdit: function _fireEdit() {\n    // fire edit event\n    this._layer.fire('pm:edit');\n\n    this._layerEdited = true;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuQ2lyY2xlLmpzPzIyMzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfTFBNID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9MLlBNLkVkaXRcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNLmRlZmF1bHQuQ2lyY2xlID0gX0xQTS5kZWZhdWx0LmV4dGVuZCh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobGF5ZXIpIHtcbiAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZTtcbiAgfSxcbiAgdG9nZ2xlRWRpdDogZnVuY3Rpb24gdG9nZ2xlRWRpdChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH1cbiAgfSxcbiAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgfSxcbiAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICB0aGlzLl9tYXAgPSB0aGlzLl9sYXllci5fbWFwO1xuXG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgLy8gaWYgaXQgd2FzIGFscmVhZHkgZW5hYmxlZCwgZGlzYWJsZSBmaXJzdFxuICAgICAgLy8gd2UgZG9uJ3QgYmxvY2sgZW5hYmxpbmcgYWdhaW4gYmVjYXVzZSBuZXcgb3B0aW9ucyBtaWdodCBiZSBwYXNzZWRcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH0gLy8gY2hhbmdlIHN0YXRlXG5cblxuICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlOyAvLyAvLyBpbml0IG1hcmtlcnNcblxuICAgIHRoaXMuX2luaXRNYXJrZXJzKCk7IC8vIGlmIHBvbHlnb24gZ2V0cyByZW1vdmVkIGZyb20gbWFwLCBkaXNhYmxlIGVkaXQgbW9kZVxuXG5cbiAgICB0aGlzLl9sYXllci5vbigncmVtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLmRpc2FibGUoZS50YXJnZXQpO1xuICAgIH0pO1xuICB9LFxuICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIHZhciBsYXllciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5fbGF5ZXI7XG5cbiAgICAvLyBpZiBpdCdzIG5vdCBlbmFibGVkLCBpdCBkb2Vzbid0IG5lZWQgdG8gYmUgZGlzYWJsZWRcbiAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBwcmV2ZW50IGRpc2FibGluZyBpZiBsYXllciBpcyBiZWluZyBkcmFnZ2VkXG5cblxuICAgIGlmIChsYXllci5wbS5fZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsYXllci5wbS5fZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgbGF5ZXIucG0uX2xheWVyR3JvdXAuY2xlYXJMYXllcnMoKTsgLy8gY2xlYW4gdXAgZHJhZ2dhYmxlXG5cblxuICAgIGxheWVyLm9mZignbW91c2Vkb3duJyk7XG4gICAgbGF5ZXIub2ZmKCdtb3VzZXVwJyk7IC8vIHJlbW92ZSBkcmFnZ2FibGUgY2xhc3NcblxuICAgIHZhciBlbCA9IGxheWVyLl9wYXRoO1xuICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0tZHJhZ2dhYmxlJyk7XG5cbiAgICBpZiAodGhpcy5fbGF5ZXJFZGl0ZWQpIHtcbiAgICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOnVwZGF0ZScsIHt9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9sYXllckVkaXRlZCA9IGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBfaW5pdE1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0TWFya2VycygpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwOyAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG5cbiAgICBpZiAodGhpcy5fbGF5ZXJHcm91cCkge1xuICAgICAgdGhpcy5fbGF5ZXJHcm91cC5jbGVhckxheWVycygpO1xuICAgIH0gLy8gYWRkIG1hcmtlckdyb3VwIHRvIG1hcCwgbWFya2VyR3JvdXAgaW5jbHVkZXMgcmVndWxhciBhbmQgbWlkZGxlIG1hcmtlcnNcblxuXG4gICAgdGhpcy5fbGF5ZXJHcm91cCA9IG5ldyBMLkxheWVyR3JvdXAoKTtcbiAgICBtYXAuYWRkTGF5ZXIodGhpcy5fbGF5ZXJHcm91cCk7IC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuXG4gICAgdmFyIGNlbnRlciA9IHRoaXMuX2xheWVyLmdldExhdExuZygpO1xuXG4gICAgdmFyIHJhZGl1cyA9IHRoaXMuX2xheWVyLl9yYWRpdXM7XG5cbiAgICB2YXIgb3V0ZXIgPSB0aGlzLl9nZXRMYXRMbmdPbkNpcmNsZShjZW50ZXIsIHJhZGl1cyk7XG5cbiAgICB0aGlzLl9jZW50ZXJNYXJrZXIgPSB0aGlzLl9jcmVhdGVDZW50ZXJNYXJrZXIoY2VudGVyKTtcbiAgICB0aGlzLl9vdXRlck1hcmtlciA9IHRoaXMuX2NyZWF0ZU91dGVyTWFya2VyKG91dGVyKTtcbiAgICB0aGlzLl9tYXJrZXJzID0gW3RoaXMuX2NlbnRlck1hcmtlciwgdGhpcy5fb3V0ZXJNYXJrZXJdO1xuXG4gICAgdGhpcy5fY3JlYXRlSGludExpbmUodGhpcy5fY2VudGVyTWFya2VyLCB0aGlzLl9vdXRlck1hcmtlcik7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgdGhpcy5faW5pdFNuYXBwYWJsZU1hcmtlcnMoKTtcbiAgICB9XG4gIH0sXG4gIF9nZXRMYXRMbmdPbkNpcmNsZTogZnVuY3Rpb24gX2dldExhdExuZ09uQ2lyY2xlKGNlbnRlciwgcmFkaXVzKSB7XG4gICAgdmFyIHBvaW50QSA9IHRoaXMuX21hcC5wcm9qZWN0KGNlbnRlcik7XG5cbiAgICB2YXIgcG9pbnRCID0gTC5wb2ludChwb2ludEEueCArIHJhZGl1cywgcG9pbnRBLnkpO1xuICAgIHJldHVybiB0aGlzLl9tYXAudW5wcm9qZWN0KHBvaW50Qik7XG4gIH0sXG4gIF9yZXNpemVDaXJjbGU6IGZ1bmN0aW9uIF9yZXNpemVDaXJjbGUoKSB7XG4gICAgdGhpcy5fc3luY0hpbnRMaW5lKCk7XG5cbiAgICB0aGlzLl9zeW5jQ2lyY2xlUmFkaXVzKCk7XG5cbiAgICB0aGlzLl9maXJlRWRpdCgpO1xuICB9LFxuICBfbW92ZUNpcmNsZTogZnVuY3Rpb24gX21vdmVDaXJjbGUoZSkge1xuICAgIHZhciBjZW50ZXIgPSBlLmxhdGxuZztcblxuICAgIHRoaXMuX2xheWVyLnNldExhdExuZyhjZW50ZXIpO1xuXG4gICAgdmFyIHJhZGl1cyA9IHRoaXMuX2xheWVyLl9yYWRpdXM7XG5cbiAgICB2YXIgb3V0ZXIgPSB0aGlzLl9nZXRMYXRMbmdPbkNpcmNsZShjZW50ZXIsIHJhZGl1cyk7XG5cbiAgICB0aGlzLl9vdXRlck1hcmtlci5zZXRMYXRMbmcob3V0ZXIpO1xuXG4gICAgdGhpcy5fc3luY0hpbnRMaW5lKCk7XG5cbiAgICB0aGlzLl9maXJlRWRpdCgpO1xuXG4gICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06Y2VudGVycGxhY2VkJywge1xuICAgICAgbGF5ZXI6IHRoaXMuX2xheWVyLFxuICAgICAgbGF0bG5nOiBjZW50ZXJcbiAgICB9KTtcbiAgfSxcbiAgX29uTWFya2VyRHJhZ1N0YXJ0OiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnU3RhcnQoZSkge1xuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOm1hcmtlcmRyYWdzdGFydCcsIHtcbiAgICAgIG1hcmtlckV2ZW50OiBlXG4gICAgfSk7XG4gIH0sXG4gIF9vbk1hcmtlckRyYWdFbmQ6IGZ1bmN0aW9uIF9vbk1hcmtlckRyYWdFbmQoZSkge1xuICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOm1hcmtlcmRyYWdlbmQnLCB7XG4gICAgICBtYXJrZXJFdmVudDogZVxuICAgIH0pO1xuICB9LFxuICBfc3luY0NpcmNsZVJhZGl1czogZnVuY3Rpb24gX3N5bmNDaXJjbGVSYWRpdXMoKSB7XG4gICAgdmFyIEEgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICB2YXIgQiA9IHRoaXMuX291dGVyTWFya2VyLmdldExhdExuZygpO1xuXG4gICAgdmFyIGRpc3RhbmNlID0gQS5kaXN0YW5jZVRvKEIpO1xuXG4gICAgdGhpcy5fbGF5ZXIuc2V0UmFkaXVzKGRpc3RhbmNlKTtcbiAgfSxcbiAgX3N5bmNIaW50TGluZTogZnVuY3Rpb24gX3N5bmNIaW50TGluZSgpIHtcbiAgICB2YXIgQSA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgIHZhciBCID0gdGhpcy5fb3V0ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7IC8vIHNldCBjb29yZHMgZm9yIGhpbnRsaW5lIGZyb20gbWFya2VyIHRvIGxhc3QgdmVydGV4IG9mIGRyYXdpbiBwb2x5bGluZVxuXG5cbiAgICB0aGlzLl9oaW50bGluZS5zZXRMYXRMbmdzKFtBLCBCXSk7XG4gIH0sXG4gIF9jcmVhdGVIaW50TGluZTogZnVuY3Rpb24gX2NyZWF0ZUhpbnRMaW5lKG1hcmtlckEsIG1hcmtlckIpIHtcbiAgICB2YXIgQSA9IG1hcmtlckEuZ2V0TGF0TG5nKCk7XG4gICAgdmFyIEIgPSBtYXJrZXJCLmdldExhdExuZygpO1xuICAgIHRoaXMuX2hpbnRsaW5lID0gTC5wb2x5bGluZShbQSwgQl0sIHRoaXMub3B0aW9ucy5oaW50bGluZVN0eWxlKTtcbiAgICB0aGlzLl9oaW50bGluZS5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9oaW50bGluZSk7XG4gIH0sXG4gIF9jcmVhdGVDZW50ZXJNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVDZW50ZXJNYXJrZXIobGF0bG5nKSB7XG4gICAgdmFyIG1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihsYXRsbmcpO1xuXG4gICAgbWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fbW92ZUNpcmNsZSwgdGhpcyk7IC8vIG1hcmtlci5vbignY29udGV4dG1lbnUnLCB0aGlzLl9yZW1vdmVNYXJrZXIsIHRoaXMpO1xuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgX2NyZWF0ZU91dGVyTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlT3V0ZXJNYXJrZXIobGF0bG5nKSB7XG4gICAgdmFyIG1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihsYXRsbmcpO1xuXG4gICAgbWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fcmVzaXplQ2lyY2xlLCB0aGlzKTsgLy8gbWFya2VyLm9uKCdjb250ZXh0bWVudScsIHRoaXMuX3JlbW92ZU1hcmtlciwgdGhpcyk7XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9LFxuICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZykge1xuICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIobGF0bG5nLCB7XG4gICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICBpY29uOiBMLmRpdkljb24oe1xuICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItaWNvbidcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgbWFya2VyLl9vcmlnTGF0TG5nID0gbGF0bG5nO1xuICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgIG1hcmtlci5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25NYXJrZXJEcmFnU3RhcnQsIHRoaXMpO1xuICAgIG1hcmtlci5vbignZHJhZ2VuZCcsIHRoaXMuX29uTWFya2VyRHJhZ0VuZCwgdGhpcyk7XG5cbiAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9LFxuICBfZmlyZUVkaXQ6IGZ1bmN0aW9uIF9maXJlRWRpdCgpIHtcbiAgICAvLyBmaXJlIGVkaXQgZXZlbnRcbiAgICB0aGlzLl9sYXllci5maXJlKCdwbTplZGl0Jyk7XG5cbiAgICB0aGlzLl9sYXllckVkaXRlZCA9IHRydWU7XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0LkNpcmNsZS5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///32\n");

/***/ }),
/* 33 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2xheWVycy5jc3M/MzE4OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2Nzcy9sYXllcnMuY3NzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///33\n");

/***/ }),
/* 34 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2NvbnRyb2xzLmNzcz84MjNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY3NzL2NvbnRyb2xzLmNzc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///34\n");

/***/ })
/******/ ]);